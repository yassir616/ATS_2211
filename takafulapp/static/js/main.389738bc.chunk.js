(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1001:function(e,t,a){},1008:function(e,t,a){},1021:function(e,t,a){},1025:function(e,t,a){},1029:function(e,t,a){},1041:function(e,t,a){},1043:function(e,t,a){},1046:function(e,t,a){},1048:function(e,t,a){},1050:function(e,t,a){},1052:function(e,t,a){},1063:function(e,t,a){},1065:function(e,t,a){},1067:function(e,t,a){},1070:function(e,t,a){},1072:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(35),l=a.n(i),s=(a(483),a(48),a(22)),o=a.n(s),c=(a(40),a(10)),u=a.n(c),m=a(12),d=a(13),p=a(15),h=a(14),f=a(16),b=a(17),E=(a(290),a(135)),v=a.n(E),g=a(171),y=a.n(g),C=a(1103),x=a(1099),S=a(1102),k=(a(33),a(4)),I=a.n(k),O=(a(217),a(201)),j=a.n(O),T=(a(498),a(423)),A=a.n(T),P=(a(93),a(58)),D=a.n(P),F=(a(43),a(18)),w=a.n(F),M=a(5),N=a.n(M),R=a(9),q=(a(220),a(36)),V=a.n(q),z=(a(515),a(1098)),Y=a(421),B=a.n(Y),L=Object({NODE_ENV:"production",PUBLIC_URL:"/takafulapp"}).REACT_APP_API_BASE_URL||"https://ws44.mamda-mcma.ma:8443/takaful/api",G="accessToken",U="userId",H="nom",K="cin",W="numeroContrat",$="MEDECIN EXAMINATEUR",_="MEDECIN CONSEIL",J="LABORATOIRE",Q=4,X=24,Z=40,ee="AVN01",te="AVN06",ae=function(e){var t="";localStorage.getItem(G)&&(t=localStorage.getItem(G));var a={headers:{"Content-Type":"application/json",Authorization:t,"Cache-Control":"no-store, no-cache"}};return e=Object.assign({},a,e),B()(e)},ne="ALAKHDAR";function re(){return localStorage.getItem(G)?ae({url:L+"/private/role?page=0&sort=name&direction=asc&limit=100",method:"GET"}):Promise.reject("No access token set.")}function ie(e,t){return localStorage.getItem(G)?ae({url:L+"/private/role/"+t,method:"PUT",data:e}):Promise.reject("No access token set.")}function le(e,t){return localStorage.getItem(G)?ae({url:L+"/private/notification/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")}var se=v.a.Header,oe=V.a.SubMenu,ce=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={notification:[],count:0},a.handleMenuClick=a.handleMenuClick.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleMenuClick",value:function(e){"logout"===e.key&&this.props.onLogout()}},{key:"componentDidMount",value:function(){this.loadNotification()}},{key:"loadNotification",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/notifications?limit=5&page=0",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,a=0,t.data.content.forEach(function(e){!1===e.read&&a++}),this.setState({count:a,notification:t.data.content});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readNotification",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==a.read){e.next=6;break}return a.read=!0,delete a.id,e.next=5,le(t,a);case 5:this.setState({count:this.state.count-1});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return e=this.props.currentUser?r.a.createElement(V.a,{mode:"horizontal",theme:"light",selectedkeys:[this.props.location.pathname],onClick:this.handleMenuClick,style:{backgroundColor:"#fafafa"}},r.a.createElement(V.a.Item,{key:"logout",style:{float:"right",height:"64px",color:"grey"}},"Bonjour, ",this.props.currentUser.firstName.toUpperCase()," ",this.props.currentUser.lastName.toUpperCase(),r.a.createElement(w.a,{type:"logout",style:{marginLeft:"10px"}})),r.a.createElement(V.a.Divider,{type:"vertical",style:{float:"right",height:"64px"}}),r.a.createElement(oe,{style:{float:"right",height:"64px"},title:r.a.createElement("span",{className:"submenu-title-wrapper"},r.a.createElement(w.a,{type:"user",style:{marginLeft:"10px",color:"rgba(0, 0, 0, 0.65)"}}))},r.a.createElement(V.a.ItemGroup,{title:this.props.currentUser.email},r.a.createElement(V.a.Divider,null),r.a.createElement(V.a.Item,{key:"profile",style:{color:"rgba(0, 0, 0, 0.65)"}},"Profile"),r.a.createElement(V.a.Item,{key:"logout",style:{color:"rgba(0, 0, 0, 0.65)"}},"Se d\xe9connecter"))),r.a.createElement(V.a.Divider,{type:"vertical",style:{float:"right",height:"64px"}}),r.a.createElement(V.a.Item,{style:{float:"right",height:"64px"}},r.a.createElement(j.a,{style:{float:"right",height:"64px"},trigger:["click"],overlay:r.a.createElement(V.a,null," ",this.state.notification.map(function(e){return r.a.createElement(V.a.Item,{key:e.id,style:{padding:"0px  5px"}},!1===e.read?r.a.createElement(D.a,{onClick:function(){return t.readNotification(e.id,e)},style:{backgroundColor:"#F0F8FF"}},r.a.createElement("p",null,e.message)):r.a.createElement(D.a,{onClick:function(){return t.readNotification(e.id,e)},style:{backgroundColor:"#FFFFFF"}},r.a.createElement("p",null,e.message)))}))},r.a.createElement(A.a,{count:this.state.count}," ",r.a.createElement(w.a,{type:"notification"})))),r.a.createElement(V.a.Divider,{type:"vertical",style:{float:"right",height:"64px"}}),r.a.createElement(V.a.Item,{style:{float:"left",height:"64px"}},r.a.createElement(I.a,{placeholder:"   Recherche sur Atlas Takaful Syst\xe8me ",className:"search-header",prefix:r.a.createElement(w.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),style:{color:"rgba(0,0,0,.25)"}}))):r.a.createElement(V.a,{style:{height:"64px"},mode:"horizontal",selectedkeys:[this.props.location.pathname]},r.a.createElement(V.a.Item,{key:"/login",style:{float:"right",height:"64px"}},r.a.createElement(z.a,{to:"/login"},"Login")),r.a.createElement(V.a.Item,{key:"/signup",style:{float:"right",height:"64px"}},r.a.createElement(z.a,{to:"/signup"},"Signup"))),r.a.createElement(se,{style:{padding:"0px",height:"auto"}},e)}}]),t}(n.Component),ue=Object(S.a)(ce),me=(a(330),a(279)),de=a.n(me);function pe(e){var t=r.a.createElement(w.a,{type:"loading-3-quarters",style:{fontSize:30},spin:!0});return r.a.createElement(de.a,{indicator:t,style:{display:"block",textAlign:"center",marginTop:30}})}a(34);var he=a(11),fe=a.n(he),be=(a(636),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement("h1",{className:"title"},"404"),r.a.createElement("div",{className:"desc"},"La page que vous recherchez est introuvable."),r.a.createElement(z.a,{to:"/"},r.a.createElement(fe.a,{className:"go-back-btn",type:"primary",size:"large"},"Retourner")))}}]),t}(n.Component)),Ee=(a(243),a(123)),ve=a.n(Ee),ge=(a(38),a(7)),ye=a.n(ge),Ce=(a(37),a(3)),xe=a.n(Ce),Se=(a(640),a(88)),ke=a(1104),Ie=a(110),Oe=a(436),je=a.n(Oe),Te=a(437),Ae=a.n(Te),Pe=a(438),De=a.n(Pe),Fe=a(439),we=a.n(Fe),Me=D.a.Meta,Ne=Object(Se.scaleOrdinal)(ke.a).range(),Re=[{name:"Produit A",uv:4e3,female:2400,male:2400},{name:"Produit B",uv:3e3,female:1398,male:2210},{name:"Produit C",uv:2e3,female:9800,male:2290}],qe=function(e,t,a,n){return"M".concat(e,",").concat(t+n,"\n          C").concat(e+a/3,",").concat(t+n," ").concat(e+a/2,",").concat(t+n/3," ").concat(e+a/2,", ").concat(t,"\n          C").concat(e+a/2,",").concat(t+n/3," ").concat(e+2*a/3,",").concat(t+n," ").concat(e+a,", ").concat(t+n,"\n          Z")},Ve=function(e){var t=e.fill,a=e.x,n=e.y,i=e.width,l=e.height;return r.a.createElement("path",{d:qe(a,n,i,l),stroke:"none",fill:t})},ze=[{name:"Group A",value:400},{name:"Group B",value:300},{name:"Group C",value:300},{name:"Group D",value:200}],Ye=["#0088FE","#00C49F","#FFBB28","#FF8042"],Be=Math.PI/180,Le=function(e){var t=e.cx,a=e.cy,n=e.midAngle,i=e.innerRadius,l=e.outerRadius,s=e.percent,o=i+.5*(l-i),c=t+o*Math.cos(-n*Be),u=a+o*Math.sin(-n*Be);return r.a.createElement("text",{x:c,y:u,fill:"white",textAnchor:c>t?"start":"end",dominantBaseline:"central"},"".concat((100*s).toFixed(0),"%"))},Ge=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(D.a,{type:"inner",align:"center",title:"R\xe9partition du chiffre d'affaires par produit",bordered:!0},r.a.createElement(Ie.f,{width:500,height:300},r.a.createElement(Ie.e,{data:ze,cx:200,cy:150,labelLine:!1,label:Le,outerRadius:150,fill:"#8884d8",dataKey:"value"},ze.map(function(e,t){return r.a.createElement(Ie.d,{key:"cell-".concat(t),fill:Ye[t%Ye.length]})}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(D.a,{type:"inner",title:"Production Par produit",align:"center",bordered:!0},r.a.createElement(Ie.b,{margin:{top:20,right:30,left:20,bottom:5},width:500,height:300,data:Re},r.a.createElement(Ie.c,{strokeDasharray:"3 3"}),r.a.createElement(Ie.g,{dataKey:"name"}),r.a.createElement(Ie.h,null),r.a.createElement(Ie.a,{dataKey:"female",fill:"#8884d8",shape:r.a.createElement(Ve,null),label:{position:"top"}},Re.map(function(e,t){return r.a.createElement(Ie.d,{key:"cell-".concat(t),fill:Ne[t%20]})})))))),r.a.createElement("br",null),r.a.createElement(ye.a,{gutter:23},r.a.createElement(xe.a,{span:6},r.a.createElement(z.a,{to:"/users"},r.a.createElement(D.a,{hoverable:!0,style:{borderTop:"3px solid rgb(236 154 52)"},cover:r.a.createElement("img",{src:je.a,alt:"users"})},r.a.createElement(Me,{avatar:r.a.createElement(ve.a,{style:{color:"#f56a00",backgroundColor:"#fde3cf"}},"A"),title:"Administration",description:"Gestion des utilisateurs",style:{width:226,height:93}})))),r.a.createElement(xe.a,{span:6},r.a.createElement(z.a,{to:"/consultproduitdeces"},r.a.createElement(D.a,{hoverable:!0,style:{borderTop:"3px solid rgb(138 155 247)"},cover:r.a.createElement("img",{src:Ae.a,alt:"consultproduitdeces"})},r.a.createElement(Me,{avatar:r.a.createElement(ve.a,{style:{color:"#f56a00",backgroundColor:"#fde3cf"}},"G"),title:"Param\xe9trage",description:"Gestion des produits",style:{width:226,height:93}})))),r.a.createElement(xe.a,{span:6},r.a.createElement(z.a,{to:"/souscription"},r.a.createElement(D.a,{hoverable:!0,style:{borderTop:"3px solid rgb(146 206 222)"},cover:r.a.createElement("img",{src:De.a,alt:"souscription"})},r.a.createElement(Me,{avatar:r.a.createElement(ve.a,{style:{color:"#f56a00",backgroundColor:"#fde3cf"}},"S"),title:"Production",description:"Nouvelle souscription",style:{width:226,height:93}})))),r.a.createElement(xe.a,{span:6},r.a.createElement(z.a,{to:"/AllParticipant"},r.a.createElement(D.a,{hoverable:!0,style:{borderTop:"3px solid rgb(255 59 59)"},cover:r.a.createElement("img",{src:we.a,alt:"AllParticipant"})},r.a.createElement(Me,{avatar:r.a.createElement(ve.a,{style:{color:"#f56a00",backgroundColor:"#fde3cf"}},"P"),title:"Participants",description:"Gestion des clients",style:{width:226,height:93}}))))),r.a.createElement("br",null))}}]),t}(n.PureComponent),Ue=(a(29),a(2)),He=a.n(Ue),Ke=a(68),We=(a(41),a(8)),$e=a.n(We),_e=(a(47),a(26)),Je=a.n(_e),Qe=(a(78),a(57)),Xe=a.n(Qe),Ze=(a(83),a(61)),et=a.n(Ze),tt=a(21),at=a(6),nt=(a(24),a(146),a(97)),rt=a.n(nt),it=rt.a.Title,lt=function(e){return r.a.createElement("div",null," ",r.a.createElement(it,{level:e.level||3,style:{fontFamily:"Calibri, Candara, Segoe, 'Segoe UI', Optima, Arial, sans-serif",color:"rgba(0, 0, 0, 0.57)",fontSize:"22px",fontWeight:"normal"}},e.title),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}))},st=(a(72),a(52)),ot=a.n(st);a(831),a(833);var ct=$e.a.Option,ut=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){delete t.confirm;var n=[],r=[];t.roles.forEach(function(e){n.push({name:e})}),t.roles=[].concat(n),t.pointVentes.forEach(function(e){r.push({id:e})}),t.pointVentes=[].concat(r),a.signUpUser(t)}})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("Les mots de passe que vous avez saisi ne sont pas identique"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a.state={visible:!1,roles:a.props.Roles,createdUser:{}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t){}},{key:"signUpUser",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae({url:L+"/private/sign-up",method:"POST",data:t});case 3:200===(a=e.sent).status&&(this.setState({createdUser:a.data}),this.onClose(),u.a.success({message:"Utilisateur bien crier"})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.onClose(),"takaful user already exists"===e.t0.response.data.message?u.a.error({message:"Un utilisateur est d\xe9ja inscrit par cette adress mail."}):u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button nouveau-btn",onClick:this.showDrawer},r.a.createElement(w.a,{type:"user-add"})," Nouveau compte"),r.a.createElement(ot.a,{title:"Cr\xe9ation d'un nouveau utilisateur",width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pr\xe9nom"},e("firstName",{rules:[{required:!0,message:"Tapez le pr\xe9nom d'utilisateur"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le pr\xe9nom d'utilisateur"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nom"},e("lastName",{rules:[{required:!0,message:"Tapez le pr\xe9nom d'utilisateur"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le nom d'utilisateur"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"E-mail"},e("email",{rules:[{type:"email",message:"L'e-mail n'est pas valid"},{required:!0,message:"Svp entr\xe9 votre E-mail!"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez l'email d'utilisateur"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"mot de passe",hasFeedback:!0},e("password",{rules:[{required:!0,message:"entre votre mot de pass"},{validator:this.validateToNextPassword}]})(r.a.createElement(I.a.Password,{style:{width:"100%",borderRadius:"0px"},placeholder:"mot de pass"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{hasFeedback:!0,label:"Confirmation"},e("confirm",{rules:[{required:!0,message:"Merci de confirmer votre mot de passe"},{validator:this.compareToFirstPassword}]})(r.a.createElement(I.a.Password,{className:"not-rounded",style:{width:"100%"},placeholder:"mot de pass",onBlur:this.handleConfirmBlur}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Profil"},e("roles")(r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},placeholder:"cliquez pour ajouter un profil",optionLabelProp:"label"},this.state.roles.map(function(e){return r.a.createElement(ct,{value:e.name,label:e.name,key:e.name},e.name)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Points de vente"},e("pointVentes")(r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},placeholder:"cliquez pour ajouter un point de vente",optionLabelProp:"label"},this.props.Pointvente.map(function(e){return r.a.createElement(ct,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))))),r.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),mt=He.a.create()(ut);function dt(){return localStorage.getItem(G)?ae({url:L+"/private/pointventes?direction=asc&limit=8&page=0&sort=abb",method:"GET"}):Promise.reject("No access token set.")}function pt(){return localStorage.getItem(G)?ae({url:L+"/private/typepointventes?direction=asc&limit=4&page=0&sort=id",method:"GET"}):Promise.reject("No access token set.")}function ht(e){return localStorage.getItem(G)?ae({url:L+"/private/pointventebycode/"+e,method:"GET"}):Promise.reject("No access token set.")}var ft=a(440),bt=a.n(ft),Et=function(e,t,a){return{filterDropdown:function(n){var i=n.setSelectedKeys,l=n.selectedKeys,s=n.confirm,o=n.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(I.a,{ref:function(e){a.searchInput=e},placeholder:"Recherche par ".concat(t),value:l[0],onChange:function(e){return i(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(l,s,e)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleSearch(l,s,e)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(fe.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{color:"white",width:90,backgroundColor:"#ffc069"}},"Reset"))},filterIcon:function(e){return r.a.createElement("div",null,r.a.createElement(w.a,{type:"search",style:{color:e?"#1890ff":void 0}}))},onFilter:function(t,a){return a[e].toString().toLowerCase().startsWith(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})},render:function(t){return a.state.searchedColumn===e?r.a.createElement(bt.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t.toString()}):t}}},vt=r.a.createContext(),gt=[],yt=[],Ct=[],xt=[],St=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateUser=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/user/"+a,data:n,method:"PUT"}):Promise.reject("No access token set.")).then(function(e){200===e.status&&u.a.success({message:"Utilisateur bien modifier !"})}).catch(function(e){"user already exists"===e.response.data.message?u.a.error({message:"Un utilisateur est d\xe9ja inscrit par cette adress mail."}):u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.rechercheUsers=function(){(localStorage.getItem(G)?ae({url:L+"/private/user?page=0&sort=firstName&direction=asc",method:"GET"}):Promise.reject("No access token set.")).then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Your Username or Password is incorrect. Please try again!"}):u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.handleDelete=function(e){a.deleteTakafulUser(e);var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.key!==e})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.state={data:[],rolesloaded:!1,editingKey:"",rowSelection:"",searchText:"",searchedColumn:""},a.columns=[Object(at.a)({title:"Pr\xe9nom",dataIndex:"firstName",key:"firstName",editable:!0},Et("firstName","LibfirstNameelle",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Nom",dataIndex:"lastName",key:"lastName",editable:!0},Et("lastName","nom",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Email",dataIndex:"email",key:"email",editable:!0},Et("email","email",Object(b.a)(Object(b.a)(a)))),{title:"R\xf4les",align:"center",key:"roles",dataIndex:"roles",editable:!0,width:"15%",render:function(e){return r.a.createElement("span",null,e.map(function(e){var t=e.name.length>10?"geekblue":"green";return"ADMIN"===e.name&&(t="volcano"),r.a.createElement(et.a,{color:t,key:e},e.name.toUpperCase())}))}},{title:"Agences",align:"center",key:"pointVentes",dataIndex:"pointVentes",editable:!0,width:"15%",render:function(e){return r.a.createElement("span",null,e.map(function(e){var t=e.libelle.length>6?"geekblue":"green";return e.libelle.length>15&&(t="volcano"),r.a.createElement(et.a,{color:t,key:e},e.libelle.toUpperCase())}))}},{title:"Op\xe9rations",align:"center",dataIndex:"operation",width:"15%",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(vt.Consumer,null,function(e){return r.a.createElement("a",{onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"est ce que vous etes sur d'annuler l'operation ?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",null,"Annuler"))):r.a.createElement("span",null,r.a.createElement("a",{disabled:""!==n,onClick:function(){a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement(Xe.a,{title:"est ce que vous etes sur de supprimer l'utilisateur?",onConfirm:function(){return a.handleDelete(t.key)}},r.a.createElement("a",{disabled:""!==n,style:{color:"red"}},r.a.createElement(w.a,{type:"user-delete",style:{color:"rgb(208, 62, 62)",fontSize:"25px"}}))))}}],a.rechercheUsers=a.rechercheUsers.bind(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getRoles",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return t=e.sent,e.next=5,dt();case 5:a=e.sent,Ct=Object(tt.a)(a.data.content),gt=Object(tt.a)(t.data.content),this.setState({rolesloaded:!0});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteTakafulUser",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/user/delete/"+a,method:"DELETE"}):Promise.reject("No access token set.");case 3:200===e.sent.status&&u.a.success({message:"Utilisateur bien supprim\xe9 !"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}var a},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.rechercheUsers(),this.getRoles()}},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i],s=Object(at.a)({},n);s.roles=[],s.pointVentes=[],n.pointVentes.forEach(function(e){s.pointVentes.push({id:e.key,libelle:e.label})}),n.roles.forEach(function(e){s.roles.push({name:e})}),r.splice(i,1,Object(at.a)({},l,s)),a.updateUser(l.id,s),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e});var t=Object(tt.a)(this.state.data),a=t.findIndex(function(t){return e===t.key});if(a>-1){var n=t[a];yt=[],xt=[],n.roles.forEach(function(e){yt.push(e.name)}),n.pointVentes.forEach(function(e){xt.push({key:e.id,label:e.libelle})})}}},{key:"render",value:function(){var e=this,t={body:{cell:It}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.dataIndex,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des utilisateurs"}),r.a.createElement(vt.Provider,{value:this.props.form},this.state.rolesloaded&&r.a.createElement(mt,{Roles:gt,Pointvente:Ct}),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",components:t,columns:a,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}})))}}]),t}(n.Component),kt=$e.a.Option,It=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return"roles"===a.props.inputType?r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},placeholder:"cliquez pour ajouter un profile",onChange:a.handleChange,optionLabelProp:"label"},gt.map(function(e){return r.a.createElement(kt,{key:e.name,value:e.name,label:e.name},e.name)})):"pointVentes"===a.props.inputType?r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},placeholder:"cliquez pour ajouter une agence",labelInValue:!0},Ct.map(function(e){return r.a.createElement(kt,{key:e.id,value:e.id,label:e.libelle},e.libelle)})):r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return i&&"roles"!==l&&"pointVentes"!==l?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):i&&"roles"===l?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:yt})(a.getInput()))):i&&"pointVentes"===l?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:xt})(a.getInput()))):r.a.createElement("td",u,c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(vt.Consumer,null,this.renderCell)}}]),t}(n.Component),Ot=He.a.create()(St),jt=a(63);a(927);function Tt(){return localStorage.getItem(G)?ae({url:L+"/private/causerestitution/?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function At(){return localStorage.getItem(G)?ae({url:L+"/private/restitutions?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function Pt(e){return localStorage.getItem(G)?ae({url:L+"/private/restitution",method:"POST",data:e}):Promise.reject("No access token set.")}var Dt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterRestitution(t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.state={libelle:{value:""}},a.handleInputChange=a.handleInputChange.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a.isFormInvalid=a.isFormInvalid.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(jt.a)({},n,Object(at.a)({value:r},t(r))))}},{key:"handleSubmit",value:function(e){e.preventDefault(),Pt({libelle:this.state.libelle.value}).then(function(e){u.a.success({message:"TAKAFUL",description:"Thank you! successful."})}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"isFormInvalid",value:function(){return"success"!==this.state.libelle.validateStatus}},{key:"handleChange",value:function(e){}},{key:"ajouterRestitution",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pt(t);case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"la creation de la restitution est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"restitution already exists"===e.t0.response.data.message?u.a.error({message:"cette restitution existe d\xe9ja."}):u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer},r.a.createElement(w.a,{type:"plus"})," Nouvelle restitution"),r.a.createElement(ot.a,{title:"Creation d'un nouvelle restitution",onClose:this.onClose,width:"300",visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Libelle :"},e("libelle",{rules:[{required:!0,message:"Tapez le libelle"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le libelle"}))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),Ft=He.a.create()(Dt),wt=r.a.createContext(),Mt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateRestitutions=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/restitution/"+a,method:"PUT",data:n}):Promise.reject("No access token set.")).then(function(e){}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrecte. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.rechercheRestitutions=function(){At().then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrecte. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.state={data:[],editingKey:"",searchText:"",searchedColumn:""},a.columns=[Object(at.a)({title:"Libelle",dataIndex:"libelle",key:"libelle",width:"40%",editable:!0},Et("libelle","libelle",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(wt.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Fermer"))):r.a.createElement("span",null,r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){a.edit(t.key)}},"Modifier"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.rechercheRestitutions()}},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];r.splice(i,1,Object(at.a)({},l,n)),a.updateRestitutions(l.id,n),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:Nt}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:"text"===t.dataIndex,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des restitutions"}),r.a.createElement(wt.Provider,{value:this.props.form},r.a.createElement(Ft,null),r.a.createElement(Je.a,{rowClassName:"editable-row",components:t,columns:a,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}})))}}]),t}(n.Component),Nt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return r.a.createElement("td",u,i?r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput())):c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(wt.Consumer,null,this.renderCell)}}]),t}(n.Component),Rt=He.a.create()(Mt),qt=(a(91),a(60)),Vt=a.n(qt),zt=(a(106),a(69)),Yt=a.n(zt),Bt=(a(59),a(31)),Lt=a.n(Bt),Gt=(a(81),a(32)),Ut=a.n(Gt),Ht=a(19),Kt=a.n(Ht);function Wt(){return localStorage.getItem(G)?ae({url:L+"/private/personne-morale?page=0&sort=creationDate&direction=desc",method:"GET"}):Promise.reject("No access token set.")}function $t(){return localStorage.getItem(G)?ae({url:L+"/private/secteur?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function _t(){return localStorage.getItem(G)?ae({url:L+"/private/type-personne-morale",method:"GET"}):Promise.reject("No access token set.")}function Jt(e){return localStorage.getItem(G)?ae({url:L+"/private/personne-physique",data:e,method:"POST"}):Promise.reject("No access token set.")}function Qt(){return localStorage.getItem(G)?ae({url:L+"/private/sexe",method:"GET"}):Promise.reject("No access token set.")}function Xt(){return localStorage.getItem(G)?ae({url:L+"/private/situation",method:"GET"}):Promise.reject("No access token set.")}function Zt(){return localStorage.getItem(G)?ae({url:L+"/private/profession?page=0&sort=creationDate&direction=desc",method:"GET"}):Promise.reject("No access token set.")}function ea(){return localStorage.getItem(G)?ae({url:L+"/private/personne-physique?page=0&sort=creationDate&direction=desc",method:"GET"}):Promise.reject("No access token set.")}function ta(e){return localStorage.getItem(G)?ae({url:L+"/private/personne-morale",data:e,method:"POST"}):Promise.reject("No access token set.")}function aa(){return localStorage.getItem(G)?ae({url:L+"/private/vois",method:"GET"}):Promise.reject("No access token set.")}function na(e){return localStorage.getItem(G)?ae({url:L+"/private/lettreOrientation/pdf",method:"POST",data:e,responseType:"blob"}):Promise.reject("No access token set.")}function ra(e,t,a){return localStorage.getItem(G)?ae({url:L+"/private/normeSelection/select?age="+e+"&capitale="+t+"&deceProduit="+a,method:"GET"}):Promise.reject("No access token set.")}function ia(e){return localStorage.getItem(G)?ae({url:L+"/private/personnePhysique/"+e,method:"GET"}):Promise.reject("No access token set.")}function la(e){return localStorage.getItem(G)?ae({url:L+"/private/conditionParticuliere/pdf",method:"POST",data:e,responseType:"blob"}):Promise.reject("No access token set.")}function sa(e){return localStorage.getItem(G)?ae({url:L+"/private/personnePhysique/rib/"+e,method:"GET"}):Promise.reject("No access token set.")}function oa(e,t){return localStorage.getItem(G)?ae({url:L+"/private/decescontratOrientation/"+e+"/"+t,method:"PUT"}):Promise.reject("No access token set.")}function ca(){return localStorage.getItem(G)?ae({url:L+"/private/villes",method:"GET"}):Promise.reject("No access token set.")}var ua=$e.a.Option,ma=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(t.dateNaissance=t.dateNaissance.format("DD-MM-YYYY"),t.adressVille=t.adressVille.label,a.createPersonnePhysique(t))})},a.disabledDate=function(e){var t=Kt()(Kt()().format("YYYY-MM-DD"),"YYYY-MM-DD").add(-18,"years");return e&&t<e},a.onChangeVille=function(e){console.log(e),a.setState({ville:e.label,adresscomplet:a.state.vois+" "+a.state.complement+" "+a.state.numero+" "+e.label+" "+a.state.pays})},a.onChangeCin=function(e){a.PersonneCinIfExist(e.target.value)},a.onChangePays=function(e){console.log(e.target.value),a.setState({pays:e.target.value,adresscomplet:a.state.vois+" "+a.state.complement+" "+a.state.numero+" "+a.state.ville+" "+e.target.value})},a.onChangeVois=function(e){console.log(e),a.setState({vois:e,adresscomplet:e+" "+a.state.complement+" "+a.state.numero+" "+a.state.ville+" "+a.state.pays})},a.onChangeNumero=function(e){a.setState({numero:e.target.value,adresscomplet:a.state.vois+" "+a.state.complement+" "+e.target.value+" "+a.state.ville+" "+a.state.pays})},a.onChangeComplement=function(e){a.setState({complement:e.target.value,adresscomplet:a.state.vois+" "+e.target.value+" "+a.state.numero+" "+a.state.ville+" "+a.state.pays})},a.onChangeRib=function(e){a.PersonneRibIfExist(e.target.value)},a.handleChangeNomPrenom=function(e){e.target.value=e.target.value.toUpperCase()},a.handleDateNaissance=function(e){Kt()().diff(Kt()(e),"years")},a.state={villes:[],visible:!1,nationaliteList:["MAROCAINE ","FRAN\xc7AISE","BELGE","..."],Tiers:[0,1,2,3,4,5],ville:"",vois:"",numero:"",pays:"",complement:"",adresscomplet:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getAllVilles",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca();case 2:t=e.sent,a=[],t.data.forEach(function(e){var t=e.name;a.push(t)}),this.setState({villes:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createPersonnePhysique",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt(t);case 3:200===(a=e.sent).status&&(this.onClose(),u.a.success({message:"CONTRIBUANT INSERE"}),this.props.personCreation(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"400 souscripteur already exists"===e.t0.response.data.message?(this.onClose(),u.a.error({message:"une personne et deja inscrit avec le meme cin ."})):(this.onClose(),u.a.error({message:"Takaful",description:"Sorry! Something went wrong. Please try again!"}));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllVilles()}},{key:"componentDidUpdate",value:function(e,t){t.adresscomplet!==this.state.adresscomplet&&this.props.form.setFieldsValue({adressComplete:this.state.adresscomplet})}},{key:"PersonneCinIfExist",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ia(t);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),500===e.t0.response.data.status&&u.a.error({message:"une personne est d\xe9ja inscrit avec le m\xeame cin ."});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},{key:"PersonneRibIfExist",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sa(t);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(e.t0.response.data.status="500")&&u.a.error({message:"une personne est d\xe9ja inscrit avec le m\xeame rib ."});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=e("prefix",{initialValue:"CIN"})(r.a.createElement($e.a,{style:{width:100}},r.a.createElement(ua,{value:"CIN"},"CIN"),r.a.createElement(ua,{value:"Passport"},"Passport"),r.a.createElement(ua,{value:"Numresidence"},"N\xb0 carte de residence")));return r.a.createElement("div",null,"Cr\xe9ation d'un nouveau Participant"===this.props.titre?r.a.createElement(fe.a,{type:"primary",onClick:this.showDrawer,style:{borderRadius:"0px",marginBottom:"10px"},className:"nouveau-btn"},r.a.createElement(w.a,{type:"user-add"})," Nouveau participant"):r.a.createElement(fe.a,{type:"primary",style:{backgroundColor:"#77cc6d",borderColor:"#77cc6d"},shape:"circle",icon:"plus",onClick:this.showDrawer}),r.a.createElement(ot.a,{title:this.props.titre,width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Prospect"},e("isProspect",{valuePropName:"checked",initialValue:!0})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!0},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pr\xe9nom"},e("prenom",{rules:[{required:!0,message:"Tapez le pr\xe9nom de souscripteur"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le pr\xe9nom de souscripteur",onChange:this.handleChangeNomPrenom})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nom"},e("nom",{rules:[{required:!0,message:"Tapez le pr\xe9nom de souscripteur"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le nom de souscripteur",onChange:this.handleChangeNomPrenom}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Identifiant"},e("cin")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},addonBefore:t,onChange:this.onChangeCin})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Date de naissance",hasFeedback:!0},e("dateNaissance",{rules:[{required:!0,message:"entre la date de naissance"}]})(r.a.createElement(Lt.a,{format:"DD/MM/YYYY",disabledDate:this.disabledDate}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Matricule"},e("matricule",{rules:[{required:!1}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le matricule de souscripteur"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Profession"},e("profession",{rules:[{required:!0,message:"S\xe9lectionnez une profession"}]})(r.a.createElement($e.a,{placeholder:"Profession"},this.props.professions.map(function(e){return r.a.createElement(ua,{key:e.id,value:e.libelle},e.libelle)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Situation familiale "},e("situationFamiliale",{rules:[{required:!0,message:"S\xe9lectionnez une Situation familiale"}]})(r.a.createElement($e.a,{placeholder:"Situation familiale"},this.props.setuation.map(function(e){return r.a.createElement(ua,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Sexe"},e("sexe",{rules:[{required:!0,message:"S\xe9lectionnez le sexe"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez le sexe"},this.props.sexe.map(function(e){return r.a.createElement(ua,{key:e.id,value:e.value},e.name)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nationalit\xe9"},e("nationalite",{rules:[{required:!0,message:"S\xe9lectionnez une Nationalit\xe9"}]})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.nationaliteList,allowClear:!0,placeholder:"Nationalit\xe9",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nombre d'enfants"},e("nombreEnfants",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le nombre d'enfants"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"RIB"},e("rib",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"RIB",onChange:this.onChangeRib})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"T\xe9l\xe9phone"},e("numeroDeTelephone",{rules:[{required:!0,pattern:new RegExp("^[0][5-7]{1}[0-9]{8}$"),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Numero de telephone"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0 Tiers"},e("numTiers",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement($e.a,{placeholder:"\xb0 Tiers"},this.state.Tiers.map(function(e){return r.a.createElement(ua,{key:e,value:e},e)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adresse :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},e("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,{placeholder:"pays",onBlur:this.onChangePays})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},e("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.villes,onChange:this.onChangeVille,allowClear:!1,labelInValue:!0,placeholder:"ajouter une ville",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Voie"},e("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Voie",onChange:this.onChangeVois},this.props.vois.map(function(e){return r.a.createElement(ua,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},e("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Num\xe9ro"},e("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{onBlur:this.onChangeNumero,className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Compl\xe9ment d'adresse"},e("adressComplement")(r.a.createElement(I.a,{onBlur:this.onChangeComplement,className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un compl\xe9ment"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adresse Complete"},e("adressComplete",{value:this.state.adresscomplet})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},value:this.state.adresscomplet}))))),r.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Annuler"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Enregistrer")))))}}]),t}(n.Component),da=He.a.create()(ma),pa=$e.a.Option,ha=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handlePersonphyCreationAssure=function(e){},a.handleDelete=function(e){a.deleteParticipant(e);var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.key!==e})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updatePer=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/personne-physique/"+a,data:n,method:"PUT"}):Promise.reject("No access token set.")).then(function(e){200===e.status&&(u.a.success({message:"participant bien modifier !"}),window.location.reload())}).catch(function(e){"souscripteur already exists"===e.response.data.message?u.a.error({message:"Un participant deja exist."}):u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.handleChangeNomPrenom=function(e){e.target.value=e.target.value.toUpperCase()},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(t.dateNaissance=t.dateNaissance.format("DD-MM-YYYY"),a.updatePer(a.state.keyRecord,t))}),a.setState({visibled:!1})},a.onClose=function(){a.setState({visibled:!1})},a.state={data:[],visibled:"",rowSelection:"",keyRecord:"",searchText:"",searchedColumn:"",sexe:[],setuations:[],professions:[],users:"",rolesandprivileges:!1,parametrage:!1,vois:[],dataloaded:!1,nationaliteList:["MAROCAINE ","FRAN\xc7AISE","BELGE","..."],Tiers:[0,1,2,3,4,5]},a.columns=[Object(at.a)({title:"Nom",dataIndex:"nom",key:"nom",width:"25%"},Et("nom","nom",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Pr\xe9nom",dataIndex:"prenom",key:"prenom",width:"25%"},Et("prenom","prenom",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Cin",dataIndex:"cin",key:"cin",width:"20%"},Et("cin","cin",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",align:"center",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",onClick:function(){a.edit(t)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement(Xe.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.key)}},r.a.createElement("a",{href:"#top",style:{color:"red"}},r.a.createElement(w.a,{type:"user-delete",style:{color:"rgb(208, 62, 62)",fontSize:"25px"}}))))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt();case 2:return t=e.sent,e.next=5,Xt();case 5:return a=e.sent,e.next=8,Zt();case 8:return n=e.sent,e.next=11,aa();case 11:r=e.sent,this.setState({sexe:Object(tt.a)(t.data),setuations:Object(tt.a)(a.data),dataloaded:!0,professions:Object(tt.a)(n.data.content),vois:Object(tt.a)(r.data)});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getproprties();var e=[];(localStorage.getItem(G)?ae({url:L+"/private/personne-physique?direction=asc&limit=2147483647&page=0&sort=nom",method:"GET"}):Promise.reject("No access token set.")).then(function(t){t.data.content.forEach(function(t){var a=Object(at.a)({},t,{key:t.id});e.push(a)})}),this.setState({data:e})}},{key:"deleteParticipant",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/personne-physique/delete/"+a,method:"DELETE"}):Promise.reject("No access token set.");case 3:200===e.sent.status&&u.a.success({message:"participant bien supprim\xe9 !"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}var a},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"edit",value:function(e){this.setState({visibled:!0,keyRecord:e.id}),this.props.form.setFieldsValue({isProspect:e.prospect,prenom:e.prenom,nom:e.nom,cin:e.cin,dateNaissance:Kt()(e.dateNaissance,"DD/MM/YYYY"),matricule:e.matricule,profession:e.profession,sexe:e.sexe,situationFamiliale:e.situationFamiliale,nationalite:e.nationalite,nombreEnfants:e.nombreEnfants,rib:e.rib,numeroDeTelephone:e.numeroDeTelephone,numTiers:e.numTiers,adressPays:e.adressPays,adressCodePostal:e.adressCodePostal,adressComplement:e.adressComplement,adressComplete:e.adressComplete,adressNumero:e.adressNumero,adressVille:e.adressVille,adressVois:e.adressVois})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=t("prefix",{initialValue:"CIN"})(r.a.createElement($e.a,{style:{width:100}},r.a.createElement(pa,{value:"CIN"},"CIN"),r.a.createElement(pa,{value:"Passport"},"Passport"),r.a.createElement(pa,{value:"Numresidence"},"N\xb0 carte de residence")));return r.a.createElement("div",null,r.a.createElement(sh.Consumer,null,function(t){return t.roles.forEach(function(t){return e.state.users=t.name})}),r.a.createElement(ot.a,{title:"Modification du soci\xe9taire",width:720,onClose:this.onClose,visible:this.state.visibled,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Prospect"},t("isProspect",{valuePropName:"checked",initialValue:!0})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!0},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pr\xe9nom"},t("prenom",{rules:[{required:!0,message:"Tapez le pr\xe9nom de souscripteur"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le pr\xe9nom de souscripteur",onChange:this.handleChangeNomPrenom})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nom"},t("nom",{rules:[{required:!0,message:"Tapez le pr\xe9nom de souscripteur"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le nom de souscripteur",onChange:this.handleChangeNomPrenom}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},"ADMIN"===this.state.users?r.a.createElement(He.a.Item,{label:"Identifiant"},t("cin")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},addonBefore:a,onChange:this.onChangeCin}))):r.a.createElement(He.a.Item,{label:"Identifiant"},t("cin")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},addonBefore:a,onChange:this.onChangeCin,disabled:!0})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Date de naissance",hasFeedback:!0},t("dateNaissance",{rules:[{required:!0,message:"entre la date de naissance"}]})(r.a.createElement(Lt.a,{format:"DD/MM/YYYY",disabledDate:this.disabledDate}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Matricule"},t("matricule",{rules:[{required:!1}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le matricule de souscripteur"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Profession"},t("profession",{rules:[{required:!0,message:"S\xe9lectionnez une profession"}]})(r.a.createElement($e.a,{placeholder:"Profession"},this.state.professions.map(function(e){return r.a.createElement(pa,{key:e.id,value:e.libelle},e.libelle)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Situation familiale "},t("situationFamiliale",{rules:[{required:!0,message:"S\xe9lectionnez une Situation familiale"}]})(r.a.createElement($e.a,{placeholder:"Situation familiale"},this.state.setuations.map(function(e){return r.a.createElement(pa,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Sexe"},t("sexe",{rules:[{required:!0,message:"S\xe9lectionnez le sexe"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez le sexe"},this.state.sexe.map(function(e){return r.a.createElement(pa,{key:e.id,value:e.value},e.name)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nationalit\xe9"},t("nationalite",{rules:[{required:!0,message:"S\xe9lectionnez une Nationalit\xe9"}]})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.nationaliteList,allowClear:!0,placeholder:"Nationalit\xe9",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nombre d'enfants"},t("nombreEnfants",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le nombre d'enfants"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},"ADMIN"===this.state.users?r.a.createElement(He.a.Item,{label:"RIB"},t("rib",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"RIB",onChange:this.onChangeRib}))):r.a.createElement(He.a.Item,{label:"RIB"},t("rib",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"RIB",onChange:this.onChangeRib,disabled:!0})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"T\xe9l\xe9phone"},t("numeroDeTelephone",{rules:[{required:!0,pattern:new RegExp("^[0][5-7]{1}[0-9]{8}$"),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Numero de telephone"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0 Tiers"},t("numTiers",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement($e.a,{placeholder:"\xb0 Tiers"},this.state.Tiers.map(function(e){return r.a.createElement(pa,{key:e,value:e},e)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adresse :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},t("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,{placeholder:"pays"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},t("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement(I.a,{placeholder:"ville"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Voie"},t("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Voie"},this.state.vois.map(function(e){return r.a.createElement(pa,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},t("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Num\xe9ro"},t("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Compl\xe9ment d'adresse"},t("adressComplement")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un compl\xe9ment"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adresse Complete"},t("adressComplete")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"}}))))),r.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Annuler"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Enregistrer")))),this.state.dataloaded&&r.a.createElement(da,{titre:"Cr\xe9ation d'un nouveau Participant",professions:this.state.professions,sexe:this.state.sexe,setuation:this.state.setuations,vois:this.state.vois,personCreation:this.handlePersonphyCreationAssure}),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}}))}}]),t}(n.Component),fa=He.a.create()(ha),ba=$e.a.Option,Ea=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(t.typePersonneMorale={id:t.typePersonneMorale},t.secteurActivite={id:t.secteurActivite},t.adressVille=t.adressVille.label,a.createPersonneMorale(t))})},a.onChangeVille=function(e){a.setState({ville:e.label,adresscomplet:a.state.vois+" "+a.state.complement+" "+a.state.numero+" "+e.label+" "+a.state.pays})},a.onChangePays=function(e){a.setState({pays:e.target.value,adresscomplet:a.state.vois+" "+a.state.complement+" "+a.state.numero+" "+a.state.ville+" "+e.target.value})},a.onChangeVois=function(e){a.setState({vois:e,adresscomplet:e+" "+a.state.complement+" "+a.state.numero+" "+a.state.ville+" "+a.state.pays})},a.onChangeNumero=function(e){a.setState({numero:e.target.value,adresscomplet:a.state.vois+" "+a.state.complement+" "+e.target.value+" "+a.state.ville+" "+a.state.pays})},a.onChangeComplement=function(e){a.setState({complement:e.target.value,adresscomplet:a.state.vois+" "+e.target.value+" "+a.state.numero+" "+a.state.ville+" "+a.state.pays})},a.state={visible:!1,villes:[],ville:"",vois:"",numero:"",pays:"",complement:"",adresscomplet:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getAllVilles",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca();case 2:t=e.sent,a=[],t.data.forEach(function(e){var t=e.name;a.push(t)}),this.setState({villes:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllVilles()}},{key:"createPersonneMorale",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ta(t);case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"personne bien ajoute"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"400 souscripteur already exists"===e.t0.response.data.message?(this.onClose(),u.a.error({message:"une personne et deja inscrit avec la meme patente ."})):(this.onClose(),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"}));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){t.adresscomplet!==this.state.adresscomplet&&this.props.form.setFieldsValue({adressComplete:this.state.adresscomplet})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,"Cr\xe9ation d'un nouveau Participant"===this.props.titre?r.a.createElement(fe.a,{type:"primary",onClick:this.showDrawer,style:{borderRadius:"0px",marginBottom:"10px"},className:"nouveau-btn"},r.a.createElement(w.a,{type:"user-add"})," Nouveau participant"):r.a.createElement(fe.a,{type:"primary",style:{backgroundColor:"#77cc6d",borderColor:"#77cc6d"},shape:"circle",icon:"plus",onClick:this.showDrawer}),r.a.createElement(ot.a,{title:this.props.titre,width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Raison sociale"},e("raisonSociale",{rules:[{required:!0,message:"Tapez la Raison Sociale"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez la Raison Sociale"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},e("abb",{rules:[{required:!0,message:"Tapez l abb"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez l abb"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Si\xe8ge social"},e("Siegesociale",{rules:[{required:!0,message:"Tapez le si\xe8ge social"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le si\xe8ge social"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0de Patente"},e("patente",{rules:[{required:!0,message:"Svp entr\xe9 patente"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez patente"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0ice"},e("ice",{rules:[{required:!0,message:"Tapez le N\xb0ice"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le N\xb0ice"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code"},e("code",{rules:[{required:!0,message:"Tapez le code"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le code"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type personne morale"},e("typePersonneMorale",{rules:[{required:!0,message:"S\xe9lectionnez un type personne morale"}]})(r.a.createElement($e.a,{placeholder:"Type personne morale"},this.props.typePersonneMoral.map(function(e){return r.a.createElement(ba,{key:e.id,value:e.id},e.libelle)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Secteur d'activit\xe9"},e("secteurActivite",{rules:[{required:!0,message:"S\xe9lectionnez le secteur d'activit\xe9"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez le secteur d'activit\xe9"},this.props.secteurActivite.map(function(e){return r.a.createElement(ba,{key:e.id,value:e.id},e.libelle)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"T\xe9l\xe9phone"},e("numeroDeTelephone",{rules:[{required:!0,pattern:new RegExp("^[0][5-7]{1}[0-9]{8}$"),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Numero de telephone"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adresse :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},e("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,{onBlur:this.onChangePays})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},e("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.villes,onSelect:this.onChangeVille,allowClear:!1,labelInValue:!0,placeholder:"ajouter une ville",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Voie"},e("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Vois",onChange:this.onChangeVois},this.props.vois.map(function(e){return r.a.createElement(ba,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},e("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Num\xe9ro"},e("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{onBlur:this.onChangeNumero,className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Complement d'adresse"},e("adressComplement")(r.a.createElement(I.a,{onBlur:this.onChangeComplement,className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un complement"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adresse Complete"},e("adressComplete")(r.a.createElement(I.a,{value:this.state.adresscomplet,className:"not-rounded",style:{width:"100%"}}))))),r.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Annuler"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Enregistrer")))))}}]),t}(n.Component),va=He.a.create()(Ea),ga=r.a.createContext(),ya=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handlePersonMoraleCreationSousctipteur=function(e){},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleDelete=function(e){a.deleteParticipant(e);var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.key!==e})})},a.isEditing=function(e){return e.key===a.state.editingKey},a.handlePersonphyCreationAssure=function(e){},a.cancel=function(){a.setState({editingKey:""})},a.updatePer=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/personne-morale/"+a,data:n,method:"PUT"}):Promise.reject("No access token set.")).then(function(e){200===e.status&&u.a.success({message:"participant bien modifier !"})}).catch(function(e){u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.state={data:[],editingKey:"",rowSelection:"",searchText:"",searchedColumn:"",sexe:[],setuations:[],professions:[],SecteurActivite:[],typePersonneMoral:[],dataloaded:!1,vois:[]},a.columns=[Object(at.a)({title:"Abr\xe9viation",dataIndex:"abb",key:"abb",width:"25%",editable:!0},Et("abb","abb",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Code",dataIndex:"code",key:"code",width:"25%",editable:!0},Et("code","code",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Raison Sociale",dataIndex:"raisonSociale",key:"raisonSociale",width:"20%",editable:!0},Et("raisonSociale","raisonSociale",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",align:"center",dataIndex:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(ga.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Fermer"))):r.a.createElement("span",null,r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement(Xe.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.key)}},r.a.createElement("a",{href:"#top",style:{color:"red"}},r.a.createElement(w.a,{type:"user-delete",style:{color:"rgb(208, 62, 62)",fontSize:"25px"}}))))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n,r,i,l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt();case 2:return t=e.sent,e.next=5,Xt();case 5:return a=e.sent,e.next=8,Zt();case 8:return n=e.sent,e.next=11,aa();case 11:return r=e.sent,e.next=14,_t();case 14:return i=e.sent,e.next=17,$t();case 17:l=e.sent,this.setState({sexe:Object(tt.a)(t.data),setuations:Object(tt.a)(a.data),dataloaded:!0,professions:Object(tt.a)(n.data.content),typePersonneMoral:Object(tt.a)(i.data),secteurActivite:Object(tt.a)(l.data.content),vois:Object(tt.a)(r.data)});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getproprties();var e=[];Wt().then(function(t){t.data.content.forEach(function(t){var a=Object(at.a)({},t,{key:t.id});e.push(a)})}),this.setState({data:e})}},{key:"deleteParticipant",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/personne-morale/delete/"+a,method:"DELETE"}):Promise.reject("No access token set.");case 3:200===e.sent.status&&u.a.success({message:"participant bien supprim\xe9 !"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}var a},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];r.splice(i,1,Object(at.a)({},l,n)),a.updatePer(l.id,Object(at.a)({},l,n)),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:Ca}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:"age"===t.dataIndex?"number":"text",dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement("div",null,r.a.createElement(ga.Provider,{value:this.props.form},this.state.dataloaded&&r.a.createElement(va,{titre:"Cr\xe9ation d'un nouveau Participant",typePersonneMoral:this.state.typePersonneMoral,secteurActivite:this.state.secteurActivite,vois:this.state.vois,personCreation:this.handlePersonMoraleCreationSousctipteur}),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",components:t,columns:a,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}})))}}]),t}(n.Component),Ca=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return"number"===a.props.inputType?r.a.createElement(Vt.a,null):r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return r.a.createElement("td",u,i?r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput())):c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(ga.Consumer,null,this.renderCell)}}]),t}(n.Component),xa=He.a.create()(ya),Sa=[{key:"personnephysique",tab:"Personne physique"},{key:"personnemoral",tab:"Personne Morale"}],ka={personnephysique:r.a.createElement(fa,null),personnemoral:r.a.createElement(xa,null)},Ia=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={key:"personnephysique",noTitleKey:"personnephysique"},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(D.a,{style:{width:"100%"},tabList:Sa,activeTabKey:this.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},ka[this.state.noTitleKey]))}}]),t}(r.a.Component);a(964);function Oa(){return localStorage.getItem(G)?ae({url:L+"/private/auxiliaire?page=0&sort=nom&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function ja(e){return localStorage.getItem(G)?ae({url:L+"/private/auxiliaire/add",method:"POST",data:e}):Promise.reject("No access token set.")}function Ta(){return localStorage.getItem(G)?ae({url:L+"/private/Typeauxiliaire?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function Aa(e){return localStorage.getItem(G)?ae({url:L+"/private/auxiliairebytype?type="+e,method:"GET"}):Promise.reject("No access token set.")}var Pa=$e.a.Option,Da=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){console.log("values:",t),e||a.ajouterAux(t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.state={visible:!1,auxiliaire:[],vois:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getTypeAux(),this.getVois()}},{key:"getTypeAux",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta();case 2:t=e.sent,this.setState({auxiliaire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getVois",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa();case 2:t=e.sent,this.setState({vois:Object(tt.a)(t.data)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ajouterAux",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ja(t);case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"la cr\xe9ation d'auxiliaire est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"auxiliaire already exists"===e.t0.response.data.message?u.a.error({message:"cet auxiliaire existe d\xe9j\xe0."}):u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer},r.a.createElement(w.a,{type:"plus"})," Nouvel auxiliaire"),r.a.createElement(ot.a,{title:"Cr\xe9ation Nouvel auxiliaire ",width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type auxiliaire"},e("typeAuxiliaireId")(r.a.createElement($e.a,{placeholder:"cliquez pour ajouter un profile",optionLabelProp:"label"},this.state.auxiliaire.map(function(e){return r.a.createElement(Pa,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Raison sociale"},e("raisonSociale")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le raison sociale d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nom"},e("nom")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le nom d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pr\xe9nom"},e("prenom")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le prenom d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Adresse \xe9l\xe9ctronique"},e("email",{rules:[{type:"email",message:"L'e-mail n'est pas valid"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez l'email d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"RIB"},e("rib",{rules:[{message:"Le rib n'est pas valid"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le rib d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"T\xe9l\xe9phone"},e("tel",{rules:[{pattern:new RegExp("^[0][5-7]{1}[0-9]{8}"),message:"Wrong format!"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le t\xe9l\xe9pone d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Faxe"},e("faxe",{rules:[{pattern:new RegExp("^[0][5]{1}[0-9]{8}"),message:"Wrong format!"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le faxe d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Patente"},e("patente")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez la patente d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Registre commerce"},e("registreCommerce")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le registre commerce d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0Identifiant fiscal"},e("identifiantFiscal")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez l'identifiant fiscal"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Cin"},e("cin")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le cin d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Sp\xe9cialit\xe9"},e("specialite")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez la sp\xe9cialit\xe9 d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type "},e("typePersonne")(r.a.createElement($e.a,{placeholder:"Choisissez le type de personne"},r.a.createElement(Pa,{value:"Physique"},"Physique"),r.a.createElement(Pa,{value:"Morale"},"Morale")))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adresse :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},e("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,{placeholder:"pays"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},e("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement(I.a,{placeholder:"ville"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Voie"},e("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Voie"},this.state.vois.map(function(e){return r.a.createElement(Pa,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},e("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Num\xe9ro"},e("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Compl\xe9ment d'adresse"},e("adressComplement")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un compl\xe9ment"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adresse Complete"},e("adressComplete")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"}}))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),Fa=He.a.create()(Da),wa=$e.a.Option,Ma=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onClose=function(){a.setState({visible:!1})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.updateAux(a.state.keyRecord,t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.handleSelectChange=function(e){a.setState({visible:!0,keyRecord:e.id}),a.props.form.setFieldsValue({adresse:e.adresse,email:e.email,faxe:e.faxe,ir:e.ir,nom:e.nom,patente:e.patente,prenom:e.prenom,raisonSociale:e.raisonSociale,registreCommerce:e.registreCommerce,specialite:e.specialite,tel:e.tel,typePersonne:e.typePersonne,typeAuxiliaireId:e.typeAuxiliaire.id,cin:e.cin,identifiantFiscal:e.identifiantFiscal,rib:e.rib})},a.state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",auxiliaire:[]},a.columns=[Object(at.a)({title:"Nom",dataIndex:"nom",key:"nom",width:"20%"},Et("nom","Nom",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Pr\xe9nom",dataIndex:"prenom",key:"prenom",width:"20%"},Et("prenom","Pr\xe9nom",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Raison Sociale",dataIndex:"raisonSociale",key:"raison_sociale",width:"20%"},Et("raisonSociale","Raison Sociale",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Type auxiliaire ",dataIndex:"typeAuxiliaire.libelle",key:"typeAuxiliaire",width:"20%"},Et("typeAuxiliaire","typeAuxiliaire",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleSelectChange(t)},style:{borderRadius:"0px"}},"Modifier"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getTypeAux",value:function(){var e=Object(R.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,Ta().data.content;case 3:e.t1=e.sent,e.t2={auxiliaire:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAuxiliaire(),this.getTypeAux()}},{key:"getAuxiliaire",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oa();case 2:t=e.sent,this.setState({data:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTypeAux",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta();case 2:t=e.sent,this.setState({auxiliaire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateAux",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=t,r=a,localStorage.getItem(G)?ae({url:L+"/private/auxiliaire/"+n,method:"PUT",data:r}):Promise.reject("No access token set.");case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"la modification est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}var n,r},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des auxiliaires"}),r.a.createElement(Fa,null),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}),r.a.createElement(ot.a,{title:"Modification d'auxiliaire",width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type auxiliaire"},e("typeAuxiliaireId")(r.a.createElement($e.a,{placeholder:"cliquez pour ajouter un profile",optionLabelProp:"label"},this.state.auxiliaire.map(function(e){return r.a.createElement(wa,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Raison sociale"},e("raisonSociale")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le raison sociale d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Adresse Postal"},e("adresse")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez l'adresse d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Adresse \xe9l\xe9ctronique"},e("email",{rules:[{type:"email",message:"L'e-mail n'est pas valid"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez l'email d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"T\xe9l\xe9phone"},e("tel",{rules:[{pattern:new RegExp("^[0][5-7]{1}[0-9]{8}"),message:"Wrong format!"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le t\xe9l\xe9pone d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Faxe"},e("faxe",{rules:[{pattern:new RegExp("^[0][5]{1}[0-9]{8}"),message:"Wrong format!"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le faxe d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Patente"},e("patente")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez la patente d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Registre commerce"},e("registreCommerce")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le registre commerce d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0Identifiant fiscal"},e("identifiantFiscal")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez l'identifiant fiscal"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Cin"},e("cin")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le cin d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nom"},e("nom")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le nom d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pr\xe9nom"},e("prenom")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le prenom d'auxiliaire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Sp\xe9cialit\xe9"},e("specialite")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez la sp\xe9cialit\xe9 d'auxiliaire"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type "},e("typePersonne")(r.a.createElement($e.a,{placeholder:"Choisissez le type de personne"},r.a.createElement(wa,{value:"Physique"},"Physique"),r.a.createElement(wa,{value:"Morale"},"Morale")))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"RIB"},e("rib")(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le rib d'auxiliaire"}))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Modifier")))))}}]),t}(n.Component),Na=He.a.create()(Ma);a(966);function Ra(){return localStorage.getItem(G)?ae({url:L+"/private/honoraires/?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}var qa=$e.a.Option,Va=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterHon(t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.state={visible:!1,auxiliaire:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getTypeAux",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta();case 2:t=e.sent,this.setState({auxiliaire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getTypeAux()}},{key:"ajouterHon",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/honoraire/add",method:"POST",data:a}):Promise.reject("No access token set.");case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"la creation d'honoraire est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"honoraire already exists"===e.t0.response.data.message?u.a.error({message:"ce honoraire existe d\xe9ja."}):u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}var a},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer},r.a.createElement(w.a,{type:"plus"})," Nouvel honoraire"),r.a.createElement(ot.a,{title:"Cr\xe9ation d'un nouvel honoraire",width:320,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Code :"},e("code",{rules:[{required:!0,message:"Tapez le code"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le code d'honoraire"})))),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Libelle :"},e("libelle",{rules:[{required:!0,message:"Tapez le libelle"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le libelle d'honoraire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Montant :"},e("montantHonoraire",{rules:[{required:!0,message:"Tapez le montant"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le montant d'honoraire"})))),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Type auxiliaire :"},e("typeAuxiliaireId")(r.a.createElement($e.a,{placeholder:"cliquez pour choisir un type",optionLabelProp:"label"},this.state.auxiliaire.map(function(e){return r.a.createElement(qa,{key:e.id,value:e.id,label:e.code},e.libelle)})))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),za=He.a.create()(Va),Ya=$e.a.Option,Ba=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onClose=function(){a.setState({visible:!1})},a.rechercheHonoraire=function(){Ra().then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Your Username or Password is incorrect. Please try again!"}):u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.updateHon(a.state.keyRecord,t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.handleSelectChange=function(e){a.setState({visible:!0,keyRecord:e.id}),a.props.form.setFieldsValue({code:e.code,libelle:e.libelle,montantHonoraire:e.montantHonoraire,typeAuxiliaireId:e.typeAuxiliaireHon.id})},a.state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",auxiliaire:[]},a.columns=[Object(at.a)({title:"Code",dataIndex:"code",key:"code",width:"20%",editable:!0},Et("code","code",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Libelle",dataIndex:"libelle",key:"libelle",width:"20%",editable:!0},Et("libelle","libelle",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Montant",dataIndex:"montantHonoraire",key:"montant",width:"20%",editable:!0},Et("montant","montant",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Type auxiliaire",dataIndex:"typeAuxiliaireHon.code",key:"type",width:"20%",editable:!0},Et("type","type",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleSelectChange(t)},style:{borderRadius:"0px"}},"Modifier"))}}],a.getTypeAux=a.getTypeAux.bind(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getTypeAux",value:function(){var e=Object(R.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,Ta().data.content;case 3:e.t1=e.sent,e.t2={auxiliaire:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.rechercheHonoraire()}},{key:"updateHon",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=t,r=a,localStorage.getItem(G)?ae({url:L+"/private/honoraire/"+n,method:"PUT",data:r}):Promise.reject("No access token set.");case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"la modification est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}var n,r},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des honoraires"}),r.a.createElement(za,null),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}),r.a.createElement(ot.a,{title:"Cr\xe9ation d'un nouvel honoraire",width:320,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Code :"},e("code",{rules:[{required:!0,message:"Tapez le code"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le code d'honoraire"})))),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Libelle :"},e("libelle",{rules:[{required:!0,message:"Tapez le libelle"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le libelle d'honoraire"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Montant :"},e("montantHonoraire",{rules:[{required:!0,message:"Tapez le montant"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le montant d'honoraire"})))),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Type auxiliaire :"},e("typeAuxiliaireId",{rules:[{required:!0,message:"Choisissez le type auxiliaire"}]})(r.a.createElement($e.a,{placeholder:"cliquez pour ajouter un profile",optionLabelProp:"label"},this.state.auxiliaire.map(function(e){return r.a.createElement(Ya,{key:e.id,value:e.id,label:e.code},e.libelle)})))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Modifier")))))}}]),t}(n.Component),La=He.a.create()(Ba);a(968);function Ga(){return localStorage.getItem(G)?ae({url:L+"/private/typeprestation?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function Ua(e,t){return localStorage.getItem(G)?ae({url:L+"/private/updateSinistre/"+t,method:"PUT",data:e}):Promise.reject("No access token set.")}function Ha(e,t,a,n,r,i){return localStorage.getItem(G)?ae({url:L+"/private/prestation-honoraire?auxiliaire="+e+"&status="+t+"&produit="+a+"&type-auxiliaire="+n+"&participant="+r+"&contrat="+i,method:"GET"}):Promise.reject("No access token set.")}function Ka(e,t){return localStorage.getItem(G)?ae({url:L+"/private/reglement/"+e+"/"+t,method:"GET"}):Promise.reject("No access token set.")}$e.a.Option;function Wa(){return localStorage.getItem(G)?ae({url:L+"/private/decesproduit?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function $a(e,t){return localStorage.getItem(G)?ae({url:L+"/private/decesproduit/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")}function _a(e,t,a,n,r,i){return localStorage.getItem(G)?ae({url:L+"/private/tarrification?age="+t+"&duree="+e+"&differe="+n+"&capitale="+a+"&type="+r+"&deceProduit="+i,method:"GET"}):Promise.reject("No access token set.")}function Ja(e){return localStorage.getItem(G)?ae({url:L+"/private/risque?page=0&sort=libelle&direction=asc&theme="+e,method:"GET"}):Promise.reject("No access token set.")}function Qa(){return localStorage.getItem(G)?ae({url:L+"/private/categorie?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.")}var Xa=$e.a.Option,Za=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,familles:[]},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterPrestation(t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllFamille()}},{key:"getAllFamille",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/familleproduit?page=0&sort=name&direction=asc",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,this.setState({familles:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ajouterPrestation",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/typeprestation",method:"POST",data:a}):Promise.reject("No access token set.");case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"La creation du type prestation est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"Ce type prestation existe d\xe9ja"===e.t0.response.data.message?u.a.error({message:"Ce type prestation existe d\xe9ja."}):u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}var a},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer},r.a.createElement(w.a,{type:"plus"})," Nouveau type prestation"),r.a.createElement(ot.a,{title:"Cr\xe9ation d'un nouveau type prestation",onClose:this.onClose,width:"300",visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Code"},e("code",{rules:[{required:!0,message:"Tapez le code"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le code"})))),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Libelle"},e("libelle",{rules:[{required:!0,message:"Tapez le libelle"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le libelle"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Nom"},e("name",{rules:[{required:!0,message:"Tapez le nom"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le nom"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Famille"},e("familleId",{rules:[{required:!0,message:"Choisissez la famille"}]})(r.a.createElement($e.a,{style:{width:"100%"},placeholder:"cliquez pour choisir la famille"},this.state.familles.map(function(e){return r.a.createElement(Xa,{value:e.id,label:e.name},e.name)})))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),en=He.a.create()(Za),tn=r.a.createContext(),an=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updatePrestation=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/typeprestation/"+a,method:"PUT",data:n}):Promise.reject("No access token set.")).then(function(e){}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrect. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.recherchePrestation=function(){(localStorage.getItem(G)?ae({url:L+"/private/typeprestation/?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")).then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Your Username or Password is incorrect. Please try again!"}):u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.state={data:[],editingKey:"",rowSelection:"",searchText:"",searchedColumn:""},a.columns=[Object(at.a)({title:"Code",dataIndex:"code",key:"code",width:"25%",editable:!0},Et("code","code",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Libelle",dataIndex:"libelle",key:"libelle",width:"25%",editable:!0},Et("libelle","libelle",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Nom",dataIndex:"name",key:"name",width:"25%",editable:!0},Et("name","name",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(tn.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Fermer"))):r.a.createElement("span",null,r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){a.edit(t.key)}},"Modifier"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.recherchePrestation()}},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];r.splice(i,1,Object(at.a)({},l,n)),a.updatePrestation(l.id,n),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:nn}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:"text"===t.dataIndex,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des prestations"}),r.a.createElement(en,null),r.a.createElement(tn.Provider,{value:this.props.form},r.a.createElement(Je.a,{rowClassName:"editable-row",components:t,columns:a,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}})))}}]),t}(n.Component),nn=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return r.a.createElement("td",u,i?r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput())):c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(tn.Consumer,null,this.renderCell)}}]),t}(n.Component),rn=He.a.create()(an),ln=(a(970),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterCauseRestitution(t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"ajouterCauseRestitution",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/causerestitution",method:"POST",data:a}):Promise.reject("No access token set.");case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"La cr\xe9ation de la cause restitution est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"cause restitution already exists"===e.t0.response.data.message?u.a.error({message:"Cette restitution existe d\xe9ja."}):u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}var a},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer},r.a.createElement(w.a,{type:"plus"})," Nouvelle cause restitution"),r.a.createElement(ot.a,{title:"Creation d'un nouvelle cause restitution",onClose:this.onClose,width:"300",visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Libelle :"},e("libelle",{rules:[{required:!0,message:"Tapez le libelle"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le libelle"}))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(r.a.Component)),sn=He.a.create()(ln),on=r.a.createContext(),cn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateCauseRes=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/causerestitution/"+a,method:"PUT",data:n}):Promise.reject("No access token set.")).then(function(e){}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrect. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.rechercheCauseRes=function(){Tt().then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrect. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.state={data:[],editingKey:"",searchText:"",searchedColumn:""},a.columns=[Object(at.a)({title:"Libelle",dataIndex:"libelle",key:"libelle",width:"40%",editable:!0},Et("libelle","libelle",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(on.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Fermer"))):r.a.createElement("span",null,r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){a.edit(t.key)}},"Modifier"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.rechercheCauseRes()}},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];r.splice(i,1,Object(at.a)({},l,n)),a.updateCauseRes(l.id,n),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:un}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:"text"===t.dataIndex,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des causes restitution"}),r.a.createElement(sn,null),r.a.createElement(on.Provider,{value:this.props.form},r.a.createElement(Je.a,{rowClassName:"editable-row",components:t,columns:a,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}})))}}]),t}(n.Component),un=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return r.a.createElement("td",u,i?r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput())):c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(on.Consumer,null,this.renderCell)}}]),t}(n.Component),mn=He.a.create()(cn),dn=(a(972),a(441)),pn=a.n(dn),hn=(a(86),a(62)),fn=a.n(hn),bn=(a(95),a(23)),En=a.n(bn),vn=(a(92),a(55)),gn=a.n(vn);function yn(e,t){return localStorage.getItem(G)?ae({url:L+"/private/decescontrat/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")}function Cn(e,t){return localStorage.getItem(G)?ae({url:L+"/private/retraitcontrat/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")}function xn(e){return localStorage.getItem(G)?ae({url:L+"/private/avenant/"+e,method:"GET"}):Promise.reject("No access token set.")}function Sn(){return localStorage.getItem(G)?ae({url:L+"/private/TypeAvenant?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function kn(e){return localStorage.getItem(G)?ae({url:L+"/private/TypeAvenant/"+e,method:"GET"}):Promise.reject("No access token set.")}function In(e,t){return localStorage.getItem(G)?ae({url:L+"/private/avenant/"+t,method:"POST",data:e}):Promise.reject("No access token set.")}var On=gn.a.Panel,jn="",Tn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getAvenants=function(e){xn(e).then(function(e){var t=[];e.data.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})})},a.state={expandIconPosition:"left",data:[]},a.columns=[{title:"Num\xe9ro d'avenant",dataIndex:"numeroAvenant",key:"numeroAvenant"},{title:"Date d'effet",dataIndex:"dateEffet",key:"dateEffet"},{title:"Type d'avenant",dataIndex:"typeAvenant.libelle",key:"typeAvenant"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAvenants(jn)}},{key:"render",value:function(){var e=this,t=this.state.expandIconPosition;return r.a.createElement(Cr.Consumer,null,function(a){return jn=a.state.id,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:t},r.a.createElement(On,{header:"Liste des Avenants",key:"1"},r.a.createElement("div",null,r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:e.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}))))))})}}]),t}(n.Component),An=gn.a.Panel,Pn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(Cr.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(An,{header:"Contrat",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"N\xb0 contrat : ",t.state.numeroContrat)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- N\xb0 de compte bancaire")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,"---")),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Num\xe9ro du contrat")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.numeroContrat))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date d'effet")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.dateEffet)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date d'\xe9cheance")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.dateEcheance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Dur\xe9e (mois)")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.dureeContrat)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant de la cotisation p\xe9riodique")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.montantCotisation.toFixed(2)))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- P\xe9riodicit\xe9")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.periodicite.libelle)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant des frais d'acquisition")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.montantFrais.toFixed(2)))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date de pr\xe9l\xe8vement")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.datePrelevement)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant de financement")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.capitalAssure.toFixed(2)))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Taux de financement (%)")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.tauxInteret)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Taux surprime (%)")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.tauxSurprime))))))))})}}]),t}(n.Component),Dn=gn.a.Panel,Fn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(Cr.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(Dn,{header:"Souscripteur",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"CIN : ",t.state.souscripteur.cin)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.nom)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Pr\xe9nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.prenom))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- CIN")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.cin)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date naissance")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.dateNaissance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Situation familiale")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.situationFamiliale)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Profession")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.profession))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nationalit\xe9")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.nationalite)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Matricule")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.matricule))))),r.a.createElement(Dn,{header:"Assur\xe9",key:"2",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"CIN : ",t.state.assure.cin)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.nom)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Pr\xe9nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.prenom))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- CIN")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.cin)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date naissance")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.dateNaissance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Situation familiale")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.situationFamiliale)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Profession")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.profession))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nationalit\xe9")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.nationalite)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Matricule")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.matricule))))),r.a.createElement(Dn,{header:"B\xe9n\xe9ficiaire(s)",key:"3"},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,null,r.a.createElement("p",null,"Pas encore fais"))))))))})}}]),t}(n.Component),wn=gn.a.Panel,Mn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(Cr.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(wn,{header:"Produit",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"Libelle : ",t.state.produit.libelle)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Libelle")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.libelle)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Code")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.code))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Fraisd&aposacquisition")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.fraisAcquisition)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Risque")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.risque.libelle))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Cat\xe9gorie")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.categorie.libelle)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Dur\xe9e min contrat (Mois)")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.dureeMin))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Num\xe9ro de compte")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.numeroCompte)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- D\xe9lai r\xe9siliation")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.delaiResiliation))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- D\xe9lai pr\xe9avis")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.delaiPreavis)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- D\xe9lai d\xe9claration")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.delaiDeclaration))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Seuil examinateur")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.seuilExaminateur)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Seuil Conseil")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.seuilConseil))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Dur\xe9e Max")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.dureeMax)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Dur\xe9e Min")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.dureeMin))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Diff\xe9r\xe9 Max")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.differeMax)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Diff\xe9r\xe9 Min")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.differeMin))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Age Max")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.ageMax)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Age Min")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.ageMin))))))))})}}]),t}(n.Component),Nn=(a(102),a(51)),Rn=a.n(Nn);a(983);function qn(e){return localStorage.getItem(G)?ae({url:L+"/private/getSinistre/"+e,method:"GET"}):Promise.reject("No access token set.")}function Vn(e){return localStorage.getItem(G)?ae({url:L+"/private/Sinistre/delete/"+e,method:"DELETE"}):Promise.reject("No access token set.")}function zn(e,t,a){return localStorage.getItem(G)?ae({url:L+"/private/sinistre/setStatus/"+e+"/"+t+"?page=0",data:a,method:"POST"}):Promise.reject("No access token set.")}function Yn(e,t,a){return localStorage.getItem(G)?ae({url:L+"/private/sinistre/"+e+"/"+t,data:a,method:"POST"}):Promise.reject("No access token set.")}function Bn(e){return localStorage.getItem(G)?ae({url:L+"/private/addflux",data:e,method:"POST"}):Promise.reject("No access token set.")}function Ln(e){return localStorage.getItem(G)?ae({url:L+"/private/downloadFlux/"+e,method:"GET"}):Promise.reject("No access token set.")}function Gn(){return localStorage.getItem(G)?ae({url:L+"/private/piecejointe?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function Un(e){return localStorage.getItem(G)?ae({url:L+"/private/exclusions/"+e+"?page=0&sort=exclusion_nom&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function Hn(e){return localStorage.getItem(G)?ae({url:L+"/private/jasper/pdf",method:"POST",data:e,responseType:"blob"}):Promise.reject("No access token set.")}var Kn=$e.a.Option,Wn=I.a.TextArea,$n="",_n="",Jn="",Qn={},Xn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChanged=function(e){a.setState({agenceBancaire:e.target.value})},a.handleChangeed=function(e){if(Jn=e,"A_signer"===e)a.setState({visible:!0});else if("EN_COURS"===e){a.setStatuts(_n,e,{motif:""})}else"ANNULER"===e&&a.setState({visibled:!0})},a.handleOk=function(){a.setStatuts(_n,Jn,{motif:""}),a.setState({visible:!1})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={motif:t.motif};a.setStatuts(_n,Jn,n),a.setState({visibled:!1})}})},a.handleCancel=function(){a.setState({visible:!1})},a.getSinistres=function(e){qn(e).then(function(e){var t=[];e.data.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t}),void 0!==a.state.data[0]&&a.setState({remplie:a.state.data[0].status})})},a.handleRecord=function(e){_n=e.id},a.handleChange=function(e){a.setState({add:!0,keyRecord:e.id},function(){var t=new Date(Kt()(e.dateDeclarationSinistre,"DD/MM/YYYY ")),n=new Date(Kt()(e.dateSurvenance,"DD/MM/YYYY ")),r=new Date(Kt()(e.creationDate,"DD/MM/YYYY ")),i=((r.getTime()-t.getTime())/864e5).toFixed(0),l=((r.getTime()-n.getTime())/864e5).toFixed(0);a.props.form.setFieldsValue({dateCreation:Kt()(e.creationDate,"DD/MM/YYYY "),numeroSinistre:e.numeroSinistre,dateDeclarationSinistre:Kt()(e.dateDeclarationSinistre,"DD/MM/YYYY"),dateSurvenance:Kt()(e.dateSurvenance,"DD/MM/YYYY"),dureeDeclaration:i,dureeSurvenance:l,commentaire:e.commentaire,crd:e.crd,montantRegler:e.montantRegler,typeSinistre:e.natureSinistre,nbrEcheanceImpayees:e.nbrEcheanceImpaye,numeroCompte:e.numeroCompte,reglementPartiel:e.reglementPartiel,tauxInvalidite:e.tauxInvalidite,modeReglement:e.modeReglement,beneficiaire:Qn.id})})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={dateSurvenance:t.dateSurvenance,dateDeclarationSinistre:t.dateDeclarationSinistre,dureeDeclaration:t.dureeDeclaration,dureeSurvenance:t.dureeSurvenance,commentaire:t.commentaire,crd:t.crd,montantRegler:t.montantRegler,natureSinistre:t.typeSinistre,nbrEcheanceImpaye:t.nbrEcheanceImpayees,numeroCompte:t.numeroCompte,reglementPartiel:t.reglementPartiel,tauxInvalidite:t.tauxInvalidite,modeReglement:t.modeReglement,exclusionNom:t.exclusion,numeroSinistre:t.numeroSinistre,beneficiaireAgenceBancaire:a.state.agenceBancaire,pointVente:t.beneficiaire,remplie:!0,causeSinistre:t.causeSinistre};a.updatePrestationSinistres(n,a.state.keyRecord),a.setState({remplie:!0})}})},a.handleDelete=function(e){a.deletePrestationSinistre(e);var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.key!==e})})},a.state={expandIconPosition:"left",data:[],add:!1,remplie:"",visible:!1,visibled:!1,exclusions:[],pieceJointe:[],keyRecord:"",agenceBancaire:!0},a.columns=[{title:"Num\xe9ro de sinistre",dataIndex:"numeroSinistre",key:"numeroSinistre",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px"}},e))}},{title:"Date de survenance",dataIndex:"dateSurvenance",key:"dateServenance"},{title:"date d\xe9claration sinistre",dataIndex:"dateDeclarationSinistre",key:"dateDeclarationSinistre"},{title:"Statut",dataIndex:"status",render:function(e,t){return r.a.createElement("span",null,r.a.createElement($e.a,{placeholder:"Please select",onChange:a.handleChangeed,style:{width:"100%"},defaultValue:e},r.a.createElement(Kn,{value:"EN_COURS",onClick:function(){return a.handleRecord(t)}},"EN COURS"),r.a.createElement(Kn,{value:"A_signer",onClick:function(){return a.handleRecord(t)}},"\xc0 SIGNER"),r.a.createElement(Kn,{value:"ANNULER",onClick:function(){return a.handleRecord(t)}},"ANNULER"),r.a.createElement(Kn,{value:"REJ_CONTRAT_ECHU",onClick:function(){return a.handleRecord(t)}},"REJ CONTRAT ECHU")))}}],a.columns1=[{title:"Num\xe9ro de sinistre",dataIndex:"numeroSinistre",key:"numeroSinistre",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px"}},e))}},{title:"Date de survenance",dataIndex:"dateSurvenance",key:"dateServenance"},{title:"date d\xe9claration sinistre",dataIndex:"dateDeclarationSinistre",key:"dateDeclarationSinistre"},{title:"Statut",dataIndex:"status",key:"statut"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getSinistres($n),this.getAllPiece(),this.getAllExclusion("Deces")}},{key:"updatePrestationSinistres",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ua(t,a);case 2:n=e.sent,(r=[]).push(n.data),this.setState({data:r});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"setStatuts",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zn(t,a,n);case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getAllExclusion",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:a=e.sent,this.setState({exclusions:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deletePrestationSinistre",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn(t);case 3:200===e.sent.status&&u.a.success({message:"Sinistre annul\xe9 !"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Un probl\xe8me est survenu. Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPiece",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn();case 2:t=e.sent,this.setState({pieceJointe:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={labelCol:{span:11},wrapperCol:{span:12}},a=this.props.form.getFieldDecorator,n=this.state,i=n.visible,l=n.visibled;return r.a.createElement(Cr.Consumer,null,function(n){return $n=n.state.id,Qn=n.state.pointVente,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(fn.a,{visible:i,title:"Confirmation",onOk:e.handleOk,onCancel:e.handleCancel,footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel},"Non"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleOk},"Oui")]},r.a.createElement("p",null,"\xc9tes-vous s\xfbre de changer ce statut ?")),r.a.createElement(fn.a,{visible:l,title:"Motif d'annulation",onOk:e.handleSubmited,onCancel:e.handleCancel,width:"600px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleSubmited},"Valider")]},r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"Le motif "},a("motif",{rules:[{message:"Champs Obligatoire!"}]})(r.a.createElement(Wn,{rows:2}))))),"A_SIGNER"===e.state.remplie||"EN_COURS"===e.state.remplie?r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:e.state.data,pagination:!1}):r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns1,dataSource:e.state.data,pagination:!1}),e.state.add?r.a.createElement("div",null,r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Donn\xe9es sinistre")),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,{onSubmit:e.handleSubmit},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,Object.assign({label:"Date cr\xe9ation"},t),a("dateCreation")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"N\xb0 de sinistre"},t),a("numeroSinistre")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Date d\xe9claration sinistre"},t),a("dateDeclarationSinistre")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"Exclusion"},t),a("exclusion")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},e.state.exclusions.map(function(e){return r.a.createElement(Kn,{key:e.id,value:e.id,label:e.exclusionNom},e.exclusionNom)})))),r.a.createElement(He.a.Item,Object.assign({label:"Dur\xe9e avant survenance"},t),a("dureeSurvenance")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Montant \xe0 r\xe9gler"},t),a("montantRegler")(r.a.createElement(I.a,{placeholder:"0.00 ",className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Taux d'invalidit\xe9"},t),a("tauxInvalidite")(r.a.createElement(I.a,{placeholder:"0.00 ",className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"R\xe9glement partiel"},t),a("reglementPartiel",{initialValue:"Non"})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez "},r.a.createElement(Kn,{value:"Oui",label:"oui"},"Oui"),r.a.createElement(Kn,{value:"Non",label:"non"},"Non")))),r.a.createElement(He.a.Item,Object.assign({label:"B\xe9n\xe9ficiaire"},t),a("beneficiaire")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(Kn,{value:Qn.id,label:Qn.libelle},Qn.libelle))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,Object.assign({label:"Type de sinistre"},t),a("typeSinistre",{initialValue:"D\xe9c\xe8s"})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez "},r.a.createElement(Kn,{value:"D\xe9c\xe8s",label:"deces"},"D\xe9c\xe8s"),r.a.createElement(Kn,{value:"INVALIDITE TOTALE ET DEFINITIVE",label:"ITD"},"INVALIDITE TOTALE ET DEFINITIVE")))),r.a.createElement(He.a.Item,Object.assign({label:"Date de survenanve sinistre"},t),a("dateSurvenance")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"Cause sinistre"},t),a("causeSinistre")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Dur\xe9e avant d\xe9claration"},t),a("dureeDeclaration")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"CRD"},t),a("crd")(r.a.createElement(I.a,{placeholder:"0.00 ",className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Nombre d'\xe9cheances impay\xe9es"},t),a("nbrEcheanceImpayees")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Mode de r\xe9glement"},t),a("modeReglement",{initialValue:"Virement"})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez "},r.a.createElement(Kn,{value:"Virement",label:"virement"},"Virement"),r.a.createElement(Kn,{value:"Ch\xe8que",label:"cheque"},"Ch\xe9que")))),r.a.createElement(He.a.Item,Object.assign({label:"N\xb0 Compte"},t),a("numeroCompte")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Agence bancaire"},t),a("agenceBancaire",{valuePropName:"unchecked",initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!0,onChange:e.onChanged},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))),r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Pi\xe8ces justificatives")),r.a.createElement("table",{id:"customers"},r.a.createElement("tr",null,r.a.createElement("th",null,"Libelle"),r.a.createElement("th",null,"A fournir"),r.a.createElement("th",null,"O/F"),r.a.createElement("th",null,"Re\xe7u"),r.a.createElement("th",null,"Date r\xe9ception")),e.state.pieceJointe.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("libelle")(r.a.createElement("label",null,e.libelle)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("fournir")(r.a.createElement(Rn.a,null)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("o/f")(r.a.createElement("label",null)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("re\xe7u")(r.a.createElement(Rn.a,null)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("dateReception")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}})))))})),r.a.createElement(xe.a,{span:14},r.a.createElement(He.a.Item,{label:"Commentaire"},a("commentaire")(r.a.createElement(Wn,{placeholder:"Commentaire",autoSize:{minRows:2,maxRows:6}})))),r.a.createElement(xe.a,{span:4,offset:21},r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"not-rounded"},r.a.createElement(w.a,{type:"save"}),"Enregistrer")))))):null))})}}]),t}(n.Component),Zn=He.a.create()(Xn),er=[{key:"general",tab:"G\xe9n\xe9ral"},{key:"contrat",tab:"Contrat"},{key:"produit",tab:"Produit"},{key:"avenant",tab:"Avenant(s)"},{key:"sinistre",tab:"Sinistre"}],tr=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={key:"general",noTitleKey:"general",visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a.contentListNoTitle={general:r.a.createElement(Fn,null),contrat:r.a.createElement(Pn,null),produit:r.a.createElement(Mn,null),avenant:r.a.createElement(Tn,null),sinistre:r.a.createElement(Zn,null)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Cr.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#top",type:"primary",shape:"circle",icon:"edit",size:"small",onClick:e.showDrawer},t.state.numeroContrat),r.a.createElement(ot.a,{title:r.a.createElement("div",{style:{fontSize:"18px"}},"D\xe9tails du Contrat : ",t.state.numeroContrat),width:1e3,onClose:e.onClose,visible:e.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(D.a,{tabList:er,activeTabKey:e.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},e.contentListNoTitle[e.state.noTitleKey]),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{type:"primary",className:"not-rounded",onClick:e.onClose},"Fermer"))))}))}}]),t}(n.Component);function ar(e){return localStorage.getItem(G)?ae({url:L+"/private/decescontrat",data:e,method:"POST"}):Promise.reject("No access token set.")}function nr(e){return localStorage.getItem(G)?ae({url:L+"/private/retraitcontrat",data:e,method:"POST"}):Promise.reject("No access token set.")}function rr(e,t,a,n,r){return localStorage.getItem(G)?ae({url:L+"/private/decescontrat/status/"+e+"?page="+t+"&limit="+a+"&sort="+n+"&direction="+r,method:"GET"}):Promise.reject("No access token set.")}function ir(e,t,a,n){return localStorage.getItem(G)?ae({url:L+"/private/decescontrats/?page="+e+"&limit="+t+"&sort="+a+"&direction="+n,method:"GET"}):Promise.reject("No access token set.")}function lr(e,t,a){return localStorage.getItem(G)?ae({url:L+"/private/retraitcontrat?sort=id&direction=asc&page="+t+"&limit="+a,method:"GET"}):Promise.reject("No access token set.")}function sr(e,t,a,n){return localStorage.getItem(G)?ae({url:L+"/private/contrat/search?page="+e+"&limit="+t+"&by="+a+"&for="+n,method:"GET"}):Promise.reject("No access token set.")}function or(e,t,a,n){return localStorage.getItem(G)?ae({url:L+"/private/retraitcontrat/search?page="+e+"&limit="+t+"&by="+a+"&for="+n,method:"GET"}):Promise.reject("No access token set.")}function cr(e,t){return localStorage.getItem(G)?ae({url:L+"/private/decescontratStatus/"+e,data:t,method:"PUT"}):Promise.reject("No access token set.")}function ur(e,t){return localStorage.getItem(G)?ae({url:L+"/private/decescontratStatus/"+e,data:t,method:"PUT"}):Promise.reject("No access token set.")}function mr(e,t,a,n){return localStorage.getItem(G)?ae({url:L+"/private/contratMrb/search?page="+e+"&limit="+t+"&by="+a+"&for="+n,method:"GET"}):Promise.reject("No access token set.")}function dr(){return localStorage.getItem(G)?ae({url:L+"/private/periodicite?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function pr(e){return localStorage.getItem(G)?ae({url:L+"/private/beneficiaireendeces/"+e,method:"GET"}):Promise.reject("No access token set.")}function hr(e,t){return localStorage.getItem(G)?ae({url:L+"/private/decescontrat/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")}var fr=$e.a.Option,br=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={vois:[],villes:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(console.log(t),!e){var n="open".concat(Date.now()),i=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleConfirm(t,n)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(n)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Pays"},t.adressPays),r.a.createElement(En.a.Item,{label:"Ville"},t.adressVille.label),r.a.createElement(En.a.Item,{label:"Voie"},t.adressVois),r.a.createElement(En.a.Item,{label:"Code Postal"},t.adressCodePostal),r.a.createElement(En.a.Item,{label:"Num\xe9ro"},t.adressNumero),r.a.createElement(En.a.Item,{label:"Compl\xe9ment d'adresse"},t.adressComplement))),btn:i,key:n,style:{width:880,marginLeft:-945},duration:0})}})},a.handleConfirm=function(e,t){a.props.saveRequest(e),u.a.close(t);var n="open".concat(Date.now()),i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(n)}},"Confirm");u.a.info({message:"confirmation",description:"l'avenant vien d'etre ajoute au contrat",btn:i,duration:0,key:n})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa();case 2:t=e.sent,this.getAllVilles(),this.setState({vois:Object(tt.a)(t.data)});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllVilles",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca();case 2:t=e.sent,a=[],t.data.forEach(function(e){var t=e.name;a.push(t)}),this.setState({villes:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.props.adresse;var e=this.props.form.getFieldDecorator;return r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adresse :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},e("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,{placeholder:"pays"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},e("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.villes,onSelect:this.onChangeVille,allowClear:!1,labelInValue:!0,placeholder:"ajouter une ville",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Voie"},e("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Voie"},this.state.vois.map(function(e){return r.a.createElement(fr,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},e("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Num\xe9ro"},e("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Compl\xe9ment d'adresse"},e("adressComplement")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un compl\xe9ment"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adresse Complete"},e("adressComplete")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"}}))))),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleSubmit,className:"not-rounded"},"Ajouter"))}}]),t}(n.Component),Er=He.a.create()(br),vr=($e.a.Option,""),gr=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={dateCreation:new Date,tarification:{},tauxTaxe:a.props.record.produit.taxe,montantTaxe:a.props.record.montantTaxe,tauxSurprime:a.props.record.tauxSurprime,tauxReduction:a.props.record.tauxReduction,prorata:a.props.record.prorata,differe:a.props.record.differe,capital:a.props.record.capitalAssure,duree:a.props.record.dureeContrat,montantSurprime:a.props.record.montantSurprime,montantCotisation:a.props.record.montantCotisation},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n="open".concat(Date.now()),i=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleConfirm(a.state,n)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(n)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Montant cotisation"},a.state.montantCotisation),r.a.createElement(En.a.Item,{label:"Montant surprime",span:2},a.state.montantSurprime),r.a.createElement(En.a.Item,{label:"Montant proratis\xe9"},a.state.prorata),r.a.createElement(En.a.Item,{label:"Montant taxe",span:2},a.state.montantTaxe))),btn:i,key:n,style:{width:880,marginLeft:-945},duration:0})}})},a.handleConfirm=function(e,t){a.props.saveRequest(e),u.a.close(t);var n="open".concat(Date.now()),i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(n)}},"Confirm");u.a.success({message:"confirmation",description:"l'avenant vien d'etre ajoute au contrat",btn:i,duration:0,key:n})},a.onChangeDiffere=function(e){a.setState({differe:e})},a.onChangeCapital=function(e){a.setState({capital:e.target.value})},a.onChangeDuree=function(e){a.setState({duree:e.target.value})},a.onChangeTauxS=function(e){a.setState({tauxSurprime:e.target.value})},a.onChangeTauxReduction=function(e){a.setState({tauxReduction:e.target.value})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(R.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.setFieldsValue({differe:this.props.record.differe,capitalAssure:this.props.record.capitalAssure,tauxReduction:this.props.record.tauxReduction,tauxSurprime:this.props.record.tauxSurprime,duree:this.props.record.dureeContrat,montantCotisation:this.props.record.montantCotisation,prorata:this.props.record.prorata,montantTaxe:this.props.record.montantTaxe,montantSurprime:this.props.record.montantSurprime});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=Kt()(this.props.record.dateEffet).format("M"),n=Kt()(this.props.record.dateEffet).format("D");if(t.differe===this.state.differe&&t.capital===this.state.capital||""!==this.state.capital&&""!==this.state.differe&&null!==this.state.differe&&null!==this.state.capital&&this.getTariffication(this.state.capital,this.state.differe),t.tarification!==this.state.tarification&&"taux"===vr){var r=this.props.form.getFieldValue("capitalAssure"),i=this.state.tarification.taux*r/100;this.setState({montantCotisation:this.state.tarification.taux*r/100}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.taux*r/100});var l=this.state.tauxSurprime*i/100;this.props.form.setFieldsValue({montantSurprime:this.state.tauxSurprime*i/100}),this.setState({montantSurprime:this.state.tauxSurprime*i/100}),t.montantSurprime===this.state.montantSurprime&&this.state.montantCotisation===t.montantCotisation||null!==this.state.montantSurprime&&null!==this.state.montantCotisation&&(this.props.form.setFieldsValue({cotisationTotale:l+i}),this.setState({cotisationTotale:l+i}))}else if(t.tarification!==this.state.tarification&&"forfait"===vr){var s=this.state.tarification.forfait;this.setState({montantCotisation:this.state.tarification.forfait}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.forfait});var o=this.state.tauxSurprime*s/100;this.props.form.setFieldsValue({montantSurprime:this.state.tauxSurprime*s/100}),this.setState({montantSurprime:this.state.tauxSurprime*s/100}),t.montantSurprime===this.state.montantSurprime&&this.state.montantCotisation===t.montantCotisation||null!==this.state.montantSurprime&&null!==this.state.montantCotisation&&(this.props.form.setFieldsValue({cotisationTotale:o+s}),this.setState({cotisationTotale:o+s}))}t.cotisationTotale!==this.state.cotisationTotale&&null!==this.state.cotisationTotale&&"Unique"!==this.state.record.periodicite.libelle&&(n<=15?(this.props.form.setFieldsValue({prorata:this.state.cotisationTotale*((13-a)/12)}),this.setState({prorata:this.state.cotisationTotale*((13-a)/12)})):(this.props.form.setFieldsValue({prorata:this.state.cotisationTotale*((12-a)/12)}),this.setState({prorata:this.state.cotisationTotale*((12-a)/12)}))),t.prorata!==this.state.prorata&&null!==this.state.tauxTaxe&&(this.props.form.setFieldsValue({montantTaxe:this.state.prorata*this.state.tauxTaxe/100}),this.setState({montantTaxe:this.state.prorata*this.state.tauxTaxe/100}))}},{key:"getTariffication",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kt()().diff(Kt()(this.props.record.assure.dateNaissance),"years"),r=this.state.duree,vr=this.props.record.produit.produitType,e.next=5,_a(r,n,t,a,vr,this.props.record.produit.id);case 5:i=e.sent,this.setState({tarification:i.data});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(He.a,null,r.a.createElement("h3",null," D\xe9tail d'avenant"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Date cr\xe9ation"},e("dateCreation",{initialValue:Kt()(this.state.dateCreation,"DD-MM-YYYY")})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"N\xb0 Avenant"},e("numeroAvenant")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9"},e("differe")(r.a.createElement(Vt.a,{className:"not-rounded",onChange:this.onChangeDiffere})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Taux de r\xe9duction"},e("tauxReduction")(r.a.createElement(I.a,{className:"not-rounded",onChange:this.onChangeTauxReduction}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Capital assur\xe9"},e("capitalAssure")(r.a.createElement(I.a,{className:"not-rounded",onChange:this.onChangeCapital})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Dur\xe9e"},e("duree")(r.a.createElement(I.a,{className:"not-rounded",onChange:this.onChangeDuree}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Date effet avenant"},e("dateEffetAvenant",{initialValue:Kt()(this.state.dateCreation,"DD-MM-YYYY")})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Taux de surprime"},e("tauxSurprime")(r.a.createElement(I.a,{className:"not-rounded",onChange:this.onChangeTauxS}))))),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleSubmit,className:"not-rounded"},"Ajouter"))}}]),t}(n.Component),yr=He.a.create()(gr),Cr=r.a.createContext(),xr="ACCEPTED",Sr=$e.a.Option,kr=I.a.Search,Ir="",Or=new Date,jr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).conditionGenerale=function(){a.getConditionGenerale()},a.conditionParticuliere=function(e){var t=e.montantCotisation/100*e.produit.taxe.toFixed(2),n=e.montantSurprime+e.montantCotisation+t,r={agence:e.produit.partenaire.raisonSocial,organisme:e.produit.partenaire.typePartenaire,adresse:e.pointVente.partenairepv.siegeSocial,intermediaire:e.produit.partenaire.typePartenaire,numeroAgrement:e.produit.numeroHomologation,dateAgrement:e.produit.dateHomologation,adresseInter:e.produit.partenaire.siegeSocial,participant:e.souscripteur.nom+" "+e.souscripteur.prenom,telephone:e.souscripteur.numeroDeTelephone,registreCommerce:e.souscripteur.cin,adresseSouscripteur:e.souscripteur.adressComplete,compteBancaire:e.souscripteur.rib,assure:e.assure.nom+" "+e.assure.prenom,cinAssure:e.assure.cin,adresseAssure:e.assure.adressComplete,telephoneAssure:e.assure.numeroDeTelephone,compteAssure:e.assure.rib,compteTakaful:e.produit.numeroCompte,dureeContrat:e.dureeContrat,numeroContratFinancement:e.numeroContrat,numeroCompte:e.assure.rib,dureeMois:e.dureeContrat,garantiePaiment:"true",renouvellement:"true",garantieInvalidite:"true",date:Kt()(Or).format("DD-MM-YYYY"),montantTTC:n.toFixed(2),periodicite:e.periodicite.libelle,ageLimiteCouverture:e.produit.ageEcheance,ageLimitSouscription:e.produit.ageMaxEligibilite,montantAugmentation:e.produit.seuilExaminateur,remuneration:e.produit.fraisGestion,contributionAnnulle:e.prorata.toFixed(2),fraisAcquisition:e.produit.fraisAcquisition,seuilVisite:e.produit.seuilExaminateur,suspensionActivite:e.suspendreAtiviteDeuxDernierAnneePourquiEtTemps,maladieInvalidite:e.quelleMaladieOuInvalidite,maladieOuOperation:e.maladiesOuOperationChirurgicale};a.getConditionParticuliere(r)},a.Canceled=function(){a.setState({modelShow:!1})},a.handleOk=function(){a.setState({modelShow:!1})},a.showModal=function(){a.setState({modelShow:!0})},a.handleChanged=function(e){"Restitution"===e?a.setState({restitution:!0,sinistre:!1}):"Sinistre"===e&&a.setState({sinistre:!0,restitution:!1})},a.saveRequest=function(e){var t=a.state.record;switch(a.state.TypeAvenant.code){case te:delete e.tarification,delete e.dateCreation,e.assure=t.assure,e.assure.adressVille=e.adressVille.label,e.assure.adressComplete=e.adressComplete,e.assure.adressCodePostal=e.adressCodePostal,e.assure.adressPays=e.adressPays,e.assure.adressVois=e.AdressVois,e.assure.adressComplement=e.Complement,e.assure.adressNumero=e.adressNumero,delete e.adressVille,delete e.adressComplete,delete e.adressCodePostal,delete e.adressPays,delete e.AdressVois,delete e.Complement,delete e.adressNumero;var n=Object(at.a)({},e,{typeAvenantId:a.state.TypeAvenant.id});a.updateDecesContratCapitaleDureeChangementAdresse(t.id,n);break;case ee:delete e.tarification,delete e.dateCreation;var r=Object(at.a)({},e,{typeAvenantId:a.state.TypeAvenant.id});a.updateDecesContratCapitaleDureeChangementAdresse(t.id,r)}},a.handleChange=function(e){var t;switch(a.state.typesAvenant.forEach(function(n){n.id===e&&(a.setState({TypeAvenant:n}),t=n.code)}),console.log(t),t){case te:a.setState({Avenantchoisi:r.a.createElement(Er,{saveRequest:a.saveRequest})});break;case ee:a.setState({Avenantchoisi:r.a.createElement(yr,{saveRequest:a.saveRequest,record:a.state.record})})}},a.handleSelectChange=function(e){a.setState({visible:!0,record:e})},a.handleChangePrestation=function(e){a.setState({visibled:!0,dateEcheance:e.dateEcheance,keyRecord:e.id}),a.setState({visibled:!0,dateEcheance:e.dateEcheance})},a.handleConfirm=function(e,t){u.a.close(t),a.updatedContrat(a.state.record.id,e),a.setState({visible:!1})},a.onChangeCapital=function(e){a.setState({capital:e.target.value})},a.onChangeDuree=function(e){a.setState({duree:e.target.value})},a.onChangeTauxS=function(e){a.setState({tauxSurprime:e.target.value})},a.onChangeTauxReduction=function(e){a.setState({tauxReduction:e.target.value})},a.onPaginationChange=function(e,t){""===a.state.searchfor?a.getproprties(xr,e-1,5,W,"desc"):a.searchContrats(e-1,5,a.state.searchby,a.state.searchfor)},a.selectBefore=r.a.createElement($e.a,{onChange:function(e){return a.setState({searchby:e})},defaultValue:W,style:{width:150}},r.a.createElement(Sr,{value:W},"N\xb0 de contrat"),r.a.createElement(Sr,{value:K},"CIN"),r.a.createElement(Sr,{value:H},"Nom Assur\xe9")),a.search=function(e){a.setState({pagenumber:1,searchfor:e}),a.searchContrats(a.state.pagenumber-1,2,a.state.searchby,e)},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleCancel=function(){a.setState({visible:!1})},a.handleClose=function(){a.props.form.setFieldsValue({avenants:""}),a.setState({show:!1,view:!1})},a.handleClosed=function(){a.setState({showed:!1,sinistre:!1,restitution:!1})},a.handleCanceled=function(){a.props.form.setFieldsValue({typePrestation:" S\xe9l\xe9ctionnez "}),a.setState({visibled:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e)if(a.state.avenantCapital){var n={capital:t.capitalAssure,duree:t.duree,differe:t.differe,montantCotisation:t.montantCotisation,montantSurprime:t.montantSurprime,montantTaxe:t.montantTaxe,prorata:t.prorata,tauxReduction:t.tauxReduction,tauxSurprime:t.tauxSurprime,typeAvenantId:t.avenants},i="open".concat(Date.now()),l=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleConfirm(n,i)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(i)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Montant cotisation"},t.montantCotisation),r.a.createElement(En.a.Item,{label:"Montant surprime",span:2},t.montantSurprime),r.a.createElement(En.a.Item,{label:"Montant proratis\xe9"},t.prorata),r.a.createElement(En.a.Item,{label:"Montant taxe",span:2},t.montantTaxe))),btn:l,key:i,style:{width:880,marginLeft:-945},duration:0})}else if(a.state.avenantContrat){var s={status:t.nouveauStatus,typeAvenantId:t.avenants};a.updatedContratStatus(a.state.record.id,s),a.setState({visible:!1})}})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){Kt()(a.state.dateEcheance),Kt()(t.dateSurvenanceSinistre);var n={contratId:a.state.keyRecord,dateDeclarationSinistre:t.dateDeclarationSinistre,dateSurvenance:t.dateSurvenanceSinistre,natureSinistre:t.natureSinistre,typePrestation:t.typePrestation};a.setState({visibled:!1}),(i=n,localStorage.getItem(G)?ae({url:L+"/private/addSinistre",data:i,method:"POST"}):Promise.reject("No access token set.")).then(function(e){if(console.log(e),"REJ_CONTRAT_ECHU"===e.data.status){var t="open".concat(Date.now()),n=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(t)}},"Confirm");u.a.warn({message:"Demande de resiliation rejet\xe9",description:"CONTRAT NUMERO     : \n"+e.data.contrat.numeroContrat+"Contrat non couvert au date de sinistre",btn:n,duration:0,key:t})}else{var i="open".concat(Date.now()),l=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(i)}},"Confirm");u.a.success({message:"Demande de resiliation a bien ete envoy\xe9e",description:" CONTRAT NUMERO     : \n"+e.data.contrat.numeroContrat+" SINISTRE NUMERO   : "+e.data.numeroSinistre,btn:l,duration:0,key:i})}a.props.record.history.push("/consultDecesContrat")}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})})}var i})},a.state={data:[],Avenantchoisi:"",TypeAvenant:null,AdressChangementVisibilty:!1,modelShow:!1,visible:!1,visibled:!1,show:!1,avenantCapital:!1,avenantContrat:!1,showed:!1,sinistre:!1,view:!1,restitution:!1,dateCreation:new Date,searchText:"",searchedColumn:"",selectedRowKeys:[],searchby:W,searchfor:"",selectedFile:null,record:{},contrats:[],totalItems:0,pagenumber:1,value:"",differe:null,dateEcheance:"",duree:null,keyRecord:"",capital:null,tauxSurprime:null,tauxReduction:null,tauxTaxe:null,tarification:{},montantSurprime:null,montantCotisation:null,cotisationTotale:null,montantTaxe:null,prorata:null,typesAvenant:[]},a.columns=[{title:"N\xb0 de Contrat",dataIndex:W,key:"idContrat",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(Cr.Provider,{value:{state:t}},r.a.createElement(tr,null))))}},Object(at.a)({title:"Dur\xe9e Contrat",dataIndex:"dureeContrat",key:"dureeContrat"},Et("dureeContrat","Dur\xe9e contrat",Object(b.a)(Object(b.a)(a)))),{title:"CIN assur\xe9",dataIndex:"assure.cin",key:"cinAssure"},Object(at.a)({title:"Nom assur\xe9",dataIndex:"assure.nom",key:"nomAssure"},Et("assure.nom","Pr\xe9nom assure",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom assur\xe9",dataIndex:"assure.prenom",key:"prenomAssure"},Object(at.a)({title:"Nom souscripteur",dataIndex:"souscripteur.nom",key:"nomSouscripteur"},Et("souscripteur.nom","Pr\xe9nom assure",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom souscripteur",dataIndex:"souscripteur.prenom",key:"prenomSouscripteur"},{title:"Date d'effet",dataIndex:"dateEffet",width:"10%",key:"dateEffet"},{title:"Date \xe9cheance",dataIndex:"dateEcheance",width:"10%",key:"dateEcheance"},{title:"Produit",dataIndex:"produit.libelle",key:"produit"},{title:"Status",key:"status",dataIndex:"status",render:function(e){return r.a.createElement("span",null,"ACCEPTED"===e?r.a.createElement(et.a,{color:"green",key:e},"ACCEPTE"):r.a.createElement(et.a,{color:"volcano",key:e},e))}},{title:"Montant de financement",dataIndex:"capitalAssure",key:"capitalAssure"},{title:"Action",dataIndex:"operation",width:"10%",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleSelectChange(t)},size:"small",style:{borderRadius:"0px",width:"105px",backgroundColor:"rgb(236 131 91)",borderColor:"rgb(236 131 91)",textAlign:"left",marginBottom:"2px"}},r.a.createElement(w.a,{type:"plus-circle"})," Avenant"),r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleChangePrestation(t)},size:"small",style:{borderRadius:"0px",width:"105px",backgroundColor:"#4ee289",borderColor:"#4ee289",textAlign:"left"}},r.a.createElement(w.a,{type:"plus-circle"})," Prestation"),r.a.createElement(fe.a,{onClick:a.showModal,size:"small",style:{borderRadius:"0px",width:"105px",textAlign:"left"}},r.a.createElement(w.a,{type:"download"}),"Edition"),r.a.createElement(fn.a,{visible:a.state.modelShow,title:"EDITION DU CONTRAT",onOk:a.handleOk,onCancel:a.Canceled,footer:[r.a.createElement(fe.a,{key:"back",onClick:a.handleOk},"Fermer")]},r.a.createElement(fe.a,{key:"back",onClick:a.conditionGenerale,style:{borderRadius:"0px",textAlign:"center",marginLeft:"40px",width:"180px"}},"CONDITIONS GENERALES"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:function(){return a.conditionParticuliere(t)},style:{borderRadius:"0px",textAlign:"center",marginLeft:"20px",width:"180px"}},"CONDITIONS PARTICULIERES")))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"ajouterUnAvenant",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getConditionGenerale",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/conditionGeneral/pdf",method:"GET",responseType:"blob"}):Promise.reject("No access token set.");case 2:200===(t=e.sent).status&&(a=new Blob([t.data],{type:"application/pdf"}),n=URL.createObjectURL(a),window.open(n),this.setState({modelShow:!1}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getConditionParticuliere",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r),this.setState({modelShow:!1}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTariffication",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kt()().diff(Kt()(this.state.record.assure.dateNaissance),"years"),r=this.state.duree,Ir=this.state.record.produit.produitType,e.next=5,_a(r,n,t,a,Ir,this.state.record.produit.id);case 5:i=e.sent,this.setState({tarification:i.data});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateDecesContratCapitaleDureeChangementAdresse",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr(t,a);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getproprties(xr,this.state.pagenumber-1,5,W,"desc"),this.getTypeAvenants()}},{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r,i){var l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir(a,n,r,i);case 2:l=e.sent,this.setState({contrats:Object(tt.a)(l.data.content),totalItems:l.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=Kt()(this.state.record.dateEffet).format("M"),n=Kt()(this.state.record.dateEffet).format("D");if(t.differe===this.state.differe&&t.capital===this.state.capital||""!==this.state.capital&&""!==this.state.differe&&null!==this.state.differe&&null!==this.state.capital&&this.getTariffication(this.state.capital,this.state.differe),t.tarification!==this.state.tarification&&"taux"===Ir){var r=this.props.form.getFieldValue("capitalAssure"),i=this.state.tarification.taux*r/100;this.setState({montantCotisation:this.state.tarification.taux*r/100}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.taux*r/100});var l=this.state.tauxSurprime*i/100;this.props.form.setFieldsValue({montantSurprime:this.state.tauxSurprime*i/100}),this.setState({montantSurprime:this.state.tauxSurprime*i/100}),t.montantSurprime===this.state.montantSurprime&&this.state.montantCotisation===t.montantCotisation||null!==this.state.montantSurprime&&null!==this.state.montantCotisation&&(this.props.form.setFieldsValue({cotisationTotale:l+i}),this.setState({cotisationTotale:l+i}))}else if(t.tarification!==this.state.tarification&&"forfait"===Ir){var s=this.state.tarification.forfait;this.setState({montantCotisation:this.state.tarification.forfait}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.forfait});var o=this.state.tauxSurprime*s/100;this.props.form.setFieldsValue({montantSurprime:this.state.tauxSurprime*s/100}),this.setState({montantSurprime:this.state.tauxSurprime*s/100}),t.montantSurprime===this.state.montantSurprime&&this.state.montantCotisation===t.montantCotisation||null!==this.state.montantSurprime&&null!==this.state.montantCotisation&&(this.props.form.setFieldsValue({cotisationTotale:o+s}),this.setState({cotisationTotale:o+s}))}t.cotisationTotale!==this.state.cotisationTotale&&null!==this.state.cotisationTotale&&"Unique"!==this.state.record.periodicite.libelle&&(n<=15?(this.props.form.setFieldsValue({prorata:this.state.cotisationTotale*((13-a)/12)}),this.setState({prorata:this.state.cotisationTotale*((13-a)/12)})):(this.props.form.setFieldsValue({prorata:this.state.cotisationTotale*((12-a)/12)}),this.setState({prorata:this.state.cotisationTotale*((12-a)/12)}))),t.prorata!==this.state.prorata&&null!==this.state.tauxTaxe&&(this.props.form.setFieldsValue({montantTaxe:this.state.prorata*this.state.tauxTaxe/100}),this.setState({montantTaxe:this.state.prorata*this.state.tauxTaxe/100}))}},{key:"searchContrats",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr(t,a,n,r);case 2:i=e.sent,n===K||n===H?this.setState({contrats:Object(tt.a)(i.data.content),totalItems:i.data.numberOfElements}):n===W&&this.setState({contrats:Object(tt.a)(i.data.content),totalItems:i.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"getTypeAvenants",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn();case 2:t=e.sent,this.setState({typesAvenant:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updatedContrat",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(t,a);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updatedContratStatus",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(t,a);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.visible,i=a.visibled,l={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:14}}};return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des contrats"}),r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(kr,{placeholder:"Entrez le text de recherche",addonBefore:this.selectBefore,onSearch:function(t){return e.search(t)},enterButton:!0,style:{width:600}})),r.a.createElement(Je.a,{bordered:!0,size:"middle",columns:this.columns,dataSource:this.state.contrats,pagination:{onChange:this.onPaginationChange,pageSize:5,total:this.state.totalItems}}),r.a.createElement(fn.a,{visible:n,title:"Ajouter Avenant",onOk:this.handleSubmit,onCancel:this.handleCancel,afterClose:this.handleClose,style:{top:20},width:"880px",footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCancel,className:"not-rounded"},"Fermer")]},r.a.createElement(He.a,l,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Liste des avenants "},t("avenants",{rules:[{message:"Please input the title of collection!"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.handleChange},this.state.typesAvenant.map(function(e){return r.a.createElement(Sr,{key:e.id,value:e.id,label:e.code},e.libelle)})))))),this.state.Avenantchoisi)),r.a.createElement(fn.a,{visible:i,title:"Veuillez saisir les informations de la prestation",onOk:this.handleSubmited,onCancel:this.handleCanceled,afterClose:this.handleClosed,style:{top:20},width:"900px",footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCanceled,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"back",type:"primary",onClick:this.handleSubmited,className:"not-rounded"},"Enregistrer")]},r.a.createElement(He.a,l,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:16,offset:6},r.a.createElement(He.a.Item,null,t("typePrestation")(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez ",onChange:this.handleChanged},r.a.createElement(Sr,{value:"Restitution",label:"restitution"},"Restitution"),r.a.createElement(Sr,{value:"Sinistre",label:"sinistre"},"Sinistre")))))),this.state.sinistre?r.a.createElement("div",null,r.a.createElement("h3",null," AJOUT SINISTRE"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date Cr\xe9ation"},t("dateCreation",{initialValue:Kt()(this.state.dateCreation,"DD-MM-YYYY")})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Nature Sinistre"},t("natureSinistre")(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez ",style:{width:"60%"}},r.a.createElement(Sr,{value:"D\xe9c\xe8s",label:"deces"},"D\xe9c\xe8s"),r.a.createElement(Sr,{value:"INVALIDITE TOTALE ET DEFINITIVE",label:"ITD"},"INVALIDITE TOTALE ET DEFINITIVE")))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date de survenance sinistre"},t("dateSurvenanceSinistre")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date d\xe9claration sinistre"},t("dateDeclarationSinistre")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}})))))):null,this.state.restitution?r.a.createElement("div",null,r.a.createElement("h3",null," AJOUT restitution"),r.a.createElement(o.a,null)):null)))}}]),t}(n.Component),Tr=He.a.create()(jr);function Ar(){return localStorage.getItem(G)?ae({url:L+"/private/partenaires?direction=asc&page=0&sort=code",method:"GET"}):Promise.reject("No access token set.")}function Pr(e){return localStorage.getItem(G)?ae({url:L+"/private/partenaire/code/"+e,method:"GET"}):Promise.reject("No access token set.")}var Dr=$e.a.Option,Fr=rt.a.Title,wr="",Mr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChangeed=function(e){a.updatePrestationStatut(wr,e)},a.handleRecord=function(e){wr=e.id},a.handlePartnerChange=function(e){var t=Object(tt.a)(a.state.produits);a.setState({produitPartenaire:t.filter(function(t){return t.partenaire.id===e.key})})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll()},a.onClickSearch=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){var n=new Date,r={libelle:"Ordre de ch\xe8que sup "+n,reglementType:"Virement",dateStatut:n};e||("Honoraire"===t.nature.key?a.ajouterReglementHonoraire(t.produit.key,t.nature.label,r):(a.ajouterReglement(t.produit.key,t.nature.label,r),a.getAllReglement()))})},a.state={partenaires:[],produits:[],disable:!1,produitPartenaire:[],add:!1,reglement:[]},a.columns=[{title:"Nom du fichier",dataIndex:"nomFichier",key:"nomFichier"},{title:"Libelle",dataIndex:"libelle",key:"libelle"},{title:"Type reglement",dataIndex:"reglementType",key:"reglementType"},{title:"Statut",dataIndex:"statut",render:function(e,t){return r.a.createElement("span",null,r.a.createElement($e.a,{placeholder:"Please select",onChange:a.handleChangeed,style:{width:"100%"},defaultValue:e},r.a.createElement(Dr,{value:"Valider",onClick:function(){return a.handleRecord(t)}},"Valider"),r.a.createElement(Dr,{value:"Supprimer",onClick:function(){return a.handleRecord(t)}},"Supprimer")))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getpropreties()}},{key:"getpropreties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:return t=e.sent,e.next=5,Wa();case 5:a=e.sent,this.setState({partenaires:t.data.content,produits:a.data.content});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllReglement",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/reglements?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,this.setState({reglement:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ajouterReglement",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yn(t,a,n);case 3:200===e.sent.status&&this.setState({add:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),500===e.t0.response.status&&u.a.error({message:"Aucune prestation avec le statut \xc0 signer."});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"ajouterReglementHonoraire",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=t,i=a,l=n,localStorage.getItem(G)?ae({url:L+"/private/reglementHonoraire/"+r+"/"+i,data:l,method:"POST"}):Promise.reject("No access token set.");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),500===e.t0.response.status&&u.a.error({message:"Aucun honoraire avec le statut \xc0 signer."});case 8:case"end":return e.stop()}var r,i,l},e,null,[[0,5]])}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updatePrestationStatut",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(t,a);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:4}}};return r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(Fr,{style:{marginBottom:"25px"},level:4},"RECHERCHE DES PRESTATIONS"),r.a.createElement(o.a,null),r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(Fr,{style:{marginBottom:"25px"},level:4,underline:!0},"Crit\xe9res de Recherche :"),r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSubmit,ref:function(t){e.form=t},hideRequiredMark:!0}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Interm\xe9diaire ",hasFeedback:!0},t("partenaire",{valuePropName:"selected",rules:[{required:!0,message:"Veuillez selectionner"}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",onChange:this.handlePartnerChange,labelInValue:!0},this.state.partenaires.map(function(e){return r.a.createElement(Dr,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)})))),r.a.createElement(He.a.Item,{label:"Produit "},t("produit",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",labelInValue:!0},this.state.produitPartenaire.map(function(e){return r.a.createElement(Dr,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:1}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Nature "},t("nature",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",labelInValue:!0},r.a.createElement(Dr,{value:"Sinistre",label:"Sinistre"},"Sinistre"),r.a.createElement(Dr,{value:"Restitution",label:"Restitution"},"Restitution"),r.a.createElement(Dr,{value:"Honoraire",label:"Honoraire"},"Honoraire")))),r.a.createElement(He.a.Item,a,r.a.createElement(fe.a,{style:{margin:"10px"},type:"primary",htmlType:"submit",onClick:this.onClickSearch,className:"not-rounded"},r.a.createElement(w.a,{type:"file-add",theme:"filled"}),"G\xe9n\xe9rer ordre de virement"),r.a.createElement(fe.a,{style:{margin:"10px"},type:"default",onClick:this.onClickSearch,className:"not-rounded"},r.a.createElement(w.a,{type:"file-add",theme:"twoTone"}),"G\xe9n\xe9rer fichier ch\xe8que")))))),this.state.add?r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,size:"small",bordered:!0,dataSource:this.state.reglement,pagination:!1}):null)}}]),t}(n.Component),Nr=He.a.create()(Mr),Rr=(a(113),a(75)),qr=a.n(Rr),Vr=gn.a.Panel,zr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(ai.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(Vr,{header:"Contrat",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"N\xb0 contrat : ",t.state.numeroContrat)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- N\xb0 de contrat")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.numeroContrat)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- N\xb0 dossier de financement")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.numeroDossierFinancement))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date d'effet")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.dateEffet)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date d'\xe9cheance")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.dateEcheance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"-N\xb0 Simulataion")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.numeroSimulation)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- N\xb0 de titre foncier")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.numeroTitreFoncier))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- R\xe9duction")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.reduction)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- P\xe9riodicit\xe9")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.periodicite.libelle))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Situation risque")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.situationRisque)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Superficie")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.superficie))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Valeur du Contenu")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.valeurContenu)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Type de batiment")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.typeBatiment))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Prime nette")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.primeNette)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Prime Evcat")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.primeEvcat))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Prime HT")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.primeHT)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Prime TTC")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.primeTTC))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Prorata HT")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.prorata)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Prorata TTC")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.prorataTTC))))))))})}}]),t}(n.Component),Yr=gn.a.Panel,Br=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(ai.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(Yr,{header:"Souscripteur",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"CIN : ",t.state.souscripteur.cin)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.nom)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Pr\xe9nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.prenom))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- CIN")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.cin)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date naissance")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.dateNaissance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Situation familiale")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.situationFamiliale)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Profession")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.profession))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nationalit\xe9")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.nationalite)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Matricule")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.matricule))))),r.a.createElement(Yr,{header:"Assur\xe9",key:"2",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"CIN : ",t.state.assure.cin)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.nom)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Pr\xe9nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.prenom))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- CIN")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.cin)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date naissance")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.dateNaissance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Situation familiale")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.situationFamiliale)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Profession")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.profession))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nationalit\xe9")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.nationalite)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Matricule")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.matricule))))))))})}}]),t}(n.Component),Lr=gn.a.Panel,Gr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(ai.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(Lr,{header:"Produit",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"Libelle : ",t.state.produitMrb.libelle)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Libelle")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produitMrb.libelle)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Code")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produitMrb.code))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Frais de gestion")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produitMrb.fraisGestion)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- TVA frais de gestion")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produitMrb.tvaFraisGestion))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- D\xe9lai prescription")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produitMrb.delaiPrescription)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- D\xe9lai prescription sans souscription")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produitMrb.delaiPrescriptionSansSouscription))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nature Assur\xe9")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produitMrb.natureAssure)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nature du bien assur\xe9")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produitMrb.natureBienAssure))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant maximum de garantie")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produitMrb.montantMaximumGarantie)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Taux taxe")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produitMrb.tauxTaxe))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nature du participant")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produitMrb.natureParticipant))))))))})}}]),t}(n.Component);function Ur(){return localStorage.getItem(G)?ae({url:L+"/private/getAllProductMrb?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function Hr(e,t){return localStorage.getItem(G)?ae({url:L+"/private/updateProductMrb/"+e,data:t,method:"PUT"}):Promise.reject("No access token set.")}function Kr(e,t,a){return localStorage.getItem(G)?ae({url:L+"/private/tarrificationMrb?valeur="+e+"&nature="+t+"&produit="+a,method:"GET"}):Promise.reject("No access token set.")}var Wr=$e.a.Option,$r=I.a.TextArea,_r="",Jr="",Qr="",Xr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChangeed=function(e){Qr=e,"A_signer"===e?a.setState({visible:!0}):"ANNULER"===e&&a.setState({visibled:!0})},a.handleOk=function(){a.setStatuts(Jr,Qr,{motif:""}),a.setState({visible:!1})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={motif:t.motif};a.setStatuts(Jr,Qr,n),a.setState({visibled:!1})}})},a.handleCancel=function(){a.setState({visible:!1})},a.getSinistresMrb=function(e){var t;(t=e,localStorage.getItem(G)?ae({url:L+"/private/getSinistreMrb/"+t,method:"GET"}):Promise.reject("No access token set.")).then(function(e){var t=[];e.data.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t}),void 0===a.state.data[0]||a.setState({remplie:a.state.data[0].status})})},a.handleRecord=function(e){Jr=e.id},a.handleChange=function(e){a.setState({dataSinistre:e}),a.setState({add:!0,keyRecord:e.id},function(){a.props.form.setFieldsValue({dateCreation:Kt()(e.creationDate,"DD/MM/YYYY "),numeroSinistre:e.numeroSinistre,dateDeclarationSinistre:Kt()(e.dateDeclarationSinistre,"DD/MM/YYYY"),dateSurvenance:Kt()(e.dateSurvenance,"DD/MM/YYYY"),sinistreDeclare:e.sinistreDeclare,documentDeclaration:e.documentDeclaration,documentConstatation:e.documentConstatation,numeroDocumentConstatation:e.numeroDocumentConstatation,circonstance:e.circonstance,entiteReception:e.entiteReception,referenceIntermediaire:e.referenceIntermediaire,villeSurvenance:e.villeSurvenance,province:e.province,commune:e.commune,cause:e.cause,lieuSinistre:e.lieuSinistre,description:e.description,typeSinistre:e.natureSinistre})})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(console.log("values",t),!e){var n={dateSurvenance:t.dateSurvenance,dateDeclarationSinistre:t.dateDeclarationSinistre,numeroSinistre:t.numeroSinistre,description:t.description,lieuSinistre:t.lieuSinistre,sinistreDeclare:t.sinistreDeclare,natureSinistre:t.typeSinistre,documentDeclaration:t.documentDeclaration,documentConstatation:t.documentConstatation,numeroDocumentConstatation:t.numeroDocumentConstatation,dateReceptionDoc:t.dateReceptionDoc,entiteReception:t.entiteReception,referenceIntermediaire:t.referenceIntermediaire,villeSurvenance:t.villeSurvenance,province:t.province,commune:t.commune,cause:t.cause,circonstance:t.circonstance,remplie:!0};a.setState({dataSinistre:Object(at.a)({},a.state.dataSinistre),values:t}),a.updatePrestationSinistres(n,a.state.keyRecord),console.log("datasinistre",a.state.dataSinistre),a.setState({remplie:!0})}})},a.onChangeDateRecDocument=function(e){console.log(e),a.setState({dateReceptionDoc:e})},a.handleDelete=function(e){a.deletePrestationSinistre(e);var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.key!==e})})},a.state={expandIconPosition:"left",data:[],add:!1,remplie:"",visible:!1,visibled:!1,exclusions:[],pieceJointe:[],keyRecord:"",dataSinistre:[],sinistreInfo:{}},a.columns=[{title:"Num\xe9ro de sinistre",dataIndex:"numeroSinistre",key:"numeroSinistre",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px"}},e))}},{title:"Date de survenance",dataIndex:"dateSurvenance",key:"dateServenance"},{title:"date d\xe9claration sinistre",dataIndex:"dateDeclarationSinistre",key:"dateDeclarationSinistre"},{title:"Statut",dataIndex:"status",render:function(e,t){return r.a.createElement("span",null,r.a.createElement($e.a,{placeholder:"Please select",onChange:a.handleChangeed,style:{width:"100%"},defaultValue:e},r.a.createElement(Wr,{value:"EN_COURS",onClick:function(){return a.handleRecord(t)}},"EN COURS"),r.a.createElement(Wr,{value:"A_signer",onClick:function(){return a.handleRecord(t)}},"\xc0 SIGNER"),r.a.createElement(Wr,{value:"ANNULER",onClick:function(){return a.handleRecord(t)}},"ANNULER")))}}],a.columns1=[{title:"Num\xe9ro de sinistre",dataIndex:"numeroSinistre",key:"numeroSinistre",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px"}},e))}},{title:"Date de survenance",dataIndex:"dateSurvenance",key:"dateServenance"},{title:"date d\xe9claration sinistre",dataIndex:"dateDeclarationSinistre",key:"dateDeclarationSinistre"},{title:"Statut",dataIndex:"status",key:"statut"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getSinistresMrb(_r)}},{key:"recupereDataOfSinistreMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,localStorage.getItem(G)?ae({url:L+"/private/recupereDataSinistreMrb",data:n,method:"POST"}):Promise.reject("No access token set.");case 2:a=e.sent,console.log("response",a.data);case 4:case"end":return e.stop()}var n},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updatePrestationSinistres",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r,i,l,s;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o=t,c=a,localStorage.getItem(G)?ae({url:L+"/private/updateSinistreMrb/"+c,method:"PUT",data:o}):Promise.reject("No access token set.");case 2:n=e.sent,console.log("body",t),(r=[]).push(n.data),this.setState({data:r}),this.setState({dataSinistre:this.state.data}),i={},l={},null!==this.state.dataSinistre[0].contratMrb.pointVente&&(i={codeCaps:this.state.dataSinistre[0].contratMrb.pointVente.codeCaps,codeSite:this.state.dataSinistre[0].contratMrb.pointVente.codeInterne,nature:this.state.dataSinistre[0].contratMrb.pointVente.typePointVente.libelle}),this.state.dataSinistre[0].contratMrb.contratGarantie.forEach(function(e){l={ganranties:{capital:e.capital,franchise:e.franchise,libelle:e.garantieMrb.libelle}}}),{},s=Object(at.a)({},l,i,{nomVictime:this.state.dataSinistre[0].contratMrb.assure.nom,prenomVictime:this.state.dataSinistre[0].contratMrb.assure.prenom,dateNaissanceVictime:this.state.dataSinistre[0].contratMrb.assure.dateNaissanceVictime,cinVictime:this.state.dataSinistre[0].contratMrb.assure.cin,numSocietaire:this.state.dataSinistre[0].contratMrb.souscripteur.compteTakaful,cinSociataire:this.state.dataSinistre[0].contratMrb.souscripteur.cin,villeSocietaire:this.state.dataSinistre[0].contratMrb.souscripteur.adressVille,adresse:this.state.dataSinistre[0].contratMrb.souscripteur.adressNumero+" "+this.state.dataSinistre[0].contratMrb.souscripteur.adressVois+" "+this.state.dataSinistre[0].contratMrb.souscripteur.adressVille,telephoneSocietaire:this.state.dataSinistre[0].contratMrb.souscripteur.numeroDeTelephone,periodicite:this.state.dataSinistre[0].contratMrb.periodicite.libelle,dateEffet:Kt()(this.state.dataSinistre[0].contratMrb.dateEffet).format("DD/MM/YYYY"),dateEcheance:Kt()(this.state.dataSinistre[0].contratMrb.dateEcheance).format("DD/MM/YYYY"),police:this.state.dataSinistre[0].contratMrb.numeroContrat,dateSurvenance:Kt()(t.dateSurvenance).format("DD/MM/YYYY"),dateDeclarationSinistre:Kt()(t.dateDeclarationSinistre).format("DD/MM/YYYY"),sinistreDeclare:t.sinistreDeclare,documentDeclaration:this.state.dataSinistre[0].documentDeclaration,documentConstatation:t.documentConstatation,numeroDocumentConstatation:this.state.dataSinistre[0].numeroDocumentConstatation,dateReceptionDoc:Kt()(t.dateReceptionDoc).format("DD/MM/YYYY"),entiteReception:this.state.dataSinistre[0].entiteReception,natureSinistre:this.state.dataSinistre[0].natureSinistre,referenceIntermedaire:t.referenceIntermediaire,villeSurvenance:this.state.dataSinistre[0].villeSurvenance,province:this.state.dataSinistre[0].province,commune:this.state.dataSinistre[0].commune,lieuSinistre:this.state.dataSinistre[0].lieuSinistre,cause:this.state.dataSinistre[0].cause,circonstance:this.state.dataSinistre[0].circonstance,descriptionCauseCirconstance:t.description}),this.setState({sinistreInfo:Object(at.a)({},s)}),this.recupereDataOfSinistreMrb(this.state.sinistreInfo);case 16:case"end":return e.stop()}var o,c},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"deletePrestationSinistre",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn(t);case 3:200===e.sent.status&&u.a.success({message:"Sinistre annul\xe9 !"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Un probl\xe8me est survenu. Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={labelCol:{span:11},wrapperCol:{span:12}},a={labelCol:{span:10},wrapperCol:{span:14}},n=this.props.form.getFieldDecorator,i=this.state.visibled;return r.a.createElement(ai.Consumer,null,function(l){return _r=l.state.id,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(fn.a,{visible:i,title:"Motif d'annulation",onOk:e.handleSubmited,onCancel:e.handleCancel,width:"600px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleSubmited},"Valider")]},r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"Le motif "},n("motif",{rules:[{message:"Champs Obligatoire!"}]})(r.a.createElement($r,{rows:2}))))),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns1,dataSource:e.state.data,pagination:!1}),e.state.add?r.a.createElement("div",null,r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Donn\xe9es sinistre MRB")),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,{onSubmit:e.handleSubmit},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,Object.assign({label:"Date cr\xe9ation"},t),n("dateCreation")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"N\xb0 de sinistre"},t),n("numeroSinistre")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Date d\xe9claration sinistre"},t),n("dateDeclarationSinistre")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"Sinistre D\xe9clar\xe9"},t),n("sinistreDeclare")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(Wr,{value:"true",label:"true"},"true"),r.a.createElement(Wr,{value:"false",label:"NON"},"NON")))),r.a.createElement(He.a.Item,Object.assign({label:"Sinistre"},t),n("sinistre")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(Wr,{value:"Document 1",label:"Document 11"},"Document 11"),r.a.createElement(Wr,{value:"Document 2",label:"Document 22"},"Document 22")))),r.a.createElement(He.a.Item,Object.assign({label:"Document de D\xe9claration"},t),n("documentDeclaration")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(Wr,{value:"Document 1",label:"Document 1"},"Document 1"),r.a.createElement(Wr,{value:"Document 2",label:"Document 2"},"Document 2")))),r.a.createElement(He.a.Item,Object.assign({label:"Document de Constatation"},t),n("documentConstatation")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(Wr,{value:"Document 1",label:"Document 1"},"Document 1"),r.a.createElement(Wr,{value:"Document 2",label:"Document 2"},"Document 2")))),r.a.createElement(He.a.Item,Object.assign({label:"N\xb0 Document Constatation"},t),n("numeroDocumentConstatation")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Circonstances"},t),n("circonstance")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(Wr,{value:"Circonstance 1",label:"Circonstance 1"},"Circonstance 1"),r.a.createElement(Wr,{value:"Circonstance 2",label:"Circonstance 2"},"Circonstance 2"))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,Object.assign({label:"Date de survenanve sinistre"},t),n("dateSurvenance")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"Date de R\xe9ception Doc"},t),n("dateReceptionDoc")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"},onChange:e.onChangeDateRecDocument}))),r.a.createElement(He.a.Item,Object.assign({label:"Entit\xe9 Rec\xe9ption Doc"},t),n("entiteReception")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Nature sinistre"},t),n("typeSinistre",{initialValue:"Vol"})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez ",style:{width:"100%"}},r.a.createElement(Wr,{value:"Incendie",label:"Incendie"},"Incendie"),r.a.createElement(Wr,{value:"Vol",label:"Vol"},"Vol"),r.a.createElement(Wr,{value:"Bris des Glaces",label:"Bris des Glaces"},"Bris des Glaces"),r.a.createElement(Wr,{value:"D\xe9g\xe2ts des Eaux",label:"D\xe9g\xe2ts des Eaux"},"D\xe9g\xe2ts des Eaux")))),r.a.createElement(He.a.Item,Object.assign({label:"R\xe9f\xe9rence Interm\xe9diaire"},t),n("referenceIntermediaire")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Ville Survenance"},t),n("villeSurvenance")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Province"},t),n("province")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Commune"},t),n("commune")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Cause"},t),n("cause")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(Wr,{value:"Cause 1",label:"Cause 1"},"Cause 1"),r.a.createElement(Wr,{value:"Cause 2",label:"Cause 2"},"Cause 2"))))),r.a.createElement(xe.a,{span:16},r.a.createElement(He.a.Item,Object.assign({label:"Lieu Sinistre"},a),n("lieuSinistre")(r.a.createElement($r,{placeholder:"Saisir lieu sinistre",autoSize:{minRows:2,maxRows:6}})))),r.a.createElement(xe.a,{span:16},r.a.createElement(He.a.Item,Object.assign({label:"Description des causes et circonstances"},a),n("description")(r.a.createElement($r,{placeholder:"Saisir une description",autoSize:{minRows:2,maxRows:6}})))),r.a.createElement(xe.a,{span:4,offset:21},r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"not-rounded"},r.a.createElement(w.a,{type:"save"}),"Enregistrer")))))):null))})}}]),t}(n.Component),Zr=He.a.create()(Xr),ei=[{key:"general",tab:"G\xe9n\xe9ral"},{key:"contrat",tab:"Contrat"},{key:"produit",tab:"Produit"},{key:"sinistre",tab:"Sinistre"}],ti=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={key:"general",noTitleKey:"general",visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a.contentListNoTitle={general:r.a.createElement(Br,null),contrat:r.a.createElement(zr,null),produit:r.a.createElement(Gr,null),sinistre:r.a.createElement(Zr,null)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ai.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#top",type:"primary",shape:"circle",icon:"edit",size:"small",onClick:e.showDrawer},t.state.numeroContrat),r.a.createElement(ot.a,{title:r.a.createElement("div",{style:{fontSize:"18px"}},"D\xe9tails du Contrat : ",t.state.numeroContrat),width:1e3,onClose:e.onClose,visible:e.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(D.a,{tabList:ei,activeTabKey:e.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},e.contentListNoTitle[e.state.noTitleKey]),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{type:"primary",className:"not-rounded",onClick:e.onClose},"Fermer"))))}))}}]),t}(n.Component),ai=r.a.createContext(),ni=$e.a.Option,ri=I.a.Search,ii=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChangePrestation=function(e){a.setState({visibled:!0,dateEcheance:e.dateEcheance,keyRecord:e.id}),a.setState({visibled:!0,dateEcheance:e.dateEcheance})},a.handleChanged=function(e){"Restitution"===e?a.setState({restitution:!0,sinistre:!1}):"Sinistre"===e&&a.setState({sinistre:!0,restitution:!1})},a.selectBefore=r.a.createElement($e.a,{onChange:function(e){return a.setState({searchby:e})},defaultValue:"numContrat",style:{width:150}},r.a.createElement(ni,{value:"numContrat"},"N\xb0 de contrat"),r.a.createElement(ni,{value:"numeroSimulation"},"N\xb0 Simulation"),r.a.createElement(ni,{value:"nom"},"Nom Assur\xe9")),a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(console.log("values",t),console.log("this.state.dateEcheance",a.state.dateEcheance),!e){var n=Kt()(a.state.dateEcheance,"DD/MM/YYYY"),r=Kt()(t.dateSurvenanceSinistre,"DD/MM/YYYY"),i={contratId:a.state.keyRecord,dateDeclarationSinistre:t.dateDeclarationSinistre,dateSurvenance:t.dateSurvenanceSinistre,natureSinistre:t.natureSinistre,typePrestation:t.typePrestation};r<=n?(a.setState({visibled:!1}),console.log("requestmodel.dateDeclarationSinistre",i.dateDeclarationSinistre),(l=i,localStorage.getItem(G)?ae({url:L+"/private/addSinistreMrb",data:l,method:"POST"}):Promise.reject("No access token set.")).then(function(e){u.a.success({message:"TAKAFUL",description:"L'insertion est bien faite"}),a.props.record.history.push("/ConsultationsContratsMrb")}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})})):qr.a.warning("Contrat non couvert au date de sinistre")}var l})},a.handleCanceled=function(){a.props.form.setFieldsValue({typePrestation:" S\xe9l\xe9ctionnez "}),a.setState({visibled:!1})},a.handleClosed=function(){a.setState({sinistre:!1,restitution:!1})},a.search=function(e){a.setState({pagenumber:1,searchfor:e}),a.searchContratsMrb(a.state.pagenumber-1,2,a.state.searchby,e)},a.state={visibled:!1,dateEcheance:"",data:[],sinistre:!1,restitution:!1,keyRecord:"",dateCreation:new Date,searchby:"numeroContrat",searchfor:"",contrats:[],totalItems:0,pagenumber:1},a.columns=[{title:"N\xb0 Contrat",dataIndex:"numeroContrat",key:"numeroContrat",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(ai.Provider,{value:{state:t}},r.a.createElement(ti,null))))}},{title:"N\xb0 Simulation",dataIndex:"numeroSimulation",key:"numeroSimulation"},{title:"Nom assur\xe9",dataIndex:"assure.nom",key:"nomAssure"},{title:"Pr\xe9nom assur\xe9",dataIndex:"assure.prenom",key:"prenomAssure"},{title:"Produit",dataIndex:"produitMrb.libelle",key:"produit"},{title:"Type b\xe2timent",dataIndex:"typeBatiment",key:"typeBatiment"},{title:"Valeur b\xe2timent",dataIndex:"valeurContenu",key:"typeBatiment"},{title:"Adresse",dataIndex:"adresseBatiment",key:"adresse"},{title:"Action",dataIndex:"operation",width:"22%",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleChangePrestation(t)},size:"small",style:{borderRadius:"0px",width:"105px",backgroundColor:"#4ee289",borderColor:"#4ee289",textAlign:"left"}},r.a.createElement(w.a,{type:"plus-circle"})," Prestation"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllContrat()}},{key:"getAllContrat",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/contratMrbs?page=0&sort=numeroContrat&direction=asc",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,this.setState({data:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"searchContratsMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(t,a,n,r);case 2:i=e.sent,"numeroSimulation"===n||"nom"===n?this.setState({data:Object(tt.a)(i.data.content),totalItems:i.data.numberOfElements}):"numeroContrat"===n&&this.setState({data:Object(tt.a)(i.data.content),totalItems:i.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.visibled,n={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:14}}};return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des contrats MRB"}),r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(ri,{placeholder:"Entrez le text de recherche",addonBefore:this.selectBefore,onSearch:function(t){return e.search(t)},enterButton:!0,style:{width:600}})),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data}),r.a.createElement(fn.a,{visible:a,title:"Veuillez saisir les informations de la prestation",onOk:this.handleSubmited,onCancel:this.handleCanceled,afterClose:this.handleClosed,style:{top:20},width:"900px",footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCanceled,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleSubmited,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,n,r.a.createElement("div",null,r.a.createElement("h3",null," AJOUT SINISTRE"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date Cr\xe9ation"},t("dateCreation",{initialValue:Kt()(this.state.dateCreation,"DD-MM-YYYY")})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Nature Sinistre"},t("natureSinistre")(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez ",onChange:this.onSelectChange,style:{width:"60%"}},r.a.createElement(ni,{value:"Incendie",label:"Incendie"},"Incendie"),r.a.createElement(ni,{value:"Vol",label:"Vol"},"Vol"),r.a.createElement(ni,{value:"Bris des Glaces",label:"Bris des Glaces"},"Bris des Glaces"),r.a.createElement(ni,{value:"D\xe9g\xe2ts des Eaux",label:"D\xe9g\xe2ts des Eaux"},"D\xe9g\xe2ts des Eaux")))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date de survenance sinistre"},t("dateSurvenanceSinistre")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date d\xe9claration sinistre"},t("dateDeclarationSinistre")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}})))))))))}}]),t}(n.Component),li=He.a.create()(ii),si=(a(170),a(109)),oi=a.n(si),ci=(a(990),a(282)),ui=a.n(ci),mi=$e.a.Option,di=gn.a.Panel,pi=0,hi=Kt()(Kt()(),"DD-MM-YYYY").add(1,"days"),fi=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).searchPersonnemorale=function(e){var t=Object(tt.a)(a.state.personMoraleList);a.setState({souscripteur:t.filter(function(t){return t.patente===e.key})[0],patente:e.key})},a.searchPersonnePhysique=function(e){var t=Object(tt.a)(a.state.personlist);a.setState({souscripteur:t.filter(function(t){return t.cin===e.key})[0],cin:e.key})},a.onChangeSelect=function(e){var t=Object(tt.a)(a.state.personlist);a.setState({assurePresent:!0,assure:t.filter(function(t){return t.cin===e.key})[0]})},a.handlePersonphyCreationSousctipteur=function(e){a.setState({souscripteur:e,perphysique:!0,permorale:!1}),a.props.form.setFieldsValue({cin:{key:e.cin,label:e.cin}})},a.handlePersonMoraleCreationSousctipteur=function(e){a.setState({souscripteur:e,permorale:!0,perphysique:!1}),a.props.form.setFieldsValue({patente:{key:e.patente,label:e.patente}})},a.handlePersonphyCreationAssure=function(e){var t=Object(tt.a)(a.state.personlist);t.push(e),a.setState({assure:e,assurePresent:!0,personlist:Object(tt.a)(t)}),a.props.form.setFieldsValue({assure:{key:e.cin,label:e.cin}})},a.handlechange=function(e){a.setState({radio:e.target.value,souscripteur:"",assure:"",souscripteurIsAssure:"",disableSouscripteuretAssure:""}),a.clearAutocompleteFields()},a.onChange=function(e){"physique"===a.state.radio&&e.target.checked?(a.setState({assure:a.state.souscripteur,souscripteurIsAssure:!0,disableSouscripteuretAssure:!0}),a.props.form.setFieldsValue({assure:{key:a.state.souscripteur.cin,label:a.state.souscripteur.cin}})):a.setState({souscripteurIsAssure:!1,disableSouscripteuretAssure:!1})},a.showModal=function(){a.setState({visible:!0})},a.handleDelete=function(e){var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.keyMrb!==e})})},a.handleOk=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n={key:pi,nom:t.nom,prenom:t.prenom,masseSalarialeAnnuelle:t.masseSalarialeAnnuelle,taux:t.taux};a.state.data.push(n),pi+=1}),a.setState({visible:!1})},a.disabledDate=function(e){return e&&e<Kt()(Kt()().format("YYYY-MM-DD"),"YYYY-MM-DD").add(2,"days")},a.handleEffetDateChange=function(e){if(null!==a.state.dateEcheance){var t=a.state.dateEcheance;a.setState({dateEffet:e,nombreMois:t.diff(e,"months")})}},a.onChangeDuree=function(e){a.setState({nombreMois:e.target.value,dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value)}),a.props.form.setFieldsValue({dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value),nombreMois:parseInt(e.target.value)})},a.disabledDateEcheance=function(e){return e&&e<a.state.dateEffet.endOf("day")},a.handleEcheanceDateChange=function(e){var t=a.state.dateEffet;a.setState({dateEcheance:e,nombreMois:e.diff(t,"months")}),a.props.form.setFieldsValue({nombreMois:e.diff(t,"months")})},a.handleCancel=function(){a.setState({visible:!1})},a.handleClose=function(){a.props.form.setFieldsValue({nom:"",prenom:"",masseSalarialeAnnuelle:"",taux:""})},a.onChangeValeurBatiment=function(e){a.setState({valeurBatiment:e.target.value})},a.onChangeNatureBatiment=function(e){a.setState({natureBatiment:e})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n=[];t.exclusion.forEach(function(e){n.push({id:e})}),t.exclusion=[].concat(n);var r={numeroDossierFinancement:t.numeroDossierFinancement,typeBatiment:t.typeBatiment,adresseBatiment:t.adresseBatiment,numeroTitreFoncier:t.numeroTitreFoncier,superficie:t.superficie,description:t.description,dateEffet:a.state.dateEffet,dateEcheance:t.dateEcheance,souscripteur:{id:a.state.selectedCinSouscripteur},assure:{id:a.state.assure.id},produitMrb:{id:t.produit},valeurContenu:t.valeurContenu,situationRisque:t.situationRisque,reduction:t.reduction,exclusionsMrb:t.exclusion,domestique:a.state.data,periodicite:{id:t.periodicite},dureeContrat:t.dureeContrat,primeNette:a.state.primeNette,primeTTC:a.state.primeTTC,primeHT:a.state.primeHT,primeEvcat:a.state.primeEvcat,FESC:a.state.fsec,prorata:a.state.prorata,prorataTTC:a.state.prorataTTC};a.ajouterContratMrb(r)})},a.state={data:[],typeAvenant:[],visible:!1,produitMrb:[],valeurBatiment:0,natureBatiment:"",exclusionMrb:[],dateEffet:Kt()(Kt()(),"YYYY-MM-DD").add(1,"days"),dateEcheance:null,nombreMois:0,periodicite:[],radio:"morale",souscripteur:"",permorale:!1,perphysique:!1,sexe:[],assure:"",setuations:[],professions:[],vois:[],dataloaded:!1,personlist:[],personlistForAuto:[],selectedPatente:[],selectedCinSouscripteur:[],selectedCinAsuree:[],assurePresent:!1,typePersonneMoral:[],secteurActivite:[],personMoraleList:[],personMoraleListForAuto:[],souscripteurIsAssure:"",disableSouscripteuretAssure:"",primeHT:0,primeTTC:0,prorata:0,prorataTTC:0,primeEvcat:0,primeNette:0,fsec:0,dataSimulation:[]},a.handleChangeCinSouscripteur=a.handleChangeCinSouscripteur.bind(Object(b.a)(Object(b.a)(a))),a.clearAutocompleteFields=a.clearAutocompleteFields.bind(Object(b.a)(Object(b.a)(a))),a.columns=[{title:"Nom",dataIndex:"nom",key:"nom"},{title:"Pr\xe9nom",dataIndex:"prenom",key:"prenom"},{title:"Masse Salariale Annuelle",dataIndex:"masseSalarialeAnnuelle",key:"masseSalarialeAnnuelle"},{title:"Taux",dataIndex:"taux",key:"taux"},{title:"operation",dataIndex:"operation",render:function(e,t){return a.state.data.length>=1?r.a.createElement(Xe.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.key)}},r.a.createElement("a",{href:"#top"},"Supprimer")):null}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getProduitMrb(),this.getAllExclusionsMrb("MRB"),this.getPeriodicites(),this.getproprties()}},{key:"conditionParticuliereMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i=t,localStorage.getItem(G)?ae({url:L+"/private/cpMrb/pdf",method:"POST",data:i,responseType:"blob"}):Promise.reject("No access token set.");case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}var i},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTariffication",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(t,a);case 2:n=e.sent,this.setState({tarification:n.data});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n,r,i,l,s,o,c,u;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa();case 2:return t=e.sent,e.next=5,ea();case 5:return a=e.sent,e.next=8,Qt();case 8:return n=e.sent,e.next=11,Xt();case 11:return r=e.sent,e.next=14,Zt();case 14:return i=e.sent,e.next=17,Wt();case 17:return l=e.sent,e.next=20,_t();case 20:return s=e.sent,e.next=23,$t();case 23:o=e.sent,c=[],a.data.content.forEach(function(e){var t=e.cin;c.push(t)}),u=[],l.data.content.forEach(function(e){var t=e.patente;u.push(t)}),this.setState({personMoraleList:Object(tt.a)(l.data.content),sexe:Object(tt.a)(n.data),setuations:Object(tt.a)(r.data),vois:Object(tt.a)(t.data),dataloaded:!0,professions:Object(tt.a)(i.data.content),personlist:Object(tt.a)(a.data.content),personlistForAuto:[].concat(c),personMoraleListForAuto:[].concat(u),typePersonneMoral:Object(tt.a)(s.data),secteurActivite:Object(tt.a)(o.data.content)});case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeCinSouscripteur",value:function(e){var t=Object(tt.a)(this.state.personlist),a=t.filter(function(t){return t.cin===e.key})[0].id;this.setState({selectedCinSouscripteur:a}),this.props.form.setFieldsValue({adresseBatiment:t.filter(function(t){return t.cin===e.key})[0].adressComplete})}},{key:"clearAutocompleteFields",value:function(){this.props.form.setFieldsValue({patente:"",cin:"",cinAssure:"",numeroDossierFinancement:""})}},{key:"calculeAge",value:function(e){return Kt()().diff(Kt()(e),"years")}},{key:"getPeriodicites",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ajouterContratMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=t,localStorage.getItem(G)?ae({url:L+"/private/contratMrb",data:r,method:"POST"}):Promise.reject("No access token set.");case 3:200===(a=e.sent).status&&(n={numeroSouscription:a.data.numeroContrat,dateEcheance:a.data.dateEcheance,dateEffet:a.data.dateEffet,duree:a.data.dureeContrat,agence:a.data.produitMrb.partenaire.raisonSocial,raisonSocial:a.data.produitMrb.partenaire.raisonSocial,siegeSocial:a.data.produitMrb.partenaire.siegeSocial,typePartenaire:a.data.produitMrb.partenaire.typePartenaire,adresse:a.data.produitMrb.partenaire.siegeSocial,prenomSouscripteur:a.data.souscripteur.prenom,nomSouscripteur:a.data.souscripteur.nom,cinSouscripteur:a.data.souscripteur.cin,adresseSouscripteur:a.data.souscripteur.adressComplete,villeSouscripteur:a.data.souscripteur.adressVille,ribSouscripteur:a.data.souscripteur.rib,prenomAssure:a.data.assure.prenom,nomAssure:a.data.assure.nom,cinAssure:a.data.assure.cin,adresseAssure:a.data.assure.adressComplete,villeAssure:a.data.assure.adressVille,ribAssure:a.data.assure.rib,date:Kt()(new Date).format("DD-MM-YYYY"),numeroCompte:a.data.souscripteur.rib,typeBatiment:a.data.typeBatiment,adresseBatiment:a.data.adresseBatiment,numTitreFoncier:a.data.numeroTitreFoncier,superficie:a.data.superficie,caracteristique:a.data.description,taciteReconduction:!0,periodicite:a.data.periodicite.libelle},this.conditionParticuliereMrb(n),u.a.success({message:"la souscription est bien faiteee"})),this.props.record.history.push("/ConsultationsContratsMrb"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 11:case"end":return e.stop()}var r},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){if(t.valeurBatiment===this.state.valeurBatiment&&t.natureBatiment===this.state.natureBatiment||""!==this.state.valeurBatiment&&""!==this.state.natureBatiment&&null!==this.state.natureBatiment&&null!==this.state.valeurBatiment&&this.getTariffication(this.state.valeurBatiment,this.state.natureBatiment),t.tarification!==this.state.tarification){this.setState({primeNette:this.state.tarification.tauxContribution});var a=(8*this.state.tarification.tauxContribution/100).toFixed(2);this.setState({primeEvcat:a});var n=parseFloat(this.state.tarification.tauxContribution)+parseFloat(a);this.setState({primeHT:n});var r=(14*n/100).toFixed(2),i=(1*n/100).toFixed(2);this.setState({fsec:i});var l,s=parseFloat(n)+parseFloat(r)+parseFloat(i);this.setState({primeTTC:s}),hi.format("D")<=15?(l=(n*((13-Kt()().format("M"))/12)).toFixed(2),this.setState({prorata:l})):(l=(n*((12-Kt()().format("M"))/12)).toFixed(2),this.setState({prorata:l}));var o=(14*l/100).toFixed(2),c=parseFloat(o)+parseFloat(l);this.setState({prorataTTC:c}),this.setState({dataSimulation:[{key:"1",primeNette:this.state.tarification.tauxContribution,primeHT:n,primeEvcat:a,primeTTC:s.toFixed(2),prorata:l,prorataTTC:c.toFixed(2)}]})}}},{key:"getAllExclusionsMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:a=e.sent,this.setState({exclusionMrb:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getProduitMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ur();case 2:t=e.sent,this.setState({produitMrb:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.visible,a=Kt()().diff(Kt()(this.state.souscripteur.dateNaissance,"DD-MM-YYYY").format(),"years"),n={labelCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:6}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:15}}};return r.a.createElement("div",null,r.a.createElement(lt,{title:"Multirisques b\xe2timent"}),r.a.createElement(fn.a,{visible:t,title:"Dom\xe9stique Supl\xe9mentaire",onOk:this.handleOk,onCancel:this.handleCancel,afterClose:this.handleClose,footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCancel,className:"not-rounded"},"Annuler"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleOk,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,Object.assign({},n,{hideRequiredMark:!0}),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Nom "},e("nom")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,{label:"Pr\xe9nom "},e("prenom")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,{label:"Masse Salariale "},e("masseSalarialeAnnuelle")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,{label:"Taux "},e("taux")(r.a.createElement(I.a,{className:"not-rounded"})))))),r.a.createElement(He.a,Object.assign({},n,{hideRequiredMark:!0}),r.a.createElement(ye.a,{style:{border:"1px solid rgb(235, 237, 240)"}},r.a.createElement(ui.a,{title:"DEVIS",subTitle:"Etablissement devis"}),r.a.createElement(ye.a,null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:23,offset:1},r.a.createElement(o.a,{orientation:"left"},"Produit")),r.a.createElement(xe.a,{span:22,offset:1},r.a.createElement(He.a.Item,{label:"Produit "},e("produit",{valuePropName:"selected",rules:[{required:!0,message:"Veuillez selectionner"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez "},this.state.produitMrb.map(function(e){return r.a.createElement(mi,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))))),r.a.createElement(xe.a,{offset:1,span:1})),r.a.createElement(xe.a,{offset:1,span:23},r.a.createElement("div",{style:{minHeight:"200px"}},r.a.createElement(xe.a,null,r.a.createElement(o.a,{orientation:"left"},"Souscripteur/Assur\xe9")),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:8},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,e("radio",{rules:[{required:!1}],initialValue:this.state.radio})(r.a.createElement(Ut.a.Group,{style:{marginBottom:25},buttonStyle:"solid",defaultValue:this.state.radio,onChange:this.handlechange},r.a.createElement(Ut.a.Button,{value:"morale"},"Personne morale"),r.a.createElement(Ut.a.Button,{value:"physique"},"Personne physique"))))),r.a.createElement(xe.a,{span:24},"physique"===this.state.radio&&r.a.createElement(He.a.Item,{label:"CIN"},e("cin",{rules:[{required:!0,message:"CIN is required!"}]})(r.a.createElement(Yt.a,{disabled:this.state.disableSouscripteuretAssure,defaultActiveFirstOption:!0,size:"default",style:{width:200},dataSource:this.state.personlistForAuto,onSelect:this.searchPersonnePhysique,allowClear:!0,value:this.state.selectedCinSouscripteur,onChange:this.handleChangeCinSouscripteur,labelInValue:!0,placeholder:"CIN",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),"morale"===this.state.radio&&r.a.createElement(He.a.Item,{label:"Patente"},e("patente",{rules:[{required:!0,message:"patente is required!"}]})(r.a.createElement(Yt.a,{size:"default",className:"not-rounded",style:{width:182},dataSource:this.state.personMoraleListForAuto,onSelect:this.searchPersonnemorale,allowClear:!0,labelInValue:!0,placeholder:"Num\xe9ro de patente",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),r.a.createElement(He.a.Item,{style:{float:"right"}},this.state.dataloaded&&"physique"===this.state.radio&&r.a.createElement(da,{titre:"Cr\xe9ation d'un nouveau souscripteur physique",personCreation:this.handlePersonphyCreationSousctipteur,professions:this.state.professions,sexe:this.state.sexe,setuation:this.state.setuations,vois:this.state.vois}),this.state.dataloaded&&"morale"===this.state.radio&&r.a.createElement(va,{titre:"Cr\xe9ation d'un nouveau souscripteur morale",personCreation:this.handlePersonMoraleCreationSousctipteur,typePersonneMoral:this.state.typePersonneMoral,secteurActivite:this.state.secteurActivite,vois:this.state.vois})),"physique"===this.state.radio&&r.a.createElement(Rn.a,{style:{marginTop:"10px"},onChange:this.onChange,checked:this.state.souscripteurIsAssure,disabled:"physique"===!this.state.radio},"Le souscripteur est l'assur\xe9 lui m\xeame ?"),r.a.createElement(o.a,{style:{marginTop:"20px"}}))),r.a.createElement(xe.a,{offset:1,span:14},"physique"===this.state.radio&&""!==this.state.souscripteur&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations du souscripteur physique"},r.a.createElement(En.a.Item,{label:"Pr\xe9nom"},this.state.souscripteur.prenom),r.a.createElement(En.a.Item,{label:"Nom"},this.state.souscripteur.nom),r.a.createElement(En.a.Item,{label:"Date de naissance"},this.state.souscripteur.dateNaissance),r.a.createElement(En.a.Item,{label:"Age"},a," "),r.a.createElement(En.a.Item,{label:"CIN"},this.state.souscripteur.cin),r.a.createElement(En.a.Item,{label:"RIB"},this.state.souscripteur.rib),r.a.createElement(En.a.Item,{label:"Matricule"},this.state.souscripteur.matricule),r.a.createElement(En.a.Item,{label:"N\xb0 Tiers"},this.state.souscripteur.numTiers)),""===this.state.souscripteur&&r.a.createElement(oi.a,{description:"Merci de mentionner le num\xe9ro de patente ou cin",style:{margin:"3% auto",color:"rgba(0, 0, 0, 0.45)"}}),"morale"===this.state.radio&&""!==this.state.souscripteur&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations du souscripteur morale"},r.a.createElement(En.a.Item,{label:"Abb"},this.state.souscripteur.abb),r.a.createElement(En.a.Item,{label:"Raison sociale"},this.state.souscripteur.raisonSociale),r.a.createElement(En.a.Item,{label:"Patente"},this.state.souscripteur.patente),r.a.createElement(En.a.Item,{label:"Ice"},this.state.souscripteur.ice),r.a.createElement(En.a.Item,{label:"Code"},this.state.souscripteur.code))),r.a.createElement(xe.a,{offset:1,span:1}))),r.a.createElement("div",{style:{minHeight:"200px"}},r.a.createElement(ye.a,{style:{marginTop:"20px"}},r.a.createElement(lt,{level:4,title:"L'assur\xe9"}),r.a.createElement(xe.a,{span:8},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"L'assur\xe9"},e("cinAssure",{rules:[{required:!0,message:"assuree is required!"}]})(r.a.createElement(Yt.a,{disabled:this.state.disableSouscripteuretAssure&&"physique"===this.state.radio,size:"default",style:{width:182},dataSource:this.state.personlistForAuto,onSelect:this.onChangeSelect,allowClear:!0,labelInValue:!0,placeholder:"ajouter un assur\xe9",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),r.a.createElement(He.a.Item,{style:{float:"right"}},this.state.dataloaded&&r.a.createElement(da,{titre:"Cr\xe9ation d'un nouveau assur\xe9",personCreation:this.handlePersonphyCreationAssure,professions:this.state.professions,sexe:this.state.sexe,setuation:this.state.setuations,vois:this.state.vois}))),r.a.createElement(xe.a,{span:24})),r.a.createElement(xe.a,{offset:1,span:14},""!==this.state.assure&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations de l'assur\xe9"},r.a.createElement(En.a.Item,{label:"Pr\xe9nom"},this.state.assure.prenom),r.a.createElement(En.a.Item,{label:"Nom"},this.state.assure.nom),r.a.createElement(En.a.Item,{label:"Date de naissance"},this.state.assure.dateNaissance),r.a.createElement(En.a.Item,{label:"Age"},a," "),r.a.createElement(En.a.Item,{label:"CIN"},this.state.assure.cin),r.a.createElement(En.a.Item,{label:"Matricule"},this.state.assure.matricule)),""===this.state.assure&&r.a.createElement(oi.a,{description:"Merci de remplir la partie assure",style:{margin:"3% auto",color:"rgba(0, 0, 0, 0.45)"}})),r.a.createElement(xe.a,{offset:1,span:1})))),r.a.createElement(xe.a,{offset:1,span:1})),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:1},r.a.createElement(o.a,{orientation:"left"},"Periodicit\xe9")),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Date d'effet"},e("dateEffet",{valuePropName:"selected"})(r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY",style:{width:"100%"},disabledDate:this.disabledDate,defaultValue:this.state.dateEffet,onChange:this.handleEffetDateChange}))),r.a.createElement(He.a.Item,{label:"Dur\xe9e de la couverture"},e("dureeContrat",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"number-input",onChange:this.onChangeDuree,addonAfter:"Mois"})))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Date d'\xe9ch\xe9ance",hasFeedback:!0},e("dateEcheance",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date d'echeance"}]})(r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY",style:{width:"100%"},disabledDate:this.disabledDateEcheance,value:this.state.dateEcheance,onChange:this.handleEcheanceDateChange}))),r.a.createElement(He.a.Item,{label:"P\xe9riodicit\xe9"},e("periodicite",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez "},this.state.periodicite.map(function(e){return r.a.createElement(mi,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(o.a,null)),r.a.createElement(ye.a,{style:{border:"1px solid rgb(235, 237, 240)",marginTop:"3%"}},r.a.createElement(ui.a,{title:"Multirisques Habitation",style:{marginBottom:"3%"}}),r.a.createElement(xe.a,{offset:1,span:22},r.a.createElement(gn.a,{accordion:!0,style:{marginBottom:"30px",marginTop:"10px"}},r.a.createElement(di,{header:"Informations G\xe9n\xe9rales",key:"1"},r.a.createElement(xe.a,{span:22},r.a.createElement(o.a,{orientation:"left"},"Informations Principales")),r.a.createElement(xe.a,{span:13},r.a.createElement(He.a.Item,{label:"N\xb0 dossier de financement"},e("numeroDossierFinancement")(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Situation du Risque "},e("situationRisque")(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Adresse de B\xe2timent"},e("adresseBatiment")(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"N\xb0 du titre foncier"},e("numeroTitreFoncier")(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Cat\xe9gorie"},e("categorie")(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Nature de B\xe2timent"},e("typeBatiment")(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.onChangeNatureBatiment},r.a.createElement(mi,{value:"Appartement",label:"Appartement"},"Appartement"),r.a.createElement(mi,{value:"Maison",label:"Maison"},"Maison"),r.a.createElement(mi,{value:"Villa",label:"Villa"},"Villa"),r.a.createElement(mi,{value:"B\xe2timent",label:"B\xe2timent"},"B\xe2timent")))),r.a.createElement(He.a.Item,{label:"Valeur batiment"},e("valeurContenu")(r.a.createElement(I.a,{onChange:this.onChangeValeurBatiment}))),r.a.createElement(He.a.Item,{label:"Superficie"},e("superficie")(r.a.createElement(I.a,{addonAfter:"m\xb2"}))),r.a.createElement(He.a.Item,{label:"Description"},e("description")(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Type Propri\xe9t\xe9"},e("typePropriete")(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.handleChange},r.a.createElement(mi,{value:"Propri\xe9t\xe91",label:"Propri\xe9t\xe91"},"Propri\xe9t\xe91"),r.a.createElement(mi,{value:"Propri\xe9t\xe92",label:"Propri\xe9t\xe92"},"Propri\xe9t\xe92"))))),r.a.createElement(xe.a,{span:24}),r.a.createElement(xe.a,{span:22},r.a.createElement(o.a,{orientation:"left"},"Exclusion")),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Exclusion "},e("exclusion")(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez... ",mode:"multiple"},this.state.exclusionMrb.map(function(e){return r.a.createElement(mi,{key:e.id,value:e.id,label:e.exclusionNom},e.exclusionNom)}))))),r.a.createElement(xe.a,{span:22},r.a.createElement(o.a,{orientation:"left"},"R\xe9duction Mutuelle")),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"R\xe9duction "},e("reduction")(r.a.createElement(I.a,null))))),r.a.createElement(di,{header:"D\xe9tail du Risque",key:"2"},r.a.createElement(xe.a,{span:22},r.a.createElement(o.a,{orientation:"left"},"Dom\xe9stique Supl\xe9mentaire")),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data}),r.a.createElement(xe.a,{span:22},r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"primary",className:"not-rounded",onClick:this.showModal},r.a.createElement(w.a,{type:"plus"}),"Ajouter"),r.a.createElement(fe.a,{style:{marginLeft:8},className:"not-rounded"},r.a.createElement(w.a,{type:"sync"}),"Actualiser")))),r.a.createElement(di,{header:"Garanties",key:"3"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Garantie"),r.a.createElement("th",null,"Montant garantie"),r.a.createElement("th",null,"Franchise"),r.a.createElement("th",null,"Cotisation HT Annuelle"),r.a.createElement("th",null,"Cotisation HT Prorate"),r.a.createElement("th",null,"Taxe Prorate"),r.a.createElement("th",null,"TTC Prorate")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("h3",null,"Garanties de base")),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(Rn.a,{defaultChecked:!0}),"Vol"),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("volCapital")(r.a.createElement(I.a,null)))),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("volFranchaise")(r.a.createElement(I.a,null)))),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(Rn.a,{defaultChecked:!0}),"Incendie"),r.a.createElement("td",null,r.a.createElement(He.a.Item,null,e("incendieCapital")(r.a.createElement(I.a,null)))),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("incendieFranchaise")(r.a.createElement(I.a,null)))),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(Rn.a,{defaultChecked:!0}),"EVCAT"),r.a.createElement("td",null,r.a.createElement(He.a.Item,null,e("evcatCapital")(r.a.createElement(I.a,null)))),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("evcatFranchaise")(r.a.createElement(I.a,null)))),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(Rn.a,{defaultChecked:!0}),"Bris des Glaces"),r.a.createElement("td",null,r.a.createElement(He.a.Item,null,e("brisGlaceCapital")(r.a.createElement(I.a,null)))),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("brisGlaceFranchaise")(r.a.createElement(I.a,null)))),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(Rn.a,{defaultChecked:!0}),"D\xe9g\xe2ts des Eaux"),r.a.createElement("td",null,r.a.createElement(He.a.Item,null,e("degatEauCapital")(r.a.createElement(I.a,null)))),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("degatEauFranchaise")(r.a.createElement(I.a,null)))),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null,"Garanties optionnelles")),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(Rn.a,{defaultChecked:!0}),"RC Chef de Famille"),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("RcCapital")(r.a.createElement(I.a,null)))),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("RcFranchaise")(r.a.createElement(I.a,null)))),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(Rn.a,null),"AT Bonne"),r.a.createElement("td",null,r.a.createElement(He.a.Item,null,e("AtBonneCapital")(r.a.createElement(I.a,null)))),r.a.createElement("td",null," ",r.a.createElement(He.a.Item,null,e("AtBonneFranchaise")(r.a.createElement(I.a,null)))),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"),r.a.createElement("td",null,"0.00"))))),r.a.createElement(ye.a,{gutter:16,style:{padding:"20px"}},r.a.createElement(Je.a,{className:"table-simulation simulation-mrb",columns:[{title:"Prime Nette (DH)",dataIndex:"primeNette"},{title:"Prime HT (DH)",dataIndex:"primeHT"},{title:"Prime EVCAT (DH)",dataIndex:"primeEvcat"},{title:"Prime TTC(DH)",dataIndex:"primeTTC"},{title:"Prorata HT (DH)",dataIndex:"prorata"},{title:"Prorata TTC (DH)",dataIndex:"prorataTTC"}],dataSource:this.state.dataSimulation,pagination:!1,align:"center",size:"middle"})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("div",{style:{float:"right",marginTop:"3%"}},r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"not-rounded rech-btn",style:{width:"200px"},onClick:this.handleSubmit},"Enregistrer")))))))}}]),t}(n.Component),bi=He.a.create()(fi),Ei=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:""},a.columns=[{title:"Nature du bien assur\xe9",dataIndex:"natureBienAssure",key:"natureBienAssure"},{title:"Valeur Min",dataIndex:"valeurMin",key:"valeurMin"},{title:"Valeur Max",dataIndex:"valeurMax",key:"valeurMax"},{title:"Age Min ",dataIndex:"ageMin",key:"ageMin"},{title:"Age Max ",dataIndex:"ageMax",key:"ageMax"},{title:"Taux de contribution ",dataIndex:"tauxContribution",key:"tauxContribution"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleReload",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this,t={labelCol:{span:10},wrapperCol:{span:12}};return r.a.createElement("div",{className:"person"},r.a.createElement(vi.Consumer,null,function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"D\xe9tails du produit : ",a.state.libelle),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.02)",marginBottom:"30px",marginTop:"10px"}},r.a.createElement(xe.a,{span:22,offset:1},r.a.createElement("h3",null,"Informations G\xe9n\xe9rale"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}})),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,t,r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Code"},r.a.createElement(I.a,{value:a.state.code})),r.a.createElement(He.a.Item,{label:"Frais de gestion"},r.a.createElement(I.a,{value:a.state.fraisGestion})),r.a.createElement(He.a.Item,{label:"Mantant max de garantie"},r.a.createElement(I.a,{value:a.state.montantMaximumGarantie})),r.a.createElement(He.a.Item,{label:"Partenaire"},r.a.createElement(I.a,{value:a.state.partenaire.raisonSocial}))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"libelle"},r.a.createElement(I.a,{value:a.state.libelle})),r.a.createElement(He.a.Item,{label:"TVA frais de gestion"},r.a.createElement(I.a,{value:a.state.tvaFraisGestion})),r.a.createElement(He.a.Item,{label:"Taux taxe"},r.a.createElement(I.a,{value:a.state.tauxTaxe}))),r.a.createElement(xe.a,{span:23,offset:1},r.a.createElement("label",null,r.a.createElement(He.a.Item,{label:" D\xe9lai de prescription de l\u2019offre EART"}))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"En l\u2019attente du retour client"},r.a.createElement(I.a,{value:a.state.delaiPrescription}))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Client sans souscription"},r.a.createElement(I.a,{value:a.state.delaiPrescriptionSansSouscription}))),r.a.createElement(xe.a,{span:22,offset:1},r.a.createElement("h3",null,"Assur\xe9/Participant"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}})),r.a.createElement(xe.a,{span:8,offset:1},r.a.createElement(He.a.Item,{label:"Nature du participant"},r.a.createElement(I.a,{value:a.state.natureParticipant}))),r.a.createElement(xe.a,{span:7},r.a.createElement(He.a.Item,{label:"Nature d'assur\xe9"},r.a.createElement(I.a,{value:a.state.natureAssure}))),r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,null,r.a.createElement(Rn.a,{checked:a.state.assureDiffParticipant},"Assur\xe9 diff\xe9rent du participant"))),r.a.createElement(xe.a,{span:22,offset:1},r.a.createElement("h3",null,"Franchise"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}})),r.a.createElement(xe.a,{span:8,offset:1},r.a.createElement(He.a.Item,null,r.a.createElement(Rn.a,{checked:a.state.franchiseIncendie},"Franchise incendie")),r.a.createElement(He.a.Item,null,r.a.createElement(Rn.a,{checked:a.state.franchiseBrisGlace},"Franchise bris de glace")),r.a.createElement(He.a.Item,null,r.a.createElement(Rn.a,{checked:a.state.franchiseDegatEaux},"Franchise d\xe9g\xe2t des eaux")),r.a.createElement(He.a.Item,null,r.a.createElement(Rn.a,{checked:a.state.franchiseCatastropheNaturelles},"Franchise catastrophes naturelles"))),r.a.createElement(xe.a,{span:22,offset:1},r.a.createElement("h3",null,"Tarification"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}})),r.a.createElement(xe.a,{span:22,offset:1},r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:a.record,pagination:{defaultCurrent:1,defaultPageSize:5}}))))))}),r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:function(){return e.handleReload()}},r.a.createElement(w.a,{type:"arrow-left"}),"Retour"))}}]),t}(n.Component),vi=r.a.createContext(),gi=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){a.setState({record:e,isEdited:!0}),a.getTarificationMrb(e.id)},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.onClose=function(){a.setState({isEdited:!1})},a.state={data:[],isEdited:!1,tarificationMrb:[]},a.columns=[Object(at.a)({title:"Code",dataIndex:"code",key:"code"},Et("code","Code",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Libelle",dataIndex:"libelle",key:"libelle"},Et("libelle","Libelle",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Date cr\xe9ation",dataIndex:"creationDate",key:"creation_date"},Et("creationDate","Date creation",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Nature Assur\xe9 ",dataIndex:"natureAssure",key:"natureAssure"},Et("natureAssure","natureAssure",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Nature du participant",dataIndex:"natureParticipant",key:"natureParticipant"},Et("natureParticipant","natureParticipant",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(z.a,{to:{pathname:"/ModifieProduitMRB",state:{record:t}}},"Modifier"),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return a.handleClick(t)}},"D\xe9tails"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getProductMrb()}},{key:"getProductMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ur();case 2:t=e.sent,this.setState({data:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTarificationMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,localStorage.getItem(G)?ae({url:L+"/private/tarificationsMrb/"+n+"?page=0",method:"GET"}):Promise.reject("No access token set.");case 2:a=e.sent,this.setState({tarificationMrb:a.data.content});case 4:case"end":return e.stop()}var n},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(vi.Provider,{value:{state:this.state.record,record:this.state.tarificationMrb}},this.state.isEdited?r.a.createElement(Ei,null):r.a.createElement("div",null,r.a.createElement(lt,{title:"Param\xe9trage produit MRB"}),r.a.createElement(fe.a,{type:"primary",className:"add-button"},r.a.createElement(z.a,{to:"/AjoutProduit"},r.a.createElement(w.a,{type:"plus"})," Nouveau produit MRB")),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}))))}}]),t}(n.Component),yi=He.a.create()(gi),Ci=(a(999),He.a.Item),xi=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.validateTest=function(e){return e.length<Q?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(Q," characters needed.)")}:e.length>Z?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(Z," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.state={abreviation:{value:""},libelle:{value:""}},a.handleInputChange=a.handleInputChange.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(jt.a)({},n,Object(at.a)({value:r},t(r))))}},{key:"ajouterTypeAvenant",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae({url:L+"/private/TypeAvenant/add",method:"POST",data:t});case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"La cr\xe9ation est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"Ce type avenant existe d\xe9ja"===e.t0.response.data.message?u.a.error({message:"Ce type avenant existe d\xe9ja."}):u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault();var t={code:this.state.abreviation.value,libelle:this.state.libelle.value};this.ajouterTypeAvenant(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer,style:{borderRadius:"0px"}},r.a.createElement(w.a,{type:"plus"})," Nouveau Type Avenant"),r.a.createElement(ot.a,{title:"",onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{onSubmit:this.handleSubmit,className:"signup-form"},r.a.createElement(Ci,{label:"Abr\xe9viation",validateStatus:this.state.abreviation.validateStatus},r.a.createElement(I.a,{size:"default",name:"abreviation",autoComplete:"off",className:"not-rounded",placeholder:"Code",value:this.state.abreviation.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})),r.a.createElement(Ci,{label:"Libelle",hasFeedback:!0,validateStatus:this.state.libelle.validateStatus},r.a.createElement(I.a,{size:"default",name:"libelle",className:"not-rounded",autoComplete:"off",placeholder:"Libelle",value:this.state.libelle.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),Si=r.a.createContext(),ki=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateAvenants=function(e,t){(function(e,t){return localStorage.getItem(G)?ae({url:L+"/private/typeavenant/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")})(e,t).then(function(e){}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrecte. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.rechercheAvenants=function(){(localStorage.getItem(G)?ae({url:L+"/private/TypeAvenant?direction=asc&limit=4&page=0&sort=code",method:"GET"}):Promise.reject("No access token set.")).then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrecte. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.state={data:[],editingKey:"",searchText:"",searchedColumn:""},a.columns=[Object(at.a)({title:"Abr\xe9viation",dataIndex:"code",key:"code",width:"40%",editable:!0},Et("code","code",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Libelle",dataIndex:"libelle",key:"libelle",width:"40%",editable:!0},Et("libelle","libelle",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(Si.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Fermer"))):r.a.createElement("span",null,r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){a.edit(t.key)}},"Modifier"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.rechercheAvenants()}},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];r.splice(i,1,Object(at.a)({},l,n)),a.updateAvenants(l.id,n),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:Ii}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:"text"===t.dataIndex,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des types avenants"}),r.a.createElement(Si.Provider,{value:this.props.form},r.a.createElement(xi,null),r.a.createElement(Je.a,{rowClassName:"editable-row",components:t,columns:a,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}})))}}]),t}(n.Component),Ii=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return r.a.createElement("td",u,i?r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput())):c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(Si.Consumer,null,this.renderCell)}}]),t}(n.Component),Oi=He.a.create()(ki),ji=(a(1001),He.a.Item),Ti=$e.a.Option,Ai="",Pi=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSelectChange=function(e){Ai=e},a.handleBranchetypeChange=function(e){a.setState({brancheType:e})},a.state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.validateTest=function(e){return e.length<Q?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(Q," characters needed.)")}:e.length>Z?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(Z," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validateTestNumero=function(e){return e.length<X?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(X," characters needed.)")}:e.length>X?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(X," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.state={abreviation:{value:""},raisonSocial:{value:""},numeroCompte:{value:""},typePartenaire:{value:""},telephone:{value:""},siegeSocial:{value:""},TVA:{value:""},fraisAcquisition:{value:""},brancheType:{}},a.handleInputChange=a.handleInputChange.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(jt.a)({},n,Object(at.a)({value:r},t(r))))}},{key:"ajouterPartenaire",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae({url:L+"/private/partenaire",method:"POST",data:t});case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"La cr\xe9ation est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"Cet interm\xe9diaire existe d\xe9ja"===e.t0.response.data.message?u.a.error({message:"Cet interm\xe9diaire existe d\xe9ja."}):u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault();var t={code:this.state.abreviation.value,raisonSocial:this.state.raisonSocial.value,numeroCompte:this.state.numeroCompte.value,typePartenaire:Ai,telephone:this.state.telephone.value,siegeSocial:this.state.siegeSocial.value,fraisAcquisition:this.state.fraisAcquisition.value,tva:this.state.TVA.value,brancheType:this.state.brancheType};this.ajouterPartenaire(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer,style:{borderRadius:"0px"}},r.a.createElement(w.a,{type:"plus"})," Nouvel Interm\xe9diaire"),r.a.createElement(ot.a,{title:"Ajouter un nouvel interm\xe9diaire",onClose:this.onClose,visible:this.state.visible,width:720,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",onSubmit:this.handleSubmit,className:"signup-form"},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:"Raison sociale",validateStatus:this.state.raisonSocial.validateStatus},r.a.createElement(I.a,{size:"default",name:"raisonSocial",autoComplete:"off",placeholder:"Raison sociale",className:"not-rounded",value:this.state.raisonSocial.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:"Abr\xe9viation",validateStatus:this.state.abreviation.validateStatus},r.a.createElement(I.a,{size:"default",name:"abreviation",autoComplete:"off",placeholder:"Abr\xe9viation",className:"not-rounded",value:this.state.abreviation.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:"Si\xe9ge social",hasFeedback:!0,validateStatus:this.state.siegeSocial.validateStatus},r.a.createElement(I.a,{size:"default",name:"siegeSocial",autoComplete:"off",className:"not-rounded",placeholder:"Si\xe8ge Social",value:this.state.siegeSocial.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:"T\xe9l\xe9phone",hasFeedback:!0,validateStatus:this.state.telephone.validateStatus},r.a.createElement(I.a,{size:"default",name:"telephone",type:"telephone",autoComplete:"off",className:"not-rounded",placeholder:"T\xe9l\xe9phone",value:this.state.telephone.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:"RIB",validateStatus:this.state.numeroCompte.validateStatus},r.a.createElement(I.a,{size:"default",name:"numeroCompte",autoComplete:"off",placeholder:"RIB",className:"not-rounded",value:this.state.numeroCompte.value,onChange:function(t){return e.handleInputChange(t,e.validateTestNumero)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:"Type interm\xe9diaire",validateStatus:this.state.typePartenaire.validateStatus},r.a.createElement($e.a,{placeholder:"Selectionnez...",onChange:this.handleSelectChange},r.a.createElement(Ti,{value:"Banque"},"Banque"),r.a.createElement(Ti,{value:"Cabinet de courtage"},"Cabinet de courtage"))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:" Taux de la commission"},r.a.createElement(I.a,{size:"default",name:"fraisAcquisition",autoComplete:"off",placeholder:"Taux de la commision",className:"not-rounded",value:this.state.fraisAcquisition.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:" Taux TVA"},r.a.createElement(I.a,{size:"default",name:"TVA",autoComplete:"off",placeholder:"TVA",className:"not-rounded",value:this.state.TVA.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(ji,{label:"Type de branche"},r.a.createElement($e.a,{placeholder:"Selectionnez...",onChange:this.handleBranchetypeChange},r.a.createElement(Ti,{value:"DECES"},"DECES"),r.a.createElement(Ti,{value:"DECES_ET_RETRAITE"},"DECES_ET_RETRAITE"),r.a.createElement(Ti,{value:"EPARGNE"},"EPARGNE"))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),Di=He.a.create()(Pi),Fi=r.a.createContext(),wi=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updatePartenaires=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/partenaire/"+a,data:n,method:"PUT"}):Promise.reject("No access token set.")).then(function(e){}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrecte. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.recherchePartenaire=function(){Ar().then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrecte. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.state={data:[],editingKey:"",rowSelection:"",searchText:"",searchedColumn:""},a.columns=[Object(at.a)({title:"Raison Sociale",dataIndex:"raisonSocial",key:"raisonSocial",editable:!0},Et("raisonSocial","Raison Sociale",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Abreviation",dataIndex:"code",key:"code",editable:!0},Et("code","Abreviation",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Si\xe8ge social",dataIndex:"siegeSocial",key:"siegeSocial",editable:!0},Et("siegeSocial","Si\xe8ge social",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"T\xe9l\xe9phone",dataIndex:"telephone",key:"telephone",editable:!0},Et("telephone","T\xe9l\xe9phone",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"RIB",dataIndex:"numeroCompte",key:"numeroCompte",editable:!0},Et("numeroCompte","Num\xe9ro compte",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Type interm\xe9diaire",dataIndex:"typePartenaire",key:"typePartenaire",editable:!0},Et("typePartenaire","secteur d activite",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Commission",dataIndex:"fraisAcquisition",key:"fraisAcquisition",editable:!0},Et("fraisAcquisition","Commission",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:" Taux TVA ",dataIndex:"tva",key:"tva",editable:!0},Et("tva","TVA",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(Fi.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Fermer"))):r.a.createElement("span",null,r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){a.edit(t.key)}},"Modifier"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.recherchePartenaire()}},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];r.splice(i,1,Object(at.a)({},l,n)),a.updatePartenaires(l.id,n),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:Mi}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:"typePartenaire"===t.dataIndex?"role":"text",dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des interm\xe9diaire"}),r.a.createElement(Fi.Provider,{value:this.props.form},r.a.createElement(Pi,null),r.a.createElement(Je.a,{rowClassName:"editable-row",components:t,columns:a,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5,onChange:this.cancel}})))}}]),t}(n.Component),Mi=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return r.a.createElement("td",u,i?r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput())):c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(Fi.Consumer,null,this.renderCell)}}]),t}(n.Component),Ni=He.a.create()(wi),Ri=(a(407),a(210)),qi=a.n(Ri),Vi=(a(1008),He.a.Item),zi=$e.a.Option,Yi=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState({partenaire:e})},a.handleChangeSecteurActivite=function(e){a.setState({secteurActivite:e})},a.handleChangeTypePointVente=function(e){a.setState({typePointVente:e})},a.state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.validateTest=function(e){},a.state={abreviation:{value:""},codeCaps:{value:""},codeInterne:{value:""},codeResponsable:{value:""},ice:{value:""},libelle:{value:""},logo:{value:""},nomResponsable:{value:""},patente:{value:""},secteurActiviteId:{value:""},partenaire:"",secteurActivite:"",typePointVente:"",partenaireTB:[],secteurActiviteTB:[],typePointVenteTB:[],vois:[]},a.handleInputChange=a.handleInputChange.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPartenaire(),this.getsecteurActiviteId(),this.getTypePointVenteId(),this.getVois()}},{key:"getsecteurActiviteId",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/secteur?direction=asc&limit=4&page=0&sort=id",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,this.setState({secteurActiviteTB:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getPartenaire",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaireTB:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTypePointVenteId",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:t=e.sent,this.setState({typePointVenteTB:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(jt.a)({},n,Object(at.a)({value:r},t(r))))}},{key:"ajouterPointVente",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae({url:L+"/private/pointvente",method:"POST",data:t});case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"La creation est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"Ce point vente existe d\xe9ja"===e.t0.response.data.message?u.a.error({message:"Ce point vente existe d\xe9ja."}):u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,a){if(!e){var n={abb:t.state.abreviation.value,codeCaps:t.state.codeCaps.value,codeInterne:t.state.codeInterne.value,codeResponsable:t.state.codeResponsable.value,ice:t.state.ice.value,libelle:t.state.libelle.value,logo:t.state.logo.value,nomResponsable:t.state.nomResponsable.value,patente:t.state.patente.value,partenairepvId:t.state.partenaire,secteurActiviteId:t.state.secteurActivite,typePointVenteId:t.state.typePointVente,adressPays:a.adressPays,adressVille:a.adressVille,adressVois:a.adressVois,adressCodePostal:a.adressCodePostal,adressNumero:a.adressNumero,adressComplement:a.adressComplement,adressComplete:a.adressComplete};t.ajouterPointVente(n)}})}},{key:"getVois",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa();case 2:t=e.sent,this.setState({vois:Object(tt.a)(t.data)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",headers:{authorization:"authorization-text"},onChange:function(e){"done"===e.file.status?qr.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&qr.a.error("".concat(e.file.name," file upload failed."))}},a=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:this.showDrawer,style:{borderRadius:"0px"}},r.a.createElement(w.a,{type:"plus"})," Nouveau point vente"),r.a.createElement(ot.a,{title:"cr\xe9er nouveau point de vente",width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{onSubmit:this.handleSubmit,layout:"vertical",hideRequiredMark:!0},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Abr\xe9viation",validateStatus:this.state.abreviation.validateStatus},r.a.createElement(I.a,{size:"default",name:"abreviation",autoComplete:"off",placeholder:"Code",value:this.state.abreviation.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Code ACAPS",validateStatus:this.state.codeCaps.validateStatus},r.a.createElement(I.a,{size:"default",name:"codeCaps",autoComplete:"off",placeholder:"Code ACAPS",value:this.state.codeCaps.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Code Interne",validateStatus:this.state.codeInterne.validateStatus},r.a.createElement(I.a,{size:"default",name:"codeInterne",autoComplete:"off",placeholder:"Code",value:this.state.codeInterne.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Code Responsable",validateStatus:this.state.codeResponsable.validateStatus},r.a.createElement(I.a,{size:"default",name:"codeResponsable",autoComplete:"off",placeholder:"Code ACAPS",value:this.state.codeResponsable.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"ICE",validateStatus:this.state.ice.validateStatus},r.a.createElement(I.a,{size:"default",name:"ice",autoComplete:"off",placeholder:"Code",value:this.state.ice.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Libelle",validateStatus:this.state.libelle.validateStatus},r.a.createElement(I.a,{size:"default",name:"libelle",autoComplete:"off",placeholder:"Libelle",value:this.state.libelle.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"logo",validateStatus:this.state.logo.validateStatus},r.a.createElement(I.a,{size:"default",name:"logo",autoComplete:"off",placeholder:"logo",value:this.state.logo.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})),r.a.createElement(qi.a,t,r.a.createElement(fe.a,null,r.a.createElement(w.a,{type:"upload"})," Importer"))),r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Nom Responsable",validateStatus:this.state.nomResponsable.validateStatus},r.a.createElement(I.a,{size:"default",name:"nomResponsable",autoComplete:"off",placeholder:"Nom Responsable",value:this.state.nomResponsable.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}})))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Patente",validateStatus:this.state.patente.validateStatus},r.a.createElement(I.a,{size:"default",name:"patente",autoComplete:"off",placeholder:"patente",value:this.state.patente.value,onChange:function(t){return e.handleInputChange(t,e.validateTest)}}))),r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Partenaire",validateStatus:this.state.partenaire.validateStatus},r.a.createElement($e.a,{placeholder:"Partenaire",name:"partenaire",optionLabelProp:"label",onChange:this.handleChange},this.state.partenaireTB.map(function(e){return r.a.createElement(zi,{key:e.id,label:e.code,value:e.id},e.code)}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Secteur d'activit\xe9"},r.a.createElement($e.a,{placeholder:"secteurActivite",name:"secteurActivite",onChange:this.handleChangeSecteurActivite,optionLabelProp:"label"},this.state.secteurActiviteTB.map(function(e){return r.a.createElement(zi,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))),r.a.createElement(xe.a,{span:12},r.a.createElement(Vi,{label:"Type de point de vente"},r.a.createElement($e.a,{placeholder:"typePointVente",name:"typePointVente",onChange:this.handleChangeTypePointVente,optionLabelProp:"label"},this.state.typePointVenteTB.map(function(e){return r.a.createElement(zi,{key:e.id,value:e.id,label:e.code},e.code)}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adresse :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},a("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,{placeholder:"pays"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},a("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement(I.a,{placeholder:"ville"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Voie"},a("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Voie"},this.state.vois.map(function(e){return r.a.createElement(zi,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},a("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Num\xe9ro"},a("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Compl\xe9ment d'adresse"},a("adressComplement")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un compl\xe9ment"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adresse Complete"},a("adressComplete")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"}}))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Ajouter")))))}}]),t}(n.Component),Bi=He.a.create()(Yi),Li=$e.a.Option,Gi=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).recherchePointVente=function(){dt().then(function(e){return a.setState({data:e.data.content})})},a.andleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.updatePointV(a.state.keyRecord,t)})},a.handleChangePartenaire=function(e){a.setState({partenaire:e})},a.handleChangeSecteurActivite=function(e){a.setState({secteurActivite:e})},a.handleChangeTypePointVente=function(e){a.setState({typePointVente:e})},a.handleSelectChange=function(e){a.setState({visible:!0,keyRecord:e.id}),a.props.form.setFieldsValue({abb:e.abb,codeCaps:e.codeCaps,codeInterne:e.codeInterne,codeResponsable:e.codeResponsable,logo:e.logo,nomResponsable:e.nomResponsable,ice:e.ice,libelle:e.libelle,patente:e.patente,partenairepvId:e.partenairepv.id,secteurActiviteId:e.secteurActivite.id,typePointVenteId:e.typePointVente.id})},a.state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",partenaireTB:[],secteurActiviteTB:[],typePointVenteTB:[]},a.columns=[Object(at.a)({title:"Abr\xe9viation",dataIndex:"abb",key:"abb",width:"20%"},Et("abb","Abreviation",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Code ACAPS",dataIndex:"codeCaps",key:"codeCaps",width:"20%"},Et("codeCaps","Code ACAPS",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Code Interne",dataIndex:"codeInterne",key:"codeInterne",width:"20%"},Et("codeInterne","Code Interne",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"ICE",dataIndex:"ice",key:"ice",width:"20%"},Et("ice","ICE",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",key:"action",width:"20%",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleSelectChange(t)},style:{borderRadius:"0px"}},"Modifier"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getsecteurActiviteId",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t();case 2:t=e.sent,this.setState({secteurActiviteTB:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getPartenaire",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaireTB:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTypePointVenteId",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:t=e.sent,this.setState({typePointVenteTB:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.recherchePointVente(),this.getPartenaire(),this.getTypePointVenteId(),this.getsecteurActiviteId()}},{key:"updatePointV",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=t,r=a,localStorage.getItem(G)?ae({url:L+"/private/pointvente/"+n,method:"PUT",data:r}):Promise.reject("No access token set.");case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"la modification est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}var n,r},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(jt.a)({},n,Object(at.a)({value:r},t(r))))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(Bi,null),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,rowKey:"id",pagination:{defaultCurrent:1,defaultPageSize:5}}),r.a.createElement(ot.a,{title:"cr\xe9er nouveau point de vente",width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{onSubmit:this.handleSubmit,layout:"vertical",hideRequiredMark:!0},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},e("abb",{rules:[{required:!0,message:"Tapez le code"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le code"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code ACAPS"},e("codeCaps",{rules:[{required:!0,message:"Tapez le Code ACAPS"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le Code ACAPS"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Interne"},e("codeInterne",{rules:[{required:!0,message:"Tapez le code"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le code"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Responsable"},e("codeResponsable",{rules:[{required:!0,message:"Tapez le Code du responsable"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le Code du responsable"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Interne"},e("ice",{rules:[{required:!0,message:"Tapez ICE"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez ICE"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Libelle"},e("libelle",{rules:[{required:!0,message:"champ obligatoir"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Libelle"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Logo"},e("logo",{rules:[{required:!0,message:"Logo"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Logo"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nom du responsable"},e("nomResponsable",{rules:[{required:!0,message:"champ obligatoir"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Nom du responsable"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Patente"},e("patente",{rules:[{required:!0,message:"Patente"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Patente"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Partenaire"},e("partenairepvId",{rules:[{required:!0,message:""}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir un partenaire",onChange:this.handleChangePartenaire,optionLabelProp:"label"},this.state.partenaireTB.map(function(e){return r.a.createElement(Li,{label:e.code,value:e.id},e.code)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Secteur d'activite"},e("secteurActiviteId",{rules:[{required:!0,message:""}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir un secteur ",onChange:this.handleChangeSecteurActivite,optionLabelProp:"label"},this.state.secteurActiviteTB.map(function(e){return r.a.createElement(Li,{label:e.libelle,value:e.id},e.libelle)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type de point de vente"},e("typePointVenteId",{rules:[{required:!0,message:""}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir un type",onChange:this.handleChangePointVente,optionLabelProp:"label"},this.state.typePointVenteTB.map(function(e){return r.a.createElement(Li,{label:e.code,value:e.id},e.code)})))))),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Fermer"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Modifier")))))}}]),t}(n.Component),Ui=He.a.create()(Gi);function Hi(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-etape",data:e,method:"POST"}):Promise.reject("No access token set.")}function Ki(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-laboratoire?acceptation="+e,method:"GET"}):Promise.reject("No access token set.")}function Wi(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-examinateur?acceptation="+e,method:"GET"}):Promise.reject("No access token set.")}function $i(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-conseil?acceptation="+e,method:"GET"}):Promise.reject("No access token set.")}function _i(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-examens?acceptation="+e,method:"GET"}):Promise.reject("No access token set.")}function Ji(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-specialiste?acceptation="+e,method:"GET"}):Promise.reject("No access token set.")}function Qi(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-reassurance?acceptation="+e,method:"GET"}):Promise.reject("No access token set.")}function Xi(e,t){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-test-medical-laboratoire?acceptation="+e+"&acceptationlabo="+t,method:"GET"}):Promise.reject("No access token set.")}function Zi(e,t){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-test-medical-examinateur?acceptation="+e+"&acceptationexamn="+t,method:"GET"}):Promise.reject("No access token set.")}function el(e,t){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-test-medical-conseil?acceptation="+e+"&acceptationconseil="+t,method:"GET"}):Promise.reject("No access token set.")}function tl(e,t){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-test-medical-examen?acceptation="+e+"&acceptationexamn="+t,method:"GET"}):Promise.reject("No access token set.")}function al(e){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-test-medical",data:e,method:"POST"}):Promise.reject("No access token set.")}function nl(e,t){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-test-medical?id="+e,data:t,method:"PUT"}):Promise.reject("No access token set.")}function rl(e,t,a,n){return localStorage.getItem(G)?ae({url:L+"/private/acceptation-test-medical-auxiliaire?auxiliaire="+e+"&typeAuxiliaire="+t+"&partenaire="+a+"&produit="+n,method:"GET"}):Promise.reject("No access token set.")}function il(e){return localStorage.getItem(G)?ae({url:L+"/private/lettreAcceptation/pdf",method:"POST",data:e,responseType:"blob"}):Promise.reject("No access token set.")}function ll(e,t,a,n){return localStorage.getItem(G)?ae({url:L+"/private/acceptation/search?page="+e+"&sort=code&direction=desc&limit="+t+"&by="+a+"&for="+n,method:"GET"}):Promise.reject("No access token set.")}function sl(e,t){return localStorage.getItem(G)?ae({url:L+"/private/acceptation?page="+e+"&sort=code&direction=desc&limit="+t,method:"GET"}):Promise.reject("No access token set.")}function ol(e){return localStorage.getItem(G)?ae({url:L+"/private/verdict?type="+e,method:"GET"}):Promise.reject("No access token set.")}function cl(e){return localStorage.getItem(G)?ae({url:L+"/private/lettreRejet/pdf",method:"POST",data:e,responseType:"blob"}):Promise.reject("No access token set.")}var ul=$e.a.Option,ml=I.a.Search,dl=[{title:"Code",dataIndex:"code",key:"code",render:function(e){return r.a.createElement("a",{href:"#top"},e)}},{title:"Nom assur\xe9",dataIndex:"contrat",key:"nom",render:function(e){return r.a.createElement("span",null,e.assure.nom)}},{title:"Pr\xe9nom assur\xe9",dataIndex:"contrat",key:"prenom",render:function(e){return r.a.createElement("span",null,e.assure.prenom)}},{title:"montant financement",dataIndex:"contrat",key:"Mnt cr\xe9dit",render:function(e){return r.a.createElement("span",null,e.capitalAssure)}},{title:"Date cr\xe9ation",dataIndex:"creationDate",key:"creationDate"},{title:"Status",key:"status",dataIndex:"status",render:function(e){return r.a.createElement("span",null,"DONE"===e?r.a.createElement(et.a,{color:"green",key:e},"ACCEPTE"):r.a.createElement(et.a,{color:"volcano",key:e},"EN_COURS"))}},{title:"Date status",dataIndex:"creationDate",key:"datestatus"},{title:"Produit",dataIndex:"contrat",key:"produit",render:function(e){return r.a.createElement("span",null,e.produit.libelle)}},{title:"Partenaire",dataIndex:"contrat",key:"Partenaire",render:function(e){return r.a.createElement("span",null,e.produit.partenaire.raisonSocial)}},{title:"Op\xe9rations",dataIndex:"operation",width:"15%",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(z.a,{to:{pathname:"/ModificationAcceptation",state:{record:t}}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement(z.a,{to:{pathname:"/ConsultationAcceptation",state:{record:t}}},r.a.createElement(w.a,{type:"container",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})," "))}}],pl=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onPaginationChange=function(e,t){a.setState({pagenumber:e}),""===a.state.searchfor?a.getproprties(e-1,5):a.searchAcceptation(e-1,5,a.state.searchby,a.state.searchfor)},a.selectBefore=r.a.createElement($e.a,{onChange:function(e){return a.setState({searchby:e})},defaultValue:"code",style:{width:150}},r.a.createElement(ul,{value:"code"},"Code acceptation"),r.a.createElement(ul,{value:"nom"},"Nom assur\xe9"),r.a.createElement(ul,{value:"prenom"},"Prenom assur\xe9")),a.search=function(e){a.setState({pagenumber:1,searchfor:e}),a.searchAcceptation(a.state.pagenumber-1,5,a.state.searchby,e)},a.state={acceptations:[],totalItems:0,pagenumber:1,searchby:"code",searchfor:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getproprties(this.state.pagenumber-1,5)}},{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sl(t,a);case 2:n=e.sent,this.setState({acceptations:Object(tt.a)(n.data.content),totalItems:n.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchAcceptation",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ll(t,a,n,r);case 2:i=e.sent,"prenom"===n||"nom"===n?this.setState({acceptations:Object(tt.a)(i.data.content),totalItems:i.data.numberOfElements}):"code"===n&&this.setState({acceptations:Object(tt.a)(i.data.content),totalItems:i.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion Acceptation"}),r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(ml,{placeholder:"Entrez le text de recherche",addonBefore:this.selectBefore,onSearch:function(t){return e.search(t)},enterButton:!0,style:{width:600}})),r.a.createElement(Je.a,{columns:dl,dataSource:this.state.acceptations,pagination:{onChange:this.onPaginationChange,pageSize:5,total:this.state.totalItems,current:this.state.pagenumber}}))}}]),t}(n.Component),hl=a(117),fl=He.a.create()(function(e){var t=Object(n.useState)(""),a=(Object(hl.a)(t,1)[0],e.montantGlobale),i=e.form.getFieldDecorator;return r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:function(t){t.preventDefault(),e.form.validateFieldsAndScroll(function(t,a){if(!t){var n=[];e.rows.forEach(function(e){e.honoraires.forEach(function(t){n.push({acceptationTestMedical:e,montantHonoraire:t.montantHonoraire})})}),a.detailPrestationHonoraire=[].concat(n),a.auxiliaire={id:e.auxiliaire},e.Ajouter(a)}})},hideRequiredMark:!0}),r.a.createElement(ye.a,{style:{marginTop:"20px"}},r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Ref : ",hasFeedback:!0},i("reference",{rules:[{required:!0,message:"Veuillez saisir"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:1}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Montant"},i("montant",{initialValue:a,rules:[{required:!0,message:"Veuillez saisir"}]})(r.a.createElement(I.a,{addonAfter:"DH",disabled:!0}))),r.a.createElement(He.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Valider")))))}),bl=rt.a.Title,El=[{title:"Nom et pr\xe9nom assur\xe9",key:"Nom Assure",dataIndex:"acceptation",render:function(e){return r.a.createElement("div",null,e.contrat.assure.nom+" "+e.contrat.assure.prenom)}},{title:"CNI",key:"CNI",dataIndex:"acceptation",render:function(e){return r.a.createElement("div",null,e.contrat.assure.cin)}},{title:"Code examen",dataIndex:"honoraires",key:"Libelle Test",render:function(e){return r.a.createElement("div",null,e.map(function(e){return e.libelle}))}},{title:"Intitul\xe9 examen",key:"Intituele Test",dataIndex:"honoraires",render:function(e){return r.a.createElement("div",null,e.map(function(e){return e.intituele}))}},{title:"Montant",dataIndex:"honoraires",key:"Mnt Honoraire",render:function(e){return r.a.createElement("div",null,vl(e)," DH")}}],vl=function(e){var t=0;return e.forEach(function(e){t+=e.montantHonoraire}),t},gl=function(e){var t=Object(n.useState)(0),a=Object(hl.a)(t,2),i=a[0],l=a[1],s=Object(n.useState)([]),o=Object(hl.a)(s,2),c=o[0],m=o[1],d=Object(n.useState)(e.tests),p=Object(hl.a)(d,2),h=p[0],f=p[1],b=Object(n.useState)({detailPrestationHonoraire:[]}),E=Object(hl.a)(b,2),v=E[0],g=E[1],y=Object(n.useState)(!1),C=Object(hl.a)(y,2),x=C[0],S=C[1],k=Object(n.useState)([]),I=Object(hl.a)(k,2),O=I[0],j=I[1],T={onChange:function(e,t){j(t),j(e);var a=0;t.forEach(function(e){a+=vl(e.honoraires)}),m(Object(tt.a)(t)),l(a)},selectedRowKeys:O};function A(){return(A=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=t,localStorage.getItem(G)?ae({url:L+"/private/prestation-honoraire",data:a,method:"POST"}):Promise.reject("No access token set.");case 2:200===e.sent.status?(S(!0),j([]),u.a.success({message:"bien ajout\xe9"})):u.a.error({message:"Merci de verifier les information entree"});case 4:case"end":return e.stop()}var a},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){var e=Object(tt.a)(h);v.detailPrestationHonoraire.forEach(function(t){e=Object(tt.a)(e.filter(function(e){return e.id!==t.acceptationTestMedical.id}))}),f(e)},[x]),r.a.createElement("div",{style:{marginTop:"50px"}},r.a.createElement(bl,{style:{marginBottom:"25px"},level:4,underline:!0},"Cr\xe9ation des honoraires :"),r.a.createElement(Je.a,{rowKey:function(e){return e.id},pagination:{hideOnSinglePage:!0,defaultPageSize:50},bordered:!0,rowSelection:T,columns:El,dataSource:h}),r.a.createElement(fl,{auxiliaire:e.auxiliaire,Ajouter:function(e){g(e),function(e){A.apply(this,arguments)}(e),S(!1),j(null)},rows:c,montantGlobale:i}))},yl=(a(1016),a(442)),Cl=a.n(yl),xl=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).columns=[{title:"Code Acceptation",dataIndex:"acceptationTestMedical.acceptation.code"},{title:"Nom assur\xe9",dataIndex:"acceptationTestMedical.acceptation.contrat.assure.nom"},{title:"Intitule Test",dataIndex:"acceptationTestMedical.honoraires",render:function(e){return e.map(function(e){return e.intituele})}},{title:"Libelle",dataIndex:"acceptationTestMedical.honoraires",render:function(e){return e.map(function(e){return e.libelle})}},{title:"Montant honoraire",dataIndex:"acceptationTestMedical.honoraires",render:function(e){return e.map(function(e){return e.montantHonoraire})}}],a.state={data:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({data:this.props.data})}},{key:"componentDidUpdate",value:function(e,t){t.data!==this.state.data&&this.setState({data:this.props.data})}},{key:"render",value:function(){return r.a.createElement(Je.a,{style:{marginTop:"50px"},rowKey:function(e){return e.id},columns:this.columns,dataSource:this.props.data.detailPrestationHonoraire,pagination:{hideOnSinglePage:!0},loading:this.state.loading,bordered:!0})}}]),t}(n.Component),Sl=rt.a.Title,kl=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).columns=[{title:"Num\xe9ro sinistre",dataIndex:"numeroSinistre",render:function(e){return r.a.createElement(fe.a,{type:"link"},e)},onCellClick:function(e){a.setState({detailPrestation:e,showDetailPrestation:!0})}},{title:"Date p\xe9station",dataIndex:"datePrestation"},{title:"Mantant",dataIndex:"montant"},{title:"Mode R\xe9glement",dataIndex:"modeReglement"},{title:"Status",dataIndex:"status"},{title:"Auxiliaire",dataIndex:"auxiliaire",render:function(e){return"".concat(e.nom," ").concat(e.prenom)}}],a.state={data:[],showDetailPrestation:!1,detailPrestation:[],loading:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log("props:",this.props);var e=this.props,t=e.auxiliaire,a=e.produit,n=e.typeAuxiliaire,r=e.status,i=e.participant,l=e.contrat;this.searchPrestation(t.key,r.key,a.key,n.label,i,l)}},{key:"searchPrestation",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r,i,l){var s;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,Ha(t,a,n,r,i,l);case 3:200===(s=e.sent).status?this.setState({data:s.data,loading:!1}):u.a.error({message:"Merci de verifier les informations de recherche et r\xe9essayer"});case 5:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,l){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{marginTop:"50px"}},r.a.createElement(Sl,{style:{marginBottom:"25px"},level:4,underline:!0},"R\xe9sultats de Recherche :"),!this.state.loading&&r.a.createElement(Cl.a,{message:this.state.data.length+" ligne trouv\xe9",type:"success"}),r.a.createElement(Je.a,{rowKey:function(e){return e.id},columns:this.columns,dataSource:this.state.data,pagination:{hideOnSinglePage:!0},loading:this.state.loading,bordered:!0}),this.state.showDetailPrestation&&r.a.createElement(xl,{data:this.state.detailPrestation}))}}]),t}(n.Component),Il=$e.a.Option,Ol=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handlePartnerChange=function(e){var t=Object(tt.a)(a.state.produits);a.setState({produitPartenaire:t.filter(function(t){return t.partenaire.id===e.key})})},a.handleTypeAuxiliaireChange=function(e){var t=Object(tt.a)(a.state.auxiliaires);a.setState({typeAuxiliaireSelectedValue:e}),"exames"===e.label?a.setState({auxiliairesParType:t}):"specialiste"===e.label?a.setState({auxiliairesParType:t.filter(function(t){return t.typeAuxiliaire.libelle!==e.label})}):a.setState({auxiliairesParType:t.filter(function(t){return t.typeAuxiliaire.id===e.key})})},a.addition=function(e){var t=0;return e.forEach(function(e){t+=e.montantHonoraire}),t},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.getacceptationTestsByAuxiliaire(t.auxiliaire.key,t.typeAuxiliaire.label,t.partenaire.key,t.produit.key)})},a.onClickSearch=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.setState({ShowRechercheHonoraireTable:!0})})},a.onChangeProduit=function(e){a.setState({produit:e})},a.onChangeStatus=function(e){a.setState({status:e})},a.onChangeNumContrat=function(e){a.setState({numContrat:e.target.value})},a.onChangeNomParticipant=function(e){a.setState({nomParticipant:e.target.value})},a.onChangeAuxiliaire=function(e){a.setState({auxiliaire:e})},a.state={produit:{},status:{},typeAuxiliaireSelectedValue:{},auxiliaire:{},partenaires:[],numContrat:"",nomParticipant:"",produits:[],produitPartenaire:[],typeAuxiliaire:[],auxiliaires:[],auxiliairesParType:[],prestationStatus:[],ShowHonoraireTable:!1,testsMedicalListByAuxiliaire:[],montantGlobale:0,ShowRechercheHonoraireTable:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getpropreties()}},{key:"getpropreties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n,r,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:return t=e.sent,e.next=5,Wa();case 5:return a=e.sent,e.next=8,Ta();case 8:return n=e.sent,e.next=11,Oa();case 11:return r=e.sent,e.next=14,localStorage.getItem(G)?ae({url:L+"/private/prestation-status",method:"GET"}):Promise.reject("No access token set.");case 14:i=e.sent,this.setState({prestationStatus:i.data,partenaires:t.data.content,produits:a.data.content,typeAuxiliaire:n.data.content,auxiliaires:r.data.content});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getacceptationTestsByAuxiliaire",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i,l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rl(t,a,n,r);case 2:i=e.sent,console.log("testMedical:",i),l=[],i.data.forEach(function(e){l.push(Object(at.a)({},e,{key:e.id}))}),this.setState({auxiliaire:t,testsMedicalListByAuxiliaire:[].concat(l),ShowHonoraireTable:!0});case 7:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(lt,{title:"Honoraires"}),r.a.createElement(xe.a,{span:24,offset:1,style:{margin:"0 auto"}},r.a.createElement("input",{className:"not-rounded criteres-rech",placeholder:"Crit\xe8res de Recherche",disabled:!0}),r.a.createElement("div",{className:"div-criteres",style:{padding:10,width:1400,background:"#fff",borderTop:"3px solid #eaa76c"}},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSubmit,ref:function(t){e.form=t},hideRequiredMark:!0}),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:6,className:"col-form"},r.a.createElement(He.a.Item,{label:"Partenaire ",hasFeedback:!0},t("partenaire",{valuePropName:"selected",rules:[{required:!0,message:"Veuillez selectionner"}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",onChange:this.handlePartnerChange,labelInValue:!0},this.state.partenaires.map(function(e){return r.a.createElement(Il,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)}))))),r.a.createElement(xe.a,{span:6,className:"col-form"},r.a.createElement(He.a.Item,{label:"Produit "},t("produit",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",onChange:this.onChangeProduit,labelInValue:!0},this.state.produitPartenaire.map(function(e){return r.a.createElement(Il,{key:e.id,value:e.id,label:e.code},e.code)}))))),r.a.createElement(xe.a,{span:6,className:"col-form"},r.a.createElement(He.a.Item,{label:"Status ",hasFeedback:!0},t("status",{valuePropName:"selected",rules:[{required:!1}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",onChange:this.onChangeStatus,labelInValue:!0},this.state.prestationStatus.map(function(e){return r.a.createElement(Il,{key:e.value,value:e.value,label:e.name},e.name)}))))),r.a.createElement(xe.a,{span:6},r.a.createElement(He.a.Item,{label:"Type auxiliaire ",hasFeedback:!0},t("typeAuxiliaire",{valuePropName:"selected",rules:[{required:!0,message:"Veuillez selectionner"}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",labelInValue:!0,onChange:this.handleTypeAuxiliaireChange},this.state.typeAuxiliaire.map(function(e){return r.a.createElement(Il,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:6},r.a.createElement(He.a.Item,{label:"Auxiliaire ",hasFeedback:!0},t("auxiliaire",{valuePropName:"selected",rules:[{required:!0,message:"Veuillez selectionner"}]})(r.a.createElement($e.a,{placeholder:"Veuillez selectionner",optionLabelProp:"label",onChange:this.onChangeAuxiliaire,labelInValue:!0},this.state.auxiliairesParType.map(function(e){return r.a.createElement(Il,{key:e.id,value:e.id,label:e.nom},e.nom)}))))),r.a.createElement(xe.a,{span:6},r.a.createElement(He.a.Item,{label:"N\xb0 contrat ",hasFeedback:!0},t("numContrat",{rules:[{required:!1}]})(r.a.createElement(I.a,{placeholder:"N\xb0 Contrat",onChange:this.onChangeNumContrat})))),r.a.createElement(xe.a,{span:6},r.a.createElement(He.a.Item,{label:"N\xb0 d'acceptation ",hasFeedback:!0},t("numAcceptation",{rules:[{required:!1}]})(r.a.createElement(I.a,{placeholder:"N\xb0 acceptation",optionLabelProp:"label"})))),r.a.createElement(xe.a,{span:6},r.a.createElement(He.a.Item,{label:"Nom participant",hasFeedback:!0},t("nomParticipant",{rules:[{required:!1}]})(r.a.createElement(I.a,{placeholder:"Nom",optionLabelProp:"label",onChange:this.onChangeNomParticipant}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:8}),r.a.createElement(xe.a,{span:8}),r.a.createElement(xe.a,{span:8},r.a.createElement(fe.a,{style:{float:"right"},className:"rech-btn",type:"default",onClick:this.onClickSearch},"Recherche"),r.a.createElement(fe.a,{style:{float:"right",marginRight:"2%"},className:"nouveau-btn",type:"primary",htmlType:"submit"},"Nouvel Honoraire"))))))),r.a.createElement(xe.a,{offset:1},this.state.ShowHonoraireTable&&r.a.createElement(gl,{auxiliaire:this.state.auxiliaire,tests:this.state.testsMedicalListByAuxiliaire,montantGlobale:this.state.montantGlobale}),this.state.ShowRechercheHonoraireTable&&r.a.createElement(kl,{auxiliaire:this.state.auxiliaire,typeAuxiliaire:this.state.typeAuxiliaireSelectedValue,status:this.state.status,produit:this.state.produit,contrat:this.state.numContrat,participant:this.state.nomParticipant})))}}]),t}(n.Component),jl=He.a.create()(Ol),Tl=(a(149),a(80)),Al=a.n(Tl),Pl=(a(1021),a(1100)),Dl=I.a.TextArea,Fl=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSabmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){})},a.onChange=function(e){a.setState({dureeContrat:e.target.value,dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value)}),a.props.form.setFieldsValue({dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value),dureeContrat:parseInt(e.target.value)})},a.onChangePeriodicite=function(e){"Unique avec \xe9talement"===e.label?a.setState({showField:!0}):a.setState({showField:!1})},a.partnerChange=function(e){a.setState({produits:a.props.produits.filter(function(t){return t.partenaire.raisonSocial===e.label})})},a.handleInvaliditeOuMaladiechange=function(e){a.setState({invaliditeOuMaladieShowField:!a.state.invaliditeOuMaladieShowField})},a.handleMaladiesOuOperationChirurgicaleChange=function(e){return a.setState({maladiesOuOperationChirurgicaleShowField:!a.state.maladiesOuOperationChirurgicaleShowField})},a.handlesuspendreAtiviteDeuxDernierAnneechange=function(e){return a.setState({suspendreAtiviteDeuxDernierAnneeShowField:!a.state.suspendreAtiviteDeuxDernierAnneeShowField})},a.state={showField:!1,invaliditeOuMaladieShowField:a.props.invaliditeOuMaladie.value,maladiesOuOperationChirurgicaleShowField:a.props.maladiesOuOperationChirurgicale.value,suspendreAtiviteDeuxDernierAnneeShowField:a.props.suspendreAtiviteDeuxDernierAnnee.value,pensionIncapacite:a.props.pensionIncapacite.value},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,{onSubmit:this.handleSabmit,id:"steptwo"},r.a.createElement(xe.a,{span:6},r.a.createElement(Pl.a,{style:{marginBottom:"5px"}},"Souffrez-vous d\u2019une invalidit\xe9 ou d\u2019une maladie\xa0?"),r.a.createElement(He.a.Item,null,e("invaliditeOuMaladie",{rules:[{required:!1}],valuePropName:"checked",initialValue:this.state.invaliditeOuMaladieShowField})(r.a.createElement(Ut.a.Group,{style:{marginBottom:25},buttonStyle:"solid",className:"prelevement",defaultValue:this.state.invaliditeOuMaladieShowField,onChange:this.handleInvaliditeOuMaladiechange},r.a.createElement(Ut.a.Button,{value:!1},"Non"),r.a.createElement(Ut.a.Button,{value:!0},"Oui")))),this.state.invaliditeOuMaladieShowField&&r.a.createElement(He.a.Item,null,r.a.createElement(Pl.a,{style:{marginBottom:"5px"}},"laquelle\xa0?"),e("quelleMaladieOuInvalidite",{rules:[{required:!1}]})(r.a.createElement(Dl,{style:{marginRight:"10px"}}))),r.a.createElement(Pl.a,{style:{marginBottom:"5px"}}," ","B\xe9n\xe9ficiez-vous d\u2019une pension d\u2019incapacit\xe9\xa0?"),r.a.createElement(He.a.Item,null,e("pensionIncapacite",{rules:[{required:!1}],valuePropName:"checked",initialValue:this.state.pensionIncapacite})(r.a.createElement(Ut.a.Group,{className:"prelevement",style:{marginBottom:25},buttonStyle:"solid",defaultValue:this.state.pensionIncapacite},r.a.createElement(Ut.a.Button,{value:!1},"Non"),r.a.createElement(Ut.a.Button,{value:!0},"Oui"))))),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement(Pl.a,{style:{marginBottom:"5px"}}," ","Avez-vous souffert de maladies critiques ou subi des op\xe9rations chirurgicales\xa0?"),r.a.createElement(He.a.Item,null,e("maladiesOuOperationChirurgicale",{rules:[{required:!1}],initialValue:this.state.maladiesOuOperationChirurgicaleShowField})(r.a.createElement(Ut.a.Group,{className:"prelevement",style:{marginBottom:25},buttonStyle:"solid",defaultValue:this.state.maladiesOuOperationChirurgicaleShowField,onChange:this.handleMaladiesOuOperationChirurgicaleChange},r.a.createElement(Ut.a.Button,{value:!1},"Non"),r.a.createElement(Ut.a.Button,{value:!0},"Oui")))),this.state.maladiesOuOperationChirurgicaleShowField&&r.a.createElement(He.a.Item,null,r.a.createElement(Pl.a,{style:{marginBottom:"5px"}},"Quand et o\xf9\xa0?"),e("maladiesOuOperationChirurgicaleQuandEtOu",{rules:[{required:!1}]})(r.a.createElement(Dl,null)))),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement(Pl.a,{style:{marginBottom:"5px"}}," ","\xe9tiez-vous oblig\xe9s de suspendre votre activit\xe9 pour une dur\xe9e sup\xe9rieure \xe0 15 jours durant les deux derni\xe8res ann\xe9es\xa0?"),r.a.createElement(He.a.Item,null,e("suspendreAtiviteDeuxDernierAnnee",{rules:[{required:!1}],initialValue:this.state.suspendreAtiviteDeuxDernierAnneeShowField})(r.a.createElement(Ut.a.Group,{className:"prelevement",style:{marginBottom:25},buttonStyle:"solid",defaultValue:this.state.suspendreAtiviteDeuxDernierAnneeShowField,onChange:this.handlesuspendreAtiviteDeuxDernierAnneechange},r.a.createElement(Ut.a.Button,{value:!1},"Non"),r.a.createElement(Ut.a.Button,{value:!0},"Oui")))),this.state.suspendreAtiviteDeuxDernierAnneeShowField&&r.a.createElement(He.a.Item,null,r.a.createElement(Pl.a,{style:{marginBottom:"5px"}},"pourquoi\xa0? et pour combien de temps ?"),e("suspendreAtiviteDeuxDernierAnneePourquiEtTemps",{rules:[{required:!1}]})(r.a.createElement(Dl,null)))))))}}]),t}(n.Component),wl=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{maladiesOuOperationChirurgicaleQuandEtOu:He.a.createFormField(Object(at.a)({},e.maladiesOuOperationChirurgicaleQuandEtOu,{value:e.maladiesOuOperationChirurgicaleQuandEtOu.value})),maladiesOuOperationChirurgicale:He.a.createFormField(Object(at.a)({},e.maladiesOuOperationChirurgicale,{value:e.maladiesOuOperationChirurgicale.value})),quelleMaladieOuInvalidite:He.a.createFormField(Object(at.a)({},e.quelleMaladieOuInvalidite,{value:e.quelleMaladieOuInvalidite.value})),suspendreAtiviteDeuxDernierAnneePourquiEtTemps:He.a.createFormField(Object(at.a)({},e.suspendreAtiviteDeuxDernierAnneePourquiEtTemps,{value:e.suspendreAtiviteDeuxDernierAnneePourquiEtTemps.value})),invaliditeOuMaladie:He.a.createFormField(Object(at.a)({},e.invaliditeOuMaladie,{value:e.invaliditeOuMaladie.value})),pensionIncapacite:He.a.createFormField(Object(at.a)({},e.pensionIncapacite,{value:e.pensionIncapacite.value})),suspendreAtiviteDeuxDernierAnnee:He.a.createFormField(Object(at.a)({},e.suspendreAtiviteDeuxDernierAnnee,{value:e.suspendreAtiviteDeuxDernierAnnee.value})),dureeContrat:He.a.createFormField(Object(at.a)({},e.dureeContrat,{value:e.dureeContrat.value})),preiodicite:He.a.createFormField(Object(at.a)({},e.preiodicite,{value:e.preiodicite.value})),dateEcheance:He.a.createFormField(Object(at.a)({},e.dateEcheance,{value:e.dateEcheance.value})),pointVente:He.a.createFormField(Object(at.a)({},e.pointVente,{value:e.pointVente.value})),produit:He.a.createFormField(Object(at.a)({},e.produit,{value:e.produit.value}))}}})(Fl),Ml=a(278),Nl=a.n(Ml),Rl=null,ql=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).searchPersonnemorale=function(e){var t=Object(tt.a)(a.state.personMoraleList);a.setState({souscripteur:t.filter(function(t){return t.patente===e.key})[0],patente:e.key})},a.searchPersonnePhysique=function(e){var t=Object(tt.a)(a.state.personlist);a.setState({souscripteur:t.filter(function(t){return t.cin===e.key})[0],cin:e.key})},a.onChangeSelect=function(e){var t=Object(tt.a)(a.state.personlist);a.setState({assurePresent:!0,assure:t.filter(function(t){return t.cin===e.key})[0]})},a.handleSabmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){})},a.handlePersonphyCreationSousctipteur=function(e){a.setState({souscripteur:e,perphysique:!0,permorale:!1}),a.props.form.setFieldsValue({cin:{key:e.cin,label:e.cin}})},a.handlePersonMoraleCreationSousctipteur=function(e){a.setState({souscripteur:e,permorale:!0,perphysique:!1}),a.props.form.setFieldsValue({patente:{key:e.patente,label:e.patente}})},a.handlePersonphyCreationAssure=function(e){var t=Object(tt.a)(a.state.personlist);t.push(e),a.setState({assure:e,assurePresent:!0,personlist:Object(tt.a)(t)}),a.props.form.setFieldsValue({assure:{key:e.cin,label:e.cin}})},a.handlechange=function(e){a.setState({radio:e.target.value,souscripteur:"",assure:"",souscripteurIsAssure:"",disableSouscripteuretAssure:""}),a.clearAutocompleteFields()},a.onChange=function(e){"physique"===a.state.radio&&e.target.checked?(a.setState({assure:a.state.souscripteur,souscripteurIsAssure:!0,disableSouscripteuretAssure:!0}),a.props.form.setFieldsValue({assure:{key:a.state.souscripteur.cin,label:a.state.souscripteur.cin}})):a.setState({souscripteurIsAssure:!1,disableSouscripteuretAssure:!1})},a.changePartenaire=function(e){a.setState({partenaireRadio:e.target.value,partenaireCode:e.target.value}),a.clearAutocompleteFields()},a.state={profession:{},radio:a.props.radio.value,souscripteur:a.props.souscripteur.value,permorale:!1,perphysique:!1,sexe:[],assure:a.props.assure.value,setuations:[],professions:[],vois:[],dataloaded:!1,personlist:[],personlistForAuto:[],selectedPatente:[],selectedCinSouscripteur:[],selectedCinAsuree:[],assurePresent:a.props.assurePresent.value,typePersonneMoral:[],secteurActivite:[],typeProduit:"MRB",personMoraleList:[],personMoraleListForAuto:[],souscripteurIsAssure:a.props.souscripteurIsAssure.value,disableSouscripteuretAssure:a.props.souscripteurIsAssure.value,dossierFinnancementForAuto:[],selectedRefDossier:[],consumeReferenceDossier:"",partenaire:a.props.currentUser.pointVentes[0].partenairepv,partenaireCode:"",partenaireRadio:ne,isAdmin:!1,partenaireData:{}},a.handleChangeCinSouscripteur=a.handleChangeCinSouscripteur.bind(Object(b.a)(Object(b.a)(a))),a.clearAutocompleteFields=a.clearAutocompleteFields.bind(Object(b.a)(Object(b.a)(a))),a.saveSouscripteur=a.saveSouscripteur.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n,r,i,l,s,o,c,u,m;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa();case 2:return t=e.sent,e.next=5,ea();case 5:return a=e.sent,e.next=8,Qt();case 8:return n=e.sent,e.next=11,Xt();case 11:return r=e.sent,e.next=14,Zt();case 14:return i=e.sent,e.next=17,Wt();case 17:return l=e.sent,e.next=20,_t();case 20:return s=e.sent,e.next=23,$t();case 23:o=e.sent,c=[],a.data.content.forEach(function(e){var t=e.cin;c.push(t)}),u=[],m=[],l.data.content.forEach(function(e){var t=e.patente;m.push(t)}),this.setState({dossierFinnancementForAuto:[].concat(u),personMoraleList:Object(tt.a)(l.data.content),sexe:Object(tt.a)(n.data),setuations:Object(tt.a)(r.data),vois:Object(tt.a)(t.data),dataloaded:!0,professions:Object(tt.a)(i.data.content),personlist:Object(tt.a)(a.data.content),personlistForAuto:[].concat(c),personMoraleListForAuto:[].concat(m),typePersonneMoral:Object(tt.a)(s.data),secteurActivite:Object(tt.a)(o.data.content)});case 30:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.getproprties(),this.props.currentUser.roles.forEach(function(t){"ADMIN"===t.name?e.setState({isAdmin:!0,partenaireCode:e.state.partenaireRadio}):e.setState({partenaireCode:e.props.currentUser.pointVentes[0].partenairepv.code})})}},{key:"handleChangeCinSouscripteur",value:function(e){this.setState({selectedCinSouscripteur:e})}},{key:"clearAutocompleteFields",value:function(){this.props.form.setFieldsValue({patente:"",cin:"",cinAssure:"",numeroDossierFinancement:""})}},{key:"componentDidUpdate",value:function(e,t){this.props.check(this.state.souscripteurIsAssure,this.state.souscripteurIsAssure||this.state.assurePresent,""!==this.state.souscripteur,this.state.souscripteur,this.state.assure,Rl)}},{key:"calculeAge",value:function(e){return Kt()().diff(Kt()(e),"years")}},{key:"saveSouscripteur",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=this.state.partenaireCode,m=t,localStorage.getItem(G)?ae({url:L+"/private/getDataByPartenaire?partenaireCode="+c+"&referenceDossier="+m,method:"GET"}):Promise.reject("No access token set.");case 2:if(""!==(a=e.sent).data){e.next=7;break}u.a.info({message:"aucune donn\xe9e re\xe7ue"}),e.next=40;break;case 7:if(a.data.partenaire=this.state.partenaire,"physique"!==a.data.typePersonne){e.next=23;break}return e.prev=9,console.log(a.data),e.next=13,Jt(a.data);case 13:200===(n=e.sent).status&&(u.a.success({message:"personne bien ajoute"}),Rl=a.data,this.setState({personlist:[].concat(Object(tt.a)(this.state.personlist),[n.data]),souscripteur:n.data,radio:"physique",personlistForAuto:[].concat(Object(tt.a)(this.state.personlistForAuto),[a.data.cin])}),this.props.form.setFieldsValue({cin:{key:n.data.cin,label:n.data.cin},radio:"physique"})),e.next=23;break;case 17:return e.prev=17,e.t0=e.catch(9),e.next=21,o=a.data.cin,localStorage.getItem(G)?ae({url:L+"/private/personne-physique/"+o,method:"GET"}):Promise.reject("No access token set.");case 21:200===(r=e.sent).status?(u.a.success({message:"personne deja inscrit"}),Rl=a.data,this.setState({personlist:[].concat(Object(tt.a)(this.state.personlist),[r.data]),souscripteur:r.data,radio:"physique",personlistForAuto:[].concat(Object(tt.a)(this.state.personlistForAuto),[a.data.cin])}),this.props.form.setFieldsValue({cin:{key:r.data.cin,label:r.data.cin},radio:"physique"})):500===e.t0.responsecin.status&&u.a.error({message:"Sorry! Something went wrong. Please try again!!!!!!!!!!!!!"});case 23:if("morale"!==a.data.typePersonne){e.next=39;break}return e.prev=24,e.next=27,ta(a.data);case 27:200===(i=e.sent).status&&(Rl=a.data,u.a.success({message:"personne bien ajoute"}),this.setState({personMoraleList:[].concat(Object(tt.a)(this.state.personMoraleList),[i.data]),souscripteur:i.data,radio:"morale",personlistForAuto:[].concat(Object(tt.a)(this.state.personlistForAuto),[a.data.patente])}),this.props.form.setFieldsValue({patente:{key:a.data.patente,label:a.data.patente},radio:"morale"})),e.next=37;break;case 31:return e.prev=31,e.t1=e.catch(24),e.next=35,s=a.data.patente,localStorage.getItem(G)?ae({url:L+"/private/personne-morale/"+s,method:"GET"}):Promise.reject("No access token set.");case 35:200===(l=e.sent).status?(Rl=a.data,u.a.success({message:"personne deja inscrit"}),this.setState({personMoraleList:[].concat(Object(tt.a)(this.state.personMoraleList),[l.data]),souscripteur:l.data,radio:"morale",personlistForAuto:[].concat(Object(tt.a)(this.state.personlistForAuto),[a.data.patente])}),this.props.form.setFieldsValue({patente:{key:a.data.patente,label:a.data.patente},radio:"morale"})):500===e.t1.response.status?u.a.error({message:"Attention! Il y a une manque des donn\xe9es"}):u.a.error({message:"Takaful",description:e.t1.message||"Sorry! saisissez les champs manquents"});case 37:e.next=40;break;case 39:""===a.data.typePersonne&&u.a.info({message:"le type du client manquant"});case 40:case"end":return e.stop()}var s,o,c,m},e,this,[[9,17],[24,31]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=Kt()().diff(Kt()(this.state.souscripteur.dateNaissance,"DD-MM-YYYY").format(),"years");return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{offset:1,span:23},r.a.createElement(lt,{level:4,title:"Le souscripteur"}),r.a.createElement(He.a,{layout:"inline",onSubmit:this.handleSabmit,id:"formadd"},r.a.createElement("div",{style:{minHeight:"200px"}},r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:8},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,e("radio",{rules:[{required:!1}],initialValue:this.state.radio})(r.a.createElement(Ut.a.Group,{style:{marginBottom:25},buttonStyle:"solid",value:this.state.radio,onChange:this.handlechange},r.a.createElement(Ut.a.Button,{value:"morale"},"Personne morale"),r.a.createElement(Ut.a.Button,{value:"physique"},"Personne physique"))))),r.a.createElement(xe.a,{span:24},"physique"===this.state.radio&&r.a.createElement(He.a.Item,{label:"CIN"},e("cin",{rules:[{required:!0,message:"CIN is required!"}]})(r.a.createElement(Yt.a,{disabled:this.state.disableSouscripteuretAssure,defaultActiveFirstOption:!0,size:"default",style:{width:200},dataSource:this.state.personlistForAuto,onSelect:this.searchPersonnePhysique,allowClear:!0,value:this.state.selectedCinSouscripteur,onChange:this.handleChangeCinSouscripteur,labelInValue:!0,placeholder:"CIN",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),"morale"===this.state.radio&&r.a.createElement(He.a.Item,{label:"Patente"},e("patente",{rules:[{required:!0,message:"patente is required!"}]})(r.a.createElement(Yt.a,{size:"default",className:"not-rounded",style:{width:182},dataSource:this.state.personMoraleListForAuto,onSelect:this.searchPersonnemorale,allowClear:!0,labelInValue:!0,placeholder:"Num\xe9ro de patente",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),r.a.createElement(He.a.Item,{style:{float:"right"}},this.state.dataloaded&&"physique"===this.state.radio&&r.a.createElement(da,{titre:"Cr\xe9ation d'un nouveau souscripteur physique",personCreation:this.handlePersonphyCreationSousctipteur,professions:this.state.professions,sexe:this.state.sexe,setuation:this.state.setuations,vois:this.state.vois,type:this.state.typeProduit}),this.state.dataloaded&&"morale"===this.state.radio&&r.a.createElement(va,{titre:"Cr\xe9ation",personCreation:this.handlePersonMoraleCreationSousctipteur,typePersonneMoral:this.state.typePersonneMoral,secteurActivite:this.state.secteurActivite,vois:this.state.vois})),"physique"===this.state.radio&&r.a.createElement(Rn.a,{style:{marginTop:"10px"},onChange:this.onChange,checked:this.state.souscripteurIsAssure,disabled:"physique"===!this.state.radio},"Le souscripteur est l'assur\xe9 lui m\xeame ?"),r.a.createElement(o.a,{style:{marginTop:"20px"}})),r.a.createElement(xe.a,{span:24},!0===this.state.isAdmin&&r.a.createElement(He.a.Item,null,e("partenaire",{rules:[{required:!1}],initialValue:this.state.partenaireRadio})(r.a.createElement(Ut.a.Group,{style:{marginBottom:25},buttonStyle:"solid",value:this.state.partenaireRadio,onChange:this.changePartenaire},r.a.createElement(Ut.a.Button,{value:ne},"AlAkhdar banque"),r.a.createElement(Ut.a.Button,{value:"BKAY"},"AlYousr banque")))),r.a.createElement(He.a.Item,{label:"N\xb0 Dossier de financement/Id Client"},e("numeroDossierFinancement",{rules:[{required:!1}]})(r.a.createElement(Nl.a,{onSearch:this.saveSouscripteur,placeholder:"N\xb0 Dossier de financement",enterButton:"OK"}))))),r.a.createElement(xe.a,{offset:1,span:14},"physique"===this.state.radio&&""!==this.state.souscripteur&&t<=69&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations du souscripteur physique"},r.a.createElement(En.a.Item,{label:"Pr\xe9nom"},this.state.souscripteur.prenom),r.a.createElement(En.a.Item,{label:"Nom"},this.state.souscripteur.nom),r.a.createElement(En.a.Item,{label:"Date de naissance"},this.state.souscripteur.dateNaissance),r.a.createElement(En.a.Item,{label:"Age"},t," "),r.a.createElement(En.a.Item,{label:"CIN"},this.state.souscripteur.cin),r.a.createElement(En.a.Item,{label:"RIB"},this.state.souscripteur.rib),r.a.createElement(En.a.Item,{label:"Matricule"},this.state.souscripteur.matricule),r.a.createElement(En.a.Item,{label:"N\xb0 Tiers"},this.state.souscripteur.numTiers)),""===this.state.souscripteur&&r.a.createElement(oi.a,{description:"Merci de mentionner le num\xe9ro de patente ou cin",style:{margin:"3% auto",color:"rgba(0, 0, 0, 0.45)"}}),"physique"===this.state.radio&&""!==this.state.souscripteur&&t>69&&u.a.error({message:"Takaful",description:"Ce soci\xe9taire a d\xe9pass\xe9 l'\xe2ge autoris\xe9 \xe0 la souscription"}),"morale"===this.state.radio&&""!==this.state.souscripteur&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations du souscripteur morale"},r.a.createElement(En.a.Item,{label:"Abb"},this.state.souscripteur.abb),r.a.createElement(En.a.Item,{label:"Raison sociale"},this.state.souscripteur.raisonSociale),r.a.createElement(En.a.Item,{label:"Patente"},this.state.souscripteur.patente),r.a.createElement(En.a.Item,{label:"Ice"},this.state.souscripteur.ice),r.a.createElement(En.a.Item,{label:"Code"},this.state.souscripteur.code))),r.a.createElement(xe.a,{offset:1,span:1}))),r.a.createElement("div",{style:{minHeight:"200px"}},r.a.createElement(ye.a,{style:{marginTop:"20px"}},r.a.createElement(lt,{level:4,title:"L'assur\xe9"}),r.a.createElement(xe.a,{span:8},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"L'assur\xe9"},e("cinAssure",{rules:[{required:!0,message:"assuree is required!"}]})(r.a.createElement(Yt.a,{disabled:this.state.disableSouscripteuretAssure&&"physique"===this.state.radio,size:"default",style:{width:182},dataSource:this.state.personlistForAuto,onSelect:this.onChangeSelect,allowClear:!0,labelInValue:!0,placeholder:"ajouter un assur\xe9",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),r.a.createElement(He.a.Item,{style:{float:"right"}},this.state.dataloaded&&r.a.createElement(da,{titre:"Cr\xe9ation d'un nouveau assur\xe9",personCreation:this.handlePersonphyCreationAssure,professions:this.state.professions,sexe:this.state.sexe,setuation:this.state.setuations,vois:this.state.vois}))),r.a.createElement(xe.a,{span:24})),r.a.createElement(xe.a,{offset:1,span:14},""!==this.state.assure&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations de l'assur\xe9"},r.a.createElement(En.a.Item,{label:"Pr\xe9nom"},this.state.assure.prenom),r.a.createElement(En.a.Item,{label:"Nom"},this.state.assure.nom),r.a.createElement(En.a.Item,{label:"Date de naissance"},this.state.assure.dateNaissance),r.a.createElement(En.a.Item,{label:"Age"},t," "),r.a.createElement(En.a.Item,{label:"CIN"},this.state.assure.cin),r.a.createElement(En.a.Item,{label:"Matricule"},this.state.assure.matricule)),""===this.state.assure&&r.a.createElement(oi.a,{description:"Merci de remplir la partie assure",style:{margin:"3% auto",color:"rgba(0, 0, 0, 0.45)"}})),r.a.createElement(xe.a,{offset:1,span:1}))))),r.a.createElement(xe.a,{offset:1,span:1}))}}]),t}(n.Component),Vl=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{numeroDossierFinancement:He.a.createFormField(Object(at.a)({},e.numeroDossierFinancement,{value:e.numeroDossierFinancement.value})),cin:He.a.createFormField(Object(at.a)({},e.cin,{value:e.cin.value})),patente:He.a.createFormField(Object(at.a)({},e.patente,{value:e.patente.value})),assure:He.a.createFormField(Object(at.a)({},e.assure,{value:e.assure.value})),souscripteur:He.a.createFormField(Object(at.a)({},e.souscripteur,{value:e.souscripteur.value})),radio:He.a.createFormField(Object(at.a)({},e.radio,{value:e.radio.value}))}}})(ql),zl=(a(1025),Kt()(Kt()(),"DD-MM-YYYY").add(1,"days")),Yl=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSabmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){console.log("values",t)})},a.onChangeDatePrelevement=function(e){a.setState({datePrelevement:e})},a.onChangeDiffere=function(e){a.setState({differe:e.target.value})},a.onChangeCapital=function(e){if(a.setState({capital:e.target.value}),null!==a.state.encours){var t=parseFloat(a.state.encours)+parseFloat(e.target.value);console.log("index :",t),a.setState({cumul:parseFloat(a.state.encours)+parseFloat(e.target.value)}),a.props.form.setFieldsValue({cumul:parseFloat(a.state.encours)+parseFloat(e.target.value)})}},a.onChangeOption=function(e){a.setState({option:e})},a.onChangemontantSurprime=function(e){a.setState({montantSurprime:e.target.value})},a.onChangetauxSurprime=function(e){a.setState({tauxSurprime:e.target.value})},a.onChangeEncours=function(e){a.setState({encours:e.target.value})},a.calculer=function(){if(!0===a.state.tarification.found)a.setState({calculResultVisibilty:!0});else{var e="open".concat(Date.now()),t=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(e)}},"Confirm");u.a.warn({message:"Tarification produit invalide",description:"le produit que vous avez choisi ne contient pas de tarification avec les valeurs saisie, merci d'avoir v\xe9rifier les valeurs et r\xe9ssayer!",btn:t,duration:0,key:e})}},a.state={calculResultVisibilty:!1,OptionsAssurance:[],tarification:{},capital:null,option:null,differe:null,tauxSurprime:null,tauxFrais:null,tauxGestion:null,tvaFrais:null,tvaGestion:null,montantSurprime:0,montantCotisation:0,cotisationTotale:0,tauxTaxe:null,prorata:0,encours:null,cumul:0,fraisAcquisitionTTC:0,fraisGestionTTC:0,contributionPure:null,datePrelevement:null,PrelevementSource:a.props.PrelevementSource.value},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getTariffication",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r,i,l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kt()().diff(Kt()(this.props.assureObj.dateNaissance,"DD-MM-YYYY").format(),"years"),r=this.props.dureeContrat.value,i=this.props.selectedproduit.produitType,e.next=5,_a(r,n,t,a,i,this.props.selectedproduit.id);case 5:l=e.sent,this.setState({tarification:l.data});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){null!==this.props.consumeData&&(null===this.props.consumeData.differe&&u.a.open({message:"Le diff\xe9r\xe9 manquant."}),null===this.props.consumeData.capitalAssure&&u.a.open({message:"Le capital assur\xe9 manquant."}),null===this.props.consumeData.datePrelevement&&u.a.open({message:"La date de pr\xe9l\xe9vement manquante."}),null===this.props.consumeData.encours&&u.a.open({message:"L'encours manquant."}),console.log(this.props.consumeData),this.setState({differe:this.props.consumeData.differe,capital:this.props.consumeData.capitalAssure,datePrelevement:Kt()(this.props.consumeData.datePrelevement,"YYYY-MM-DD"),encours:this.props.consumeData.encours}),this.props.form.setFieldsValue({Differe:this.props.consumeData.differe,capitalAssure:this.props.consumeData.capitalAssure,encours:this.props.consumeData.encours,montantSurprime:this.props.consumeData.montantSurprime,datePrelevement:Kt()(this.props.consumeData.datePrelevement,"YYYY-MM-DD")})),1===this.props.selectedproduit.options.length&&this.props.form.setFieldsValue({optionAssurance:this.props.selectedproduit.options[0].id}),this.props.form.setFieldsValue({tauxTaxe:this.props.selectedproduit.taxe.toFixed(2),tauxInteret:0,dureeContrat:this.props.dureeContrat.value}),this.setState({tauxTaxe:this.props.selectedproduit.taxe.toFixed(2),tauxFrais:this.props.selectedproduit.fraisAcquisition,tauxGestion:this.props.selectedproduit.fraisGestion,tvaFrais:this.props.selectedproduit.tvaFraisAcquisition,tvaGestion:this.props.selectedproduit.tvaFraisGestion,tauxInteret:0,OptionsAssurance:this.props.selectedproduit.options}),this.props.form.setFieldsValue({montantSurprime:0,tauxSurprime:0})}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.selectedproduit.produitType;if(t.differe===this.state.differe&&t.capital===this.state.capital||""!==this.state.capital&&""!==this.state.differe&&null!==this.state.differe&&null!==this.state.capital&&this.getTariffication(this.state.capital,this.state.differe),t.tarification!==this.state.tarification&&"taux"===n){var r=this.props.form.getFieldValue("capitalAssure");this.setState({montantCotisation:this.state.tarification.taux*r/100}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.taux*r/100})}else t.tarification!==this.state.tarification&&"forfait"===n&&(this.setState({montantCotisation:this.state.tarification.forfait}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.forfait}),this.setState({fraisAcquisitionTTC:this.state.tauxFrais/100*(1+this.state.tvaFrais/100)*this.state.montantCotisation}),this.setState({fraisGestionTTC:this.state.tauxGestion/100*(1+this.state.tvaGestion/100)*this.state.montantCotisation}),this.setState({contributionPure:this.state.montantCotisation-this.state.fraisAcquisitionTTC-this.state.fraisGestionTTC}));t.montantCotisation!==this.state.montantCotisation&&(this.setState({fraisAcquisitionTTC:this.state.tauxFrais/100*(1+this.state.tvaFrais/100)*this.state.montantCotisation}),this.props.form.setFieldsValue({fraisAcquisitionTTC:(this.props.selectedproduit.taxeParaFiscale/100*this.state.montantCotisation).toFixed(2)}),this.props.form.setFieldsValue({montantTaxeParafiscale:(this.state.tauxFrais/100*(1+this.state.tvaFrais/100)*this.state.montantCotisation).toFixed(2)}),this.props.form.setFieldsValue({montantAccessoire:this.props.selectedproduit.montantAccessoire.toFixed(2)}),this.setState({fraisGestionTTC:this.state.tauxGestion/100*(1+this.state.tvaGestion/100)*this.state.montantCotisation}),this.props.form.setFieldsValue({fraisGestionTTC:(this.state.tauxGestion/100*(1+this.state.tvaGestion/100)*this.state.montantCotisation).toFixed(2)})),t.fraisGestionTTC!==this.state.fraisGestionTTC&&(this.setState({contributionPure:this.state.montantCotisation-this.state.fraisAcquisitionTTC-this.state.fraisGestionTTC}),this.props.form.setFieldsValue({contributionPure:(this.state.montantCotisation-this.state.fraisAcquisitionTTC-this.state.fraisGestionTTC).toFixed(2)})),t.montantSurprime!==this.state.montantSurprime&&null!==this.state.montantCotisation&&this.props.form.validateFields(["montantSurprime"],function(e,t){e||(a.props.form.setFieldsValue({tauxSurprime:a.state.montantSurprime/a.state.montantCotisation*100}),a.setState({tauxSurprime:a.state.montantSurprime/a.state.montantCotisation*100}))}),t.tauxSurprime!==this.state.tauxSurprime&&null!==this.state.montantCotisation&&this.props.form.validateFields(["tauxSurprime"],function(e,t){e||(a.props.form.setFieldsValue({montantSurprime:a.state.tauxSurprime*a.state.montantCotisation/100}),a.setState({montantSurprime:a.state.tauxSurprime*a.state.montantCotisation/100}))}),t.montantSurprime===this.state.montantSurprime&&this.state.montantCotisation===t.montantCotisation||null!==this.state.montantCotisation&&this.props.form.validateFields(["montantSurprime"],function(e,t){if(!e){var n=a.state.montantCotisation/100*a.state.tauxTaxe;a.props.form.setFieldsValue({cotisationTotale:a.state.montantSurprime+a.state.montantCotisation+n}),a.setState({cotisationTotale:a.state.montantSurprime+a.state.montantCotisation+n})}}),t.montantCotisation!==this.state.montantCotisation&&"Unique"!==this.props.preiodicite.value.label&&null!==this.state.montantCotisation&&(zl.format("D")<=15?(this.props.form.setFieldsValue({prorata:this.state.montantCotisation*((13-Kt()().format("M"))/12)}),this.setState({prorata:this.state.montantCotisation*((13-Kt()().format("M"))/12)})):(this.props.form.setFieldsValue({prorata:this.state.montantCotisation*((12-this.props.dateEffet.value.format("M"))/12)}),this.setState({prorata:this.state.montantCotisation*((12-this.props.dateEffet.value.format("M"))/12)}))),t.prorata!==this.state.prorata&&null!==this.state.tauxTaxe&&(this.props.form.setFieldsValue({montantTaxe:this.state.prorata*this.state.tauxTaxe/100}),this.setState({montantTaxe:this.state.prorata*this.state.tauxTaxe/100})),t.prorata!==this.state.prorata&&null!==this.state.tauxFrais&&(this.props.form.setFieldsValue({montantFrais:this.state.prorata*this.state.tauxFrais/100}),this.setState({montantFrais:this.state.prorata*this.state.tauxFrais/100})),t.encours!==this.state.encours&&null!==this.state.capital&&(this.setState({cumul:parseFloat(this.state.encours)+parseFloat(this.state.capital)}),this.props.form.setFieldsValue({cumul:parseFloat(this.state.encours)+parseFloat(this.state.capital)}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=[{key:"1",cotisation:parseFloat(this.state.montantCotisation).toFixed(2),montantTaxe:parseFloat(this.state.montantCotisation*this.state.tauxTaxe/100).toFixed(2),total:parseFloat(this.state.cotisationTotale).toFixed(2),Prorata:parseFloat(this.state.prorata).toFixed(2),taxeProrata:parseFloat(10*this.state.prorata/100).toFixed(2),ProrataTTC:parseFloat(10*this.state.prorata/100+this.state.prorata).toFixed(2)}],a=[{key:"1",cotisation:parseFloat(this.state.montantCotisation).toFixed(2),montantTaxe:parseFloat(this.state.montantCotisation*this.state.tauxTaxe/100).toFixed(2),total:parseFloat(this.state.cotisationTotale).toFixed(2)}];return r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSabmit,id:"stepthree"}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9"},e("Differe",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{addonAfter:"Mois",onChange:this.onChangeDiffere,className:"number-input"}))),r.a.createElement(He.a.Item,{label:"Taux surprime"},e("tauxSurprime",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%",className:"number-input",onChange:this.onChangetauxSurprime}))),r.a.createElement(He.a.Item,{label:"Montant surprime"},e("montantSurprime",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input",onChange:this.onChangemontantSurprime}))),r.a.createElement(He.a.Item,{label:"Encours"},e("encours",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input",onChange:this.onChangeEncours}))),0!==this.state.OptionsAssurance.length&&r.a.createElement(He.a.Item,{label:""},r.a.createElement(I.a,{style:{backgroundColor:"#fafafa",border:"none"},disabled:!0})),r.a.createElement(He.a.Item,{label:"Montant Taxe",hidden:!0},e("montantTaxe",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!",required:!0}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Taux de taxe",hidden:!0},e("tauxTaxe",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"  %  ",className:"number-input simulation-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Montant de cotisation",hidden:!0},e("montantCotisation",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{addonBefore:"MC",addonAfter:"DH",className:"number-input simulation-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Frais Acquisition TTC",hidden:!0},e("fraisAcquisitionTTC",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input simulation-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Frais gestion TTC",hidden:!0},e("fraisGestionTTC",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input simulation-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Contribution Pure",hidden:!0},e("contributionPure",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input simulation-input",disabled:!0})))),r.a.createElement(xe.a,{span:1}),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Dur\xe9e du contrat"},e("dureeContrat",{rules:[{required:!0,pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%",className:"number-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Taux de financement"},e("tauxInteret",{rules:[{required:!0,pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%",className:"number-input"}))),r.a.createElement(He.a.Item,{label:"Capital assur\xe9"},e("capitalAssure",{rules:[{required:!0,pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DH",onChange:this.onChangeCapital,className:"number-input"}))),r.a.createElement(He.a.Item,{label:"Date de pr\xe9l\xe8vement"},e("datePrelevement",{rules:[{required:!0,message:"ce champ est obligatoire"}]})(r.a.createElement(Lt.a,{onChange:this.onChangeDatePrelevement,format:"DD-MM-YYYY",className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Montant du frais",hidden:!0},e("montantFrais",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!",required:!0}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Montant taxe parafiscale",hidden:!0},e("montantTaxeParafiscale",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!",required:!0}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Montant Accessoire",hidden:!0},e("montantAccessoire",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!",required:!0}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Cumul",hidden:!0},e("cumul",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input simulation-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Cotisation totale",hidden:!0},e("cotisationTotale",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{addonBefore:"CT",addonAfter:"DH",className:"number-input simulation-input",disabled:!0}))),r.a.createElement(He.a.Item,{label:"Prorata",hidden:!0},e("prorata",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DH",className:"number-input",disabled:!0})))),r.a.createElement(xe.a,{span:10}),r.a.createElement(xe.a,{span:2},r.a.createElement(fe.a,{type:"primary",className:"nouveau-btn",style:{float:"right"},onClick:this.calculer},"Calculer"))))),this.state.calculResultVisibilty?"Unique"===this.props.preiodicite.value.label?r.a.createElement(ye.a,null,r.a.createElement(Je.a,{className:"table-simulation",columns:[{title:"MONTANT DE PARTICIPATION HT (DH)",dataIndex:"cotisation"},{title:"Montant de taxe (DH)",dataIndex:"montantTaxe"},{title:"Montant de participation TTC (DH)",dataIndex:"total"}],dataSource:a,pagination:!1,align:"center",size:"middle"})):r.a.createElement(ye.a,null,r.a.createElement(Je.a,{className:"table-simulation",columns:[{title:"MONTANT DE PARTICIPATION HT (DH)",dataIndex:"cotisation"},{title:"Montant de taxe (DH)",dataIndex:"montantTaxe"},{title:"Montant de participation TTC (DH)",dataIndex:"total"},{title:"Prorata HT (DH)",dataIndex:"Prorata"},{title:"Montant taxe 10% au prorata (DH)",dataIndex:"taxeProrata"},{title:"Prorata TTC (DH)",dataIndex:"ProrataTTC"}],dataSource:t,pagination:!1,align:"center",size:"middle"})):"")}}]),t}(n.Component),Bl=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{Differe:He.a.createFormField(Object(at.a)({},e.Differe,{value:e.Differe.value})),optionAssurance:He.a.createFormField(Object(at.a)({},e.optionAssurance,{value:e.optionAssurance.value})),prorata:He.a.createFormField(Object(at.a)({},e.prorata,{value:e.prorata.value})),capitalAssure:He.a.createFormField(Object(at.a)({},e.capitalAssure,{value:e.capitalAssure.value})),montantSurprime:He.a.createFormField(Object(at.a)({},e.montantSurprime,{value:e.montantSurprime.value})),montantFrais:He.a.createFormField(Object(at.a)({},e.montantFrais,{value:e.montantFrais.value})),montantTaxe:He.a.createFormField(Object(at.a)({},e.montantTaxe,{value:e.montantTaxe.value})),tauxTaxe:He.a.createFormField(Object(at.a)({},e.tauxTaxe,{value:e.tauxTaxe.value})),montantCotisation:He.a.createFormField(Object(at.a)({},e.montantCotisation,{value:e.montantCotisation.value})),datePrelevement:He.a.createFormField(Object(at.a)({},e.datePrelevement,{value:e.datePrelevement.value})),tauxInteret:He.a.createFormField(Object(at.a)({},e.tauxInteret,{value:e.tauxInteret.value})),tauxSurprime:He.a.createFormField(Object(at.a)({},e.tauxSurprime,{value:e.tauxSurprime.value})),cotisationTotale:He.a.createFormField(Object(at.a)({},e.cotisationTotale,{value:e.cotisationTotale.value})),encours:He.a.createFormField(Object(at.a)({},e.encours,{value:e.encours.value})),cumul:He.a.createFormField(Object(at.a)({},e.cumul,{value:e.cumul.value})),fraisAcquisitionTTC:He.a.createFormField(Object(at.a)({},e.fraisAcquisitionTTC,{value:e.fraisAcquisitionTTC.value})),fraisGestionTTC:He.a.createFormField(Object(at.a)({},e.fraisGestionTTC,{value:e.fraisGestionTTC.value})),contributionPure:He.a.createFormField(Object(at.a)({},e.contributionPure,{value:e.contributionPure.value})),dureeContrat:He.a.createFormField(Object(at.a)({},e.dureeContrat,{value:e.dureeContrat.value})),montantTaxeParafiscale:He.a.createFormField(Object(at.a)({},e.montantTaxeParafiscale,{value:e.montantTaxeParafiscale.value})),montantAccessoire:He.a.createFormField(Object(at.a)({},e.montantAccessoire,{value:e.montantAccessoire.value}))}}})(Yl),Ll=$e.a.Option,Gl=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleEffetDateChange=function(e){if(null!==a.state.dateEcheance){var t=a.state.dateEcheance;a.setState({dateEffet:e,dureeContrat:t.diff(e,"months")})}},a.handleEcheanceDateChange=function(e){var t=a.state.dateEffet;if(a.setState({dateEcheance:e,dureeContrat:e.diff(t,"months")}),a.props.form.setFieldsValue({dureeContrat:e.diff(t,"months")}),Kt()(e).diff(Kt()(a.props.assure.value.dateNaissance,"DD-MM-YYYY").format(),"years")>=70){a.props.form.setFieldsValue({dureeContrat:" "});var n="open".concat(Date.now()),i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(n)}},"Confirm");u.a.error({message:"TAKAFUL",description:"l'\xe2ge du soci\xe8taire \xe0 l'\xe9ch\xe9ance d\xe9passe 70.",btn:i,duration:0,key:n})}},a.disabledDate=function(e){return e&&e<Kt()(Kt()().format("YYYY-MM-DD"),"YYYY-MM-DD").add(2,"days")},a.disabledDateEcheance=function(e){return e&&e<a.state.dateEffet.endOf("day")},a.handleSabmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll()},a.onChange=function(e){var t=Kt.a.addRealMonth(a.state.dateEffet,e.target.value);if(a.setState({dureeContrat:e.target.value,dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value)}),a.props.form.setFieldsValue({dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value),dureeContrat:parseInt(e.target.value)}),Kt()(t).diff(Kt()(a.props.assure.value.dateNaissance,"DD-MM-YYYY").format(),"years")>=70){e.target.value="";var n="open".concat(Date.now()),i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(n)}},"Confirm");u.a.error({message:"TAKAFUL",description:"l'\xe2ge du soci\xe8taire \xe0 l'echeance d\xe9passe 70.",btn:i,duration:0,key:n})}},a.onChangeProduit=function(e){var t=a.state.produits.filter(function(t){return t.code===e.label});if(0===t[0].normes.length){var n="open".concat(Date.now()),i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(n)}},"Confirm");a.setState({booleen:!0}),u.a.error({message:"TAKAFUL",description:"Le produit choisi n'a aucune norme de s\xe9l\xe9ction.",btn:i,duration:0,key:n})}a.setState({periodicites:t[0].periodicites,selectedProduct:t[0].code})},a.partnerChange=function(e){a.setState({produits:a.props.produits.filter(function(t){return t.partenaire.raisonSocial===e.label})}),a.props.form.setFieldsValue({produit:"",preiodicite:""})},a.onChangePointDeVente=function(){a.props.form.setFieldsValue({produit:"",preiodicite:"",partenaire:""})},a.onChangePeriodicite=function(e){"Unique avec \xe9talement"===e.label?a.setState({showField:!0}):a.setState({showField:!1})},a.state={pointsVentes:a.props.currentUser.pointVentes,periodicites:[],showField:!1,produits:[],dateEffet:null!==a.props.consumeData?Kt()(a.props.consumeData.dateEffet,"DD/MM/YYYY"):Kt()(Kt()(),"YYYY-MM-DD").add(1,"days"),dateEcheance:a.props.dateEcheance.value,dureeContrat:a.props.dureeContrat.value,selectedProduct:a.props.selectedProduct.value},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){null!==this.props.consumeData?(null===this.props.consumeData.dureeContrat&&u.a.open({message:"La dur\xe9e du contrat manquante."}),null===this.props.consumeData.dateEcheance&&u.a.open({message:"Date d'\xe9cheance manquant."}),null===this.props.consumeData.partenaire&&u.a.open({message:"Le partenaire manquant."}),null===this.props.consumeData.produit&&u.a.error({message:"Le produit manquant."}),null===this.props.consumeData.preiodicite&&u.a.open({message:"La p\xe9riodicit\xe9 manquante."}),this.props.form.setFieldsValue({dateEffet:Kt()(this.props.consumeData.dateEffet,"DD/MM/YYYY"),dureeContrat:this.props.consumeData.dureeContrat,dateEcheance:Kt()(this.props.consumeData.dateEcheance,"DD/MM/YYYY"),partenaire:{key:this.props.consumeData.partenaire.id,label:this.props.consumeData.partenaire.raisonSocial},produit:{key:this.props.consumeData.produit.id,label:this.props.consumeData.produit.code},preiodicite:{key:this.props.consumeData.preiodicite.id,label:this.props.consumeData.preiodicite.libelle}})):this.props.form.setFieldsValue({dateEffet:this.state.dateEffet}),1===this.state.pointsVentes.length&&this.props.form.setFieldsValue({pointVente:this.state.pointsVentes[0].id})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSabmit,id:"steptwo"}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'effet",hasFeedback:!0},e("dateEffet",{valuePropName:"selected",rules:[{required:!0,message:"entre la Date d'effet"}]})(r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY",disabledDate:this.disabledDate,defaultValue:this.state.dateEffet,onChange:this.handleEffetDateChange}))),r.a.createElement(He.a.Item,{label:"Dur\xe9e de contrat"},e("dureeContrat",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{type:"number",className:"number-input",onChange:this.onChange,addonAfter:"Mois",defaultValue:this.state.dureeContrat,placeholder:"dur\xe9e de contrat"}))),r.a.createElement(He.a.Item,{label:"Interm\xe9diaire",hasFeedback:!0},e("partenaire",{rules:[{required:!0,message:"selectionnez un Interm\xe9diaire"}]})(r.a.createElement($e.a,{placeholder:"Interm\xe9diaire",onSelect:this.partnerChange,labelInValue:!0},this.props.partenaires.map(function(e){return r.a.createElement(Ll,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)}))))),r.a.createElement(xe.a,{span:1}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'\xe9ch\xe9ance",hasFeedback:!0},e("dateEcheance",{rules:[{required:!0,message:"selectionnez une date d'echeance"}]})(r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY",disabledDate:this.disabledDateEcheance,onChange:this.handleEcheanceDateChange}))),r.a.createElement(He.a.Item,{label:"Agence",hasFeedback:!0},e("pointVente",{rules:[{required:!0,message:"selectionnez une agence"}]})(r.a.createElement($e.a,{placeholder:"agence",defaultValue:1===this.state.pointsVentes.length&&this.state.pointsVentes[0].id,onChange:this.onChangePointDeVente},this.state.pointsVentes.map(function(e){return r.a.createElement(Ll,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))),r.a.createElement(He.a.Item,{label:"Produit",hasFeedback:!0},e("produit",{rules:[{required:!0,message:"selectionnez un produit"}]})(r.a.createElement($e.a,{placeholder:"produit",onChange:this.onChangeProduit,labelInValue:!0},this.state.produits.map(function(e){return r.a.createElement(Ll,{key:e.id,value:e.id,label:e.code},e.code)})))),r.a.createElement(He.a.Item,{label:"Pr\xe9iodicit\xe9",hasFeedback:!0},e("preiodicite",{rules:[{required:!0,message:"selectionnez une preiodicite"}]})(r.a.createElement($e.a,{onChange:this.onChangePeriodicite,placeholder:"Pr\xe9iodicit\xe9",labelInValue:!0},this.state.periodicites.map(function(e){return r.a.createElement(Ll,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))),this.state.showField&&r.a.createElement(He.a.Item,{label:"Nombre mensualit\xe9s d\u2019\xe9talement de la prime unique:"},e("NombreMensualitesEtalementLaPrimeUnique",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"number-input"})))))))}}]),t}(n.Component);Kt.a.addRealMonth=function(e,t){var a=Kt()(e).add(t,"M"),n=Kt()(a).endOf("month");return e.date()!==a.date()&&a.isSame(n.format("YYYY-MM-DD"))?a.add(1,"d"):a};var Ul=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{NombreMensualitesEtalementLaPrimeUnique:He.a.createFormField(Object(at.a)({},e.NombreMensualitesEtalementLaPrimeUnique,{value:e.NombreMensualitesEtalementLaPrimeUnique.value})),dateEffet:He.a.createFormField(Object(at.a)({},e.dateEffet,{value:e.dateEffet.value})),dureeContrat:He.a.createFormField(Object(at.a)({},e.dureeContrat,{value:e.dureeContrat.value})),preiodicite:He.a.createFormField(Object(at.a)({},e.preiodicite,{value:e.preiodicite.value})),dateEcheance:He.a.createFormField(Object(at.a)({},e.dateEcheance,{value:e.dateEcheance.value})),pointVente:He.a.createFormField(Object(at.a)({},e.pointVente,{value:e.pointVente.value})),produit:He.a.createFormField(Object(at.a)({},e.produit,{value:e.produit.value})),partenaire:He.a.createFormField(Object(at.a)({},e.partenaire,{value:e.partenaire.value})),selectedProduct:He.a.createFormField(Object(at.a)({},e.selectedProduct,{value:e.selectedProduct.value}))}}})(Gl),Hl=Al.a.Step,Kl=$e.a.Option,Wl="",$l=new Date,_l=null,Jl=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(" done modal :",e),console.log(" examinateur modal :",a.state.examinateur),console.log("fields handle ok :",a.state.contrat);var t=[];if(null!==a.state.normes){a.state.normes.honoraires.forEach(function(e){t.push(e.libelle)});var n=t.toString();console.log("fields :",a.state.fields);var r={ville:a.state.contrat.souscripteur.adressVille,nomPrenom:a.state.contrat.souscripteur.nom+" "+a.state.contrat.souscripteur.prenom,cin:a.state.contrat.souscripteur.cin,montantFinancement:a.state.contrat.capitalAssure,montantEncours:a.state.fields.encours.value,montantCumul:a.state.fields.cumul.value,differe:a.state.contrat.differe,duree:a.state.contrat.dureeContrat,taux:a.state.contrat.tauxInteret,intermediaire:a.state.contrat.produit.partenaire.raisonSocial,agence:a.state.contrat.pointVente.libelle,norme:n,dateNaissance:a.state.contrat.souscripteur.dateNaissance,pointVenteVille:a.state.contrat.pointVente.adressVille,examinateurId:a.state.examinateur};a.jasperLettre(r),a.updateDecesContrat(a.state.contrat.id,a.state.examinateur),a.setState({current:0,fields:{radio:{value:"morale"},cin:{value:""},patente:{value:""},assure:{value:""},numeroDossierFinancement:{value:""},souscripteur:{value:""},souscripteurIsAssure:{value:""},assurePresent:{value:!1},preiodicite:{value:""},dureeContrat:{value:""},dateEffet:{value:""},dateEcheance:{value:""},produit:{value:""},pointVente:{value:""},NombreMensualitesEtalementLaPrimeUnique:{value:""},agence:{value:""},partenaire:{value:""},PrelevementSource:{value:!1},Differe:{value:""},optionAssurance:{value:""},montantFrais:{value:""},capitalAssure:{value:""},montantSurprime:{value:""},prorata:{value:""},tauxTaxe:{value:""},montantCotisation:{value:""},tauxInteret:{value:""},datePrelevement:{value:""},montantTaxe:{value:""},tauxSurprime:{value:""},cotisationTotale:{value:""},encours:{value:""},cumul:{value:""},montantTaxeParafiscale:{value:""},montantAccessoire:{value:""},invaliditeOuMaladie:{value:!1},pensionIncapacite:{value:!1},suspendreAtiviteDeuxDernierAnnee:{value:!1},maladiesOuOperationChirurgicaleQuandEtOu:{value:""},suspendreAtiviteDeuxDernierAnneePourquiEtTemps:{value:""},quelleMaladieOuInvalidite:{value:""},maladiesOuOperationChirurgicale:{value:!1}}}),console.log("request lettre :",r)}a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.checkSelectedPers=function(e,t,n,r,i,l){if(t&&n){if(!1===a.state.allow){var s=a.state.fields.souscripteur;s.value=r;var o=a.state.fields.assure;o.value=i;var c=a.state.fields.souscripteurIsAssure;c.value=e;var u=a.state.fields.assurePresent;u.value=u,a.setState({allow:!0,souscripteurObj:r,assureObj:i,newStateSouscripteur:s,newStateAssure:o,newStateSouscripteurIsAssure:c,newStateAssurePresent:u})}"undefined"!==l&&(_l=l)}else!0===a.state.allow&&a.setState({allow:!1})},a.next=function(){if(a.state.allow&&0===a.state.current){var e=a.state.current+1;a.setState({current:e})}Kt()(a.state.fields.dateEcheance.value).diff(Kt()(a.state.assureObj.dateNaissance,"DD-MM-YYYY").format(),"years");if(""!==a.state.fields.produit.value&&""!==a.state.fields.preiodicite.value&&""!==a.state.fields.dateEcheance.value&&1===a.state.current){var t=a.state.current+1;a.setState({current:t})}if(""!==a.state.fields.Differe.value&&""!==a.state.fields.tauxSurprime.value&&""!==a.state.fields.capitalAssure.value&&""!==a.state.fields.montantSurprime.value&&""!==a.state.fields.datePrelevement.value&&""!==a.state.fields.encours.value&&""!==a.state.fields.tauxTaxe.value&&""!==a.state.fields.cumul.value&&""!==a.state.fields.cotisationTotale.value&&2===a.state.current){var n=a.state.current+1;a.setState({current:n})}if(2===a.state.current&&(""===a.state.fields.Differe.value||""===a.state.fields.tauxSurprime.value||""===a.state.fields.capitalAssure.value||""===a.state.fields.montantSurprime.value||""===a.state.fields.datePrelevement.value||""===a.state.fields.encours.value||""===a.state.fields.tauxTaxe.value||""===a.state.fields.cumul.value||""===a.state.fields.cotisationTotale.value)){var i="open".concat(Date.now()),l=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(i)}},"Confirm");u.a.error({message:"Attention!",description:"Ce produit n'a pas une tarification avec les valeurs saisies",btn:l,duration:0,key:i})}if(1===a.state.current){var s=a.state.current+1;a.setState({current:s})}},a.handleConfirm=function(e,t){a.createDecesContrat(e),u.a.close(t)},a.handleConf=function(e){var t={pointVente:Wl,nomPrenom:e.souscripteur.nom+" "+e.souscripteur.prenom,dateNaissance:e.souscripteur.dateNaissance,capital:e.capitalAssure,duree:e.dureeContrat,differe:e.differe,periodicite:a.state.fields.preiodicite.value.label,montantParticipationHT:a.state.fields.montantCotisation.value,taxe:e.montantTaxe,montantParticipationTTC:a.state.fields.cotisationTotale.value,risque:e.produit.risque.libelle,produit:e.produit.code};console.log(e.produit.code),a.jasperFiles(t)},a.handleFormChange=function(e){a.setState(function(t){var a=t.fields;return{fields:Object(at.a)({},a,e)}})},a.onChangeMedecin=function(e){a.setState({examinateur:e})},a.state={assure:!1,examinateur:"",visible:!1,booleen:!1,contrat:[],souscripteur:!1,allow:!1,allowSec:!1,souscripteurObj:{},assureObj:{},current:0,produits:[],Partenaires:[],periodicites:[],normes:null,encours:0,medecins:[],cumul:0,fields:{radio:{value:"morale"},cin:{value:""},patente:{value:""},assure:{value:""},numeroDossierFinancement:{value:""},souscripteur:{value:""},souscripteurIsAssure:{value:""},assurePresent:{value:!1},preiodicite:{value:""},dureeContrat:{value:""},dateEffet:{value:""},dateEcheance:{value:""},produit:{value:""},pointVente:{value:""},NombreMensualitesEtalementLaPrimeUnique:{value:""},agence:{value:""},partenaire:{value:""},selectedProduct:{value:""},PrelevementSource:{value:!1},Differe:{value:""},optionAssurance:{value:""},montantFrais:{value:""},capitalAssure:{value:""},montantSurprime:{value:""},prorata:{value:""},tauxTaxe:{value:""},montantCotisation:{value:""},tauxInteret:{value:""},datePrelevement:{value:""},montantTaxe:{value:""},tauxSurprime:{value:""},cotisationTotale:{value:""},montantTaxeParafiscale:{value:""},montantAccessoire:{value:""},encours:{value:""},cumul:{value:""},fraisAcquisitionTTC:{value:""},fraisGestionTTC:{value:""},contributionPure:{value:""},invaliditeOuMaladie:{value:!1},quelleMaladieOuInvalidite:{value:""},pensionIncapacite:{value:!1},suspendreAtiviteDeuxDernierAnnee:{value:!1},maladiesOuOperationChirurgicaleQuandEtOu:{value:""},suspendreAtiviteDeuxDernierAnneePourquiEtTemps:{value:""},maladiesOuOperationChirurgicale:{value:!1}}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getDroppDownData",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:return t=e.sent,e.next=5,dr();case 5:return a=e.sent,e.next=8,Wa();case 8:n=e.sent,this.setState({Partenaires:t.data.content,produits:n.data.content,periodicites:a.data.content});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"normeCapitalAge",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){var r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra(t,a,n);case 2:r=e.sent,this.setState({normes:r.data});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDroppDownData(),this.AuxiliairesByType($)}},{key:"jasperFiles",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"jasperLettre",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"conditionsParticulier",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateDecesContrat",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oa(t,a);case 2:n=e.sent,console.log("response update:",n);case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"AuxiliairesByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa(t);case 2:a=e.sent,this.setState({medecins:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createDecesContrat",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,i,l,s,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(t);case 2:if(200!==(a=e.sent).status){e.next=10;break}return e.next=6,m=a.data.id,localStorage.getItem(G)?ae({url:L+"/private/contratId/"+m,method:"GET"}):Promise.reject("No access token set.");case 6:200===(n=e.sent).status&&(i={agence:n.data.produit.partenaire.raisonSocial,organisme:n.data.produit.partenaire.typePartenaire,adresse:n.data.pointVente.partenairepv.siegeSocial,intermediaire:n.data.produit.partenaire.typePartenaire,numeroAgrement:n.data.produit.numeroHomologation,dateAgrement:n.data.produit.dateHomologation,adresseInter:n.data.produit.partenaire.siegeSocial,participant:n.data.souscripteur.nom+" "+n.data.souscripteur.prenom,telephone:n.data.souscripteur.numeroDeTelephone,registreCommerce:n.data.souscripteur.cin,adresseSouscripteur:n.data.souscripteur.adressComplete,compteBancaire:n.data.souscripteur.rib,assure:n.data.assure.nom+" "+n.data.assure.prenom,cinAssure:n.data.assure.cin,adresseAssure:n.data.assure.adressComplete,telephoneAssure:n.data.assure.numeroDeTelephone,compteAssure:n.data.assure.rib,compteTakaful:n.data.produit.numeroCompte,dureeContrat:n.data.dureeContrat,montantFinancement:n.data.capitalAssure,numeroContratFinancement:n.data.numeroContrat,numeroCompte:n.data.assure.rib,dureeMois:n.data.dureeContrat,garantiePaiment:"true",renouvellement:"true",garantieInvalidite:"true",date:Kt()($l).format("DD-MM-YYYY"),montantTTC:this.state.fields.cotisationTotale.value.toFixed(2),periodicite:n.data.periodicite.libelle,ageLimiteCouverture:n.data.produit.ageEcheance,ageLimitSouscription:n.data.produit.ageMaxEligibilite,montantAugmentation:n.data.produit.seuilExaminateur,remuneration:n.data.produit.fraisGestion,contributionAnnulle:this.state.fields.prorata.value.toFixed(2),fraisAcquisition:n.data.produit.fraisAcquisition,seuilVisite:n.data.produit.seuilExaminateur,suspensionActivite:n.data.suspendreAtiviteDeuxDernierAnneePourquiEtTemps,maladieInvalidite:n.data.quelleMaladieOuInvalidite,maladieOuOperation:n.data.maladiesOuOperationChirurgicale},"WAITING_ACCEPTATION"!==n.data.status?(this.conditionsParticulier(i),this.setState({current:0,fields:{radio:{value:"morale"},cin:{value:""},patente:{value:""},assure:{value:""},numeroDossierFinancement:{value:""},souscripteur:{value:""},souscripteurIsAssure:{value:""},assurePresent:{value:!1},preiodicite:{value:""},dureeContrat:{value:""},dateEffet:{value:""},dateEcheance:{value:""},produit:{value:""},pointVente:{value:""},NombreMensualitesEtalementLaPrimeUnique:{value:""},agence:{value:""},partenaire:{value:""},PrelevementSource:{value:!1},Differe:{value:""},optionAssurance:{value:""},montantFrais:{value:""},capitalAssure:{value:""},montantSurprime:{value:""},prorata:{value:""},tauxTaxe:{value:""},montantCotisation:{value:""},tauxInteret:{value:""},datePrelevement:{value:""},montantTaxe:{value:""},tauxSurprime:{value:""},cotisationTotale:{value:""},encours:{value:""},cumul:{value:""},invaliditeOuMaladie:{value:!1},pensionIncapacite:{value:!1},suspendreAtiviteDeuxDernierAnnee:{value:!1},maladiesOuOperationChirurgicaleQuandEtOu:{value:""},suspendreAtiviteDeuxDernierAnneePourquiEtTemps:{value:""},quelleMaladieOuInvalidite:{value:""},maladiesOuOperationChirurgicale:{value:!1}}})):(console.log("status:",this.state.fields),this.setState({visible:!0})),this.setState({contrat:n.data}),l="open".concat(Date.now()),s=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(l)}},"Confirm"),u.a.success({message:"CONTRAT ENREGISTRE",description:" CONTRAT NUMERO     : "+n.data.numeroContrat+" QUITTANCE NUMERO   : "+a.data.numQuittance,btn:s,duration:0,key:l})),e.next=13;break;case 10:o="open".concat(Date.now()),c=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(o)}},"Confirm"),u.a.error({message:"erreur d'insertion",description:"erreur servenu, ,erci d'essayer plus tard.",btn:c,duration:0,key:o});case 13:case"end":return e.stop()}var m},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"done",value:function(e){var t=this;console.log(" done modal :",e);var a=this.state.fields;if(""!==a.Differe.value&&""!==a.tauxSurprime.value&&""!==a.tauxInteret.value&&a.capitalAssure.value){var n;n=""!==a.optionAssurance.value?{id:a.optionAssurance.value.key}:null;var i={assure:this.state.assureObj,souscripteur:this.state.souscripteurObj,numeroDossierFinancement:a.numeroDossierFinancement.value,souscripteurIsAssure:a.souscripteurIsAssure.value,idPeriodicite:a.preiodicite.value.key,dureeContrat:a.dureeContrat.value,dateEffet:a.dateEffet.value,dateEcheance:a.dateEcheance.value,seuilExaminateur:this.state.produits.filter(function(e){return e.id===a.produit.value.key})[0].seuilExaminateur,seuilConseil:this.state.produits.filter(function(e){return e.id===a.produit.value.key})[0].seuilConseil,seuilReassurance:this.state.produits.filter(function(e){return e.id===a.produit.value.key})[0].seuilReassurance,idProd:this.state.produits.filter(function(e){return e.id===a.produit.value.key})[0].id,idPointVente:a.pointVente.value,partenaire:a.partenaire.value,PrelevementSource:a.Differe.value,differe:a.Differe.value,optionAssurance:n,montantSurprime:a.montantSurprime.value,montantFrais:a.montantFrais.value,capitalAssure:a.capitalAssure.value,prorata:a.prorata.value,montantTaxeParafiscale:a.montantTaxeParafiscale.value,montantAccessoire:a.montantAccessoire.value,montantCotisation:a.montantCotisation.value,tauxInteret:a.tauxInteret.value,datePrelevement:a.datePrelevement.value,montantTaxe:a.montantTaxe.value,tauxSurprime:a.tauxSurprime.value,encours:a.encours.value,cumul:a.cumul.value,fraisAcquisitionTTC:a.fraisAcquisitionTTC.value,fraisGestionTTC:a.fraisGestionTTC.value,contributionPure:a.contributionPure.value,invaliditeOuMaladie:a.invaliditeOuMaladie.value,pensionIncapacite:a.pensionIncapacite.value,suspendreAtiviteDeuxDernierAnnee:a.suspendreAtiviteDeuxDernierAnnee.value,maladiesOuOperationChirurgicaleQuandEtOu:a.maladiesOuOperationChirurgicaleQuandEtOu.value,suspendreAtiviteDeuxDernierAnneePourquiEtTemps:a.suspendreAtiviteDeuxDernierAnneePourquiEtTemps.value,quelleMaladieOuInvalidite:a.quelleMaladieOuInvalidite.value,maladiesOuOperationChirurgicale:a.maladiesOuOperationChirurgicale.value};console.log("request model:",i);var l=Kt()().diff(Kt()(this.state.souscripteurObj.dateNaissance,"DD-MM-YYYY").format(),"years");this.normeCapitalAge(l,i.capitalAssure,i.idProd),"SIMULATION"===e&&(i.status="SIMULATION");var s="open".concat(Date.now()),c=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",className:"multisteps-btn-simulation",style:{borderRadius:"0%",marginRight:"10px"},onClick:function(){return t.handleConf(i)}},"Editer"),r.a.createElement(fe.a,{type:"primary",onClick:function(){return t.handleConfirm(i,s)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(s)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0,column:2,size:"small"},r.a.createElement(En.a.Item,{label:"MONTANT FINANCEMENT"},parseFloat(a.capitalAssure.value).toFixed(2)),r.a.createElement(En.a.Item,{label:"CUMUL",span:2},parseFloat(a.cumul.value).toFixed(2)),r.a.createElement(En.a.Item,{label:"DUREE"},a.dureeContrat.value),r.a.createElement(En.a.Item,{label:"DIFFERE",span:2},a.Differe.value),r.a.createElement(En.a.Item,{label:"MONTANT CONTRIBUTION  PRORATISE TTC"},parseFloat(10*a.prorata.value/100+a.prorata.value).toFixed(2)),r.a.createElement(En.a.Item,{label:"MONTANT  CONTRIBUTION  PRORATISE HT"},parseFloat(a.prorata.value).toFixed(2)),r.a.createElement(En.a.Item,{label:"MONTANT CONTRIBUTION HT",span:2},parseFloat(a.montantCotisation.value).toFixed(2)),r.a.createElement(En.a.Item,{label:"MONTANT CONTRIBUTION TTC"},parseFloat(a.cotisationTotale.value).toFixed(2)))),btn:c,key:s,style:{width:880,marginLeft:-945},duration:0})}}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.current,i=a.fields,l=[{title:"Premi\xe8re \xe9tape",content:r.a.createElement(sh.Consumer,null,function(e){return r.a.createElement(Vl,Object.assign({check:t.checkSelectedPers},i,{onChange:t.handleFormChange,currentUser:e}))})},{title:"Deuxi\xe8me \xe9tape",content:r.a.createElement(sh.Consumer,null,function(e){return Wl=e.pointVentes[0].libelle,r.a.createElement(Ul,Object.assign({produits:t.state.produits,periodicites:t.state.periodicites,partenaires:t.state.Partenaires},i,{onChange:t.handleFormChange,currentUser:e,consumeData:_l}))})},{title:"Troisi\xe8me \xe9tape",content:r.a.createElement(Bl,Object.assign({dateEffet:this.state.fields.dateEffet.value,assureObj:this.state.assureObj,dureeContrat:this.state.fields.dureeContrat.value,selectedproduit:this.state.produits.filter(function(e){return e.code===t.state.fields.produit.value.label})[0]},i,{onChange:this.handleFormChange,consumeData:_l}))},{title:"Quatri\xe8me \xe9tape",content:r.a.createElement(wl,Object.assign({},i,{onChange:this.handleFormChange}))}];e=""===i.produit.value?"Nouvelle souscription d\xe9c\xe8s produit":"Nouvelle souscription d\xe9c\xe8s produit  "+this.state.produits.filter(function(e){return e.code===i.produit.value.label})[0].libelle;var s=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(fn.a,{title:"Basic Modal",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,okText:"Valider",cancelText:"Fermer"},r.a.createElement(He.a,{hideRequiredMark:!0},r.a.createElement(He.a.Item,{label:"Medecin examinateur",hasFeedback:!0},s("medecin",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un medecin"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez",onChange:this.onChangeMedecin},this.state.medecins.map(function(e){return r.a.createElement(Kl,{key:e.id,value:e.id,label:e.nom},e.nom)})))))),r.a.createElement(lt,{title:e}),r.a.createElement(Al.a,{current:n},l.map(function(e){return r.a.createElement(Hl,{key:e.title,title:e.title,description:e.description})})),r.a.createElement("div",{className:"steps-content-style"},l[n].content),r.a.createElement("div",{className:"steps-action"},0===n&&r.a.createElement(fe.a,{type:"primary",className:"multisteps-btn-next",htmlType:"submit",form:"formadd",onClick:function(){return t.next()}},"Suivant"),1===n&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"multisteps-btn-next",form:"steptwo",onClick:function(){return t.next()},disabled:this.state.booleen},"Suivant"),2===n&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"multisteps-btn-next",form:"stepthree",onClick:function(){return t.next()}},"Suivant"),n===l.length-1&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"multisteps-btn-next",form:"stepfour",onClick:function(){return t.done("CREATION")}},"Terminer la cr\xe9ation"),n===l.length-1&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"multisteps-btn-simulation",form:"stepfour",onClick:function(){return t.done("SIMULATION")}},"Terminer la simulation"),n>0&&r.a.createElement(fe.a,{onClick:function(){return t.prev()}},"Pr\xe9c\xe9dent")))}}]),t}(n.Component),Ql=He.a.create()(Jl),Xl=(a(218),a(133)),Zl=a.n(Xl);function es(e){return localStorage.getItem(G)?ae({url:L+"/private/addCotisation",data:e,method:"POST"}):Promise.reject("No access token set.")}function ts(e){return localStorage.getItem(G)?ae({url:L+"/private/addEncaissement",data:e,method:"POST"}):Promise.reject("No access token set.")}function as(e){return localStorage.getItem(G)?ae({url:L+"/private/cotisation/contrat/"+e,method:"GET"}):Promise.reject("No access token set.")}function ns(e){return localStorage.getItem(G)?ae({url:L+"/private/encaissement/cotisation/"+e,method:"GET"}):Promise.reject("No access token set.")}function rs(){return localStorage.getItem(G)?ae({url:L+"/private/compteBancaires?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function is(){return localStorage.getItem(G)?ae({url:L+"/private/cotisations?page=0",method:"GET"}):Promise.reject("No access token set.")}a(1027);var ls=$e.a.Option,ss="",os="";var cs=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleRecord=function(e){console.log("record:",e),a.props.form.setFieldsValue({montantCotisation:-1*e.montantCotisation,montantTTC:-1*e.montantTTC,montantTaxe:-1*e.montantTaxe,montantTaxeParafiscale:-1*e.montantTaxeParaFiscale,solde:-1*e.solde}),e.montantTaxeParaFiscale=-1*e.montantTaxeParaFiscale,e.montantCotisation=-1*e.montantCotisation,e.montantTTC=-1*e.montantTTC,e.montantTaxe=-1*e.montantTaxe,e.solde=-1*e.solde,a.setState({show:!0,cotisation:e,cotisationId:e.id})},a.handleChange=function(e){ss=e.id,console.log("value cotisation:",e),a.props.form.setFieldsValue({emissionGlobale:e.montantTTC,reste:e.solde}),a.setState({visible:!0,recordCotisation:e},function(){})},a.handleChanged=function(e){a.getAllEncaissement(e.id),a.setState({visibled:!0},function(){})},a.handleOK=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n,r;e||(a.setState({show:!1}),console.log("ok value:",t),(n=a.state.cotisationId,r=a.state.cotisation,localStorage.getItem(G)?ae({url:L+"/private/annulationCotisation/"+n,data:r,method:"POST"}):Promise.reject("No access token set.")).then(function(e){u.a.success({message:"TAKAFUL",description:"L'annulation est bien faite"})}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"D\xe9sol\xe9! Quelque chose est mal pass\xe9!"})}))})},a.handleOnClose=function(){a.setState({show:!1})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(e)qr.a.warning("Contrat non couvert au date de sinistre");else{a.setState({visible:!1});var n={dateEncaissement:t.dateEncaissement,modeEncaissement:t.modeEncaissement,montantEncaissement:t.montantEncaisser,montantTaxe:t.montantTaxe,numReference:t.numReference,compteBancaire:t.numerocompte,accessoire:t.montantAccessoire,montantQuittance:t.emissionGlobale,montantTaxeParafiscale:t.montantTaxeParafiscale,montantEmission:t.montantEmission,cotisation:ss};console.log("request:",n),ts(n).then(function(e){u.a.success({message:"TAKAFUL",description:"L'insertion est bien faite"})}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})})}})},a.handleCancel=function(){a.setState({visibled:!1})},a.handleCanceled=function(){a.setState({visible:!1})},a.handleNumberChange=function(e){var t,n;if(a.setState({number:Object(at.a)({},(t=e,n=a.state.recordCotisation.solde,t<=n?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Vous avez d\xe9pass\xe9 le solde restant"}),{value:e})}),e<=a.state.recordCotisation.solde){var r=(100*e/a.state.recordCotisation.montantTTC).toFixed(2),i=(r*a.state.recordCotisation.montantAccessoire/100).toFixed(2),l=(r*a.state.recordCotisation.montantTaxe/100).toFixed(2),s=(r*a.state.recordCotisation.montantTaxeParaFiscale/100).toFixed(2),o=(a.state.recordCotisation.montantTTC*r/100).toFixed(2),c=parseFloat(i)+parseFloat(l);console.log("part1:",o);var u=parseFloat(o)-parseFloat(c);a.props.form.setFieldsValue({montantAccessoire:i,montantTaxe:l,montantTaxeParafiscale:s,montantEmission:u.toFixed(2)})}else a.props.form.setFieldsValue({montantAccessoire:"",montantTaxe:"",montantTaxeParafiscale:"",montantEmission:""})},a.onChangeMontantEncaisser=function(e){},a.state={expandIconPosition:"left",data:[],visible:!1,visibled:!1,comptes:[],show:!1,encaissement:[],cotisation:[],cotisationId:"",recordCotisation:[],number:{value:""}},a.columns=[{title:"Num\xe9ro quittance",dataIndex:"numQuittance",key:"numQuittance",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return a.handleChanged(t)}},e))}},{title:"Date Pr\xe9l\xe8vement",dataIndex:"datePrelevement",key:"datePrelevement"},{title:"Montant cotisation",dataIndex:"montantCotisation",key:"montantCotisation"},{title:"Etat cotisation",dataIndex:"etatCotisation",key:"etatCotisation"},{title:"Montant Taxe ",dataIndex:"montantTaxe",key:"montantTaxe"},{title:"Montant Taxe parafiscale ",dataIndex:"montantTaxeParaFiscale",key:"montantTaxeParafiscale"},{title:"Montant TTC ",dataIndex:"montantTTC",key:"montantTtc"},{title:"Frais acquisition TTC ",dataIndex:"fraisAcquisitionTTC",key:"fraisAcquisitionTTC"},{title:"Frais gestion TTC ",dataIndex:"fraisGestionTTC",key:"fraisGestionTTC"},{title:"Contribution Pure ",dataIndex:"contributionPure",key:"contributionPure"},{title:"Solde ",dataIndex:"solde",key:"solde"},{title:"Action",dataIndex:"operation",fixed:"right",render:function(e,t){return r.a.createElement("span",null,"EMIS"==t.etatCotisation||"PARTIELEMENT_ENCAISSEE"==t.etatCotisation?r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px",backgroundColor:"#4ee289",borderColor:"#4ee289",textAlign:"left",width:"100%"}},r.a.createElement(w.a,{type:"plus-circle"}),"Encaissement"):"---","EMIS"==t.etatCotisation&&r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez...",style:{width:"100%"}},r.a.createElement(ls,{value:"ANNULER",onClick:function(){return a.handleRecord(t)}},"ANNULER")))}}],a.columns1=[{title:"Date d'encaissement",dataIndex:"dateEncaissement",key:"datePrelevement"},{title:"N\xb0 d'encaissement",dataIndex:"numEncaissement",key:"numeroEncaissement"},{title:"Montant Encaiss\xe9",dataIndex:"montantEncaissement",key:"montantEncaisse"},{title:"Montant Taxe ",dataIndex:"montantTaxe",key:"montantTaxe"},{title:"Mode d'encaissement",dataIndex:"modeEncaissement",key:"modeEncaissement"},{title:"R\xe9f\xe9rence ",dataIndex:"numReference",key:"reference"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllCotisations(os),this.getAllComptes()}},{key:"getAllCotisations",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,as(t);case 2:a=e.sent,this.setState({data:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllEncaissement",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(t);case 2:a=e.sent,this.setState({encaissement:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllComptes",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rs();case 2:t=e.sent,this.setState({comptes:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.visible,i=a.visibled,l=a.show,s={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:12}}};return r.a.createElement(ps.Consumer,null,function(a){return os=a.state.contrat.id,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:e.state.data,pagination:{defaultCurrent:1,defaultPageSize:5},size:"small",scroll:{x:800}}),r.a.createElement(fn.a,{visible:n,title:"Veuillez saisir les informations d'une cotisation",onOk:e.handleSubmited,onCancel:e.handleCanceled,afterClose:e.handleClosed,style:{top:20},width:"1000px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleSubmited,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,s,r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Mode d'encaissement"},t("modeEncaissement")(r.a.createElement($e.a,{placeholder:"Veuillez selectionner"},r.a.createElement(ls,{value:"Ch\xe8que",label:"Ch\xe8que"},"Ch\xe8que"),r.a.createElement(ls,{value:"Virement",label:"Virement"},"Virement"))))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Num\xe9ro de compte"},t("numerocompte")(r.a.createElement($e.a,{placeholder:"Veuillez selectionner"},e.state.comptes.map(function(e){return r.a.createElement(ls,{key:e.id,value:e.id,label:e.code},e.code)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"N\xb0 reference"},t("numReference")(r.a.createElement(I.a,{className:"not-rounded"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Date d'encaissement"},t("dateEncaissement")(r.a.createElement(Lt.a,{style:{width:"100%"},className:"not-rounded"}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Emission globale"},t("emissionGlobale")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Reste \xe0 payer"},t("reste")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant \xe0 encaisser ",validateStatus:e.state.number.validateStatus,help:e.state.number.errorMsg},t("montantEncaisser")(r.a.createElement(Vt.a,{className:"not-rounded",max:e.state.recordCotisation.solde,value:e.state.number.value,onChange:e.handleNumberChange})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Montant emission"},t("montantEmission")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant taxe "},t("montantTaxe")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Montant accessoire "},t("montantAccessoire")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant taxe parafiscale "},t("montantTaxeParafiscale")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))))))),r.a.createElement(fn.a,{visible:i,title:"D\xe9tails de l'encaissement",onCancel:e.handleCancel,style:{top:20},width:"1000px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel,className:"not-rounded"},"Fermer")]},r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:e.columns1,dataSource:e.state.encaissement,pagination:{onChange:e.onPaginationChange,pageSize:3,total:e.state.totalItems}})),r.a.createElement(fn.a,{visible:l,title:"Annulation de la cotisation",onOk:e.handleOK,onCancel:e.handleOnClose,style:{top:20},width:"1000px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleOnClose,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleOK,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,s,r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant de cotisation"},t("montantCotisation")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Montant TTC"},t("montantTTC")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant Taxe"},t("montantTaxe")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))),r.a.createElement(xe.a,{span:12,offset:1},r.a.createElement(He.a.Item,{label:"Montant Taxe Parafiscale"},t("montantTaxeParafiscale")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Solde"},t("solde")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))))))))})}}]),t}(n.Component),us=He.a.create()(cs),ms=[{key:"cotisation",tab:"Cotisation"}],ds=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={key:"cotisation",noTitleKey:"cotisation",visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a.contentListNoTitle={cotisation:r.a.createElement(us,null)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ps.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#top",type:"primary",shape:"circle",icon:"edit",size:"small",onClick:e.showDrawer},t.state.contrat.numeroContrat),r.a.createElement(ot.a,{title:r.a.createElement("div",{style:{fontSize:"18px"}},"D\xe9tails du Contrat : ",t.state.contrat.numeroContrat),width:1400,onClose:e.onClose,visible:e.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(D.a,{tabList:ms,activeTabKey:e.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},e.contentListNoTitle[e.state.noTitleKey]),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{type:"primary",className:"not-rounded",onClick:e.onClose},"Fermer"))))}))}}]),t}(n.Component),ps=r.a.createContext(),hs="ACCEPTED",fs=$e.a.Option,bs=I.a.Search,Es="",vs=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).recherchePrelevement=function(){is().then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrect. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.handleChange=function(e){Es=e.contrat.id,a.setState({visible:!0,tauxSurprime:e.contrat.tauxSurprime})},a.onChangeMontantCotisation=function(e){a.setState({montantCotisation:e.target.value})},a.onPaginationChange=function(e,t){""===a.state.searchfor?a.getproprties(hs,e-1,5,W,"desc"):a.searchContrats(e-1,5,a.state.searchby,a.state.searchfor)},a.selectBefore=r.a.createElement($e.a,{onChange:function(e){return a.setState({searchby:e})},defaultValue:W,style:{width:150}},r.a.createElement(fs,{value:W},"N\xb0 de contrat"),r.a.createElement(fs,{value:K},"CIN"),r.a.createElement(fs,{value:H},"Nom Assur\xe9")),a.search=function(e){a.setState({pagenumber:1,searchfor:e}),a.searchContrats(a.state.pagenumber-1,2,a.state.searchby,e)},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e?qr.a.warning("Contrat non couvert au date de sinistre"):(a.setState({visible:!1}),es({datePrelevement:t.datePrelevement,montantCotisation:t.montantCotisation,montantTTC:t.montantTTC,montantTaxe:t.montantTaxe,contrat:Es}).then(function(e){u.a.success({message:"TAKAFUL",description:"L'insertion est bien faite"}),window.location.reload()}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})}))})},a.handleCanceled=function(){a.setState({visible:!1})},a.state={data:[],visible:!1,dateCreation:new Date,searchText:"",searchedColumn:"",selectedRowKeys:[],searchby:W,searchfor:"",selectedFile:null,record:{},contrats:[],totalItems:0,pagenumber:1,tauxSurprime:null,montantSurprime:null,montantCotisation:null,cotisationTotale:null},a.columns=[Object(at.a)({title:"Num\xe9ro quittance",dataIndex:"numQuittance",key:"numQuittance"},Et("numQuittance","numQuittance1",Object(b.a)(Object(b.a)(a)))),{title:"N\xb0 de Contrat",dataIndex:W,key:"numcontrat",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(ps.Provider,{value:{state:t}},r.a.createElement(ds,null))))}},Object(at.a)({title:"Dur\xe9e Contrat",dataIndex:"contrat.dureeContrat",key:"dureeContrat"},Et("dureeContrat","Dur\xe9e contrat",Object(b.a)(Object(b.a)(a)))),{title:"CIN assur\xe9",dataIndex:"contrat.assure.cin",key:"cinAssure"},Object(at.a)({title:"Nom assur\xe9",dataIndex:"contrat.assure.nom",key:"nomAssure"},Et("assure.nom","Pr\xe9nom assure",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom assur\xe9",dataIndex:"contrat.assure.prenom",key:"prenomAssure"},Object(at.a)({title:"Nom souscripteur",dataIndex:"contrat.souscripteur.nom",key:"nomSouscripteur"},Et("souscripteur.nom","Pr\xe9nom assure",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom souscripteur",dataIndex:"contrat.souscripteur.prenom",key:"prenomSouscripteur"},{title:"Date d'effet",dataIndex:"contrat.dateEffet",key:"dateEffet"},{title:"Date \xe9cheance",dataIndex:"contrat.dateEcheance",key:"dateEcheance"},{title:"Produit",dataIndex:"contrat.produit.libelle",key:"produit"},{title:"Etat cotisation",dataIndex:"etatCotisation",key:"etatCotisation"},{title:"Action",dataIndex:"operation",fixed:"right",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px",width:"105px",backgroundColor:"#4ee289",borderColor:"#4ee289",textAlign:"left"}},r.a.createElement(w.a,{type:"plus-circle"})," Cotisation"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.recherchePrelevement()}},{key:"componentDidUpdate",value:function(e,t){t.montantCotisation!==this.state.montantCotisation&&null!==this.state.montantCotisation&&(this.setState({montantSurprime:this.state.tauxSurprime*this.state.montantCotisation/100}),this.setState({cotisationTotale:this.state.montantSurprime+this.state.montantCotisation}))}},{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r,i){var l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(t,a,n,r,i);case 2:l=e.sent,this.setState({contrats:Object(tt.a)(l.data.content),totalItems:l.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i){return e.apply(this,arguments)}}()},{key:"searchContrats",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr(t,a,n,r);case 2:i=e.sent,n===K||n===H?this.setState({data:Object(tt.a)(i.data.content),totalItems:i.data.numberOfElements}):n===W&&this.setState({data:Object(tt.a)(i.data.content),totalItems:i.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.visible,n={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:12}}};return r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(bs,{placeholder:"Entrez le text de recherche",addonBefore:this.selectBefore,onSearch:function(t){return e.search(t)},enterButton:!0,style:{width:600}})),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{onChange:this.onPaginationChange,pageSize:5,total:this.state.totalItems},size:"small",tableLayout:"unset",scroll:{x:1300}}),r.a.createElement(fn.a,{visible:a,title:"Veuillez saisir les informations d'une cotisation",onOk:this.handleSubmited,onCancel:this.handleCanceled,afterClose:this.handleClosed,style:{top:20},width:"1000px",footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCanceled,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleSubmited,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,n,r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Effet Emission"},t("datePrelevement")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"},className:"not-rounded"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Montant Cotisation"},t("montantCotisation")(r.a.createElement(I.a,{className:"not-rounded",onChange:this.onChangeMontantCotisation}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant Taxe"},t("montantTaxe")(r.a.createElement(I.a,{className:"not-rounded"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Montant TTC"},t("montantTTC")(r.a.createElement(I.a,{className:"not-rounded"})))))))))}}]),t}(n.Component),gs=He.a.create()(vs),ys=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).recherchePrelevement=function(){is().then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrect. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",auxiliaire:[]},a.columns=[Object(at.a)({title:"Num\xe9ro quittance",dataIndex:"numQuittance",key:"numQuittance"},Et("numQuittance","numQuittance1",Object(b.a)(Object(b.a)(a)))),{title:"N\xb0 de Contrat",dataIndex:"contrat.numeroContrat",key:"numeroContrat",render:function(e){return r.a.createElement("a",{href:"#top"},e)}},Object(at.a)({title:"Type Cotisation",dataIndex:"cotisationType",key:"cotisationType"},Et("cotisationType","cotisationType1",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Date Pr\xe9l\xe8vement",dataIndex:"datePrelevement",key:"datePrelevement"},Et("datePrelevement","dtePrelevement1",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Montant cotisation",dataIndex:"montantCotisation",key:"montantCotisation"},Et("montantCotisation","Montant cotisation",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Etat cotisation",dataIndex:"etatCotisation",key:"etatCotisation"},Et("etatCotisation","Etat cotisation",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Montant Taxe ",dataIndex:"montantTaxe",key:"montantTaxe"},Et("montantTaxe","montantTaxe",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Montant TTC ",dataIndex:"montantTTC",key:"montantTtc"},Et("montantTtc","montantTtc",Object(b.a)(Object(b.a)(a)))),{title:"Frais acquisition TTC ",dataIndex:"fraisAcquisitionTTC",key:"fraisAcquisitionTTC"},{title:"Frais gestion TTC ",dataIndex:"fraisGestionTTC",key:"fraisGestionTTC"},{title:"Contribution Pure ",dataIndex:"contributionPure",key:"contributionPure"},Object(at.a)({title:"Solde ",dataIndex:"solde",key:"solde"},Et("solde","solde",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",dataIndex:"operation",fixed:"right",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleSelectChange(t)},style:{borderRadius:"0px"}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.recherchePrelevement()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5},scroll:{x:1300},tableLayout:"unset",size:"small"}))}}]),t}(n.Component),Cs=He.a.create()(ys),xs=$e.a.Option,Ss="",ks="",Is=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){Ss=e.id,a.setState({visible:!0})},a.handleChanged=function(e){a.getAllEncaissement(e.id),a.setState({visibled:!0})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e?qr.a.warning("Contrat non couvert au date de sinistre"):(a.setState({visible:!1}),ts({dateEncaissement:t.dateEncaissement,modeEncaissement:t.modeEncaissement,montantEncaissement:t.montantEncaisser,montantTaxe:t.montantTaxe,numReference:t.numReference,compteBancaire:t.numerocompte,cotisation:Ss}).then(function(e){u.a.success({message:"TAKAFUL",description:"L'insertion est bien faite"})}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})}))})},a.handleCanceled=function(){a.setState({visible:!1})},a.handleCancel=function(){a.setState({visibled:!1})},a.state={expandIconPosition:"left",data:[],visible:!1,visibled:!1,comptes:[],encaissement:[]},a.columns=[{title:"Num\xe9ro quittance",dataIndex:"numQuittance",key:"numQuittance",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",onClick:function(){return a.handleChanged(t)}},e))}},{title:"Date Pr\xe9l\xe8vement",dataIndex:"datePrelevement",key:"datePrelevement"},{title:"Montant cotisation",dataIndex:"montantCotisation",key:"montantCotisation"},{title:"Etat cotisation",dataIndex:"etatCotisation",key:"etatCotisation"},{title:"Type cotisation ",dataIndex:"cotisationType",key:"cotisationType"},{title:"Montant TTC ",dataIndex:"montantTTC",key:"montantTtc"},{title:"Contribution Pure ",dataIndex:"contributionPure",key:"contributionPure"},{title:"Solde ",dataIndex:"solde",key:"solde"},{title:"Action",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,"EMIS"===t.etatCotisation||"PARTIELEMENT_ENCAISSEE"===t.etatCotisation?r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px",width:"130px",backgroundColor:"#4ee289",borderColor:"#4ee289",textAlign:"left"}},r.a.createElement(w.a,{type:"plus-circle"}),"Encaissement"):"---")}}],a.columns1=[{title:"Date d'encaissement",dataIndex:"dateEncaissement",key:"datePrelevement"},{title:"N\xb0 d'encaissement",dataIndex:"numEncaissement",key:"numeroEncaissement"},{title:"Montant Encaiss\xe9",dataIndex:"montantEncaissement",key:"montantEncaisse"},{title:"Montant Taxe ",dataIndex:"montantTaxe",key:"montantTaxe"},{title:"Mode d'encaissement",dataIndex:"modeEncaissement",key:"modeEncaissement"},{title:"R\xe9f\xe9rence ",dataIndex:"numReference",key:"reference"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllCotisations(ks),this.getAllComptes()}},{key:"getAllCotisations",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,as(t);case 2:a=e.sent,this.setState({data:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllEncaissement",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(t);case 2:a=e.sent,this.setState({encaissement:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllComptes",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rs();case 2:t=e.sent,this.setState({comptes:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.visible,i=a.visibled,l={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:12}}};return r.a.createElement(As.Consumer,null,function(a){return ks=a.state.id,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:e.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}),r.a.createElement(fn.a,{visible:n,title:"Veuillez saisir les informations d'une cotisation",onOk:e.handleSubmited,onCancel:e.handleCanceled,afterClose:e.handleClosed,style:{top:20},width:"1000px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCanceled,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleSubmited,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,l,r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Mode d'encaissement"},t("modeEncaissement")(r.a.createElement($e.a,{placeholder:"Veuillez selectionner"},r.a.createElement(xs,{value:"Ch\xe8que",label:"Ch\xe8que"},"Ch\xe8que"),r.a.createElement(xs,{value:"Virement",label:"Virement"},"Virement"))),"//SelectOption")),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Num\xe9ro de compte"},t("numerocompte")(r.a.createElement($e.a,{placeholder:"Veuillez selectionner"},e.state.comptes.map(function(e){return r.a.createElement(xs,{key:e.id,value:e.id,label:e.code},e.code)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"N\xb0 reference"},t("numReference")(r.a.createElement(I.a,{className:"not-rounded"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Date d'encaissement"},t("dateEncaissement")(r.a.createElement(Lt.a,{style:{width:"100%"},className:"not-rounded"}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Emission globale"},t("emissionGlobale")(r.a.createElement(I.a,{className:"not-rounded"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Reste \xe0 payer"},t("reste")(r.a.createElement(I.a,{className:"not-rounded"}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant \xe0 encaisser "},t("montantEncaisser")(r.a.createElement(I.a,{className:"not-rounded"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Montant emission"},t("montantEmission")(r.a.createElement(I.a,{className:"not-rounded"}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Montant taxe "},t("montantTaxe")(r.a.createElement(I.a,{className:"not-rounded"})))))))),r.a.createElement(fn.a,{visible:i,title:"D\xe9tails de l'encaissement",onCancel:e.handleCancel,style:{top:20},width:"1000px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel,className:"not-rounded"},"Fermer")]},r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:e.columns1,dataSource:e.state.encaissement,pagination:{onChange:e.onPaginationChange,pageSize:3,total:e.state.totalItems}}))))})}}]),t}(n.Component),Os=He.a.create()(Is),js=[{key:"cotisation",tab:"Cotisation"}],Ts=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={key:"cotisation",noTitleKey:"cotisation",visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a.contentListNoTitle={cotisation:r.a.createElement(Os,null)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(As.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#top",type:"primary",shape:"circle",icon:"edit",size:"small",onClick:e.showDrawer},t.state.numeroContrat),r.a.createElement(ot.a,{title:r.a.createElement("div",{style:{fontSize:"18px"}},"D\xe9tails du Contrat : ",t.state.numeroContrat),width:1400,onClose:e.onClose,visible:e.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(D.a,{tabList:js,activeTabKey:e.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},e.contentListNoTitle[e.state.noTitleKey]),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{type:"primary",className:"not-rounded",onClick:e.onClose},"Fermer"))))}))}}]),t}(n.Component),As=r.a.createContext(),Ps="ACCEPTED",Ds=$e.a.Option,Fs=I.a.Search,ws="",Ms=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onSelectChange=function(e){},a.handleChange=function(e){ws=e.id,a.setState({visible:!0,tauxSurprime:e.tauxSurprime,montantContributionPeriodique:e.montantContributionPeriodique},function(){})},a.onChangeMontantCotisation=function(e){a.setState({montantCotisation:e.target.value})},a.handleContributionTypeChange=function(e){a.setState({natureDeLaCotisaion:e}),"Epargne periodique"===e&&a.setState({montantContributionPeriodiqueToShow:a.state.montantContributionPeriodique,montantCotisation:a.state.montantContributionPeriodique})},a.onPaginationChange=function(e,t){""===a.state.searchfor?a.getproprties(Ps,e-1,3):a.searchContrats(e-1,3,a.state.searchby,a.state.searchfor)},a.selectBefore=r.a.createElement($e.a,{onChange:function(e){return a.setState({searchby:e})},defaultValue:"numContrat",style:{width:150}},r.a.createElement(Ds,{value:"numContrat"},"N\xb0 de contrat"),r.a.createElement(Ds,{value:"cin"},"CIN"),r.a.createElement(Ds,{value:"nom"},"Nom Assur\xe9")),a.search=function(e){a.setState({pagenumber:1,searchfor:e}),a.searchContrats(a.state.pagenumber-1,2,a.state.searchby,e)},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e?qr.a.warning("Contrat non couvert au date de sinistre"):(a.setState({visible:!1}),es({datePrelevement:t.datePrelevement,montantCotisation:a.state.montantCotisation,montantTTC:a.state.montantCotisation,cotisationType:a.state.natureDeLaCotisaion,contrat:ws}).then(function(e){u.a.success({message:"TAKAFUL",description:"L'insertion est bien faite"})}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})}))})},a.handleCanceled=function(){a.setState({visible:!1,natureDeLaCotisaion:""})},a.state={data:[],visible:!1,dateCreation:new Date,searchText:"",searchedColumn:"",selectedRowKeys:[],searchby:"numeroContrat",searchfor:"",selectedFile:null,record:{},contrats:[],totalItems:0,pagenumber:1,tauxSurprime:null,montantSurprime:null,montantCotisation:null,cotisationTotale:null,natureDeLaCotisaion:""},a.columns=[{title:"N\xb0 de Contrat",dataIndex:"numeroContrat",key:"numeroContrat",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(As.Provider,{value:{state:t}},r.a.createElement(Ts,null))))}},Object(at.a)({title:"Dur\xe9e Contrat",dataIndex:"dureeContrat",key:"dureeContrat"},Et("dureeContrat","Dur\xe9e contrat",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Nom assur\xe9",dataIndex:"assure.nom",key:"nomAssure"},Et("assure.nom","Pr\xe9nom assure",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom assur\xe9",dataIndex:"assure.prenom",key:"prenomAssure"},Object(at.a)({title:"Nom souscripteur",dataIndex:"souscripteur.nom",key:"nomSouscripteur"},Et("souscripteur.nom","Pr\xe9nom assure",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom souscripteur",dataIndex:"souscripteur.prenom",key:"prenomSouscripteur"},{title:"Date d'effet",dataIndex:"dateEffet",key:"dateEffet"},{title:"Date \xe9cheance",dataIndex:"dateEcheance",key:"dateEcheance"},{title:"Produit",dataIndex:"produit.libelle",key:"produit"},{title:"Action",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px",width:"105px",backgroundColor:"#4ee289",borderColor:"#4ee289",textAlign:"left"}},r.a.createElement(w.a,{type:"plus-circle"})," Cotisation"))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getproprties(Ps,this.state.pagenumber-1,3)}},{key:"componentDidUpdate",value:function(e,t){t.montantCotisation!==this.state.montantCotisation&&null!==this.state.montantCotisation&&(this.setState({montantSurprime:this.state.tauxSurprime*this.state.montantCotisation/100},function(){}),this.setState({cotisationTotale:this.state.montantSurprime+this.state.montantCotisation}))}},{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){var r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr(0,a,n);case 2:r=e.sent,this.setState({contrats:Object(tt.a)(r.data.content),totalItems:r.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"searchContrats",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr(t,a,n,r);case 2:i=e.sent,"cin"===n||"nom"===n?this.setState({contrats:Object(tt.a)(i.data.content),totalItems:i.data.numberOfElements}):"numeroContrat"===n&&this.setState({contrats:Object(tt.a)(i.data.content),totalItems:i.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.visible,n={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:12}}};return r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(Fs,{placeholder:"Entrez le text de recherche",addonBefore:this.selectBefore,onSearch:function(t){return e.search(t)},enterButton:!0,style:{width:600}})),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:this.columns,dataSource:this.state.contrats,pagination:{onChange:this.onPaginationChange,pageSize:3,total:this.state.totalItems}}),r.a.createElement(fn.a,{visible:a,title:"Veuillez saisir les informations d'une cotisation",onOk:this.handleSubmited,onCancel:this.handleCanceled,afterClose:this.handleClosed,style:{top:20},width:"1000px",footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCanceled,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleSubmited,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,n,r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Effet Emission"},t("datePrelevement",{rules:[{required:!0,message:"La date est obligatoire"}]})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"},className:"not-rounded"}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Nature Cotisation"},r.a.createElement($e.a,{onChange:this.handleContributionTypeChange,style:{width:"100%"}},r.a.createElement(Ds,{value:"Epargne periodique"},"Contribution p\xe9riodique"),r.a.createElement(Ds,{value:"Epargne libre"},"Contribution libre"))))),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11,offset:1},"Epargne libre"===this.state.natureDeLaCotisaion?r.a.createElement(He.a.Item,{label:"Montant Cotisation"},t("montantCotisation")(r.a.createElement(I.a,{className:"not-rounded",type:"number",onChange:this.onChangeMontantCotisation,addonAfter:"DH"}))):null,"Epargne periodique"===this.state.natureDeLaCotisaion?r.a.createElement(He.a.Item,{label:"Montant Cotisation"},r.a.createElement(I.a,{className:"not-rounded",defaultValue:this.state.montantContributionPeriodiqueToShow,disabled:!0})):null))))))}}]),t}(n.Component),Ns=He.a.create()(Ms),Rs=Zl.a.TabPane,qs=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Zl.a,{type:"card"},r.a.createElement(Rs,{tab:"Gestion des impay\xe9s",key:"1"},r.a.createElement(Cs,null)),r.a.createElement(Rs,{tab:"Comptabilit\xe9 d\xe9c\xe8s ",key:"2"},r.a.createElement(gs,null)),r.a.createElement(Rs,{tab:"Comptabilit\xe9 \xe9pargne retraite",key:"3"},r.a.createElement(Ns,null))))}}]),t}(n.Component),Vs=He.a.create()(qs),zs=(a(1029),a(216));function Ys(e,t){return localStorage.getItem(G)?ae({url:L+"/private/agenda/"+e+"/"+t,method:"DELETE"}):Promise.reject("No access token set.")}function Bs(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Ls(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ls(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Ls(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Gs=new Date,Us=new Date,Hs="";a(1040);var Ks={"color-1":"rgba(102, 195, 131 , 1)","color-2":"rgba(242, 177, 52, 1)","color-3":"rgba(235, 85, 59, 1)","color-4":"rgba(70, 159, 213, 1)","color-5":"rgba(170, 59, 123, 1)"},Ws=[],$s=[],_s=[],Js=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).removeEvent=function(e,t){var n=t._id;a.deleteEventId(n,Hs);var r=Ws.indexOf(n);Ws.splice(r,1),a.setState({registre:Ws})},a.state={items:[],selected:[],set:!1,registre:[],cellHeight:15,showModal:!1,locale:"fr",rowsPerHour:4,numberOfDays:4,startDate:new Date},a.handleRangeSelection=a.handleRangeSelection.bind(Object(b.a)(Object(b.a)(a))),a.handleItemEdit=a.handleItemEdit.bind(Object(b.a)(Object(b.a)(a))),a.zoomIn=a.zoomIn.bind(Object(b.a)(Object(b.a)(a))),a.zoomOut=a.zoomOut.bind(Object(b.a)(Object(b.a)(a))),a._openModal=a._openModal.bind(Object(b.a)(Object(b.a)(a))),a._closeModal=a._closeModal.bind(Object(b.a)(Object(b.a)(a))),a.addNewEvent=a.addNewEvent.bind(Object(b.a)(Object(b.a)(a))),a.removeEvent=a.removeEvent.bind(Object(b.a)(Object(b.a)(a))),a.editEvent=a.editEvent.bind(Object(b.a)(Object(b.a)(a))),a.changeView=a.changeView.bind(Object(b.a)(Object(b.a)(a))),a.handleCellSelection=a.handleCellSelection.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({});var e,t=[],a=Bs(Ws);try{for(a.s();!(e=a.n()).done;){var n=e.value;Us=new Date(n.eventStartDate),Gs=new Date(n.eventEndDate),$s={_id:n.id,name:n.eventDescription,startDateTime:new Date(Us.getFullYear(),Us.getMonth(),Us.getDate(),Us.getHours(),Us.getMinutes()),endDateTime:new Date(Gs.getFullYear(),Gs.getMonth(),Gs.getDate(),Gs.getHours(),Gs.getMinutes()),classes:n.eventColor},t.push($s)}}catch(r){a.e(r)}finally{a.f()}this.setState({items:t})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){e.items&&this.setState({items:e.items})}},{key:"handleItemEdit",value:function(e,t){if(e&&!0===t)return this.setState({selected:[e]}),this._openModal()}},{key:"handleCellSelection",value:function(e,t){if(this.state.selected&&this.state.selected[0]===e)return this._openModal();this.setState({selected:[e]})}},{key:"zoomIn",value:function(){var e=this.state.cellHeight+15;this.setState({cellHeight:e})}},{key:"zoomOut",value:function(){var e=this.state.cellHeight-15;this.setState({cellHeight:e})}},{key:"handleDateRangeChange",value:function(e,t){this.setState({startDate:e})}},{key:"handleRangeSelection",value:function(e){this.setState({selected:e,showCtrl:!0}),this._openModal()}},{key:"_openModal",value:function(){this.setState({showModal:!0})}},{key:"_closeModal",value:function(e){e&&(e.stopPropagation(),e.preventDefault()),this.setState({showModal:!1})}},{key:"handleItemChange",value:function(e,t){this.setState({items:e})}},{key:"handleItemSize",value:function(e,t){this.setState({items:e})}},{key:"deleteEventId",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ys(t,a);case 3:window.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"addEvents",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c=t,localStorage.getItem(G)?ae({url:L+"/private/agenda/add",data:c,method:"POST"}):Promise.reject("No access token set.");case 3:if(200===(a=e.sent).status){Ws.push(a.data),this.setState({registre:Ws}),n=[],r=Bs(Ws);try{for(r.s();!(i=r.n()).done;)l=i.value,s=new Date(l.eventStartDate),o=new Date(l.eventEndDate),_s={_id:l.id,name:l.eventDescription,startDateTime:new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()),endDateTime:new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes()),classes:l.eventColor},n.push(_s)}catch(m){r.e(m)}finally{r.f()}this.setState({items:n})}e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}var c},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"addNewEvent",value:function(e,t){var a={eventDescription:t.name,eventStartDate:t.startDateTime,eventEndDate:t.endDateTime,eventColor:t.classes,userId:Hs};this.addEvents(a),this._closeModal()}},{key:"updateEvents",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=t,i=a,localStorage.getItem(G)?ae({url:L+"/private/agenda/"+r,method:"PUT",data:i}):Promise.reject("No access token set.");case 3:200===(n=e.sent).status&&this.setState({registre:n.data}),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 11:case"end":return e.stop()}var r,i},e,this,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"editEvent",value:function(e,t){var a={eventDescription:t.name,eventStartDate:t.startDateTime,eventEndDate:t.endDateTime,eventColor:t.classes,userId:Hs},n=t._id;this.setState({items:e}),this.updateEvents(n,a),this.setState({registre:e}),this._closeModal()}},{key:"changeView",value:function(e,t){this.setState({numberOfDays:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content-expanded "},r.a.createElement(sh.Consumer,null,function(t){return Hs=t.id,Ws=t.events,e.state.registre=t.events}),r.a.createElement("div",{className:"control-buttons"},r.a.createElement("button",{className:"button-control",onClick:this.zoomIn}," ",r.a.createElement("i",{className:"zoom-plus-icon"})," "),r.a.createElement("button",{className:"button-control",onClick:this.zoomOut}," ",r.a.createElement("i",{className:"zoom-minus-icon"})," "),r.a.createElement("button",{className:"button-control",onClick:this._openModal}," ",r.a.createElement("i",{className:"schedule-icon"})," "),r.a.createElement("button",{className:"button-control",onClick:this.changeView.bind(null,7)}," ",Kt.a.duration(7,"days").humanize()," "),r.a.createElement("button",{className:"button-control",onClick:this.changeView.bind(null,4)}," ",Kt.a.duration(4,"days").humanize()," "),r.a.createElement("button",{className:"button-control",onClick:this.changeView.bind(null,3)}," ",Kt.a.duration(3,"days").humanize()," "),r.a.createElement("button",{className:"button-control",onClick:this.changeView.bind(null,1)}," ",Kt.a.duration(1,"day").humanize()," ")),r.a.createElement(zs.ReactAgenda,{minDate:new Date(Gs.getFullYear(),Gs.getMonth()-3),maxDate:new Date(Gs.getFullYear(),Gs.getMonth()+3),startDate:this.state.startDate,startAtTime:8,endAtTime:23,cellHeight:this.state.cellHeight,locale:"fr",items:this.state.items,numberOfDays:this.state.numberOfDays,headFormat:"ddd DD MMM",rowsPerHour:this.state.rowsPerHour,itemColors:Ks,helper:!0,view:"calendar",autoScale:!1,fixedHeader:!0,onRangeSelection:this.handleRangeSelection.bind(this),onChangeEvent:this.handleItemChange.bind(this),onChangeDuration:this.handleItemSize.bind(this),onItemEdit:this.handleItemEdit.bind(this),onCellSelect:this.handleCellSelection.bind(this),onItemRemove:this.removeEvent.bind(this),onDateRangeChange:this.handleDateRangeChange.bind(this)}),this.state.showModal?r.a.createElement(zs.Modal,{clickOutside:this._closeModal},r.a.createElement("div",{className:"modal-content"},r.a.createElement(zs.ReactAgendaCtrl,{items:this.state.items,itemColors:Ks,selectedCells:this.state.selected,Addnew:this.addNewEvent,edit:this.editEvent}))):"")}}]),t}(n.Component),Qs=gn.a.Panel,Xs="",Zs=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getAvenants=function(e){xn(e).then(function(e){var t=[];e.data.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})})},a.state={expandIconPosition:"left",data:[],contratID:""},a.columns=[{title:"Num\xe9ro d'avenant",dataIndex:"numeroAvenant",key:"numeroAvenant"},{title:"Date d'effet",dataIndex:"dateEffet",key:"dateEffet"},{title:"Type d'avenant",dataIndex:"typeAvenant.libelle",key:"typeAvenant"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAvenants(Xs)}},{key:"render",value:function(){var e=this,t=this.state.expandIconPosition;return r.a.createElement(go.Consumer,null,function(a){return Xs=a.state.id,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:t},r.a.createElement(Qs,{header:"Liste des Avenants",key:"1"},r.a.createElement("div",null,r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:e.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}))))))})}}]),t}(n.Component),eo=gn.a.Panel,to=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(go.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(eo,{header:"Contrat",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"N\xb0 contrat : ",t.state.numeroContrat)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- N\xb0 de compte bancaire")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,"---")),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Num\xe9ro du contrat")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.numeroContrat))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date d'effet")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.dateEffet)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date d'\xe9cheance")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.dateEcheance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Dur\xe9e (mois)")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.dureeContrat)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant de la cotisation p\xe9riodique retraite")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.montantContributionPeriodique))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- P\xe9riodicit\xe9")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.periodicite.libelle)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant des frais d'acquisition")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.fraisAcquisition))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant Contribution Initiale")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.montantContributionInitiale)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Option fiscale")),r.a.createElement(xe.a,{span:3,offset:1},"null"!==t.state.produit.natureFiscale?r.a.createElement("p",null,t.state.produit.natureFiscale):r.a.createElement("p",null,"0"))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Deductibilite Fiscale")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.deductibiliteFiscale)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Type de Contrat")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.contratType))))))))})}}]),t}(n.Component),ao=gn.a.Panel,no=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(go.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(ao,{header:"Souscripteur",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"CIN : ",t.state.souscripteur.cin)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.nom)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Pr\xe9nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.prenom))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- CIN")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.cin)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date naissance")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.dateNaissance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Situation familiale")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.situationFamiliale)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Profession")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.profession))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nationalit\xe9")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.nationalite)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Matricule")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.souscripteur.matricule))))),r.a.createElement(ao,{header:"Assur\xe9",key:"2",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"CIN : ",t.state.assure.cin)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.nom)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Pr\xe9nom")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.prenom))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- CIN")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.cin)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Date naissance")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.dateNaissance))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Situation familiale")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.situationFamiliale)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Profession")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.profession))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nationalit\xe9")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.nationalite)),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Matricule")),r.a.createElement(xe.a,{span:4,offset:2},r.a.createElement("p",null,t.state.assure.matricule))))),r.a.createElement(ao,{header:"B\xe9n\xe9ficiaire(s)",key:"3"},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,null,r.a.createElement("div",null,r.a.createElement(Je.a,{rowClassName:"editable-row",columns:[{title:"CIN",dataIndex:"cin",key:"cin"},{title:"RIB",dataIndex:"rib",key:"rib"},{title:"Nom",dataIndex:"nom",key:"nom"},{title:"Prenom",dataIndex:"prenom",key:"prenom"}],dataSource:t.state.beneficiaireEnDeces,pagination:{defaultCurrent:1,defaultPageSize:5}})))))))))})}}]),t}(n.Component),ro=gn.a.Panel,io=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={expandIconPosition:"left"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.expandIconPosition;return r.a.createElement(go.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(gn.a,{defaultActiveKey:["1"],expandIconPosition:e},r.a.createElement(ro,{header:"Produit",key:"1",extra:r.a.createElement("div",{style:{fontSize:"13px"}},"Libelle : ",t.state.produit.libelle)},r.a.createElement("div",null,r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Libelle")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.libelle)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Code")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.code))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Frais d&aposacquisition")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.fraisAcquisition)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Risque")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.risque.libelle))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Cat\xe9gorie")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.categorie.libelle)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Dur\xe9e min contrat (Mois)")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.dureeMinimalSouscription))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Num\xe9ro de compte")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.numeroCompte)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nature Condition Disciplinaire Rachat Total")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.natureConditionDisciplinaireTotale))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Nature Condition Disciplinaire Rachat Partiel")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.natureConditionDisciplinairePartiel)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Valeur Condition Disciplinaire Totale")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.valeurConditionDisciplinaireTotale))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Valeur Condition Disciplinaire Partiel")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.valeurConditionDisciplinairePartiel)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Pool Investissment")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.poolInvestissment.libelle))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Revenu Global")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.revenuGlobal)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Montant Min de la Contribution")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.montantMinContribution))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.00)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Taux de Rendement Avant Imposition")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.tauxRendementAvantImposition))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Mode de Gestion")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.modeGestion)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Frais Fixe WakalabilIstithmar")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.fraisFixeWakalabilIstithmar))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Surperformance WakalabilIstithmar")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.surperformanceWakalabilIstithmar)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Profit Moudaraba")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.profitMoudaraba))),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.03)",marginTop:"10px"}},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Mode Calcul de Capital Constitue")),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement("p",null,t.state.produit.modeCalculCapitalConstitue)),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement("h4",{style:{fontWeight:"blod"}},"- Regime Fiscal")),r.a.createElement(xe.a,{span:3,offset:1},r.a.createElement("p",null,t.state.produit.regimeFiscal))))))))})}}]),t}(n.Component),lo=(a(1041),$e.a.Option),so=I.a.TextArea,oo="",co="",uo={},mo=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChanged=function(e){a.setState({agenceBancaire:e.target.value})},a.handleChangeed=function(e){if(co=e,"A_signer"===e)a.setState({visible:!0});else if("EN_COURS"===e){a.setStatuts(oo,e,{motif:""})}else"ANNULER"===e&&a.setState({visibled:!0})},a.handleOk=function(){a.setStatuts(oo,co,{motif:""}),a.setState({visible:!1})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={motif:t.motif};a.setStatuts(oo,co,n),a.setState({visibled:!1})}})},a.handleCancel=function(){a.setState({visible:!1})},a.getSinistres=function(e){qn(e).then(function(e){var t=[];e.data.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t}),void 0===a.state.data[0]||a.setState({remplie:a.state.data[0].status})})},a.handleRecord=function(e){oo=e.id},a.handleChange=function(e){a.setState({add:!0,keyRecord:e.id},function(){var t=new Date(Kt()(e.dateDeclarationSinistre,"DD/MM/YYYY ")),n=new Date(Kt()(e.dateSurvenance,"DD/MM/YYYY ")),r=new Date(Kt()(e.creationDate,"DD/MM/YYYY ")),i=((r.getTime()-t.getTime())/864e5).toFixed(0),l=((r.getTime()-n.getTime())/864e5).toFixed(0);a.props.form.setFieldsValue({dateCreation:Kt()(e.creationDate,"DD/MM/YYYY "),numeroSinistre:e.numeroSinistre,dateDeclarationSinistre:Kt()(e.dateDeclarationSinistre,"DD/MM/YYYY"),dateSurvenance:Kt()(e.dateSurvenance,"DD/MM/YYYY"),dureeDeclaration:i,dureeSurvenance:l,commentaire:e.commentaire,crd:e.crd,montantRegler:e.montantRegler,typeSinistre:e.natureSinistre,nbrEcheanceImpayees:e.nbrEcheanceImpaye,numeroCompte:e.numeroCompte,reglementPartiel:e.reglementPartiel,tauxInvalidite:e.tauxInvalidite,modeReglement:e.modeReglement,beneficiaire:uo.id})})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={dateSurvenance:t.dateSurvenance,dateDeclarationSinistre:t.dateDeclarationSinistre,dureeDeclaration:t.dureeDeclaration,dureeSurvenance:t.dureeSurvenance,commentaire:t.commentaire,crd:t.crd,montantRegler:t.montantRegler,natureSinistre:t.typeSinistre,nbrEcheanceImpaye:t.nbrEcheanceImpayees,numeroCompte:t.numeroCompte,reglementPartiel:t.reglementPartiel,tauxInvalidite:t.tauxInvalidite,modeReglement:t.modeReglement,exclusion:t.exclusion,numeroSinistre:t.numeroSinistre,beneficiaireAgenceBancaire:a.state.agenceBancaire,pointVente:t.beneficiaire,remplie:!0};a.updatePrestationSinistres(n,a.state.keyRecord),a.setState({remplie:!0})}})},a.handleDelete=function(e){a.deletePrestationSinistre(e);var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.key!==e})})},a.state={expandIconPosition:"left",data:[],add:!1,remplie:"",visible:!1,visibled:!1,exclusions:[],pieceJointe:[],keyRecord:"",agenceBancaire:!0},a.columns=[{title:"Num\xe9ro de sinistre",dataIndex:"numeroSinistre",key:"numeroSinistre",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px"}},e))}},{title:"Date de survenance",dataIndex:"dateSurvenance",key:"dateServenance"},{title:"date d\xe9claration sinistre",dataIndex:"dateDeclarationSinistre",key:"dateDeclarationSinistre"},{title:"Statut",dataIndex:"status",render:function(e,t){return r.a.createElement("span",null,r.a.createElement($e.a,{placeholder:"Please select",onChange:a.handleChangeed,style:{width:"100%"},defaultValue:e},r.a.createElement(lo,{value:"EN_COURS",onClick:function(){return a.handleRecord(t)}},"EN COURS"),r.a.createElement(lo,{value:"A_signer",onClick:function(){return a.handleRecord(t)}},"\xc0 SIGNER"),r.a.createElement(lo,{value:"ANNULER",onClick:function(){return a.handleRecord(t)}},"ANNULER")))}}],a.columns1=[{title:"Num\xe9ro de sinistre",dataIndex:"numeroSinistre",key:"numeroSinistre",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"#top",type:"primary",onClick:function(){return a.handleChange(t)},size:"small",style:{borderRadius:"0px"}},e))}},{title:"Date de survenance",dataIndex:"dateSurvenance",key:"dateServenance"},{title:"date d\xe9claration sinistre",dataIndex:"dateDeclarationSinistre",key:"dateDeclarationSinistre"},{title:"Statut",dataIndex:"status",key:"statut"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getSinistres(""),this.getAllExclusion("Deces"),this.getAllPiece()}},{key:"updatePrestationSinistres",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ua(t,a);case 2:n=e.sent,(r=[]).push(n.data),this.setState({data:r});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"setStatuts",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zn(t,a,n);case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getAllExclusion",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:a=e.sent,this.setState({exclusions:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deletePrestationSinistre",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn(t);case 3:200===e.sent.status&&u.a.success({message:"Sinistre annul\xe9 !"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Un probl\xe8me est survenu. Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPiece",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn();case 2:t=e.sent,this.setState({pieceJointe:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={labelCol:{span:11},wrapperCol:{span:12}},a=this.props.form.getFieldDecorator,n=this.state,i=n.visible,l=n.visibled;return r.a.createElement(go.Consumer,null,function(n){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(fn.a,{visible:i,title:"Confirmation",onOk:e.handleOk,onCancel:e.handleCancel,footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel},"Non"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleOk},"Oui")]},r.a.createElement("p",null,"\xc9tes-vous s\xfbre de changer ce statut ?")),r.a.createElement(fn.a,{visible:l,title:"Motif d'annulation",onOk:e.handleSubmited,onCancel:e.handleCancel,width:"600px",footer:[r.a.createElement(fe.a,{key:"back",onClick:e.handleCancel},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:e.handleSubmited},"Valider")]},r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"Le motif "},a("motif",{rules:[{message:"Champs Obligatoire!"}]})(r.a.createElement(so,{rows:2}))))),"A_SIGNER"===e.state.remplie||"EN_COURS"===e.state.remplie?r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:e.state.data,pagination:!1}):r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns1,dataSource:e.state.data,pagination:!1}),e.state.add?r.a.createElement("div",null,r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Donn\xe9es sinistre")),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,{onSubmit:e.handleSubmit},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,Object.assign({label:"Date cr\xe9ation"},t),a("dateCreation")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"N\xb0 de sinistre"},t),a("numeroSinistre")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Date d\xe9claration sinistre"},t),a("dateDeclarationSinistre")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"Exclusion"},t),a("exclusion")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},e.state.exclusions.map(function(e){return r.a.createElement(lo,{key:e.id,value:e.id,label:e.exclusion},e.exclusion)})))),r.a.createElement(He.a.Item,Object.assign({label:"Dur\xe9e avant survenance"},t),a("dureeSurvenance")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Montant \xe0 r\xe9gler"},t),a("montantRegler")(r.a.createElement(I.a,{placeholder:"0.00 ",className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Taux d'invalidit\xe9"},t),a("tauxInvalidite")(r.a.createElement(I.a,{placeholder:"0.00 ",className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"R\xe9glement partiel"},t),a("reglementPartiel",{initialValue:"Non"})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez "},r.a.createElement(lo,{value:"Oui",label:"oui"},"Oui"),r.a.createElement(lo,{value:"Non",label:"non"},"Non")))),r.a.createElement(He.a.Item,Object.assign({label:"B\xe9n\xe9ficiaire"},t),a("beneficiaire")(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},r.a.createElement(lo,{value:uo.id,label:uo.libelle},uo.libelle))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,Object.assign({label:"Type de sinistre"},t),a("typeSinistre",{initialValue:"D\xe9c\xe8s"})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez "},r.a.createElement(lo,{value:"D\xe9c\xe8s",label:"deces"},"D\xe9c\xe8s"),r.a.createElement(lo,{value:"INVALIDITE TOTALE ET DEFINITIVE",label:"ITD"},"INVALIDITE TOTALE ET DEFINITIVE")))),r.a.createElement(He.a.Item,Object.assign({label:"Date de survenanve sinistre"},t),a("dateSurvenance")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}}))),r.a.createElement(He.a.Item,Object.assign({label:"Cause sinistre"},t),a("causeSinistre")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Dur\xe9e avant d\xe9claration"},t),a("dureeDeclaration")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"CRD"},t),a("crd")(r.a.createElement(I.a,{placeholder:"0.00 ",className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Nombre d'\xe9cheances impay\xe9es"},t),a("nbrEcheanceImpayees")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Mode de r\xe9glement"},t),a("modeReglement",{initialValue:"Virement"})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez "},r.a.createElement(lo,{value:"Virement",label:"virement"},"Virement"),r.a.createElement(lo,{value:"Ch\xe8que",label:"cheque"},"Ch\xe9que")))),r.a.createElement(He.a.Item,Object.assign({label:"N\xb0 Compte"},t),a("numeroCompte")(r.a.createElement(I.a,{className:"not-rounded"}))),r.a.createElement(He.a.Item,Object.assign({label:"Agence bancaire"},t),a("agenceBancaire",{valuePropName:"unchecked",initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!0,onChange:e.onChanged},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))),r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Pi\xe8ces justificatives")),r.a.createElement("table",{id:"customers"},r.a.createElement("tr",null,r.a.createElement("th",null,"Libelle"),r.a.createElement("th",null,"A fournir"),r.a.createElement("th",null,"O/F"),r.a.createElement("th",null,"Re\xe7u"),r.a.createElement("th",null,"Date r\xe9ception")),e.state.pieceJointe.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("libelle")(r.a.createElement("label",null,e.libelle)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("fournir")(r.a.createElement(Rn.a,null)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("o/f")(r.a.createElement("label",null)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("re\xe7u")(r.a.createElement(Rn.a,null)))),r.a.createElement("td",null,r.a.createElement(He.a.Item,null," ",a("dateReception")(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"100%"}})))))})),r.a.createElement(xe.a,{span:14},r.a.createElement(He.a.Item,{label:"Commentaire"},a("commentaire")(r.a.createElement(so,{placeholder:"Commentaire",autoSize:{minRows:2,maxRows:6}})))),r.a.createElement(xe.a,{span:4,offset:21},r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"not-rounded"},r.a.createElement(w.a,{type:"save"}),"Enregistrer")))))):null))})}}]),t}(n.Component),po=He.a.create()(mo),ho="",fo=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[],id:"",expandIconPosition:"left"},a.columns=[{title:"Date de la cr\xe9ation",dataIndex:"creationDate",key:"creationDate"},{title:"Date de depart",dataIndex:"dateDepart",key:"dateDepart"},{title:"Montant Brut de Rachat Total",dataIndex:"montantBrutRachatTotal",key:"montantBrutRachatTotal"},{title:"Montant Net de Rachat Total",dataIndex:"montantNetRachatTotal",key:"montantNetRachatTotal"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateData(ho)}},{key:"updateData",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=t,localStorage.getItem(G)?ae({url:L+"/private/getPrestationsRachatTotal/"+n,method:"GET"}):Promise.reject("No access token set.")).then(function(e){return e});case 2:a=e.sent,this.setState({data:a.data});case 4:case"end":return e.stop()}var n},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(go.Consumer,null,function(t){return ho=t.state.id,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Je.a,{columns:e.columns,dataSource:e.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}})))})}}]),t}(r.a.Component);fo.contextType=go;var bo=fo,Eo=[{key:"general",tab:"G\xe9n\xe9ral"},{key:"contrat",tab:"Contrat"},{key:"produit",tab:"Produit"},{key:"avenant",tab:"Avenant(s)"},{key:"prestation",tab:"Prestation"}],vo=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={key:"general",noTitleKey:"general",visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a.contentListNoTitle={general:r.a.createElement(no,null),contrat:r.a.createElement(to,null),produit:r.a.createElement(io,null),avenant:r.a.createElement(Zs,null),sinistre:r.a.createElement(po,null),prestation:r.a.createElement(bo,null)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(go.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#top",type:"primary",shape:"circle",icon:"edit",size:"small",onClick:e.showDrawer},t.state.numeroContrat),r.a.createElement(ot.a,{title:r.a.createElement("div",{style:{fontSize:"18px"}},"D\xe9tails du Contrat : ",t.state.numeroContrat),width:1e3,onClose:e.onClose,visible:e.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(D.a,{tabList:Eo,activeTabKey:e.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},e.contentListNoTitle[e.state.noTitleKey]),r.a.createElement("div",{className:"submit-cancel"},r.a.createElement(fe.a,{type:"primary",className:"not-rounded",onClick:e.onClose},"Fermer"))))}))}}]),t}(n.Component),go=r.a.createContext(),yo="ACCEPTED",Co=$e.a.Option,xo=I.a.Search,So="",ko=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChanged=function(e){"Rachat total"===e?a.setState({rachatTotal:!0,rachatPartiel:!1,liquidation:!1,avance:!1}):"Rachat partiel"===e?a.setState({rachatTotal:!1,rachatPartiel:!0,liquidation:!1,avance:!1}):"Liquidation"===e?a.setState({rachatTotal:!1,rachatPartiel:!1,liquidation:!0,avance:!1}):"Avance"===e&&a.setState({rachatTotal:!1,rachatPartiel:!1,liquidation:!1,avance:!0})},a.handleChangeBenefAction=function(e){"Ajouter"===e?a.setState({ajouterBenef:!0,modifierBenef:!1,supprimerBenef:!1,beneficiareAModifier:{},beneficiareASupprimer:{},beneficiareAModifierId:"",beneficiareASupprimerId:""},function(){a.props.form.setFieldsValue({nomBeneficiaire:"",prenomBeneficiaire:"",ribBeneficiaire:""})}):"Modifier"===e?a.setState({ajouterBenef:!1,modifierBenef:!0,supprimerBenef:!1,beneficiareAModifier:{},beneficiareASupprimer:{},beneficiareAModifierId:"",beneficiareASupprimerId:""}):a.setState({ajouterBenef:!1,modifierBenef:!1,supprimerBenef:!0})},a.handleBenefeciairesToEditChange=function(){var e=Object(R.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(t);case 2:n=e.sent,a.setState({beneficiareAModifier:n.data,beneficiareAModifierId:t},function(){a.props.form.setFieldsValue({nomBeneficiaire:a.state.beneficiareAModifier.nom,prenomBeneficiaire:a.state.beneficiareAModifier.prenom,ribBeneficiaire:a.state.beneficiareAModifier.rib,cinBeneficiaire:a.state.beneficiareAModifier.cin})});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addBeneficiaireImpl=function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t,localStorage.getItem(G)?ae({url:L+"/private/beneficiaireendeces",data:r,method:"POST"}):Promise.reject("No access token set.");case 2:n=e.sent,a.beneficiaireEnDeces.push(n.data);case 4:case"end":return e.stop()}var r},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleBenefeciairesToDelete=function(){var e=Object(R.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(t);case 2:n=e.sent,a.setState({beneficiareASupprimer:n.data,beneficiareASupprimerId:t});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){"11"===e?a.setState({show:!0,avenantOneShow:!0,avenantOne:!0,avenantTwoShow:!1,avenantTwo:!1,avenantFour:!1,avenantFourShow:!1,avenantFiveShow:!1,avenantFive:!1,beneficiareAModifier:{},beneficiareASupprimer:{},beneficiareAModifierId:"",beneficiareASupprimerId:""},function(){a.props.form.setFieldsValue({periodicite:a.state.record.periodicite.libelle,periodicites:a.state.record.produit.periodicite,nombrePeriodicite:a.state.record.nombrePeriodicite})}):"2"===e?a.setState({show:!1,avenantOneShow:!1,avenantTwoShow:!0,avenantFiveShow:!1,avenantFour:!1,avenantFourShow:!1,avenantOne:!1,avenantTwo:!0,avenantFive:!1,beneficiareAModifier:{},beneficiareASupprimer:{},beneficiareAModifierId:"",beneficiareASupprimerId:""},function(){a.props.form.setFieldsValue({montantContributionPeriodique:a.state.record.montantContributionPeriodique,nouveauMontantContributionPeriodique:a.state.record.montantContributionPeriodique})}):"4"===e?a.setState({show:!1,avenantTwoShow:!1,avenantOneShow:!1,avenantFiveShow:!1,avenantOne:!1,avenantTwo:!1,avenantFive:!1,avenantFour:!0,avenantFourShow:!0}):"5"===e&&a.setState({show:!1,avenantTwoShow:!1,avenantOneShow:!1,avenantFiveShow:!0,avenantOne:!1,avenantTwo:!1,avenantFive:!0,avenantFour:!1,avenantFourShow:!1,beneficiareAModifier:{},beneficiareASupprimer:{},beneficiareAModifierId:"",beneficiareASupprimerId:""},function(){a.props.form.setFieldsValue({dureeContrat:a.state.record.dureeContrat,nouveauDureeContrat:a.state.record.dureeContrat})})},a.handleSelectChange=function(e){a.setState({visible:!0,record:e}),a.setState({deductibiliteFiscale:e.deductibiliteFiscale,souscripteurIsAssure:e.souscripteurIsAssure,attributionIrrevocable:e.attributionIrrevocable,tauxRedubenificiareCasDecesction:e.benificiareCasDeces,montantContributionInitiale:e.montantContributionInitiale,montantContributionPeriodique:e.montantContributionPeriodique,beneficiaireEnDeces:e.beneficiaireEnDeces,nombrePeriodicite:e.nombrePeriodicite,periodicite:e.periodicite.id,montantCotisation:e.montantCotisation})},a.handleChangePrestation=function(e){a.setState({visibled:!0,dateEcheance:e.dateEcheance,keyRecord:e.id,contratPrestation:e,rachatTotalVisible:e.produit.rachatTotal,rachatPartielVisible:e.produit.rachatPartiel}),a.setState({visibled:!0,dateEcheance:e.dateEcheance})},a.handleConfirm=function(e,t,n){u.a.close(t),a.updatedContrat(a.state.record.id,e),a.setState({visible:!1})},a.onChangeNombrePeriodicite=function(e){a.setState({nombrePeriodicite:e.target.value})},a.onChangeContributionPeriodique=function(e){a.setState({montantContributionPeriodique:e.target.value})},a.onChangeDureeContrat=function(e){a.setState({dureeContrat:e.target.value})},a.onPaginationChange=function(e,t){""===a.state.searchfor?a.getproprties(yo,e-1,3):a.searchContrats(e-1,3,a.state.searchby,a.state.searchfor)},a.selectBefore=r.a.createElement($e.a,{onChange:function(e){return a.setState({searchby:e})},defaultValue:"numContrat",style:{width:150}},r.a.createElement(Co,{value:"numContrat"},"N\xb0 de contrat"),r.a.createElement(Co,{value:"cin"},"CIN"),r.a.createElement(Co,{value:"nom"},"Nom Assur\xe9")),a.search=function(e){a.setState({pagenumber:1,searchfor:e}),a.searchContrats(a.state.pagenumber-1,2,a.state.searchby,e)},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleCancel=function(){a.setState({visible:!1})},a.handleClose=function(){a.props.form.setFieldsValue({avenants:""}),a.setState({show:!1,avenantTwoShow:!1,avenantOneShow:!1,avenantFiveShow:!1,avenantFourShow:!1,ajouterBenef:!1,modifierBenef:!1,supprimerBenef:!1,beneficiareAModifier:{},beneficiareASupprimer:{},beneficiareAModifierId:"",beneficiareASupprimerId:""})},a.handleClosed=function(){a.setState({showed:!1,sinistre:!1,restitution:!1,aSimuler:!1,montantCotisationBrut:0})},a.handleCanceled=function(){a.props.form.setFieldsValue({typePrestation:" S\xe9l\xe9ctionnez "}),a.setState({visibled:!1,rachatPartiel:!1,rachatTotal:!1,liquidation:!1,avance:!1,montantCotisationBrut:0})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e)if(a.state.avenantOne){var n=a.state.record;n.nombrePeriodicite=t.nouveauNombrePeriodicite,n.periodicite.id=a.state.periodicite.key,n.typeAvenantId=t.avenants;var i="open".concat(Date.now()),l=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleConfirm(n,i)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(i)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Nombre de periodicite"},a.state.nombrePeriodicite),r.a.createElement(En.a.Item,{label:"Periodicite",span:2},a.state.periodicite.label))),btn:l,key:i,onClose:function(){},style:{width:880,marginLeft:-945},duration:0})}else if(a.state.avenantTwo){var s=a.state.record;s.montantContributionPeriodique=a.state.montantContributionPeriodique,s.typeAvenantId=t.avenants;var c="open".concat(Date.now()),m=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleConfirm(s,c)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(c)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Montant de la contribution periodique"},a.state.montantContributionPeriodique))),btn:m,key:c,style:{width:880,marginLeft:-945},duration:0})}else if(a.state.avenantFour){var d=a.state.record;if(a.state.ajouterBenef){var p={nom:t.nomBeneficiaire,prenom:t.prenomBeneficiaire,rib:t.ribBeneficiaire,cin:t.cinBeneficiaire};a.addBeneficiaireImpl(p,d)}d.typeAvenantId=t.avenants;var h="open".concat(Date.now()),f=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleConfirm(d,h,t)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(h)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement("h2",null,"B\xe9n\xe9ficiaire \xe0 ajouter :"),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Prenom :",span:3},t.prenomBeneficiaire),r.a.createElement(En.a.Item,{label:"Nom :",span:3},t.nomBeneficiaire),r.a.createElement(En.a.Item,{label:"RIB :",span:3},t.ribBeneficiaire))),btn:f,key:h,style:{width:880,marginLeft:-945},duration:0})}else if(a.state.avenantFive){var b=a.state.record;b.dureeContrat=a.state.dureeContrat,b.typeAvenantId=t.avenants;var E="open".concat(Date.now()),v=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleConfirm(b,E)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(E)},style:{marginLeft:8},className:"not-rounded"},"Fermer"));u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Duree du contrat"},a.state.dureeContrat))),btn:v,key:E,style:{width:880,marginLeft:-945},duration:0})}})},a.handleSimulation=function(){var e=Object(R.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.next=3,as(a.state.keyRecord);case 3:return e.next=5,e.sent.data;case 5:e.sent.forEach(function(e){0===e.solde&&(n+=e.montantCotisation)}),a.setState({montantCotisationBrut:n,aSimuler:!0});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={contratId:a.state.keyRecord,dateDepart:Kt()(t.dateDepart,"DD/MM/YYYY"),ir:0,montantBrutRachatTotal:a.state.montantCotisationBrut,montantNetRachatTotal:a.state.montantCotisationBrut};a.setState({visibled:!1,rachatTotalVisible:!1}),(r=n,localStorage.getItem(G)?ae({url:L+"/private/addPrestationRachatTotal",data:r,method:"POST"}):Promise.reject("No access token set.")).then(function(e){u.a.success({message:"TAKAFUL",description:"L'insertion est bien faite"}),a.props.record.history.push("/consultRetraiteContrat")}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})})}var r})},a.state={data:[],visible:!1,visibled:!1,show:!1,avenantOneShow:!1,avenantTwoShow:!1,avenantFourShow:!1,avenantFiveShow:!1,avenantOne:!1,avenantTwo:!1,avenantFour:!1,avenantFive:!1,showed:!1,sinistre:!1,restitution:!1,dateCreation:new Date,searchText:"",searchedColumn:"",selectedRowKeys:[],searchby:"numeroContrat",searchfor:"",selectedFile:null,record:{},contrats:[],totalItems:0,pagenumber:1,value:"",differe:null,dateEcheance:"",duree:null,keyRecord:"",capital:null,tauxSurprime:null,tauxReduction:null,tauxTaxe:null,tarification:{},montantSurprime:null,montantCotisation:null,cotisationTotale:null,montantTaxe:null,prorata:null,typeAvenant:[],periodicite:"",ajouterBenef:!1,modifierBenef:!1,supprimerBenef:!1,beneficiareAModifierId:"",beneficiareAModifier:{},beneficiareASupprimerId:"",beneficiareASupprimer:{},contratPrestation:{},rachatTotalVisible:!1,rachatPartielVisible:!1,rachatTotal:!1,rachatPartiel:!1,liquidation:!1,avance:!1,montantCotisationBrut:0,aSimuler:!1},a.columns=[{title:"N\xb0 de Contrat",dataIndex:"id",key:"idContrat",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(go.Provider,{value:{state:t}},r.a.createElement(vo,null))))}},Object(at.a)({title:"Dur\xe9e Contrat",dataIndex:"dureeContrat",key:"dureeContrat"},Et("dureeContrat","Dur\xe9e contrat",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Nom assur\xe9",dataIndex:"assure.nom",key:"nomAssure"},Et("assure.nom","Nom assure",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom assur\xe9",dataIndex:"assure.prenom",key:"prenomAssure"},Object(at.a)({title:"Nom souscripteur",dataIndex:"souscripteur.nom",key:"nomSouscripteur"},Et("souscripteur.nom","Nom souscripteur",Object(b.a)(Object(b.a)(a)))),{title:"Pr\xe9nom souscripteur",dataIndex:"souscripteur.prenom",key:"prenomSouscripteur"},{title:"Date d'effet",dataIndex:"dateEffet",key:"dateEffet"},{title:"Date \xe9cheance",dataIndex:"dateEcheance",key:"dateEcheance"},{title:"Produit",dataIndex:"produit.libelle",key:"produit"},{title:"Action",dataIndex:"operation",width:"22%",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleSelectChange(t)},size:"small",style:{borderRadius:"0px",width:"105px",backgroundColor:"rgb(236 131 91)",borderColor:"rgb(236 131 91)",textAlign:"left",marginBottom:"2px"}},r.a.createElement(w.a,{type:"plus-circle"})," Avenant"),r.a.createElement(fe.a,{type:"primary",onClick:function(){return a.handleChangePrestation(t)},size:"small",style:{borderRadius:"0px",width:"105px",backgroundColor:"#4ee289",borderColor:"#4ee289",textAlign:"left"}},r.a.createElement(w.a,{type:"plus-circle"})," Prestation"))}}],a.typeAvenants=[{id:"11",code:"AVN01",libelle:"La modification de la p\xe9riodicit\xe9 de versement de la contribution"},{id:"2",code:"AVN02",libelle:"La modification du montant de la contribution p\xe9riodique"},{id:"4",code:"AVN04",libelle:"La modification du b\xe9n\xe9ficiaire du contrat par un autre b\xe9n\xe9ficiaire"},{id:"5",code:"AVN05",libelle:"La modification du la dur\xe9e du contrat"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getTariffication",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kt()().diff(Kt()(this.state.record.assure.dateNaissance),"years"),r=this.state.duree,So=this.state.record.produit.produitType,e.next=5,_a(r,n,t,a,So,this.state.record.produit.id);case 5:i=e.sent,this.setState({tarification:i.data});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getproprties(yo,this.state.pagenumber-1,3),this.getTypeAvenants()}},{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){var r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr(0,a,n);case 2:r=e.sent,this.setState({contrats:Object(tt.a)(r.data.content),totalItems:r.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=Kt()(this.state.record.dateEffet,"DD/MM/YYYY"),n=a.format("M"),r=a.format("D");if(this.state.show){if((this.state.capital!==t.capital||this.state.differe!==t.differe&&""!==this.state.capital&&""!==this.state.differe&&null!==this.state.differe&&null!==this.state.capital)&&this.getTariffication(this.state.capital,this.state.differe),t.tarification!==this.state.tarification&&"taux"===So){var i=this.props.form.getFieldValue("capitalAssure");this.setState({montantCotisation:this.state.tarification.taux*i/100}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.taux*i/100})}else t.tarification!==this.state.tarification&&"forfait"===So&&(this.setState({montantCotisation:this.state.tarification.forfait}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.forfait}));t.tauxSurprime!==this.state.tauxSurprime&&null!==this.state.montantCotisation&&(this.props.form.setFieldsValue({montantSurprime:this.state.tauxSurprime*this.state.montantCotisation/100}),this.setState({montantSurprime:this.state.tauxSurprime*this.state.montantCotisation/100})),t.montantSurprime===this.state.montantSurprime&&this.state.montantCotisation===t.montantCotisation||null!==this.state.montantSurprime&&null!==this.state.montantCotisation&&(this.props.form.setFieldsValue({cotisationTotale:this.state.montantSurprime+this.state.montantCotisation}),this.setState({cotisationTotale:this.state.montantSurprime+this.state.montantCotisation})),t.cotisationTotale!==this.state.cotisationTotale&&null!==this.state.cotisationTotale&&"Unique"!==this.state.record.periodicite.libelle&&(r<=15?(this.props.form.setFieldsValue({prorata:this.state.cotisationTotale*((13-n)/12)}),this.setState({prorata:this.state.cotisationTotale*((13-n)/12)})):(this.props.form.setFieldsValue({prorata:this.state.cotisationTotale*((12-n)/12)}),this.setState({prorata:this.state.cotisationTotale*((12-n)/12)}))),t.prorata!==this.state.prorata&&null!==this.state.tauxTaxe&&(this.props.form.setFieldsValue({montantTaxe:this.state.prorata*this.state.tauxTaxe/100}),this.setState({montantTaxe:this.state.prorata*this.state.tauxTaxe/100}))}}},{key:"searchContrats",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(t,a,n,r);case 2:i=e.sent,"cin"===n||"nom"===n?this.setState({contrats:Object(tt.a)(i.data.content),totalItems:i.data.numberOfElements}):"numeroContrat"===n&&this.setState({contrats:Object(tt.a)(i.data.content),totalItems:i.data.totalElements});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"getTypeAvenants",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn();case 2:t=e.sent,this.setState({typeAvenant:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCodeById",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updatedContrat",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(t,a);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updatedContratStatus",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(t,a);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.visible,i=a.visibled,l=this.state.record.beneficiaireEnDeces,s={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:14}}};return r.a.createElement("div",null,r.a.createElement(lt,{title:"Gestion des contrats"}),r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(xo,{placeholder:"Entrez le text de recherche",addonBefore:this.selectBefore,onSearch:function(t){return e.search(t)},enterButton:!0,style:{width:600}})),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:this.columns,dataSource:this.state.contrats,pagination:{onChange:this.onPaginationChange,pageSize:3,total:this.state.totalItems}}),r.a.createElement(fn.a,{visible:n,title:"Ajouter Avenant",onOk:this.handleSubmit,onCancel:this.handleCancel,afterClose:this.handleClose,style:{top:20},width:"880px",footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCancel,className:"not-rounded"},"Fermer"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleSubmit,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,s,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Liste des avenants "},t("avenants",{rules:[{message:"Please input the title of collection!"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.handleChange},this.typeAvenants.map(function(e){return r.a.createElement(Co,{key:e.id,value:e.id,label:e.code},e.libelle)}))))))," ",this.state.avenantOneShow?r.a.createElement("div",null,r.a.createElement("h3",null," ","Changement de la p\xe9riodicit\xe9 de versement de la contribution"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Date cr\xe9ation"},t("dateCreation",{initialValue:Kt()(this.state.dateCreation,"DD-MM-YYYY")})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"N\xb0 Avenant"},t("numeroAvenant")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Ancien Periodicite"},t("periodicite")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Pr\xe9iodicit\xe9",hasFeedback:!0},t("nouveauPeriodicite",{rules:[{required:!0}]})(r.a.createElement($e.a,{onChange:function(t){e.setState({periodicite:t})},placeholder:"Choisir une periodicite",optionLabelProp:"label",labelInValue:!0},this.state.record.produit.periodicites.map(function(e){return r.a.createElement(Co,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Ancien n\xb0periodicite"},t("nombrePeriodicite")(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"n\xb0periodicite"},t("nouveauNombrePeriodicite")(r.a.createElement(I.a,{className:"not-rounded",onChange:this.onChangeNombrePeriodicite}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Date effet avenant"},t("dateEffetAvenant",{initialValue:Kt()(this.state.dateCreation,"DD-MM-YYYY")})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY"})))))):null,this.state.avenantTwoShow?r.a.createElement("div",null,r.a.createElement("h3",null," Changement du montant de la contribution periodique"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Ancien contribution"},t("montantContributionPeriodique",{})(r.a.createElement(I.a,{className:"not-rounded",disabled:!0})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Nouveau contribution"},t("nouveauMontantContributionPeriodique")(r.a.createElement(I.a,{className:"not-rounded",type:"number",onChange:this.onChangeContributionPeriodique,addonAfter:"DH",min:this.state.record.produit.montantMinContribution})))))):null,this.state.avenantFourShow?r.a.createElement("div",null,r.a.createElement("h3",null,"La modification du b\xe9n\xe9ficiaire du contrat"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez une action",onChange:this.handleChangeBenefAction,style:{width:"45%"}},r.a.createElement(Co,{value:"Ajouter",label:"ajouter"},"Ajouter"),r.a.createElement(Co,{value:"Modifier",label:"modifier"},"Modifier"))),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,this.state.ajouterBenef?r.a.createElement("div",null,r.a.createElement("h3",null,"Ajouter un nouveau b\xe9n\xe9ficiaire"),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"cin"},t("cinBeneficiaire",{rules:[{required:!0,message:"Entrer le cin"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"CIN du b\xe9n\xe9ficiare"}))),r.a.createElement(He.a.Item,{label:"nom"},t("nomBeneficiaire",{rules:[{required:!0,message:"Entrer le nom"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Nom du b\xe9n\xe9ficiare"}))),r.a.createElement(He.a.Item,{label:"prenom"},t("prenomBeneficiaire",{rules:[{required:!0,message:"Entrer le prenom"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Prenom du b\xe9n\xe9ficiare"}))),r.a.createElement(He.a.Item,{label:"rib"},t("ribBeneficiaire",{})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"RIB du b\xe9n\xe9ficiare",type:"number"}))))):null,this.state.modifierBenef?r.a.createElement("div",null,r.a.createElement("h3",null,"Modifier un b\xe9n\xe9ficiaire"),r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez le b\xe9n\xe9ficiaire \xe0 modifier",onChange:this.handleBenefeciairesToEditChange,style:{width:"45%"}},l.map(function(e){return r.a.createElement(Co,{key:e.id,value:e.id,label:e.nom},e.nom+" "+e.prenom)})),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"cin"},t("cinBeneficiaire",{rules:[{required:!0,message:"Entrer le cin"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"CIN du b\xe9n\xe9ficiare"}))),r.a.createElement(He.a.Item,{label:"nom"},t("nomBeneficiaire",{rules:[{required:!0,message:"Entrer le nom"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Nom du b\xe9n\xe9ficiare"}))),r.a.createElement(He.a.Item,{label:"prenom"},t("prenomBeneficiaire",{rules:[{required:!0,message:"Entrer le prenom"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Prenom du b\xe9n\xe9ficiare"}))),r.a.createElement(He.a.Item,{label:"rib"},t("ribBeneficiaire",{})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"RIB du b\xe9n\xe9ficiare",type:"number"})))))):null,this.state.supprimerBenef?r.a.createElement("div",null,r.a.createElement("h3",null,"Supprimer un b\xe9n\xe9ficiaire"),r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez le b\xe9n\xe9ficiaire \xe0 supprimer",onChange:this.handleBenefeciairesToDelete,style:{width:"45%"}},l.map(function(e){return r.a.createElement(Co,{key:e.id,value:e.id,label:e.nom},e.nom+" "+e.prenom)})),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Nom"},this.state.beneficiareASupprimer.nom),r.a.createElement(En.a.Item,{label:"Prenom",span:2},this.state.beneficiareASupprimer.prenom),r.a.createElement(En.a.Item,{label:"Rib",span:2},this.state.beneficiareASupprimer.rib)))):null)):null,this.state.avenantFiveShow?r.a.createElement("div",null,r.a.createElement("h3",null,"La modification du la dur\xe9e du contrat"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Ancien dur\xe9e"},t("dureeContrat",{})(r.a.createElement(I.a,{className:"not-rounded",disabled:!0,addonAfter:"Mois"})))),r.a.createElement(xe.a,{span:11,offset:1},r.a.createElement(He.a.Item,{label:"Nouveau duree"},t("nouveauDureeContrat")(r.a.createElement(I.a,{className:"not-rounded",type:"number",onChange:this.onChangeDureeContrat,addonAfter:"Mois",min:this.state.record.produit.dureeMinimalSouscription})))))):null)),r.a.createElement(fn.a,{visible:i,title:"Veuillez saisir les informations de la prestation",onOk:this.handleSubmited,onCancel:this.handleCanceled,afterClose:this.handleClosed,style:{top:20},width:"900px",footer:[r.a.createElement(fe.a,{key:"simuler",type:"link",onClick:this.handleSimulation,className:"not-rounded"},"Simuler"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleSubmited,className:"not-rounded",disabled:!this.state.aSimuler},"Ajouter"),r.a.createElement(fe.a,{key:"back",onClick:this.handleCanceled,className:"not-rounded"},"Fermer")]},r.a.createElement(He.a,s,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:16,offset:6},r.a.createElement(He.a.Item,null,t("typePrestation")(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez ",onChange:this.handleChanged},this.state.rachatTotalVisible?r.a.createElement(Co,{value:"Rachat total",label:"Rachat total"},"Rachat total"):null,this.state.rachatPartielVisible?r.a.createElement(Co,{value:"Rachat partiel",label:"Rachat total"},"Rachat partiel"):null,r.a.createElement(Co,{value:"Liquidation",label:"Liquidation"},"Liquidation"),r.a.createElement(Co,{value:"Avance",label:"Avance"},"Avance")))))),this.state.rachatTotal?r.a.createElement("div",null,r.a.createElement("h3",null," AJOUT PRESTATION RACHAT TOTAL"),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date Prestation"},t("datePrestation",{initialValue:Kt()(this.state.dateCreation,"DD-MM-YYYY")})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Date D\xe9part"},t("dateDepart",{rules:[{required:!0,message:"Date de d\xe9part est obligatoire"}]})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",style:{width:"60%"}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Mode de Paiement"},t("modeReglement",{rules:[{required:!0,message:"Mode de virement est obligatoire"}]})(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez ",style:{width:"60%"}},r.a.createElement(Co,{value:"Virement",label:"Virement"},"Virement")))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Banque"},t("banque",{initialValue:this.state.contratPrestation.produit.partenaire.raisonSocial})(r.a.createElement(I.a,{style:{width:"60%"},type:"text",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"N\xb0 de compte bancaire"},t("compteBancaire",{initialValue:this.state.contratPrestation.produit.partenaire.numeroCompte})(r.a.createElement(I.a,{style:{width:"60%"},type:"text",disabled:!0}))))),r.a.createElement(o.a,null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Montant rachat brut \xe0 la date du jour"},r.a.createElement(I.a,{style:{width:"60%"},type:"number",value:this.state.montantCotisationBrut})))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"IR"},t("ir",{initialValue:0})(r.a.createElement(I.a,{style:{width:"60%"},type:"number",disabled:!0}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:22,offset:2},r.a.createElement(He.a.Item,{label:"Montant rachat net \xe0 la date du jour"},r.a.createElement(I.a,{style:{width:"60%"},type:"number",value:this.state.montantCotisationBrut}))))):null,this.state.restitution?r.a.createElement("div",null,r.a.createElement("h3",null," AJOUT restitution"),r.a.createElement(o.a,null)):null)))}}]),t}(n.Component),Io=He.a.create()(ko),Oo=(a(1043),$e.a.Option),jo=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(t.typePersonneMorale={id:t.typePersonneMorale},t.secteurActivite={id:t.secteurActivite},a.createPersonMorale(t))})},a.onChangeVille=function(e){a.setState({ville:e,adresscomplet:a.state.vois+" "+a.state.complement+" "+a.state.numero+" "+a.state.ville+" "+a.state.pays})},a.state={villes:[],visible:!1,pays:"",ville:"",vois:"",complement:"",numero:"",adresscomplet:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getAllVilles",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca();case 2:t=e.sent,this.setState({villes:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllVilles()}},{key:"createPersonMorale",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ta(t);case 3:200===(a=e.sent).status&&(this.onClose(),u.a.success({message:"personne bien ajoute"}),this.props.personCreation(a.data)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),this.onClose(),console.log(e.t0),"souscripteur already exists"===e.t0.response.data.message?u.a.error({message:"une personne et deja inscrit avec la meme patente ."}):u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 12:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,"Cr\xe9ation d'un nouveau Participant"===this.props.titre?r.a.createElement(fe.a,{type:"primary",onClick:this.showDrawer,style:{borderRadius:"0px",marginBottom:"10px"},className:"nouveau-btn"},r.a.createElement(w.a,{type:"user-add"})," Nouveau participant"):r.a.createElement(fe.a,{type:"primary",style:{backgroundColor:"#77cc6d",borderColor:"#77cc6d"},shape:"circle",icon:"plus",onClick:this.showDrawer}),r.a.createElement(ot.a,{title:this.props.titre,width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Raison sociale"},e("raisonSociale",{rules:[{required:!0,message:"Tapez la Raison Sociale"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez la Raison Sociale"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},e("abb",{rules:[{required:!0,message:"Tapez l abb"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez l abb"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Si\xe8ge social"},e("Siegesociale",{rules:[{required:!0,message:"Tapez le si\xe8ge social"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le si\xe8ge social"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0de Patente"},e("patente",{rules:[{required:!0,message:"Svp entr\xe9 patente"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez patente"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0ice"},e("ice",{rules:[{required:!0,message:"Tapez le N\xb0ice"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le N\xb0ice"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code"},e("code",{rules:[{required:!0,message:"Tapez le code"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le code"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type personne morale"},e("typePersonneMorale",{rules:[{required:!0,message:"S\xe9lectionnez un type personne morale"}]})(r.a.createElement($e.a,{placeholder:"Type personne morale"},this.props.typePersonneMoral.map(function(e){return r.a.createElement(Oo,{key:e.id,value:e.id},e.libelle)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Secteur d'activit\xe9"},e("secteurActivite",{rules:[{required:!0,message:"S\xe9lectionnez le secteur d'activit\xe9"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez le secteur d'activit\xe9"},this.props.secteurActivite.map(function(e){return r.a.createElement(Oo,{key:e.id,value:e.id},e.libelle)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"T\xe9l\xe9phone"},e("numeroDeTelephone",{rules:[{required:!0,pattern:new RegExp("^[0][5-7]{1}[0-9]{8}$"),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Numero de telephone"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adress :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},e("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},e("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement($e.a,{placeholder:"Villes",onChange:this.onChangeVille},this.state.villes.map(function(e){return r.a.createElement(Oo,{key:e.id,value:e.name},e.name)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Vois"},e("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Vois"},this.props.vois.map(function(e){return r.a.createElement(Oo,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},e("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Numero"},e("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero",onChange:this.onChangeNumero})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Complement"},e("adressComplement")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un complement"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adress Complete"},e("adressComplete")(r.a.createElement(I.a,{value:this.state.adresscomplet,className:"not-rounded",style:{width:"100%"}}))))),r.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Annuler"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Enregistrer")))))}}]),t}(n.Component),To=He.a.create()(jo),Ao=$e.a.Option,Po=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(t.dateNaissance=t.dateNaissance.format("DD-MM-YYYY"),t.adressVille=t.adressVille.label,a.createPersonnePhysique(t))})},a.onChangeVille=function(e){console.log(e),a.setState({ville:e.label,adresscomplet:a.state.vois+" "+a.state.complement+" "+a.state.numero+" "+a.state.ville+" "+a.state.pays})},a.state={visible:!1,villes:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getAllVilles",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca();case 2:t=e.sent,a=[],t.data.forEach(function(e){var t=e.name;a.push(t)}),this.setState({villes:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllVilles()}},{key:"createPersonnePhysique",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt(t);case 3:200===(a=e.sent).status&&(this.onClose(),u.a.success({message:"personne bien ajoute"}),this.props.personCreation(a.data)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.onClose(),"souscripteur already exists"===e.t0.response.data.message?u.a.error({message:"une personne et deja inscrit avec le meme cin ."}):u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,"Cr\xe9ation d'un nouveau Participant"===this.props.titre?r.a.createElement(fe.a,{type:"primary",onClick:this.showDrawer,style:{borderRadius:"0px",marginBottom:"10px"},className:"nouveau-btn"},r.a.createElement(w.a,{type:"user-add"})," Nouveau participant"):r.a.createElement(fe.a,{type:"primary",style:{backgroundColor:"#77cc6d",borderColor:"#77cc6d"},shape:"circle",icon:"plus",onClick:this.showDrawer}),r.a.createElement(ot.a,{title:this.props.titre,width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(He.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.handleSubmit},r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Prospect"},e("isProspect",{valuePropName:"checked",initialValue:!0})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!0},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pr\xe9nom"},e("prenom",{rules:[{required:!0,message:"Tapez le pr\xe9nom de souscripteur"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le pr\xe9nom de souscripteur"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nom"},e("nom",{rules:[{required:!0,message:"Tapez le pr\xe9nom de souscripteur"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le nom de souscripteur"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"CIN"},e("cin",{rules:[{required:!0,message:"Svp entr\xe9 votre CIN!"}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le CIN de souscripteur"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Date de naissance",hasFeedback:!0},e("dateNaissance",{rules:[{required:!0,message:"entre la date de naissance"}]})(r.a.createElement(Lt.a,null))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Matricule"},e("matricule",{rules:[{required:!1}]})(r.a.createElement(I.a,{className:"not-rounded",placeholder:"Tapez le matricule de souscripteur"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Profession"},e("profession",{rules:[{required:!0,message:"S\xe9lectionnez une profession"}]})(r.a.createElement($e.a,{placeholder:"Profession"},this.props.professions.map(function(e){return r.a.createElement(Ao,{key:e.id,value:e.libelle},e.libelle)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Situation familiale "},e("situationFamiliale",{rules:[{required:!0,message:"S\xe9lectionnez une Situation familiale"}]})(r.a.createElement($e.a,{placeholder:"Situation familiale"},this.props.setuation.map(function(e){return r.a.createElement(Ao,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Sexe"},e("sexe",{rules:[{required:!0,message:"S\xe9lectionnez le sexe"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez le sexe"},this.props.sexe.map(function(e){return r.a.createElement(Ao,{key:e.id,value:e.value},e.name)})))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nationalit\xe9"},e("nationalite",{rules:[{required:!0,message:"Entrez une Nationalit\xe9"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Entrez une Nationalit\xe9"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nombre d'enfants"},e("nombreEnfants",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le nombre d'enfants"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"RIB"},e("rib",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"RIB"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"T\xe9l\xe9phone"},e("numeroDeTelephone",{rules:[{required:!0,pattern:new RegExp("^[0][5-7]{1}[0-9]{8}$"),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Numero de telephone"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0 Tiers"},e("numTiers",{rules:[{required:!0,message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"N\xb0 Tiers"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement("h4",null,"Adress :"),r.a.createElement(o.a,null))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pays"},e("adressPays",{rules:[{required:!0,message:"selecte un pays"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Ville"},e("adressVille",{rules:[{required:!0,message:"selecte une ville"}]})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.villes,onSelect:this.onChangeVille,allowClear:!1,labelInValue:!0,placeholder:"ajouter une ville",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Vois"},e("adressVois",{rules:[{required:!0,message:"selecte une vois"}]})(r.a.createElement($e.a,{placeholder:"Vois"},this.props.vois.map(function(e){return r.a.createElement(Ao,{key:e.id,value:e.value},e.name)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code Postal"},e("adressCodePostal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Code Postal"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Numero"},e("adressNumero",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(Vt.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le Numero"})))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Complement"},e("adressComplement")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"entrez le un complement"}))))),r.a.createElement(ye.a,{gutter:16},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"Adress Complete"},e("adressComplete")(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"}}))))),r.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(fe.a,{className:"not-rounded",onClick:this.onClose,style:{marginRight:8}},"Annuler"),r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"submit"},"Enregistrer")))))}}]),t}(n.Component),Do=He.a.create()(Po),Fo=(Yt.a.Option,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).searchPersonnemorale=function(e){var t=Object(tt.a)(a.state.personMoraleList);a.setState({souscripteur:t.filter(function(t){return t.patente===e.key})[0],patente:e.key})},a.searchPersonnePhysique=function(e){console.log("souscripteuuuuur",a.state.personlist.filter(function(t){return t.cin===e.key})[0]);var t=Object(tt.a)(a.state.personlist);null!=t&&(a.setState({souscripteur:t.filter(function(t){return t.cin===e.key})[0],cin:e.key}),console.log("souscripteur",a.state.souscripteur))},a.onChangeSelect=function(e){var t=Object(tt.a)(a.state.personlist);a.setState({assurePresent:!0,assure:t.filter(function(t){return t.cin===e.key})[0]})},a.handleSabmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll()},a.handlePersonphyCreationSousctipteur=function(e){a.setState({souscripteur:e,perphysique:!0,permorale:!1}),a.props.form.setFieldsValue({cin:{key:e.cin,label:e.cin}})},a.handlePersonMoraleCreationSousctipteur=function(e){a.setState({souscripteur:e,permorale:!0,perphysique:!1}),a.props.form.setFieldsValue({patente:{key:e.patente,label:e.patente}})},a.handlePersonphyCreationAssure=function(e){var t=Object(tt.a)(a.state.personlist);t.push(e),a.setState({assure:e,assurePresent:!0,personlist:Object(tt.a)(t)}),a.props.form.setFieldsValue({assure:{key:e.cin,label:e.cin}})},a.handlechange=function(e){a.setState({moraleOuPhysique:e.target.value,souscripteur:"",assure:"",souscripteurIsAssure:"",disableSouscripteuretAssure:""}),a.clearAutocompleteFields()},a.onChange=function(e){"physique"===a.state.moraleOuPhysique&&e.target.checked?(a.setState({assure:a.state.souscripteur,souscripteurIsAssure:!0,disableSouscripteuretAssure:!0}),a.props.form.setFieldsValue({assure:{key:a.state.souscripteur.cin,label:a.state.souscripteur.cin},cinAssure:a.state.selectedCinSouscripteur})):a.setState({souscripteurIsAssure:!1,disableSouscripteuretAssure:!1})},a.state={moraleOuPhysique:a.props.moraleOuPhysique.value,souscripteur:a.props.souscripteur.value,permorale:!1,perphysique:!1,sexe:[],assure:a.props.assure.value,setuations:[],professions:[],vois:[],dataloaded:!1,personlist:[],personlistForAuto:[],selectedPatente:[],selectedCinSouscripteur:[],selectedCinAsuree:[],assurePresent:a.props.assurePresent.value,typePersonneMoral:[],secteurActivite:[],personMoraleList:[],personMoraleListForAuto:[],souscripteurIsAssure:a.props.souscripteurIsAssure.value,disableSouscripteuretAssure:a.props.souscripteurIsAssure.value,dossierFinnancementForAuto:[],selectedRefDossier:[]},a.handleChangeCinSouscripteur=a.handleChangeCinSouscripteur.bind(Object(b.a)(Object(b.a)(a))),a.clearAutocompleteFields=a.clearAutocompleteFields.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n,r,i,l,s,o,c,u,m;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa();case 2:return t=e.sent,e.next=5,ea();case 5:return a=e.sent,e.next=8,Qt();case 8:return n=e.sent,e.next=11,Xt();case 11:return r=e.sent,e.next=14,Zt();case 14:return i=e.sent,e.next=17,Wt();case 17:return l=e.sent,e.next=20,_t();case 20:return s=e.sent,e.next=23,$t();case 23:o=e.sent,c=[],u=[],a.data.content.forEach(function(e){var t=e.cin;c.push(t)}),m=[],l.data.content.forEach(function(e){var t=e.patente;m.push(t)}),this.setState({personMoraleList:Object(tt.a)(l.data.content),sexe:Object(tt.a)(n.data),setuations:Object(tt.a)(r.data),vois:Object(tt.a)(t.data),dataloaded:!0,professions:Object(tt.a)(i.data.content),personlist:Object(tt.a)(a.data.content),personlistForAuto:[].concat(c),dossierFinnancementForAuto:[].concat(u),personMoraleListForAuto:[].concat(m),typePersonneMoral:Object(tt.a)(s.data),secteurActivite:Object(tt.a)(o.data.content)});case 30:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getproprties()}},{key:"handleChangeCinSouscripteur",value:function(e){this.setState({selectedCinSouscripteur:e})}},{key:"handleChangeRefDossier",value:function(e){this.setState({selectedRefDossier:e})}},{key:"clearAutocompleteFields",value:function(){this.props.form.setFieldsValue({patente:"",cin:"",cinAssure:"",numeroDossierFinancement:""})}},{key:"componentDidUpdate",value:function(e,t){this.props.check(this.state.souscripteurIsAssure,this.state.souscripteurIsAssure||this.state.assurePresent,""!==this.state.souscripteur,this.state.souscripteur,this.state.assure)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{offset:1,span:23},r.a.createElement(lt,{level:4,title:"Le souscripteur"}),r.a.createElement(He.a,{layout:"inline",onSubmit:this.handleSabmit,id:"formadd"},r.a.createElement("div",{style:{minHeight:"200px"}},r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:8},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,e("moraleOuPhysique",{rules:[{required:!1}],initialValue:this.state.moraleOuPhysique})(r.a.createElement(Ut.a.Group,{style:{marginBottom:25},buttonStyle:"solid",defaultValue:this.state.moraleOuPhysique,onChange:this.handlechange},r.a.createElement(Ut.a.Button,{value:"morale"},"Personne morale"),r.a.createElement(Ut.a.Button,{value:"physique"},"Personne physique"))))),r.a.createElement(xe.a,{span:24},"physique"===this.state.moraleOuPhysique&&r.a.createElement(He.a.Item,{label:"CIN"},e("cin",{rules:[{required:!0,message:"CIN is required!"}]})(r.a.createElement(Yt.a,{disabled:this.state.disableSouscripteuretAssure,defaultActiveFirstOption:!0,size:"default",style:{width:200},dataSource:this.state.personlistForAuto,onSelect:this.searchPersonnePhysique,allowClear:!0,value:this.state.selectedCinSouscripteur,onChange:this.handleChangeCinSouscripteur,labelInValue:!0,placeholder:"CIN",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),"morale"===this.state.moraleOuPhysique&&r.a.createElement(He.a.Item,{label:"Patente"},e("patente",{rules:[{required:!0,message:"patente is required!"}]})(r.a.createElement(Yt.a,{size:"default",className:"not-rounded",style:{width:182},dataSource:this.state.personMoraleListForAuto,onSelect:this.searchPersonnemorale,allowClear:!0,labelInValue:!0,placeholder:"Num\xe9ro de patente",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),r.a.createElement(He.a.Item,{style:{float:"right"}},this.state.dataloaded&&"physique"===this.state.moraleOuPhysique&&r.a.createElement(Do,{titre:"Cr\xe9ation d'un nouveau souscripteur physique",personCreation:this.handlePersonphyCreationSousctipteur,professions:this.state.professions,sexe:this.state.sexe,setuation:this.state.setuations,vois:this.state.vois}),this.state.dataloaded&&"morale"===this.state.moraleOuPhysique&&r.a.createElement(To,{titre:"Cr\xe9ation d'un nouveau souscripteur morale",personCreation:this.handlePersonMoraleCreationSousctipteur,typePersonneMoral:this.state.typePersonneMoral,secteurActivite:this.state.secteurActivite,vois:this.state.vois})),"physique"===this.state.moraleOuPhysique&&r.a.createElement(Rn.a,{style:{marginTop:"10px"},onChange:this.onChange,checked:this.state.souscripteurIsAssure,disabled:"physique"===!this.state.moraleOuPhysique},"Le souscripteur est l'assur\xe9 lui m\xeame ?"),r.a.createElement(o.a,{style:{marginTop:"20px"}})),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"N\xb0 Dossier de financement/Id Client"},e("numeroDossierFinancement")(r.a.createElement(I.a,{placeholder:"N\xb0 Dossier de financement"}))))),r.a.createElement(xe.a,{offset:1,span:14},"physique"===this.state.moraleOuPhysique&&""!==this.state.souscripteur&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations du souscripteur physique"},r.a.createElement(En.a.Item,{label:"Pr\xe9nom"},this.state.souscripteur.prenom),r.a.createElement(En.a.Item,{label:"Nom"},this.state.souscripteur.nom),r.a.createElement(En.a.Item,{label:"Date de naissance"},this.state.souscripteur.dateNaissance),r.a.createElement(En.a.Item,{label:"Sexe"},this.state.souscripteur.sexe," "),r.a.createElement(En.a.Item,{label:"CIN"},this.state.souscripteur.cin),r.a.createElement(En.a.Item,{label:"Nombre d'enfants"},this.state.souscripteur.nombreEnfants),r.a.createElement(En.a.Item,{label:"Ville"},this.state.souscripteur.adressVille),r.a.createElement(En.a.Item,{label:"RIB"},this.state.souscripteur.rib),r.a.createElement(En.a.Item,{label:"Matricule"},this.state.souscripteur.matricule),r.a.createElement(En.a.Item,{label:"N\xb0 Tiers"},this.state.souscripteur.numTiers)),""===this.state.souscripteur&&r.a.createElement(oi.a,{description:"Merci de mentionner le num\xe9ro de patente ou cin",style:{margin:"3% auto",color:"rgba(0, 0, 0, 0.45)"}}),"morale"===this.state.moraleOuPhysique&&""!==this.state.souscripteur&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations du souscripteur morale"},r.a.createElement(En.a.Item,{label:"Abb"},this.state.souscripteur.abb),r.a.createElement(En.a.Item,{label:"Raison sociale"},this.state.souscripteur.raisonSociale),r.a.createElement(En.a.Item,{label:"Patente"},this.state.souscripteur.patente),r.a.createElement(En.a.Item,{label:"Ice"},this.state.souscripteur.ice),r.a.createElement(En.a.Item,{label:"Code"},this.state.souscripteur.code))),r.a.createElement(xe.a,{offset:1,span:1}))),r.a.createElement("div",{style:{minHeight:"200px"}},r.a.createElement(ye.a,{style:{marginTop:"20px"}},r.a.createElement(lt,{level:4,title:"L'assur\xe9"}),r.a.createElement(xe.a,{span:8},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,{label:"L'assur\xe9"},e("cinAssure",{rules:[{required:!0,message:"assuree is required!"}]})(r.a.createElement(Yt.a,{disabled:this.state.disableSouscripteuretAssure&&"physique"===this.state.moraleOuPhysique,size:"default",style:{width:182},dataSource:this.state.personlistForAuto,onSelect:this.onChangeSelect,allowClear:!0,labelInValue:!0,placeholder:"ajouter un assur\xe9",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))),r.a.createElement(He.a.Item,{style:{float:"right"}},this.state.dataloaded&&r.a.createElement(Do,{titre:"Cr\xe9ation d'un nouveau assur\xe9",personCreation:this.handlePersonphyCreationAssure,professions:this.state.professions,sexe:this.state.sexe,setuation:this.state.setuations,vois:this.state.vois}))),r.a.createElement(xe.a,{span:24})),r.a.createElement(xe.a,{offset:1,span:14},""!==this.state.assure&&r.a.createElement(En.a,{size:"small",column:2,bordered:!0,title:"Informations de l'assur\xe9"},r.a.createElement(En.a.Item,{label:"Pr\xe9nom"},this.state.assure.prenom),r.a.createElement(En.a.Item,{label:"Nom"},this.state.assure.nom),r.a.createElement(En.a.Item,{label:"Date de naissance"},this.state.assure.dateNaissance),r.a.createElement(En.a.Item,{label:"Sexe"},this.state.assure.sexe," "),r.a.createElement(En.a.Item,{label:"CIN"},this.state.assure.cin),r.a.createElement(En.a.Item,{label:"Nombre d'enfants"},this.state.assure.nombreEnfants),r.a.createElement(En.a.Item,{label:"Matricule"},this.state.assure.matricule)),""===this.state.assure&&r.a.createElement(oi.a,{description:"Merci de remplir la partie assure",style:{margin:"3% auto",color:"rgba(0, 0, 0, 0.45)"}})),r.a.createElement(xe.a,{offset:1,span:1}))))),r.a.createElement(xe.a,{offset:1,span:1}))}}]),t}(n.Component)),wo=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{numeroDossierFinancement:He.a.createFormField(Object(at.a)({},e.numeroDossierFinancement,{value:e.numeroDossierFinancement.value})),cin:He.a.createFormField(Object(at.a)({},e.cin,{value:e.cin.value})),patente:He.a.createFormField(Object(at.a)({},e.patente,{value:e.patente.value})),assure:He.a.createFormField(Object(at.a)({},e.assure,{value:e.assure.value})),cinAssure:He.a.createFormField(Object(at.a)({},e.cinAssure,{value:e.cinAssure.value})),moraleOuPhysique:He.a.createFormField(Object(at.a)({},e.moraleOuPhysique,{value:e.moraleOuPhysique.value}))}}})(Fo),Mo=(a(412),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).id=1,a.add=function(){var e=a.props,t=e.getFieldValue,n=e.setFieldsValue,r=e.name,i=t("".concat(r,"List")).concat(a.id++);n(Object(jt.a)({},"".concat(r,"List"),i))},a.remove=function(e){return function(){var t=a.props,n=t.getFieldValue,r=t.setFieldsValue,i=t.name,l=n("".concat(i,"List"));1!==l.length&&r(Object(jt.a)({},"".concat(i,"List"),l.filter(function(t){return t!==e})))}},a.defaultValidation=function(e){return{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champ Obligatoire ... "}]}},a.addSingleField=function(){var e=a.props,t=e.getFieldDecorator,n=e.getFieldValue,i=e.fields,l=e.name;t("".concat(l,"List"),{initialValue:[0]});var s=n("".concat(l,"List"));return s.map(function(e){return r.a.createElement(He.a.Item,{key:e},t("".concat(l,"[").concat(e,"]"),i.validation||a.defaultValidation(l))(i.field()),s.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:a.remove(e)}):null)})},a.addMultipleFields=function(){var e=a.props,t=e.getFieldDecorator,n=e.getFieldValue,i=e.fields,l=e.name;t("".concat(l,"List"),{initialValue:[0]});var s=n("".concat(l,"List"));return s.reduce(function(e,n){var o=i.map(function(e,o){return r.a.createElement(He.a.Item,{key:"".concat(n).concat(e.name)},t("".concat(l,"[").concat(n,"][").concat(e.name,"]"),e.validation||a.defaultValidation(l))(e.field()),s.length>1&&i.length-1===o?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:a.remove(n)}):null)});return[].concat(Object(tt.a)(e),Object(tt.a)(o))},[])},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fields,a=e.name;return r.a.createElement(n.Fragment,null,Array.isArray(t)?this.addMultipleFields():this.addSingleField(),r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"dashed",onClick:this.add,style:{width:"30%"}},r.a.createElement(w.a,{type:"plus"})," Add \xa0 ",a)))}}]),t}(n.Component)),No=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){e.preventDefault(),a.props.form.validateFields(function(t,n){a.props.stepThreeCallBack(n.beneficiaire),e.preventDefault()})},a.state={},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.form;return r.a.createElement("div",{className:"container"},r.a.createElement(He.a,{onChange:this.handleChange},r.a.createElement(o.a,{orientation:"left",className:"first"},"Ajouter Beneficiaire"),r.a.createElement(Mo,Object.assign({},e,{name:"beneficiaire",fields:[{name:"cin",field:function(){return r.a.createElement(I.a,{style:{width:"30%"},placeholder:"cin"})}},{name:"nom",field:function(){return r.a.createElement(I.a,{style:{width:"30%"},placeholder:"nom"})}},{name:"prenom",field:function(){return r.a.createElement(I.a,{style:{width:"30%"},placeholder:"prenom"})}},{name:"rib",field:function(){return r.a.createElement(I.a,{style:{width:"30%"},placeholder:"rib"})}}]}))))}}]),t}(n.Component),Ro=He.a.create({name:"beneficiaire"})(No),qo=$e.a.Option,Vo=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCallback=function(e){a.setState({beneficiaireEnDecess:e}),a.props.form.setFieldsValue({beneficiaireEnDeces:e}),a.props.getBenefeciaireState(e)},a.onChangeBeneficiaireCasDeces=function(e){a.setState({beneficiaireCasDeces:e})},a.onChangeApplicationAttributionIrrevocable=function(e){a.setState({attributionIrrevocable:e.target.value})},a.onChangeDeductibiliteFiscale=function(e){a.setState({deductibiliteFiscale:e.target.value})},a.handleSabmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){})},a.onChangePrenom=function(e){a.setState({prenom:e.value})},a.state={deductibiliteFiscale:a.props.deductibiliteFiscale.value,attributionIrrevocable:a.props.attributionIrrevocable.value,beneficiairesCasDeces:[{value:"HERITIERS",name:"Heritiers"},{value:"PERSONNEDESIGNEE",name:"Personne design\xe9e"}],montantContributionInitiale:"",montantContributionPeriodique:"",beneficiaireEnDecess:[],nombrePeriodicite:"",beneficiaireCasDeces:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.beneficiaireEnDeces;return r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSabmit,id:"stepthree"}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"D\xe9ductibilite Fiscale"},e("deductibiliteFiscale")(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:this.state.deductibiliteFiscale,onChange:this.onChangeDeductibiliteFiscale},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))),r.a.createElement(He.a.Item,{label:"Montant Contribution Initiale "},e("montantContributionInitiale",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DHS",className:"number-input"}))),r.a.createElement(He.a.Item,{label:"Montant Contribution Periodique "},e("montantContributionPeriodique",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),required:!0,message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DHS",className:"number-input"}))),r.a.createElement(He.a.Item,{label:"Date de Prelevement",hasFeedback:!0},e("datePrelevement",{rules:[{required:!0,message:"entrez la Date de prelevement"}]})(r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY"})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Application de l'attribution irr\xe9vocable "},e("attributionIrrevocable",{initialValue:this.state.attributionIrrevocable})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:this.state.attributionIrrevocable,onChange:this.onChangeApplicationAttributionIrrevocable},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))),r.a.createElement(He.a.Item,{label:"Nombre de p\xe9riodicit\xe9s"},e("nombrePeriodicite",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{className:"number-input"}))),r.a.createElement(He.a.Item,{label:"Beneficiaire en cas de deces ",hasFeedback:!0},e("beneficiaireCasDeces",{rules:[{required:!0,message:"choisissez une condition "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.onChangeBeneficiaireCasDeces},this.state.beneficiairesCasDeces.map(function(e){return r.a.createElement(qo,{value:e.value,label:e.name},e.name)}))))),"PERSONNEDESIGNEE"===this.props.beneficiaireCasDeces.value?r.a.createElement(Ro,{stepThreeCallBack:this.handleCallback},t):null))))}}]),t}(n.Component),zo=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{deductibiliteFiscale:He.a.createFormField(Object(at.a)({},e.deductibiliteFiscale,{value:e.deductibiliteFiscale.value})),attributionIrrevocable:He.a.createFormField(Object(at.a)({},e.attributionIrrevocable,{value:e.attributionIrrevocable.value})),beneficiaireCasDeces:He.a.createFormField(Object(at.a)({},e.beneficiaireCasDeces,{value:e.beneficiaireCasDeces.value})),montantContributionInitiale:He.a.createFormField(Object(at.a)({},e.montantContributionInitiale,{value:e.montantContributionInitiale.value})),montantContributionPeriodique:He.a.createFormField(Object(at.a)({},e.montantContributionPeriodique,{value:e.montantContributionPeriodique.value})),nombrePeriodicite:He.a.createFormField(Object(at.a)({},e.nombrePeriodicite,{value:e.nombrePeriodicite.value})),beneficiaireEnDeces:He.a.createFormField(Object(at.a)({},e.beneficiaireEnDeces,{value:e.beneficiaireEnDeces.value})),datePrelevement:He.a.createFormField(Object(at.a)({},e.datePrelevement,{value:e.datePrelevement.value}))}}})(Vo),Yo=$e.a.Option,Bo=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleEffetDateChange=function(e){if(null!==a.state.dateEcheance){var t=a.state.dateEcheance;a.setState({dateEffet:e,dureeContrat:t.diff(e,"months")})}},a.handleEcheanceDateChange=function(e){var t=a.state.dateEffet;a.setState({dateEcheance:e,dureeContrat:e.diff(t,"months")}),a.props.form.setFieldsValue({dureeContrat:e.diff(t,"months")})},a.disabledDate=function(e){return e&&e<Kt()(Kt()().format("YYYY-MM-DD"),"YYYY-MM-DD").add(2,"days")},a.disabledDateEcheance=function(e){return e&&e<a.state.dateEffet.endOf("day")},a.handleSabmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll()},a.onChange=function(e){a.setState({dureeContrat:e.target.value,dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value)}),a.props.form.setFieldsValue({dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value),dureeContrat:parseInt(e.target.value)})},a.onChangeProduit=function(e){var t=a.state.produits.filter(function(t){return t.code===e.label});a.setState({periodicites:t[0].periodicites,selectedProduct:t[0],dureeContrat:t[0].dureeMinimalSouscription})},a.partnerChange=function(e){a.setState({produits:a.props.produits.filter(function(t){return t.partenaire.raisonSocial===e.label})}),a.props.form.setFieldsValue({produit:"",periodicite:""})},a.state={pointsVentes:a.props.currentUser.pointVentes,periodicites:[],showField:!1,produits:[],dateEffet:Kt()(Kt()(),"YYYY-MM-DD").add(1,"days"),dateEcheance:a.props.dateEcheance.value,dureeContrat:a.props.dureeContrat.value,compteJoint:a.props.compteJoint.value,selectedProduct:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.form.setFieldsValue({dateEffet:this.state.dateEffet}),1===this.state.pointsVentes.length&&this.props.form.setFieldsValue({pointVente:this.state.pointsVentes[0].id})}},{key:"onChangePointDeVente",value:function(){this.props.form.setFieldsValue({produit:"",periodicite:"",partenaire:""})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSabmit,id:"steptwo"}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'effet",hasFeedback:!0},e("dateEffet",{valuePropName:"selected",rules:[{required:!0,message:"entre la Date d'effet"}]})(r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY",disabledDate:this.disabledDate,defaultValue:this.state.dateEffet,onChange:this.handleEffetDateChange}))),r.a.createElement(He.a.Item,{label:"Dur\xe9e de contrat"},e("dureeContrat",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{type:"number",className:"number-input",onChange:this.onChange,addonAfter:"Mois",initialValue:this.state.dureeContrat,min:this.state.selectedProduct.dureeMinimalSouscription||"",placeholder:"dur\xe9e de contrat"}))),r.a.createElement(He.a.Item,{label:"Interm\xe9diaire",hasFeedback:!0},e("partenaire",{rules:[{required:!0,message:"selectionnez un Interm\xe9diaire"}]})(r.a.createElement($e.a,{placeholder:"Interm\xe9diaire",onSelect:this.partnerChange,labelInValue:!0},this.props.partenaires.map(function(e){return r.a.createElement(Yo,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)})))),r.a.createElement(He.a.Item,{label:"Compte joint"},e("compteJoint",{valuePropName:"checked",initialValue:this.state.compteJoint})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:this.state.compteJoint},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))),r.a.createElement(xe.a,{span:1}),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'\xe9ch\xe9ance",hasFeedback:!0},e("dateEcheance",{rules:[{required:!0,message:"selectionnez une date d'echeance"}]})(r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY",disabledDate:this.disabledDateEcheance,onChange:this.handleEcheanceDateChange}))),r.a.createElement(He.a.Item,{label:"Agence",hasFeedback:!0},e("pointVente",{rules:[{required:!0,message:"selectionnez une agence"}]})(r.a.createElement($e.a,{placeholder:"agence",defaultValue:1===this.state.pointsVentes.length&&this.state.pointsVentes[0].id,onChange:this.onChangePointDeVente},this.state.pointsVentes.map(function(e){return r.a.createElement(Yo,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))),r.a.createElement(He.a.Item,{label:"Produit",hasFeedback:!0},e("produit",{rules:[{required:!0,message:"selectionnez un produit"}]})(r.a.createElement($e.a,{placeholder:"produit",onChange:this.onChangeProduit,labelInValue:!0},this.state.produits.map(function(e){return r.a.createElement(Yo,{key:e.id,value:e.id,label:e.code},e.code)})))),r.a.createElement(He.a.Item,{label:"Pr\xe9iodicit\xe9",hasFeedback:!0},e("periodicite",{rules:[{required:!0,message:"selectionnez une preiodicite"}]})(r.a.createElement($e.a,{onChange:this.onChangePeriodicite,placeholder:"Pr\xe9iodicit\xe9",labelInValue:!0},this.state.periodicites.map(function(e){return r.a.createElement(Yo,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))))))}}]),t}(n.Component);Kt.a.addRealMonth=function(e,t){var a=Kt()(e).add(t,"M"),n=Kt()(a).endOf("month");return e.date()!==a.date()&&a.isSame(n.format("YYYY-MM-DD"))?a.add(1,"d"):a};var Lo=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{NombreMensualitesEtalementLaPrimeUnique:He.a.createFormField(Object(at.a)({},e.NombreMensualitesEtalementLaPrimeUnique,{value:e.NombreMensualitesEtalementLaPrimeUnique.value})),compteJoint:He.a.createFormField(Object(at.a)({},e.compteJoint,{value:e.compteJoint.value})),dateEffet:He.a.createFormField(Object(at.a)({},e.dateEffet,{value:e.dateEffet.value})),dureeContrat:He.a.createFormField(Object(at.a)({},e.dureeContrat,{value:e.dureeContrat.value})),periodicite:He.a.createFormField(Object(at.a)({},e.periodicite,{value:e.periodicite.value})),dateEcheance:He.a.createFormField(Object(at.a)({},e.dateEcheance,{value:e.dateEcheance.value})),pointVente:He.a.createFormField(Object(at.a)({},e.pointVente,{value:e.pointVente.value})),produit:He.a.createFormField(Object(at.a)({},e.produit,{value:e.produit.value})),partenaire:He.a.createFormField(Object(at.a)({},e.partenaire,{value:e.partenaire.value}))}}})(Bo),Go=["01","02","03","04","05","06","07","08","09","10","11","12"];function Uo(e){var t=e.getDate(),a=Go[e.getMonth()],n=e.getFullYear(),r=e.getHours(),i=e.getMinutes();return"".concat(t,"-").concat(a,"-").concat(n," ").concat(r,":").concat(i)}function Ho(e){var t=e.getDate(),a=Go[e.getMonth()],n=e.getFullYear();return"".concat(t,"-").concat(a,"-").concat(n)}var Ko={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12}}},Wo={labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}};function $o(e,t,a,n){var i=t;return r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},e)},n(i,{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:a,style:{width:"80%",float:"right"}})))}function _o(e,t,a){var n=t;return r.a.createElement(He.a.Item,{label:e},a(n,{rules:[{required:!0,message:"Champs obligatoire"}]})(r.a.createElement(I.a,null)))}function Jo(){return localStorage.getItem(G)?ae({url:L+"/private/retraitproduit?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.")}function Qo(e){return localStorage.getItem(G)?ae({url:L+"/private/retraitproduit/code/"+e,method:"GET"}):Promise.reject("No access token set.")}function Xo(e){return localStorage.getItem(G)?ae({url:L+"/private/retraitcontratbynumero/"+e,method:"GET"}):Promise.reject("No access token set.")}function Zo(){return localStorage.getItem(G)?ae({url:L+"/private/poolinvestissment?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.")}var ec=Al.a.Step,tc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).setBenefeciaire=function(e){var t=a.state.fields.beneficiaireEnDeces;t.value=e,a.setState({newBeneficiaireEnDeces:t})},a.handleCallback=function(e){a.setState({beneficiaireEnDeces:e})},a.checkSelectedPers=function(e,t,n,r,i){if(t&&n){if(!1===a.state.allow){var l=a.state.fields.souscripteur;l.value=r;var s=a.state.fields.assure;s.value=i;var o=a.state.fields.souscripteurIsAssure;o.value=e;var c=a.state.fields.assurePresent;c.value=c,a.setState({allow:!0,souscripteurObj:r,assureObj:i,newStateSouscripteur:l,newStateAssure:s,newStateSouscripteurIsAssure:o,newStateAssurePresent:c})}}else!0===a.state.allow&&a.setState({allow:!1})},a.next=function(){if(a.state.allow&&0===a.state.current){var e=a.state.current+1;a.setState({current:e})}if(""!==a.state.fields.produit.value&&""!==a.state.fields.periodicite.value&&""!==a.state.fields.dateEcheance.value&&1===a.state.current){var t=a.state.current+1;a.setState({current:t})}if(""!==a.state.fields.beneficiaireCasDeces.value&&""!==a.state.fields.deductibiliteFiscale.value&&""!==a.state.fields.montantContributionPeriodique.value&&""!==a.state.fields.montantContributionInitiale.value&&""!==a.state.fields.nombrePeriodicite.value&&2===a.state.current){var n=a.state.current+1;a.setState({current:n})}},a.handleConfirm=function(e,t){a.createRetraitContrat(e),u.a.close(t)},a.handleFormChange=function(e){a.setState(function(t){var a=t.fields;return{fields:Object(at.a)({},a,e)}})},a.setBenefeciaire=a.setBenefeciaire.bind(Object(b.a)(Object(b.a)(a))),a.state={assure:!1,souscripteur:!1,allow:!1,allowSec:!1,souscripteurObj:{},assureObj:{},current:0,produits:[],Partenaires:[],periodicites:[],fields:{moraleOuPhysique:{value:"morale"},cin:{value:""},patente:{value:""},assure:{value:""},cinAssure:{value:""},numeroDossierFinancement:{value:""},souscripteur:{value:""},souscripteurIsAssure:{value:""},assurePresent:{value:!1},partenaire:{value:""},periodicite:{value:""},dureeContrat:{value:""},dateEffet:{value:""},dateEcheance:{value:""},produit:{value:""},pointVente:{value:""},compteJoint:{value:!1},NombreMensualitesEtalementLaPrimeUnique:{value:""},agence:{value:""},attributionIrrevocable:{value:!1},beneficiaireCasDeces:{value:""},deductibiliteFiscale:{value:!1},montantContributionInitiale:{value:""},montantContributionPeriodique:{value:""},nombrePeriodicite:{value:""},beneficiaireEnDeces:{value:[]},datePrelevement:{value:""}}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getDroppDownData",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:return t=e.sent,e.next=5,dr();case 5:return a=e.sent,e.next=8,Jo();case 8:n=e.sent,this.setState({Partenaires:t.data.content,produits:n.data.content,periodicites:a.data.content});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDroppDownData()}},{key:"addBeneficiaires",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],this.state.fields.beneficiaireEnDeces.value!==[]&&(this.state.fields.beneficiaireEnDeces.value.forEach(function(){var e=Object(R.a)(N.a.mark(function e(a){var n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae({url:L+"/private/beneficiaireendeces",method:"POST",data:a});case 2:n=e.sent,r=n.data,t.push(r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),(a=this.state.fields.beneficiaireEnDeces).value=t,this.setState({newBeneficiaireEnDeces:a}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createRetraitContrat",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a=this;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t).then(function(e){u.a.success({message:"TAKAFUL",description:"Contrat bien enregistr\xe9e"}),a.setState({current:0,fields:{moraleOuPhysique:{value:"morale"},cin:{value:""},patente:{value:""},assure:{value:""},cinAssure:{value:""},numeroDossierFinancement:{value:""},souscripteur:{value:""},souscripteurIsAssure:{value:""},assurePresent:{value:!1},periodicite:{value:""},dureeContrat:{value:""},dateEffet:{value:""},dateEcheance:{value:""},produit:{value:""},partenaire:{value:""},pointVente:{value:""},compteJoint:{value:!1},attributionIrrevocable:{value:!1},beneficiaireCasDeces:{value:""},deductibiliteFiscale:{value:!1},montantContributionInitiale:{value:""},montantContributionPeriodique:{value:""},beneficiaireEnDeces:{value:[]},nombrePeriodicite:{value:""},datePrelevement:{value:""}}}),a.props.record.history.push("/consultRetraiteContrat")}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"done",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,i,l,s=this;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(a=this.state.fields).beneficiaireCasDeces.value||""===a.montantContributionPeriodique.value||""===a.montantContributionInitiale.value||""===a.nombrePeriodicite.value||""===a.datePrelevement.value){e.next=9;break}return e.next=4,this.addBeneficiaires();case 4:n={assure:this.state.assureObj,souscripteur:this.state.souscripteurObj,numeroDossierFinancement:a.numeroDossierFinancement.value,souscripteurIsAssure:a.souscripteurIsAssure.value,periodicite:{id:a.periodicite.value.key},dureeContrat:a.dureeContrat.value,dateEffet:Ho(a.dateEffet.value.toDate()),dateEcheance:Ho(a.dateEcheance.value.toDate()),produit:this.state.produits.filter(function(e){return e.code===a.produit.value.label})[0],pointVente:{id:a.pointVente.value},compteJoint:a.compteJoint.value,partenaire:a.partenaire.value,beneficiaireCasDeces:a.beneficiaireCasDeces.value,deductibiliteFiscale:a.deductibiliteFiscale.value,montantContributionPeriodique:a.montantContributionPeriodique.value,montantContributionInitiale:a.montantContributionInitiale.value,nombrePeriodicite:a.nombrePeriodicite.value,beneficiaireEnDeces:a.beneficiaireEnDeces.value,attributionIrrevocable:a.attributionIrrevocable.value,datePrelevement:a.datePrelevement.value,status:"ACCEPTED"},"SIMULATION"===t&&(n.status="SIMULATION"),i="open".concat(Date.now()),l=r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary",onClick:function(){return s.handleConfirm(n,i)},className:"not-rounded"},"Confirmer"),r.a.createElement(fe.a,{onClick:function(){return u.a.close(i)},style:{marginLeft:8},className:"not-rounded"},"Fermer")),u.a.info({message:"Confirmation",description:r.a.createElement("div",null,r.a.createElement(o.a,null),r.a.createElement(En.a,{bordered:!0},r.a.createElement(En.a.Item,{label:"Dur\xe9e de contrat"},a.dureeContrat.value),r.a.createElement(En.a.Item,{label:"B\xe9n\xe9ficiaire Cas Dec\xe8s",span:2},a.beneficiaireCasDeces.value),r.a.createElement(En.a.Item,{label:"D\xe9ductibilit\xe9 fiscale"},a.deductibiliteFiscale.value),r.a.createElement(En.a.Item,{label:"Montant contribution periodique",span:2},a.montantContributionPeriodique.value),r.a.createElement(En.a.Item,{label:"Montant contribution initiale"},a.montantContributionInitiale.value),r.a.createElement(En.a.Item,{label:"Montant simul\xe9",span:2},parseFloat(a.montantContributionInitiale.value)+parseFloat(a.montantContributionPeriodique.value)*parseFloat(a.nombrePeriodicite.value)))),btn:l,key:i,style:{width:880,marginLeft:-945},duration:0});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.state,n=a.current,i=a.fields,l=this.state.beneficiaireEnDeces,s=[{title:"Premi\xe8re \xe9tape",content:r.a.createElement(wo,Object.assign({check:this.checkSelectedPers},i,{onChange:this.handleFormChange}))},{title:"Deuxi\xe8me \xe9tape",content:r.a.createElement(sh.Consumer,null,function(e){return r.a.createElement(Lo,Object.assign({produits:t.state.produits,periodicites:t.state.periodicites,partenaires:t.state.Partenaires},i,{onChange:t.handleFormChange,currentUser:e}))})},{title:"Troisi\xe8me \xe9tape",content:r.a.createElement("div",null,r.a.createElement(zo,Object.assign({dateEffet:this.state.fields.dateEffet.value,assureObj:this.state.assureObj,dureeContrat:this.state.fields.dureeContrat.value,selectedproduit:this.state.produits.filter(function(e){return e.code===t.state.fields.produit.value.label})[0],souscriptionCallBack:this.handleCallback},i,{onChange:this.handleFormChange,getBenefeciaireState:this.setBenefeciaire})),l)}];return e=""===i.produit.value?"Nouvelle souscription retraite produit":"Nouvelle souscription retraite produit  "+this.state.produits.filter(function(e){return e.code===i.produit.value.label})[0].code,r.a.createElement("div",null,r.a.createElement(lt,{title:e}),r.a.createElement(Al.a,{current:n},s.map(function(e){return r.a.createElement(ec,{key:e.title,title:e.title,description:e.description})})),r.a.createElement("div",{className:"steps-content-style"},s[n].content),r.a.createElement("div",{className:"steps-action"},0===n&&r.a.createElement(fe.a,{type:"primary",className:"multisteps-btn-next",htmlType:"submit",form:"formadd",onClick:function(){return t.next()}},"Suivant"),1===n&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"multisteps-btn-next",form:"steptwo",onClick:function(){return t.next()}},"Suivant"),n===s.length-1&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"multisteps-btn-next",form:"stepfour",onClick:function(){return t.done("CREATION")}},"Terminer la cr\xe9ation"),n>0&&r.a.createElement(fe.a,{onClick:function(){return t.prev()}},"Pr\xe9c\xe9dent")))}}]),t}(n.Component),ac=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).downloadFile=function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(t).then(function(e){return new Blob([e.data])}).then(function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,n.click()});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={listFiles:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.listFilesNames()}},{key:"listFilesNames",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/listFluxFiles",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,this.setState({listFiles:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.listFiles===[]?r.a.createElement("p",null,"Aucun fichier"):this.state.listFiles.map(function(t){return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12,offset:1},t),r.a.createElement(xe.a,null,r.a.createElement(fe.a,{onClick:function(){e.downloadFile(t)}},"T\xe9l\xe9charger")))}))}}]),t}(n.Component),nc=$e.a.Option,rc=[{title:"Nom de Fichier",dataIndex:"nom",key:"nom"},{title:"Nombre de lignes totales",dataIndex:"nombreLigneTotal",key:"nombreLigneTotal"},{title:"Nombre de lignes valides ",dataIndex:"nombreLigneValide",key:"nombreLigneValide"},{title:"Nombre de lignes Invalides ",dataIndex:"nombreLigneInvalide",key:"nombreLigneInvalide"},{title:"Etat de fichier  ",dataIndex:"etat",key:"etat"},{title:"Motif de rejet",dataIndex:"motifRejet",key:"motifRejet"}],ic=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).partnerChange=function(e){a.setState({produits:a.props.produits.filter(function(t){return t.partenaire.id===e}),selectedPartner:e})},a.handleChangeProduit=function(e){a.setState({selectedProduct:e})},a.handleChangeTypeFlux=function(e){a.setState({selectedFluxType:e})},a.handleChangeEtat=function(e){a.setState({selectedEtat:e})},a.handleDateChange=function(e){a.setState({selectedDate:e})},a.state={partenaires:[],typeFlux:[{id:"1",code:"PRL",libelle:"Pr\xe9l\xe9vement"},{id:"2",code:"VRS",libelle:"Versement"}],produits:[],etat:[],selectedProduct:"",selectedPartner:"",selectedEtat:"",selectedFluxType:"",selectedDate:"",data:[]},a.search=a.search.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getDroppDownData",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaires:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={dateTraitement:Ho(new Date(this.state.selectedDate)),etat:this.state.selectedEtat,partenaire:this.state.selectedPartner,produit:this.state.selectedProduct,typeDeFlux:this.state.selectedFluxType},e.next=3,n=t,localStorage.getItem(G)?ae({url:L+"/private/flux",data:n,method:"POST"}):Promise.reject("No access token set.");case 3:a=e.sent,this.setState({data:a.data});case 5:case"end":return e.stop()}var n},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDroppDownData()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:14}}};return r.a.createElement("div",null,r.a.createElement(He.a,t,r.a.createElement("h3",null,"Crit\xe8res de recherche"),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Intermediaire",hasFeedback:!0},e("partenaire",{rules:[{message:"Veuillez s\xe9l\xe9ctionner un intermediaire"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.partnerChange},this.state.partenaires.map(function(e){return r.a.createElement(nc,{value:e.id,label:e.raisonSocial},e.raisonSocial)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Type de flux ",hasFeedback:!0},e("typeFlux",{rules:[{message:"Veuillez s\xe9l\xe9ctionner un type de flux"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.handleChangeTypeFlux},this.state.typeFlux.map(function(e){return r.a.createElement(nc,{value:e.id,label:e.code},e.libelle)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Produit",hasFeedback:!0},e("produit",{rules:[{message:"Veuillez s\xe9l\xe9ctionner un produit"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.handleChangeProduit},this.state.produits.map(function(e){return r.a.createElement(nc,{value:e.id,label:e.code},e.libelle)}))))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"\xc9tat  ",hasFeedback:!0},e("etat",{rules:[{message:"Veuillez s\xe9l\xe9ctionner un \xe9tat"}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.handleChangeEtat},r.a.createElement(nc,{value:"rejet\xe9",label:"Rejet\xe9"},"Rejet\xe9"),r.a.createElement(nc,{value:"accept\xe9",label:"Accept\xe9"},"Accept\xe9")))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Date de traitement ",hasFeedback:!0},r.a.createElement(Lt.a,{className:"date-style",format:"DD-MM-YYYY",onChange:this.handleDateChange}))),r.a.createElement(xe.a,{span:11},r.a.createElement(fe.a,{type:"primary",onClick:this.search,className:"multisteps-btn-next",form:"stepfour"},"Rechercher")))),r.a.createElement(Je.a,{dataSource:this.state.data,columns:rc}))}}]),t}(n.Component),lc=He.a.create()(ic);function sc(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return oc(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oc(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var cc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).fileTitleWorker=function(){var e=Object(R.a)(N.a.mark(function e(t){var n,r,i,l,s,o,c,u,m,d,p,h;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(4===(n=t.split("_")).length){e.next=5;break}a.setState({etatFlux:"rejet\xe9",motifRejetFlux:"Nom de fichier invalide : "+t}),e.next=16;break;case 5:return i=n[0],l=n[1],r=n[2],s=n[3],e.next=11,Pr(i).then(function(e){a.setState({partenaire:e.data})}).catch(function(e){a.setState({etatFlux:"rejet\xe9",motifRejetFlux:"Partenaire n'existe pas : "+t})});case 11:if(""===a.state.partenaire){e.next=14;break}return e.next=14,Qo(l).then(function(e){a.setState({produit:e.data})}).catch(function(e){a.setState({etatFlux:"rejet\xe9",motifRejetFlux:"Produit n'existe pas : "+t})});case 14:a.setState({typeFlux:r}),""!==a.state.produit&&(8!==s.length?a.setState({etatFlux:"rejet\xe9",motifRejetFlux:"La date est incorrect : "+t}):(o=s.slice(0,2),c=s.slice(2,4),u=s.slice(4),m=u+"-"+c+"-"+o,a.setState({dateTraitement:m})));case 16:if("rejet\xe9"!==a.state.etatFlux){e.next=25;break}return d=a.state.acceptedFilesNamed.indexOf(t),a.getNumberOfLinesFile(a.state.filesContent[d]),a.removeFileFromTable(t+".txt"),a.setState({fluxRequestModel:{etat:a.state.etatFlux,typeFlux:{id:"1"},partenaireId:"",produitId:"",motifRejet:a.state.motifRejetFlux,nombreLigneTotal:parseFloat(a.state.totalNumberLines),nombreLigneInvalide:parseFloat(a.state.totalNumberLines),nombreLigneValide:0,dateTraitement:a.state.dateTraitement,nom:t}}),e.next=23,Bn(a.state.fluxRequestModel);case 23:e.next=33;break;case 25:return p=a.state.acceptedFilesNamed.indexOf(t),a.getNumberOfLinesFile(a.state.filesContent[p]),h=a.state.filesContent[p].trim().split("\r\n"),e.next=30,a.readLines(h,r);case 30:return a.setState({fluxRequestModel:{etat:a.state.etatFlux,partenaire:{id:a.state.partenaire.id},produit:{id:a.state.produit.id},motifRejet:a.state.motifRejetFlux,nombreLigneTotal:parseFloat(a.state.totalNumberLines),nombreLigneInvalide:parseFloat(a.state.totalNumberLines)-a.state.validLines,nombreLigneValide:a.state.validLines,typeFlux:{id:"1"},dateTraitement:a.state.dateTraitement,nom:t}}),e.next=33,Bn(a.state.fluxRequestModel);case 33:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChangeUpload=function(e){"done"===e.file.status?(qr.a.success("".concat(e.file.name," file uploaded successfully")),a.addFileToTable(e.file.name)):"removed"===e.file.status?(qr.a.warn("".concat(e.file.name," file removed")),a.removeFileFromTable(e.file.name)):"error"===e.file.status&&qr.a.error("".concat(e.file.name," file upload failed."))},a.beforeUpload=function(e){var t=new FileReader;t.onload=function(e){a.addContentToTable(e.target.result)},t.readAsText(e)},a.sbmitForm=Object(R.a)(N.a.mark(function e(){var t,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=sc(a.state.acceptedFilesNamed),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}return r=n.value,a.setState({motifRejetFlux:"",totalNumberLines:0,dateTraitement:"",etatFlux:"accept\xe9",partenaire:"",produit:"",typeFlux:"",validLines:0}),e.next=8,a.fileTitleWorker(r);case 8:"rejet\xe9"===a.state.etatFlux?u.a.error({message:"Takaful",description:a.state.motifRejetFlux}):u.a.success({message:"Takaful",description:r+" est accept\xe9"});case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:setTimeout(function(){window.open("/echangefichiers","_self")},3e3);case 20:case"end":return e.stop()}},e,null,[[1,13,16,19]])})),a.state={acceptedFilesNamed:[],filesContent:[],etatFlux:"accept\xe9",motifRejetFlux:"",partenaire:"",produit:"",typeFlux:"",dateTraitement:"",cotisationsListRequest:[],fluxListRequest:[],fluxRequestModel:{},validLines:0,contratFound:!1,agenceFound:!1,contratObject:{},agenceObject:{},totalNumberLines:0},a.addFileToTable=a.addFileToTable.bind(Object(b.a)(Object(b.a)(a))),a.removeFileFromTable=a.removeFileFromTable.bind(Object(b.a)(Object(b.a)(a))),a.addContentToTable=a.addContentToTable.bind(Object(b.a)(Object(b.a)(a))),a.fileTitleWorker=a.fileTitleWorker.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getPointVenteByCode",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a=this;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(t).then(function(e){a.setState({agenceObject:e.data,agenceFound:!0})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRetraiteContratByNumero",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a=this;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xo(t).then(function(e){a.setState({contratFound:!0,contratObject:e.data})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"addCotisation",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"addFileToTable",value:function(e){this.setState({acceptedFilesNamed:[].concat(Object(tt.a)(this.state.acceptedFilesNamed),[e.slice(0,-4)])})}},{key:"addContentToTable",value:function(e){this.setState({filesContent:[].concat(Object(tt.a)(this.state.filesContent),[e])})}},{key:"removeFileFromTable",value:function(e){var t=this.state.acceptedFilesNamed.indexOf(e.slice(0,-4)),a=Object(tt.a)(this.state.acceptedFilesNamed);a.splice(t,1);var n=Object(tt.a)(this.state.filesContent);n.splice(t,1),this.setState({acceptedFilesNamed:a,filesContent:n})}},{key:"readLines",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n,r,i,l,s,o,c,u,m,d,p;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({cotisationsListRequest:[],validLines:0}),t===[]){e.next=36;break}r=sc(t),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=28;break}if(l=i.value,n=l.split("$"),this.setState({agenceFound:!1,contratFound:!1,contratObject:{},agenceObject:{}}),7!==n.length){e.next=26;break}return o=(s=n)[0],c=s[1],u=s[5]/100,m=s[4].replaceAll(".","-"),d=m.split("-").reverse().join("-"),e.next=18,this.getRetraiteContratByNumero(o);case 18:if(!this.state.contratFound){e.next=26;break}return e.next=21,this.getPointVenteByCode(c);case 21:if(!this.state.agenceFound){e.next=26;break}return p={montantTTC:u,montantCotisation:u.toFixed,contributionPure:u,contrat:this.state.contratObject.id,etatCotisation:"EMIS",datePrelevement:d,cotisationType:"PRL"===a?"Epargne periodique":"Epargne Libre"},this.setState({validLines:this.state.validLines+1}),e.next=26,this.addCotisation(p);case 26:e.next=5;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(3),r.e(e.t0);case 33:return e.prev=33,r.f(),e.finish(33);case 36:case"end":return e.stop()}},e,this,[[3,30,33,36]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getNumberOfLinesFile",value:function(e){var t=this;e.trim().split("\r\n").forEach(function(e){var a=e.split("$");2===a.length&&t.setState({totalNumberLines:a[0]})})}},{key:"render",value:function(){var e={labelCol:{sm:{span:8}},wrapperCol:{xs:{span:14}}},t={name:"file",stateProp:this.state,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",headers:{authorization:"authorization-text"}};return r.a.createElement("div",null,r.a.createElement(He.a,e,r.a.createElement("h3",null,"Int\xe9gration Manuelle"),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Choisissez un fichier"},r.a.createElement(qi.a,Object.assign({},t,{onChange:this.onChangeUpload,beforeUpload:this.beforeUpload,accept:".txt"}),r.a.createElement(fe.a,null,r.a.createElement(w.a,{type:"upload"})," Cliquez pour ajouter")))),r.a.createElement(xe.a,{span:10},r.a.createElement(fe.a,{type:"primary",className:"multisteps-btn-next",form:"stepfour",onClick:this.sbmitForm},"Ins\xe9rer")))))}}]),t}(n.Component),uc=He.a.create()(cc),mc=Zl.a.TabPane,dc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={produits:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getAllProduits",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo();case 2:t=e.sent,this.setState({produits:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllProduits()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Zl.a,{type:"card"},r.a.createElement(mc,{tab:"Fichiers Recus",key:"1"},r.a.createElement(lc,{produits:this.state.produits})),r.a.createElement(mc,{tab:"Fichiers Emis ",key:"2"},r.a.createElement(ac,null)),r.a.createElement(mc,{tab:"Int\xe9gration manuelle",key:"3"},r.a.createElement(uc,null))))}}]),t}(n.Component),pc=He.a.create()(dc),hc=V.a.SubMenu,fc=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).rootSubmenuKeys=["administration","parametrage","sub4","sub9","Utilitaire"],a.state={users:!1,rolesandprivileges:!1,parametrage:!1,gestionAcceptation:!1,souscription:!1,simulation:!1,deces:!1,mrb:!1,retraite:!1,openKeys:[]},a.onOpenChange=function(e){var t=e.find(function(e){return-1===a.state.openKeys.indexOf(e)});-1===a.rootSubmenuKeys.indexOf(t)?a.setState({openKeys:e}):a.setState({openKeys:t?[t]:[]})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.currentUserRoles.forEach(function(e){t=[].concat(Object(tt.a)(t),Object(tt.a)(e.privileges))}),t.forEach(function(t){switch(t.name){case"GESTION_UTILISATEURS":e.setState({users:!0});break;case"GESTION_ROLE_ET_PERMISSION":e.setState({rolesandprivileges:!0});break;case"GESTION_PATAMETRAGE":e.setState({parametrage:!0});break;case"GESTION_ACCEPTATION":e.setState({gestionAcceptation:!0});break;case"CREATION_CONTRAT":e.setState({souscription:!0});break;case"SIMULATION":e.setState({simulation:!0});break;case"CONTRAT_DECES":e.setState({deces:!0});break;case"CONTRAT_MRB":e.setState({mrb:!0});break;case"CONTRAT_RETRAITE":e.setState({retraite:!0})}})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"logo-partent"},r.a.createElement(z.a,{to:"/"},r.a.createElement("img",{src:pn.a,className:"logoW",alt:"takaful"}))),r.a.createElement(o.a,{type:"horizontal"}),r.a.createElement(V.a,{mode:"inline",theme:"light",className:"menu-taka-left",openKeys:this.state.openKeys,onOpenChange:this.onOpenChange},r.a.createElement(V.a.Divider,{className:"menu-divider"}),this.state.rolesandprivileges||this.state.users?r.a.createElement(hc,{key:"administration",onTitleClick:this.onClick,title:r.a.createElement("span",null,r.a.createElement(w.a,{type:"safety-certificate"}),r.a.createElement("span",null,"Administration"))},r.a.createElement(V.a.Divider,{className:"menu-divider"}),this.state.users&&r.a.createElement(V.a.Item,{key:"users"},r.a.createElement(z.a,{to:"/users"}," ",r.a.createElement(w.a,{type:"user"})," Utilisateurs")),r.a.createElement(V.a.Divider,{className:"menu-Divider",dashed:"true"}),this.state.rolesandprivileges&&r.a.createElement(V.a.Item,{key:"permission"},r.a.createElement(z.a,{to:"/rolesAndPermission"},r.a.createElement(w.a,{type:"unlock"})," R\xf4les et Permissions"))):"",r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(hc,{key:"parametrage",title:r.a.createElement("span",null,r.a.createElement(w.a,{type:"setting"}),r.a.createElement("span",null,"Param\xe9trage"))},r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(hc,{key:"sub19",title:r.a.createElement("span",null,"Param\xe9trage Produit")},r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"9"},r.a.createElement(z.a,{to:"/consultproduitdeces"},r.a.createElement(w.a,{type:"setting"})," Produit d\xe9c\xe8s")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"Retraite-Produit"},r.a.createElement(z.a,{to:"/consultproduitretraite"},r.a.createElement(w.a,{type:"setting"})," Produit retraite")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"ProduitMrb"},r.a.createElement(z.a,{to:"/ProduitMrb",component:yi},r.a.createElement(w.a,{type:"setting"}),"Produit MRB")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"Restitutions"},r.a.createElement(z.a,{to:"/getRestitutions"},r.a.createElement(w.a,{type:"setting"})," Restitutions")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"CauseRestitution"},r.a.createElement(z.a,{to:"/getCauseRes"},r.a.createElement(w.a,{type:"setting"})," Causes restitution")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"typePrestation"},r.a.createElement(z.a,{to:"/getPrestation"},r.a.createElement(w.a,{type:"setting"})," Types prestation")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"avenant"},r.a.createElement(z.a,{to:"/avenant",component:Oi},r.a.createElement(w.a,{type:"setting"})," Types d'avenant"))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(hc,{key:"sub90",title:r.a.createElement("span",null,"Param\xe9trage Auxiliaire")},r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(V.a.Item,{key:"Auxiliaires"},r.a.createElement(z.a,{to:"/getAuxiliaires"},r.a.createElement(w.a,{type:"setting"}),"Auxiliaires")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"Honoraires"},r.a.createElement(z.a,{to:"/getHonoraires"},r.a.createElement(w.a,{type:"setting"}),"Honoraires"))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(hc,{key:"sub91",title:r.a.createElement("span",null,"Param\xe9trage Interm\xe9diaire")},r.a.createElement(V.a.Item,{key:"partenaire"},r.a.createElement(z.a,{to:"/getAllBranche",component:Ni},r.a.createElement(w.a,{type:"setting"}),"Interm\xe9diaire")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"pointvente"},r.a.createElement(z.a,{to:"/pointvente",component:Ui},r.a.createElement(w.a,{type:"setting"})," Point de vente")))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),this.state.simulation&&r.a.createElement(V.a.Item,{key:"56"}," ",r.a.createElement(z.a,{to:"/Simulation"},r.a.createElement("span",null,r.a.createElement(w.a,{type:"exclamation-circle"}),r.a.createElement("span",null,"Simulation D\xe9c\xe8s Financement")))),this.state.simulation&&r.a.createElement(V.a.Item,{key:"560"}," ",r.a.createElement(z.a,{to:"/SimulationMrb"},r.a.createElement("span",null,r.a.createElement(w.a,{type:"exclamation-circle"}),r.a.createElement("span",null,"Simulation MRB")))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(V.a.Item,{key:"participant"},r.a.createElement(z.a,{to:"/AllParticipant",component:fa},r.a.createElement(w.a,{type:"team"}),"Participants / Clients")),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(hc,{key:"sub4",title:r.a.createElement("span",null,r.a.createElement(w.a,{type:"file-text"}),r.a.createElement("span",null,"Production / Prestations"))},r.a.createElement(V.a.Divider,{className:"menu-divider"}),this.state.deces&&r.a.createElement(hc,{key:"sub7",title:r.a.createElement("span",null," ",r.a.createElement(w.a,{type:"file-zip"})," Contrats D\xe9c\xe8s")},this.state.souscription&&r.a.createElement(V.a.Item,{key:"23"},r.a.createElement(z.a,{to:"/souscription",component:Ql},r.a.createElement(w.a,{type:"user-add"})," Nouvelle Souscription")),this.state.gestionAcceptation&&r.a.createElement(V.a.Item,{key:"25"},r.a.createElement(z.a,{to:"/gestionacceptation",component:pl},r.a.createElement(w.a,{type:"carry-out"})," Gestion des acceptations")),r.a.createElement(V.a.Item,{key:"26"},r.a.createElement(z.a,{to:"/consultDecesContrat",component:Tr},r.a.createElement(w.a,{type:"schedule"})," Gestion des contrats"))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),this.state.retraite&&r.a.createElement(hc,{key:"sub88",title:r.a.createElement("span",null," ",r.a.createElement(w.a,{type:"file-zip"})," Contrats Retraite")},this.state.souscription&&r.a.createElement(V.a.Item,{key:"souscriptionRetraite"},r.a.createElement(z.a,{to:"/souscriptionRetraiteContrat",component:tc},r.a.createElement(w.a,{type:"user-add"})," Nouvelle Souscription")),r.a.createElement(V.a.Item,{key:"getRetraiteContrats"},r.a.createElement(z.a,{to:"/consultRetraiteContrat",component:Io},r.a.createElement(w.a,{type:"schedule"})," Gestion des contrats"))),r.a.createElement(V.a.Item,{key:"19"},r.a.createElement(z.a,{to:"/Honoraire",component:jl},r.a.createElement(w.a,{type:"form"})," Honoraires")),r.a.createElement(V.a.Item,{key:"20"},r.a.createElement(w.a,{type:"money-collect"})," Commissions"),r.a.createElement(V.a.Item,{key:"21"},r.a.createElement(z.a,{to:"/Reglement",component:Nr},r.a.createElement(w.a,{type:"file"})," R\xe9glements"))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(V.a.Item,{key:"24"}," ",r.a.createElement("span",{style:{color:"white"}},r.a.createElement(w.a,{type:"eye"}),r.a.createElement("span",null,"Traitement p\xe9riodique"))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),this.state.mrb&&r.a.createElement(hc,{key:"sub9",title:r.a.createElement("span",null,r.a.createElement(w.a,{type:"home"}),r.a.createElement("span",null,"Multirisques b\xe2timent"))},r.a.createElement(V.a.Divider,{className:"menu-divider"}),this.state.souscription&&r.a.createElement(V.a.Item,{key:"31"},r.a.createElement(z.a,{to:"/MultirisquesBatiment",component:bi},"Nouvelle souscription MRB")),r.a.createElement(V.a.Divider,{className:"menu-divider",dashed:"true"}),r.a.createElement(V.a.Item,{key:"32"},r.a.createElement(z.a,{to:"/ConsultationsContratsMrb",component:li},"Consulation des contrats MRB"))),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(V.a.Item,{key:"global"},r.a.createElement(z.a,{to:"/Global",component:Vs},r.a.createElement(w.a,{type:"dashboard"}),"Tableau de bord")),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(V.a.Item,{key:"echangefichiers"},r.a.createElement(z.a,{to:"/echangefichiers",component:pc},r.a.createElement(w.a,{type:"file"}),"\xc9change fichiers informatiques")),r.a.createElement(V.a.Divider,{className:"menu-divider"}),r.a.createElement(hc,{key:"Utilitaire",title:r.a.createElement("span",null,r.a.createElement(w.a,{type:"idcard"}),r.a.createElement("span",null,"Utilitaires"))},r.a.createElement(V.a.Item,{key:"Agenda"},r.a.createElement(z.a,{to:"/Agenda",component:Js},r.a.createElement(w.a,{type:"calendar"})," Agenda")))))}}]),t}(n.Component),bc=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e="";return this.props.isAuthenticated&&(e=r.a.createElement(fc,{currentUserRoles:this.props.currentUser.roles})),r.a.createElement("div",null,e)}}]),t}(n.Component),Ec=Object(S.a)(bc),vc=(a(1046),a(444)),gc=a.n(vc),yc=He.a.Item,Cc=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=He.a.create()(xc);return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login"},r.a.createElement("img",{src:gc.a,className:"logo2",alt:"takaful"}),r.a.createElement("div",{className:"login-content"},r.a.createElement(e,{onLogin:this.props.onLogin}))))}}]),t}(n.Component),xc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){e||function(e){return ae({url:L+"/public/login",method:"POST",data:e})}(Object.assign({},a)).then(function(e){localStorage.setItem(G,e.headers.authorization),localStorage.setItem(U,e.headers.userid),t.props.onLogin()}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Email ou mot de passe inccorect.Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:"Pardon! Quelque chose a mal tourn\xe9. Veuillez r\xe9essayer!"})})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(He.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(yc,null,e("email",{rules:[{required:!0,message:"E"}]})(r.a.createElement(I.a,{prefix:r.a.createElement(w.a,{type:"user"}),size:"large",name:"email",placeholder:"Identifiant"}))),r.a.createElement(yc,null,e("password",{rules:[{required:!0,message:"Veuillez saisir votre mot de passe!"}]})(r.a.createElement(I.a,{prefix:r.a.createElement(w.a,{type:"lock"}),size:"large",name:"password",type:"password",placeholder:"Mot de passe"}))),r.a.createElement(yc,null,r.a.createElement(fe.a,{type:"primary",id:"loginButton",htmlType:"submit",size:"large",className:"login-form-button"},"S'identifier")))}}]),t}(n.Component),Sc=Cc,kc=(a(1048),a(1050),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"server-error-page"},r.a.createElement("h1",{className:"server-error-title"},"500"),r.a.createElement("div",{className:"server-error-desc"},"Oops! Quelque chose s'est mal pass\xe9 sur notre serveur. Pourquoi tu ne reviens pas?"),r.a.createElement(z.a,{to:"/"},r.a.createElement(fe.a,{className:"server-error-go-back-btn",type:"primary",size:"large"},"Retourner")))}}]),t}(n.Component)),Ic=["#F44336","#e91e63","#9c27b0","#673ab7","#ff9800","#ff5722","#795548","#607d8b","#3f51b5","#2196F3","#00bcd4","#009688","#2196F3","#32c787","#00BCD4","#ff5652","#ffc107","#ff85af","#FF9800","#39bbb0","#4CAF50","#ffeb3b","#ffc107"];function Oc(e){e=e.substr(0,6);for(var t=0,a=0;a<e.length;a++)t=31*t+e.charCodeAt(a);var n=Math.abs(t%Ic.length);return Ic[n]}var jc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={user:null,isLoading:!1},a.loadUserProfile=a.loadUserProfile.bind(Object(b.a)(Object(b.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"loadUserProfile",value:function(e){var t=this;this.setState({isLoading:!0}),ae({url:L+"/private/user/"+localStorage.getItem(U),method:"GET"}).then(function(e){t.setState({user:e,isLoading:!1})}).catch(function(e){404===e.status?t.setState({notFound:!0,isLoading:!1}):t.setState({serverError:!0,isLoading:!1})})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.username;this.loadUserProfile(e)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.username!==e.match.params.username&&this.loadUserProfile(e.match.params.username)}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement(pe,null):this.state.notFound?r.a.createElement(be,null):this.state.serverError?r.a.createElement(kc,null):r.a.createElement("div",{className:"profile"},this.state.user?r.a.createElement("div",{className:"user-profile"},r.a.createElement("div",{className:"user-details"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement(ve.a,{className:"user-avatar-circle",style:{backgroundColor:Oc(this.state.user.name)}},this.state.user.name[0].toUpperCase())),r.a.createElement("div",{className:"user-summary"},r.a.createElement("div",{className:"full-name"},this.state.user.name),r.a.createElement("div",{className:"username"},"@",this.state.user.username),r.a.createElement("div",{className:"user-joined"},"Joined ",function(e){var t=new Date(e),a=t.getMonth(),n=t.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+n}(this.state.user.joinedAt))))):null)}}]),t}(n.Component),Tc=(a(1052),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.addPermission(t.name)})},a.state={privileges:a.props.privileges},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"addPermission",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/privilege?privilege-name="+a,method:"POST"}):Promise.reject("No access token set.");case 3:200===e.sent.status&&u.a.success({message:"Permission bien crier"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"Sorry! Something went wrong. Please try again!"});case 10:case"end":return e.stop()}var a},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(He.a,{labelCol:{span:5},wrapperCol:{span:12},onSubmit:this.handleSubmit},r.a.createElement(He.a.Item,{label:"Permission"},e("name",{rules:[{required:!0,message:"la permission  doit avoir un titre"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le titre"}))),r.a.createElement(He.a.Item,{wrapperCol:{span:12,offset:5}},r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"Ajouter"},"Ajouter")))}}]),t}(n.Component)),Ac=He.a.create({name:"coordinated"})(Tc),Pc=$e.a.Option,Dc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){delete t.confirm;var n=[];t.privileges.forEach(function(e){n.push({name:e})}),t.privileges=[].concat(n),a.addRole(t)}})},a.state={privileges:a.props.privileges},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"addRole",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/role",method:"POST",data:a}):Promise.reject("No access token set.");case 3:200===e.sent.status&&u.a.success({message:"Role bien crier"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}var a},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(He.a,{labelCol:{span:8},wrapperCol:{span:12},onSubmit:this.handleSubmit},r.a.createElement(He.a.Item,{label:"R\xf4le"},e("name",{rules:[{required:!0,message:"le role doit avoir un titre"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le role"}))),r.a.createElement(He.a.Item,{label:"Permissions"},e("privileges")(r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},placeholder:"cliquez pour ajouter des permissions",optionLabelProp:"label"},this.state.privileges.map(function(e){return r.a.createElement(Pc,{value:e.name,label:e.name},e.name)})))),r.a.createElement(He.a.Item,{wrapperCol:{span:12,offset:8}},r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"Ajouter"},"Ajouter")))}}]),t}(n.Component),Fc=He.a.create({name:"coordinated"})(Dc),wc=$e.a.Option,Mc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){delete t.confirm;var n=[];t.privileges.forEach(function(e){n.push({name:e})}),t.privileges=[].concat(n);var r=Object(at.a)({},t);delete r.roles,a.editRole(r,t.roles.key)}})},a.handleSelectChange=function(e){var t=a.state.roles.filter(function(t){return t.id===e.key})[0],n=[];t.privileges.length>0&&t.privileges.forEach(function(e){n.push(e.name)}),a.props.form.setFieldsValue({name:e.label,privileges:n})},a.state={privileges:a.props.privileges,roles:a.props.roles},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"editRole",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie(t,a);case 3:200===e.sent.status&&((n=Object(tt.a)(this.state.roles)).forEach(function(e){e.id===a&&(e.name=t.name),e.privileges=Object(tt.a)(t.privileges)}),this.setState({roles:Object(tt.a)(n)}),u.a.success({message:"Role bien modifier"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(He.a,{labelCol:{span:8},wrapperCol:{span:12},onSubmit:this.handleSubmit},r.a.createElement(He.a.Item,{label:"s\xe9lectionnez un r\xf4le"},e("roles")(r.a.createElement($e.a,{style:{width:"100%"},labelInValue:!0,placeholder:"cliquez pour ajouter des permissions",onChange:this.handleSelectChange},this.state.roles.map(function(e){return r.a.createElement(wc,{value:e.id,label:e.name},e.name)})))),r.a.createElement(He.a.Item,{label:"titre"},e("name",{rules:[{required:!0,message:"le role doit avoir un titre"}]})(r.a.createElement(I.a,{className:"not-rounded",style:{width:"100%"},placeholder:"Tapez le role"}))),r.a.createElement(He.a.Item,{label:"Permissions"},e("privileges")(r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},placeholder:"cliquez pour la selection",optionLabelProp:"label"},this.state.privileges.map(function(e){return r.a.createElement(wc,{value:e.name,label:e.name},e.name)})))),r.a.createElement(He.a.Item,{wrapperCol:{span:12,offset:8}},r.a.createElement(fe.a,{className:"not-rounded",type:"primary",htmlType:"Ajouter"},"Modifier")))}}]),t}(n.Component),Nc=He.a.create({name:"coordinated"})(Mc),Rc=(a(1054),a(285)),qc=a.n(Rc);function Vc(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return zc(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zc(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Yc=qc.a.TreeNode,Bc=I.a.Search,Lc=[],Gc=function e(t,a){var n,r,i=Vc(a);try{for(i.s();!(r=i.n()).done;){var l=r.value;l.children&&(l.children.some(function(e){return e.key===t})?n=l.key:e(t,l.children)&&(n=e(t,l.children)))}}catch(s){i.e(s)}finally{i.f()}return n},Uc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onChange=function(e){var t=e.target.value,n=Lc.map(function(e){return e.title.indexOf(t)>-1?Gc(e.key,a.state.newData):null}).filter(function(e,t,a){return e&&a.indexOf(e)===t});a.setState({expandedKeys:n,searchValue:t,autoExpandParent:!0})},a.state={expandedKeys:[],searchValue:"",autoExpandParent:!0,newData:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.prepareDataJsonFormat()}},{key:"prepareDataJsonFormat",value:function(){var e=[];this.props.Roles.forEach(function(t){var a=[];t.privileges.forEach(function(e){var t={key:e.name,title:e.name};a.push(t)});var n={key:t.name,title:t.name,children:a};e.push(n)}),this.setState({newData:[].concat(e)}),function e(t){var a,n=Vc(t);try{for(n.s();!(a=n.n()).done;){var r=a.value,i=r.key;Lc.push({key:i,title:i}),r.children&&e(r.children)}}catch(l){n.e(l)}finally{n.f()}}(e)}},{key:"render",value:function(){var e=this.state,t=e.searchValue,a=e.expandedKeys,n=e.autoExpandParent;return r.a.createElement("div",null,r.a.createElement(Bc,{style:{marginBottom:8},placeholder:"Rechercher",onChange:this.onChange}),r.a.createElement(qc.a,{onExpand:this.onExpand,expandedKeys:a,autoExpandParent:n},function e(a){return a.map(function(a){var n=a.title.indexOf(t),i=a.title.substr(0,n),l=a.title.substr(n+t.length),s=n>-1?r.a.createElement("span",null,i,r.a.createElement("span",{style:{color:"#f50"}},t),l):r.a.createElement("span",null,a.title);return a.children?r.a.createElement(Yc,{key:a.key,title:s},e(a.children)):r.a.createElement(Yc,{key:a.key,title:s})})}(this.state.newData)))}}]),t}(n.Component),Hc=gn.a.Panel,Kc=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={rolesloaded:!1,roles:[],privileges:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getRoles",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return t=e.sent,e.next=5,localStorage.getItem(G)?ae({url:L+"/private/privilege",method:"GET"}):Promise.reject("No access token set.");case 5:a=e.sent,this.setState({rolesloaded:!0,roles:Object(tt.a)(t.data.content),privileges:Object(tt.a)(a.data)});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(lt,{title:"R\xf4les et permissions"}),r.a.createElement(gn.a,null,r.a.createElement(Hc,{header:"Gestion des r\xf4les",key:"1"},r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},this.state.rolesloaded&&r.a.createElement(Uc,{Roles:this.state.roles})),r.a.createElement(xe.a,{offset:1,span:13},r.a.createElement(gn.a,null,r.a.createElement(Hc,{header:"Ajouter un r\xf4le",key:"1"},r.a.createElement(Fc,{privileges:this.state.privileges})),r.a.createElement(Hc,{header:"Modifier un r\xf4le",key:"2"},r.a.createElement(Nc,{privileges:this.state.privileges,roles:this.state.roles})))))),r.a.createElement(Hc,{header:"Gestion des permissions",key:"2"},r.a.createElement(Ac,{privileges:this.state.privileges}))))}}]),t}(n.Component),Wc=(a(1063),0),$c=0,_c=0,Jc=$e.a.Option,Qc=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).remove=function(e){var t=a.props.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},a.removed=function(e){var t=a.props.form,n=t.getFieldValue("cle");1!==n.length&&t.setFieldsValue({cle:n.filter(function(t){return t!==e})})},a.handleChanged=function(e){return a.setState(Object(jt.a)({},e.target.name,e.target.value))},a.removeOption=function(e){var t=a.props.form,n=t.getFieldValue("opt");1!==n.length&&t.setFieldsValue({opt:n.filter(function(t){return t!==e})})},a.add=function(){if(""!==a.state.typeTar){var e=a.props.form,t=e.getFieldValue("keys").concat(Wc++);e.setFieldsValue({keys:t})}else qr.a.warning("Choississez le type de tarrification")},a.ajout=function(){var e=a.props.form,t=e.getFieldValue("cle").concat($c++);e.setFieldsValue({cle:t})},a.ajouter=function(){var e=a.props.form,t=e.getFieldValue("opt").concat(_c++);e.setFieldsValue({opt:t})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n;n={ageEcheance:t.ageEcheance,pointVente:t.pointVente,numeroCompte:t.numeroCompte,codeCompte:t.codeCompte,libelleAgence:t.libelleAgence,responsableProduction:t.responsableProduction,responsablePrestation:t.responsablePrestation};for(var r=[],i=0;i<t.cle.length;i++)r={commissionPartenaire:t.commissionPartenaire[i],dateDebut:t.debut[i],tva:t.tva[i]},a.state.commissions.push(r);var l=[];for(i=0;i<t.opt.length;i++)l={libelle:t.libelle[i],max:t.max[i],min:t.min[i]},a.state.option.push(l);null!==t.ageEcheance&&void 0!==t.pointVente&&null!==t.numeroCompte&&null!==t.codeCompte&&null!==t.libelleAgence&&a.props.check(a.state.commissions,n,a.state.option,a.state.current)})},a.handleChangeTarrification=function(e){a.setState({typeTar:e})},a.state={commissions:[],references:{},option:[],points:{},count:0,current:6,typeTar:"",typePrestation:[],pieceJointe:[],adresse:[],pointVente:[],partenaire:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"prev",value:function(){var e=this.state.current-1;this.props.check(this.state.commissions,this.state.references,this.state.option,e)}},{key:"handleChange",value:function(e){e}},{key:"componentDidMount",value:function(){this.getAllTypePrestation(),this.getAllPiece(),this.getAllPointVentes(),this.getAllOption(),this.getAllPartenaires()}},{key:"getAllPointVentes",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt();case 2:t=e.sent,this.setState({pointVente:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllPartenaires",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllOption",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/optionassurances?page=0&sort=libelle&direction=asc",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,this.setState({option:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllTypePrestation",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga();case 2:t=e.sent,this.setState({typePrestation:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllPiece",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn();case 2:t=e.sent,this.setState({pieceJointe:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,i={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}};a("keys",{initialValue:[]});var l=n("keys");l.map(function(t,n){return r.a.createElement("div",null,r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:4},r.a.createElement(He.a.Item,{label:"Dur\xe9e",required:!1},a("dureeMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Min"})),a("dureeMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Age",required:!1},a("ageMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",placeholder:"Min"})),a("ageMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Capital",required:!1},a("capitalMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",placeholder:"Min"})),a("capitalMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9",required:!1},a("differeMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Min"})),a("differeMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:e.state.typeTar,required:!1,key:t},a("tauxFor[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs Obligatoire."}]})("Taux"===e.state.typeTar?r.a.createElement(I.a,{addonAfter:"%",placeholder:"Taux"}):r.a.createElement(I.a,{addonAfter:"%",placeholder:"Forfait"})),l.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(t)}}):null))))}),a("opt",{initialValue:[]});var s=n("opt"),c=s.map(function(t,n){return r.a.createElement("div",null,r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement(He.a.Item,{label:"Libelle",required:!1},a("libelle[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:6,offset:2},r.a.createElement(He.a.Item,{label:"Min",required:!1,key:t},a("min[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs Obligatoire."}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:6,offset:2},r.a.createElement(He.a.Item,{label:"Max",required:!1},a("max[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,null)),s.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.removeOption(t)}}):null))))});a("cle",{initialValue:[]});var u=n("cle"),m=u.map(function(t,n){return r.a.createElement("div",null,r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement(He.a.Item,{label:"Commission partenaire",required:!1},a("commissionPartenaire[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0}]})(r.a.createElement(I.a,{addonAfter:"%"})))),r.a.createElement(xe.a,{span:7,offset:1},r.a.createElement(He.a.Item,{label:"D\xe9but"},a("debut[".concat(t,"]"),{rules:[{required:!0}]})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",onChange:e.onChangeDate})))),r.a.createElement(xe.a,{span:5,offset:0},r.a.createElement(He.a.Item,{label:"TVA",required:!1,key:t},a("tva[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0}]})(r.a.createElement(I.a,{addonAfter:"%"})),u.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.removed(t)}}):null))))});return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,{id:"laststep",onSubmit:this.handleSubmited},r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Modalit\xe9s prestations")),r.a.createElement(xe.a,{span:8,offset:1},r.a.createElement(He.a.Item,{label:"Age \xe9ch\xe9ance"},a("ageEcheance",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"ANS",name:"ageEcheance",onChange:this.handleChanged})))),r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Gestoinnaire de la police")),r.a.createElement(xe.a,{span:8,offset:1},r.a.createElement(He.a.Item,{label:"Responsable production"},a("responsableProduction",{rules:[{required:!0,message:"Champs obligatoire"}]})(r.a.createElement(I.a,{name:"responsableProduction"})))),r.a.createElement(xe.a,{span:8,offset:1},r.a.createElement(He.a.Item,{label:"Responsable prestation"},a("responsablePrestation",{rules:[{required:!0,message:"Champs obligatoire"}]})(r.a.createElement(I.a,{name:"responsablePrestation"})))),r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Point de ventes")),r.a.createElement(xe.a,{span:14,offset:1},r.a.createElement(He.a.Item,{label:"Points de ventes"},a("pointVente",{rules:[{required:!0,message:"Format invalide!"}]})(r.a.createElement($e.a,{name:"motivations",mode:"multiple",placeholder:"Selectionnez ...",onChange:this.handleChange},this.state.pointVente.map(function(e){return r.a.createElement(Jc,{value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"R\xe9f\xe9rences bancaire")),r.a.createElement(xe.a,{span:6,offset:1},r.a.createElement(He.a.Item,{label:"Num\xe9ro compte"},a("numeroCompte",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{name:"numeroCompte",onChange:this.handleChanged})))),r.a.createElement(xe.a,{span:6,offset:2},r.a.createElement(He.a.Item,{label:"Libell\xe9 agence"},a("libelleAgence",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(I.a,{name:"libelleAgence",onChange:this.handleChanged})))),r.a.createElement(xe.a,{span:6,offset:2},r.a.createElement(He.a.Item,{label:"Code Compte"},a("codeCompte",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{name:"codeCompte",onChange:this.handleChanged})))),r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Commission"),m,r.a.createElement(He.a.Item,i,r.a.createElement(fe.a,{type:"dashed",onClick:this.ajout,style:{width:"60%"}},r.a.createElement(w.a,{type:"plus"})," Ajouter"))),r.a.createElement(xe.a,{span:24},r.a.createElement(o.a,{orientation:"left"},"Option Assurance"),c,r.a.createElement(He.a.Item,i,r.a.createElement(fe.a,{type:"dashed",onClick:this.ajouter,style:{width:"60%"}},r.a.createElement(w.a,{type:"plus"})," Ajouter"))),r.a.createElement(o.a,null),r.a.createElement(He.a.Item,i),r.a.createElement(He.a.Item,null,r.a.createElement(He.a.Item,null,6===this.state.current&&r.a.createElement(fe.a,{type:"primary",form:"laststep",htmlType:"submit"},r.a.createElement(w.a,{type:"save"}),"Enregistrer"),this.state.current>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"))))))}}]),t}(n.Component),Xc=He.a.create({name:"global_state"})(Qc);function Zc(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return eu(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return eu(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var tu=0,au=0,nu=localStorage.getItem("seuilExaminateur"),ru=$e.a.Option;var iu=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleNumberChange=function(e){var t;a.setState({number:Object(at.a)({},(t=e,t>=nu?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Le capital min doit \xeatre \xe9gal ou sup\xe9rieur au seuil examinateur qui \xe9gal "+nu}),{value:e})})},a.remove=function(e){var t=a.props.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},a.add=function(){var e=a.props.form,t=e.getFieldValue("keys").concat(tu++);e.setFieldsValue({keys:t})},a.removed=function(e){var t=a.props.form,n=t.getFieldValue("cles");1!==n.length&&t.setFieldsValue({cles:n.filter(function(t){return t!==e})})},a.ajouter=function(){var e=a.props.form,t=e.getFieldValue("cles").concat(au++);e.setFieldsValue({cles:t})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){for(var n=[],r=function(e){var r=[];t.normes[e].forEach(function(e){r.push({id:e})}),t.normes[e]=[].concat(r),n={ageMax:t.ageMax[e],ageMin:t.ageMin[e],capitalMax:t.capitalMax[e],capitalMin:t.capitalMin[e]+"",honoraires:t.normes[e]},a.state.normesSelection.push(n)},i=0;i<t.cles.length;i++)r(i);for(var l=[],s=function(e){var n=[];t.pieceJointe[e].forEach(function(e){n.push({id:e})}),t.pieceJointe[e]=[].concat(n),l={idRestitution:t.restitution[e],idCauseRestitution:t.causeRes[e],status:t.statut[e],pieceJointes:t.pieceJointe[e]},a.state.restitutions.push(l)},o=0;o<t.keys.length;o++)s(o);var c=JSON.parse(localStorage.getItem("localRestitution"));if(null!=c){var u,m=Zc(c);try{for(m.s();!(u=m.n()).done;){var d=u.value,p={idRestitution:d.idRestitution,idCauseRestitution:d.idCauseRestitution,status:c[d].status,pieceJointes:c[d].pieceJointes};a.state.restitutions.push(p)}}catch(e){m.e(e)}finally{m.f()}}});var t=a.state.current+1;a.props.check(a.state.restitutions,t,a.state.normesSelection)},a.state={number:{value:nu},pieceJointe:[],restitution:[],restitutions:[],normesSelection:[],causeRes:[],localNorme:[],localRestitution:[],honoraire:[],restitutionList:[],current:5},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPiece(),this.getAllRestitution(),this.getAllCauseRes(),this.getAllHonoraire()}},{key:"getAllPiece",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn();case 2:t=e.sent,this.setState({pieceJointe:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllHonoraire",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra();case 2:t=e.sent,this.setState({honoraire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllRestitution",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At();case 2:t=e.sent,this.setState({restitution:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllCauseRes",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt();case 2:t=e.sent,this.setState({causeRes:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"prev",value:function(){this.props.check(this.state.restitutions,this.state.current-1)}},{key:"render",value:function(){var e=this,t=this.state.number,a=this.props.form,n=a.getFieldDecorator,i=a.getFieldValue,l={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}};n("keys",{initialValue:[]});var s=i("keys"),c=s.map(function(t,a){return r.a.createElement("div",{key:t},r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:5},r.a.createElement(He.a.Item,{label:"Restitution",required:!1},n("restitution[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir"},e.state.restitution.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:5,offset:1},r.a.createElement(He.a.Item,{label:"Cause restitution",required:!1},n("causeRes[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir"},e.state.causeRes.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:5,offset:1},r.a.createElement(He.a.Item,{label:"Statut"},n("statut[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-1]/),message:"La valeur du statut doit \xeatre 0 ou 1"}]})(r.a.createElement(I.a,{placeholder:"Statut"})))),r.a.createElement(xe.a,{span:5,offset:1},r.a.createElement(He.a.Item,{label:"Pi\xe8ces justificatives",required:!1,key:t},n("pieceJointe[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Select..."},e.state.pieceJointe.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))),s.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(t)}}):null))))});n("cles",{initialValue:[]});var u=i("cles"),m=u.map(function(a,i){return r.a.createElement("div",{key:a},r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:4},r.a.createElement(He.a.Item,{label:"Age min",required:!1},n("ageMin[".concat(a,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{placeholder:"Age min"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Age max",required:!1},n("ageMax[".concat(a,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{placeholder:"Age max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Capital min",validateStatus:t.validateStatus,help:t.errorMsg},n("capitalMin[".concat(a,"]"),{validateTrigger:["onChange","onBlur"]})(r.a.createElement(Vt.a,{min:nu,onChange:e.handleNumberChange,style:{width:"100%"},placeholder:"Capital min",className:"not-rounded"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Capital max",required:!1},n("capitalMax[".concat(a,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{placeholder:"Capital max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Examens m\xe9dicaux",key:a},n("normes[".concat(a,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez..."},e.state.honoraire.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))),u.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.removed(a)}}):null))))});n("cle",{initialValue:[0]});var d=i("cle").map(function(t,a){return null!=localStorage.getItem("localNorme")&&JSON.parse(localStorage.getItem("localNorme")).map(function(a){return r.a.createElement("div",{key:a},r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:4},r.a.createElement(He.a.Item,{label:"Age max",required:!1},n("ageMaxim[".concat(t,"]"),{initialValue:a.ageMax},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{placeholder:"Age max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Age min",required:!1},n("ageMinim[".concat(t,"]"),{initialValue:a.ageMin},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{placeholder:"Age min"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Capital max",required:!1},n("capMax[".concat(t,"]"),{initialValue:a.capitalMax},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{placeholder:"Capital max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Capital min",required:!1},n("capMin[".concat(t,"]"),{initialValue:a.capitalMin},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{placeholder:"Capital min"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Exmanes m\xe9dicaux",key:t},n("norme[".concat(t,"]"),{initialValue:a.honoraires.map(function(e){return e.id})},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez..."},e.state.honoraire.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))))))})});n("key",{initialValue:[0]});var p=i("key").map(function(t,a){return null!=localStorage.getItem("localRestitution")&&JSON.parse(localStorage.getItem("localRestitution")).map(function(a){return r.a.createElement("div",{key:a},r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:5},r.a.createElement(He.a.Item,{label:"Restitution",required:!1},n("restitutions[".concat(t,"]"),{initialValue:a.idRestitution},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir"},e.state.restitution.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:5,offset:1},r.a.createElement(He.a.Item,{label:"Cause restitution",required:!1},n("causeRest[".concat(t,"]"),{initialValue:a.idCauseRestitution},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir"},e.state.causeRes.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:5,offset:1},r.a.createElement(He.a.Item,{label:"Statut",required:!1},n("statuts[".concat(t,"]"),{initialValue:a.status},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Champs Obligatoire."}]})(r.a.createElement(I.a,{placeholder:"Statut"})))),r.a.createElement(xe.a,{span:5,offset:1},r.a.createElement(He.a.Item,{label:"Pieces jointes",required:!1},n("pieces[".concat(t,"]"),{initialValue:a.pieceJointes.map(function(e){return e.id})},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs Obligatoire."}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Select..."},e.state.pieceJointe.map(function(e){return r.a.createElement(ru,{key:e.id,value:e.id,label:e.libelle},e.libelle)})))))))})});return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,{onSubmit:this.handleSubmit},r.a.createElement(o.a,{orientation:"left"},"Normes de s\xe9l\xe9ction"),null!=localStorage.getItem("localNorme")?d:"",m,r.a.createElement(He.a.Item,l,r.a.createElement(fe.a,{type:"dashed",onClick:this.ajouter,style:{width:"60%"}},r.a.createElement(w.a,{type:"plus"})," Ajouter")),r.a.createElement(o.a,{orientation:"left"},"Restitutions"),null!=localStorage.getItem("localRestitution")?p:"",c,r.a.createElement(He.a.Item,l,r.a.createElement(fe.a,{type:"dashed",onClick:this.add,style:{width:"60%"}},r.a.createElement(w.a,{type:"plus"})," Ajouter")),r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a.Item,null,5===this.state.current&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Suivant ",r.a.createElement(w.a,{type:"arrow-right"})),this.state.current>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"))))))}}]),t}(n.Component),lu=He.a.create({name:"global_state"})(iu),su=$e.a.Option,ou=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.libelle&&""!==t.code&&""!==t.numeroHomologation&&""!==t.dateHomologation&&void 0!==t.periodicites&&a.next()})},a.next=function(){if(1===a.state.current){var e=a.state.current+1;a.setState({current:e}),a.props.check(e)}},a.state={periodicite:[],current:1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPeriodicite()}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e}),this.props.check(e)}},{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.current;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12}}},{id:"formadd",onSubmit:this.handleSubmit}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations g\xe9n\xe9rales")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Libell\xe9"},t("libelle",{rules:[{required:!0,message:"entrez la libelle"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},t("code",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Homologation")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Num\xe9ro d'homologation",hasFeedback:!0},t("numeroHomologation",{rules:[{required:!0}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Date d'homologation",hasFeedback:!0},t("dateHomologation",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",onChange:this.onChangeDate})))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"P\xe9riodicit\xe9")),r.a.createElement(xe.a,{span:24,offset:2},r.a.createElement(He.a.Item,null," ",t("periodicites",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ..."},this.state.periodicite.map(function(e){return r.a.createElement(su,{key:e.id,value:e.id,label:e.abb},e.libelle)}))))),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,1===a&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",style:{marginBottom:"25px"}},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})),a>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"))))))}}]),t}(n.Component),cu=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{libelle:He.a.createFormField(Object(at.a)({},e.libelle,{value:e.libelle.value})),code:He.a.createFormField(Object(at.a)({},e.code,{value:e.code.value})),numeroHomologation:He.a.createFormField(Object(at.a)({},e.numeroHomologation,{value:e.numeroHomologation.value})),dateHomologation:He.a.createFormField(Object(at.a)({},e.dateHomologation,{value:e.dateHomologation.value})),periodicites:He.a.createFormField(Object(at.a)({},e.periodicites,{value:e.periodicites.value}))}}})(ou),uu=0,mu=$e.a.Option,du=3,pu=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).remove=function(e){var t=a.props.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},a.add=function(){if(""!==a.state.typeTar){var e=a.props.form,t=e.getFieldValue("keys").concat(uu++);e.setFieldsValue({keys:t})}else qr.a.warning("Choississez le type de tarrification")},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){du=a.state.current+1;for(var n=[],r=0;r<t.keys.length;r++)n="Taux"===a.state.typeTar?{capitalMax:t.capitalMax[r],capitalMin:t.capitalMin[r],ageMax:t.ageMax[r],ageMin:t.ageMin[r],dureeMax:t.dureeMax[r],dureeMin:t.dureeMin[r],differeMax:t.differeMax[r],differeMin:t.differeMin[r],taux:t.tauxFor[r]}:{capitalMax:t.capitalMax[r],capitalMin:t.capitalMin[r],ageMax:t.ageMax[r],ageMin:t.ageMin[r],dureeMax:t.dureeMax[r],dureeMin:t.dureeMin[r],differeMax:t.differeMax[r],differeMin:t.differeMin[r],forfait:t.tauxFor[r]},a.state.tarrifications.push(n);a.props.check(a.state.tarrifications,a.state.typeTar,du)})},a.handleChangeTarrification=function(e){a.setState({typeTar:e})},a.state={tarrifications:[],count:0,current:3,typeTar:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"prev",value:function(){var e=this.state.current-1;this.setState({currentPrev:e}),this.props.check(this.state.tarrifications,this.state.typeTar,e)}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,i={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}};a("keys",{initialValue:[]});var l=n("keys"),s=l.map(function(t,n){return r.a.createElement("div",null,r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:4},r.a.createElement(He.a.Item,{label:"Dur\xe9e",required:!1},a("dureeMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Min"})),a("dureeMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Age",required:!1},a("ageMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",placeholder:"Min"})),a("ageMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Capital",required:!1},a("capitalMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",placeholder:"Min"})),a("capitalMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9",required:!1},a("differeMin[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Min"})),a("differeMax[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"Max"})))),r.a.createElement(xe.a,{span:4,offset:1},r.a.createElement(He.a.Item,{label:e.state.typeTar,required:!1,key:t},a("tauxFor[".concat(t,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs Obligatoire."}]})("Taux"===e.state.typeTar?r.a.createElement(I.a,{addonAfter:"%",placeholder:"Taux"}):r.a.createElement(I.a,{addonAfter:"%",placeholder:"Forfait"})),l.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(t)}}):null))))});return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,{id:"laststep",onSubmit:this.handleSubmited},r.a.createElement(o.a,{orientation:"left"},"Tarification"),r.a.createElement(ye.a,{gutter:[16,8]},r.a.createElement(xe.a,{span:4,offset:1},"Type de tarification:"," "),r.a.createElement(xe.a,{flex:"auto",span:12},r.a.createElement($e.a,{onChange:this.handleChangeTarrification,placeholder:"- Veuillez s\xe9lectionner -",style:{width:"16em"}},r.a.createElement(mu,{value:"Taux"},"Taux"),r.a.createElement(mu,{value:"Forfait"},"Forfait"))),r.a.createElement(xe.a,{span:24},s)),r.a.createElement(He.a.Item,i,r.a.createElement(fe.a,{type:"dashed",onClick:this.add,style:{width:"60%"}},r.a.createElement(w.a,{type:"plus"})," Ajouter")),r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a.Item,null,3===this.state.current&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Suivant ",r.a.createElement(w.a,{type:"arrow-right"})),this.state.current>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"))))))}}]),t}(n.Component),hu=He.a.create({name:"global_state"})(pu);function fu(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return bu(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return bu(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Eu=0,vu=4,gu=$e.a.Option,yu=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).remove=function(e){var t=a.props.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},a.removed=function(e){var t=a.props.form,n=t.getFieldValue("cle");t.setFieldsValue({cle:n.filter(function(t){return t!==e})})},a.add=function(){var e=a.props.form,t=e.getFieldValue("keys").concat(Eu++);e.setFieldsValue({keys:t})},a.handleSubmited=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.delaiResiliation&&""!==t.delaiPreavis&&""!==t.seuilConseil&&""!==t.seuilExaminateur&&""!==t.seuilReassurance&&(vu=a.state.current+1),Eu=0,a.state.Modalite={seuilConseil:t.seuilConseil,seuilReassurance:t.seuilReassurance,seuilExaminateur:t.seuilExaminateur,delaiResiliation:t.delaiResiliation,delaiPreavis:t.delaiPreavis};for(var n=function(){var e=[];t.piece[r].forEach(function(t){e.push({id:t})}),t.piece[r]=[].concat(e);var n={pieceJointes:t.piece[r],typePrestationId:t.type[r],delaiDeclaration:t.delai[r]};a.state.typePrestations.push(n)},r=0;r<t.type.length;r++)n();var i=JSON.parse(localStorage.getItem("adresse"));if(null!=i){var l,s=fu(i);try{for(s.s();!(l=s.n()).done;){var o=l.value,c={pieceJointes:o.pieceJointes,typePrestationId:o.typePrestationId,delaiDeclaration:o.delaiDeclaration};a.setState({typePrestations:Object(tt.a)(c)})}}catch(e){s.e(e)}finally{s.f()}}localStorage.setItem("adresse",JSON.stringify(a.state.typePrestations))}),a.props.check(a.state.typePrestations,a.state.Modalite,vu)},a.handleChanged=function(e){return a.setState(Object(jt.a)({},e.target.name,e.target.value))},a.state={typePrestations:[],Modalite:{},count:0,current:4,typePrestation:[],adresse:[],pieceJointe:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"prev",value:function(){var e=this.state.current-1;this.setState({currentPrev:e}),this.props.check(this.state.typePrestations,this.state.Modalite,e)}},{key:"componentDidMount",value:function(){this.getAllPiece(),this.getAllTypePrestationFamille(1)}},{key:"getAllTypePrestationFamille",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,localStorage.getItem(G)?ae({url:L+"/private/typeprestationFamille/"+n,method:"GET"}):Promise.reject("No access token set.");case 2:a=e.sent,this.setState({typePrestation:a.data});case 4:case"end":return e.stop()}var n},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPiece",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn();case 2:t=e.sent,this.setState({pieceJointe:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,i={labelCol:{xs:{span:24},sm:{span:9}},wrapperCol:{xs:{span:24},sm:{span:12}}},l={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}};a("keys",{initialValue:[]});var s=n("keys"),c=s.map(function(t,n){return r.a.createElement("div",null,r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,Object.assign({},i,{label:"Type prestation",required:!1}),a("type[".concat(t,"]"),{rules:[{required:!0,whitespace:!0,message:"Champs obligatoire."}]})(r.a.createElement($e.a,{onChange:e.handleChangeSelect,placeholder:"- Veuillez s\xe9lectionner -"},e.state.typePrestation.map(function(e){return r.a.createElement(gu,{value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,Object.assign({},i,{label:"D\xe9lai de d\xe9claration",required:!1}),a("delai[".concat(t,"]"),{rules:[{required:!0,whitespace:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Mois"})))),r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,Object.assign({},i,{label:"Pi\xe8ces justificatives",required:!1,key:t}),a("piece[".concat(t,"]"),{rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Select...",onChange:e.handleChange},e.state.pieceJointe.map(function(e){return r.a.createElement(gu,{value:e.id,label:e.libelle},e.libelle)}))),s.length>1?r.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(t)}}):null))))});a("cle",{initialValue:[0]});var u=n("cle").map(function(t,n){return null!=localStorage.getItem("adresse")&&JSON.parse(localStorage.getItem("adresse")).map(function(n){return r.a.createElement("div",null,r.a.createElement(ye.a,{span:24},r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,Object.assign({},i,{label:"Type prestation",required:!1}),a("types[".concat(t,"]"),{initialValue:n.typePrestationId},{rules:[{required:!0,whitespace:!0,message:"Champs obligatoire."}]})(r.a.createElement($e.a,{onChange:e.handleChangeSelect,placeholder:"- Veuillez s\xe9lectionner -"},e.state.typePrestation.map(function(e){return r.a.createElement(gu,{value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,Object.assign({},i,{label:"D\xe9lai d\xe9claration",required:!1}),a("delais[".concat(t,"]"),{initialValue:n.delaiDeclaration},{rules:[{required:!0,whitespace:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,Object.assign({},i,{label:"Pi\xe8ces justificatives",required:!1,key:t}),a("pieces[".concat(t,"]"),{initialValue:n.pieceJointes.map(function(e){return e.id})},{rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Select...",onChange:e.handleChange},e.state.pieceJointe.map(function(e){return r.a.createElement(gu,{value:e.id,label:e.libelle},e.libelle)})))))))})});return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},i,{id:"stepthree",onSubmit:this.handleSubmited}),r.a.createElement(xe.a,{span:22},r.a.createElement(o.a,{orientation:"left"},"Modalit\xe9s de prestations")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Seuil examinateur"},a("seuilExaminateur",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{name:"seuilExaminateur",addonAfter:"Dhs",onChange:this.handleChanged}))),r.a.createElement(He.a.Item,{label:"Seuil conseil"},a("seuilConseil",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{name:"seuilConseil",addonAfter:"Dhs",onChange:this.handleChanged})))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Seuil de la r\xe9assurance"},a("seuilReassurance",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{name:"seuilReassurance",addonAfter:"Dhs",onChange:this.handleChanged}))),r.a.createElement(He.a.Item,{label:"D\xe9lai r\xe9siliation"},a("delaiResiliation",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{name:"delaiResiliation",addonAfter:"Mois",onChange:this.handleChanged}))),r.a.createElement(He.a.Item,{label:"D\xe9lai pr\xe9avis"},a("delaiPreavis",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{name:"delaiPreavis",addonAfter:"Mois",onChange:this.handleChanged})))),r.a.createElement(xe.a,{span:22},r.a.createElement(o.a,{orientation:"left"},"Type de prestations")),r.a.createElement(xe.a,{span:24},null!=localStorage.getItem("adresse")?u:"",c,r.a.createElement(He.a.Item,l,r.a.createElement(fe.a,{type:"dashed",onClick:this.add,style:{width:"60%"}},r.a.createElement(w.a,{type:"plus"})," Ajouter")),r.a.createElement(He.a.Item,null,4===this.state.current&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})),this.state.current>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"))),r.a.createElement("div",{className:"steps-action"}))))}}]),t}(n.Component),Cu=He.a.create({name:"global_state"})(yu),xu=$e.a.Option,Su=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).next=function(){if(2===a.state.current){var e=a.state.current+1;a.setState({current:e}),a.props.check(e)}},a.onChange=function(e){a.setState({visible:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.ageMaxEligibilite&&""!==t.ageMin&&""!==t.differeMax&&""!==t.differeMin&&""!==t.dureeMax&&""!==t.dureeMin&&""!==t.fraisAcquisition&&""!==t.fraisGestion&&""!==t.taxe&&void 0!==t.exclusion&&a.next()})},a.state={exclusions:[],current:2,visible:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e}),this.props.check(e)}},{key:"componentDidMount",value:function(){this.getAllExclusion("Deces")}},{key:"getAllExclusion",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:a=e.sent,this.setState({exclusions:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.current;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12}}},{id:"steptwo",onSubmit:this.handleSubmit}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations g\xe9n\xe9rales")),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Frais de gestion WAKALA"},t("fraisGestion",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%"}))),r.a.createElement(He.a.Item,{label:"Frais d'acquisition"},t("fraisAcquisition",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%"}))),"DECES PREVOYANCE"!==this.props.risque.libelle&&r.a.createElement("div",null," ",r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9 minimum"},t("differeMin",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"}))),r.a.createElement(He.a.Item,{label:"Dur\xe9e minimale"},t("dureeMin",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"})))),r.a.createElement(He.a.Item,{label:"Age minimum"},t("ageMin",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"ANS"}))),r.a.createElement(He.a.Item,{label:"Age maximum d\u2019\xe9ligibilit\xe9"},t("ageMaxEligibilite",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"ANS"})))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"TVA frais de gestion WAKALA"},t("tvaFraisGestion",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%"}))),r.a.createElement(He.a.Item,{label:"TVA frais d'acquisition"},t("tvaFraisAcquisition",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%"}))),"DECES PREVOYANCE"!==this.props.risque.libelle&&r.a.createElement("div",null,r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9 Maximum"},t("differeMax",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"}))),r.a.createElement(He.a.Item,{label:"Dur\xe9e maximale"},t("dureeMax",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"})))," ",r.a.createElement(He.a.Item,{label:"Taux taxe d'assurance"},t("taxe",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%"}))),r.a.createElement(He.a.Item,{label:"Taxe parafiscale"},t("taxeParafiscale",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%"})))))),r.a.createElement(ye.a,null,"DECES PREVOYANCE"!==this.props.risque.libelle&&r.a.createElement("div",null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Ech\xe9ances impay\xe9es \xe0 assurer"},t("visibilite",{valuePropName:"unchecked",initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!1,onChange:this.onChange},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))),r.a.createElement(xe.a,{span:13},this.state.visible?r.a.createElement(He.a.Item,null,t("echeanceImpayees",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"}))):null),r.a.createElement(xe.a,{span:24},r.a.createElement("label",null,r.a.createElement(He.a.Item,{label:" D\xe9lai de prescription de l'acceptation"}))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"En l'attente du retour participant"},t("delaiEnAttente",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(I.a,{addonAfter:"Jours"})))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Sans souscription"},t("delaiSansSouscription",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(I.a,{addonAfter:"Jours"})))))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"}," Exclusions")),r.a.createElement(xe.a,{span:24,offset:2},r.a.createElement(He.a.Item,null," ",t("exclusion",{rules:[{required:!0,message:"Exclusion is required!"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ..."},this.state.exclusions.map(function(e){return r.a.createElement(xu,{key:e.id,value:e.id,label:e.exclusionNom},e.exclusionNom)}))))),r.a.createElement(xe.a,{span:24},2===a&&r.a.createElement(fe.a,{type:"primary",style:{right:"float",marginBottom:"25px"},htmlType:"submit"},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})),a>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent")))))}}]),t}(n.Component),ku=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{fraisGestion:He.a.createFormField(Object(at.a)({},e.fraisGestion,{value:e.fraisGestion.value})),fraisAcquisition:He.a.createFormField(Object(at.a)({},e.fraisAcquisition,{value:e.fraisAcquisition.value})),differeMin:He.a.createFormField(Object(at.a)({},e.differeMin,{value:e.differeMin.value})),differeMax:He.a.createFormField(Object(at.a)({},e.differeMax,{value:e.differeMax.value})),dureeMax:He.a.createFormField(Object(at.a)({},e.dureeMax,{value:e.dureeMax.value})),dureeMin:He.a.createFormField(Object(at.a)({},e.dureeMin,{value:e.dureeMin.value})),ageMin:He.a.createFormField(Object(at.a)({},e.ageMin,{value:e.ageMin.value})),taxe:He.a.createFormField(Object(at.a)({},e.taxe,{value:e.taxe.value})),ageMaxEligibilite:He.a.createFormField(Object(at.a)({},e.ageMaxEligibilite,{value:e.ageMaxEligibilite.value})),echeanceImpayees:He.a.createFormField(Object(at.a)({},e.echeanceImpayees,{value:e.echeanceImpayees.value})),delaiEnAttente:He.a.createFormField(Object(at.a)({},e.delaiEnAttente,{value:e.delaiEnAttente.value})),delaiSansSouscription:He.a.createFormField(Object(at.a)({},e.delaiSansSouscription,{value:e.delaiSansSouscription.value})),tvaFraisAcquisition:He.a.createFormField(Object(at.a)({},e.tvaFraisAcquisition,{value:e.tvaFraisAcquisition.value})),tvaFraisGestion:He.a.createFormField(Object(at.a)({},e.tvaFraisGestion,{value:e.tvaFraisGestion.value})),exclusion:He.a.createFormField(Object(at.a)({},e.exclusion,{value:e.exclusion.value})),visibilite:He.a.createFormField(Object(at.a)({},e.visibilite,{value:e.visibilite.value})),taxeParafiscale:He.a.createFormField(Object(at.a)({},e.taxeParafiscale,{value:e.taxeParafiscale.value}))}}})(Su),Iu=$e.a.Option,Ou=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).next=function(){if(0===a.state.current){var e=a.state.current+1;a.setState({current:e}),a.props.check(a.state.type,e)}},a.handleChangeRisque=function(e){a.setState({type:a.state.risques.filter(function(t){return t.id===e})[0]})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.risque&&""!==t.categorie&&""!==t.partenaire&&a.next()})},a.state={risques:[],categories:[],sousCategories:[],partenaire:[],current:0,type:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e}),this.props.check(e)}},{key:"componentDidMount",value:function(){this.getAllRisque("DECES"),this.getAllCategorie(),this.getAllSousCategorie(),this.getAllPartenaires()}},{key:"getAllPartenaires",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,a=[],t.data.content.forEach(function(e){"DECES_ET_RETRAITE"!==e.brancheType&&"DECES"!==e.brancheType||a.push(e)}),this.setState({partenaire:t.data.content});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllRisque",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja(t);case 2:a=e.sent,this.setState({risques:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllCategorie",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa();case 2:t=e.sent,this.setState({categories:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllSousCategorie",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(G)?ae({url:L+"/private/souscategorie?page=0&sort=code&direction=asc",method:"GET"}):Promise.reject("No access token set.");case 2:t=e.sent,this.setState({sousCategories:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.current;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:12},sm:{span:6}},wrapperCol:{xs:{span:12}}},{id:"formZero",onSubmit:this.handleSubmit}),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Risque",hasFeedback:!0},e("risque",{rules:[{required:!0,message:"Choisissez un risque"}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChangeRisque},this.state.risques.map(function(e){return r.a.createElement(Iu,{key:e.id,value:e.id,label:e.name},e.name)})))),r.a.createElement(He.a.Item,{label:"Cat\xe9gorie",hasFeedback:!0},e("categorie",{rules:[{required:!0,message:"choisissez une cat\xe9gorie "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.categories.map(function(e){return r.a.createElement(Iu,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Interm\xe9diaire",hasFeedback:!0},e("partenaire",{rules:[{required:!0,message:"choisissez un interm\xe9diaire "}]})(r.a.createElement($e.a,{onChange:this.handleChangeSelect,placeholder:"-s\xe9lectionnez -"},this.state.partenaire.map(function(e){return r.a.createElement(Iu,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)})))),r.a.createElement(He.a.Item,{label:"Sous cat\xe9gorie",hasFeedback:!0},e("sousCategorie",{rules:[{required:!0,message:"choisissez une cat\xe9gorie "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.sousCategories.map(function(e){return r.a.createElement(Iu,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,0===t&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",style:{marginBottom:"25px"}},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})))))))}}]),t}(n.Component),ju=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{risque:He.a.createFormField(Object(at.a)({},e.risque,{value:e.risque.value})),categorie:He.a.createFormField(Object(at.a)({},e.categorie,{value:e.categorie.value})),partenaire:He.a.createFormField(Object(at.a)({},e.partenaire,{value:e.partenaire.value})),sousCategorie:He.a.createFormField(Object(at.a)({},e.sousCategorie,{value:e.sousCategorie.value}))}}})(Ou),Tu=Al.a.Step,Au=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).checkCurrent=function(e){a.setState({current:e})},a.checkCurrentZero=function(e,t){a.setState({current:t,typeRisque:e})},a.checkSelectedLists=function(e,t,n){a.setState({modalites:t,prestation:JSON.parse(localStorage.getItem("adresse")),current:n})},a.checkSelectedRest=function(e,t,n){a.setState({restitutionList:e,current:t,normesSelection:n})},a.checkTarification=function(e,t,n){a.setState({tarrificationL:e,type:t,current:n},function(){a.handleSubmit()})},a.checkSelectedTar=function(e,t,n,r){a.setState({reference:t,commission:e,optionAssurance:n,current:r},function(){a.handleSubmit()})},a.handleFormChange=function(e){a.setState(function(t){var a=t.fields;return{fields:Object(at.a)({},a,e)}})},a.state={current:0,prestation:{},modalites:{},restitutionList:{},normesSelection:{},commission:{},reference:{},type:"",tarrificationL:{},familleProduit:"",optionAssurance:{},champs:{},typeRisque:[],fields:{risque:{value:""},categorie:{value:""},partenaire:{value:""},sousCategorie:{value:""},libelle:{value:""},code:{value:""},numeroHomologation:{value:""},dateHomologation:{value:""},periodicites:{},fraisGestion:{value:""},fraisAcquisition:{value:""},differeMin:{value:""},differeMax:{value:""},dureeMin:{value:""},dureeMax:{value:""},ageMin:{value:""},tvaFraisAcquisition:{value:""},tvaFraisGestion:{value:""},delaiSansSouscription:{value:""},delaiEnAttente:{value:""},ageMaxEligibilite:{value:""},echeanceImpayees:{value:""},taxe:{value:""},taxeParafiscale:{value:""},plafondFrais:{value:""},exclusion:{},delai:{value:""},type:{value:""},piece:{value:""},visibilite:{value:""},seuilConseil:{value:""},seuilExaminateur:{value:""},seuilReassurance:{value:""},delaiPreavis:{value:""},delaiResiliation:{value:""},restitutionPiece:[],ageEcheance:{value:""},numeroCompte:{value:""},codeCompte:{value:""},libelleAgence:{value:""},pointVente:{},commissions:[],tarrification:[]}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getFamilleProduit("Deces"),console.log("fields:",this.state.fields)}},{key:"getFamilleProduit",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,localStorage.getItem(G)?ae({url:L+"/private/familleProduit/"+n,method:"GET"}):Promise.reject("No access token set.");case 2:a=e.sent,this.setState({familleProduit:a.data});case 4:case"end":return e.stop()}var n},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=this;if(6===this.state.current){var t=[];this.state.fields.exclusion.value.forEach(function(e){t.push({id:e})});var a=[];this.state.fields.periodicites.value.forEach(function(e){a.push({id:e})});var n=[];this.state.reference.pointVente.forEach(function(e){n.push({id:e})});var r={};r=!0===this.state.fields.visibilite.value?{code:this.state.fields.code.value,libelle:this.state.fields.libelle.value,numeroHomologation:this.state.fields.numeroHomologation.value,dateHomologation:this.state.fields.dateHomologation.value,fraisGestion:this.state.fields.fraisGestion.value,fraisAcquisition:this.state.fields.fraisAcquisition.value,tvaFraisGestion:this.state.fields.tvaFraisGestion.value,tvaFraisAcquisition:this.state.fields.tvaFraisAcquisition.value,plafondFrais:this.state.fields.plafondFrais.value,taxe:this.state.fields.taxe.value,taxeParaFiscale:this.state.fields.taxeParafiscale.value,delaiResiliation:this.state.modalites.delaiResiliation,delaiPreavis:this.state.modalites.delaiPreavis,delaiSansSouscription:this.state.fields.delaiSansSouscription.value,delaiEnAttente:this.state.fields.delaiEnAttente.value,seuilConseil:this.state.modalites.seuilConseil,seuilExaminateur:this.state.modalites.seuilExaminateur,seuilReassurance:this.state.modalites.seuilReassurance,dureeMax:this.state.fields.dureeMax.value,dureeMin:this.state.fields.dureeMin.value,differeMax:this.state.fields.differeMax.value,differeMin:this.state.fields.differeMin.value,ageMaxEligibilite:this.state.fields.ageMaxEligibilite.value,echeanceImpayees:this.state.fields.echeanceImpayees.value,ageMin:this.state.fields.ageMin.value,numeroCompte:this.state.reference.numeroCompte,codeCompte:this.state.reference.codeCompte,libelleCompte:this.state.reference.libelleAgence,ageEcheance:this.state.reference.ageEcheance,responsableProduction:this.state.reference.responsableProduction,responsablePrestation:this.state.reference.responsablePrestation,exclusions:t,periodicites:a,pointVentes:n,risqueId:this.state.fields.risque.value,categorieId:this.state.fields.categorie.value,partenaireId:this.state.fields.partenaire.value,sousCategorieId:this.state.fields.sousCategorie.value,commissions:this.state.commission,tarrifications:this.state.tarrificationL,decesCauseRestitution:this.state.restitutionList,normes:this.state.normesSelection,prestations:this.state.prestation,options:this.state.optionAssurance,produitType:this.state.type.toLowerCase(),familleId:this.state.familleProduit}:{code:this.state.fields.code.value,libelle:this.state.fields.libelle.value,numeroHomologation:this.state.fields.numeroHomologation.value,dateHomologation:this.state.fields.dateHomologation.value,fraisGestion:this.state.fields.fraisGestion.value,fraisAcquisition:this.state.fields.fraisAcquisition.value,tvaFraisGestion:this.state.fields.tvaFraisGestion.value,tvaFraisAcquisition:this.state.fields.tvaFraisAcquisition.value,plafondFrais:this.state.fields.plafondFrais.value,taxe:this.state.fields.taxe.value,taxeParaFiscale:this.state.fields.taxeParafiscale.value,delaiResiliation:this.state.modalites.delaiResiliation,delaiPreavis:this.state.modalites.delaiPreavis,delaiSansSouscription:this.state.fields.delaiSansSouscription.value,delaiEnAttente:this.state.fields.delaiEnAttente.value,seuilConseil:this.state.modalites.seuilConseil,seuilExaminateur:this.state.modalites.seuilExaminateur,seuilReassurance:this.state.modalites.seuilReassurance,dureeMax:this.state.fields.dureeMax.value,dureeMin:this.state.fields.dureeMin.value,differeMax:this.state.fields.differeMax.value,differeMin:this.state.fields.differeMin.value,ageMaxEligibilite:this.state.fields.ageMaxEligibilite.value,ageMin:this.state.fields.ageMin.value,numeroCompte:this.state.reference.numeroCompte,codeCompte:this.state.reference.codeCompte,libelleCompte:this.state.reference.libelleAgence,ageEcheance:this.state.reference.ageEcheance,exclusions:t,periodicites:a,pointVentes:n,responsableProduction:this.state.reference.responsableProduction,responsablePrestation:this.state.reference.responsablePrestation,risqueId:this.state.fields.risque.value,categorieId:this.state.fields.categorie.value,partenaireId:this.state.fields.partenaire.value,sousCategorieId:this.state.fields.sousCategorie.value,commissions:this.state.commission,tarrifications:this.state.tarrificationL,decesCauseRestitution:this.state.restitutionList,normes:this.state.normesSelection,prestations:this.state.prestation,options:this.state.optionAssurance,produitType:this.state.type.toLowerCase(),familleId:this.state.familleProduit},console.log("request:",r),function(e){return localStorage.getItem(G)?ae({url:L+"/private/decesproduit",data:e,method:"POST"}):Promise.reject("No access token set.")}(r).then(function(t){u.a.success({message:"TAKAFUL",description:"L'insertion est bien faite"}),e.props.record.history.push("/consultproduitdeces")}).catch(function(e){"400 product already exists"===e.response.data.message?u.a.error({message:"TAKAFUL",description:"Ce produit existe d\xe9j\xe0"}):400===e.response.data.status?u.a.error({message:"TAKAFUL",description:"Merci de v\xe9rifier le type des champs"}):u.a.error({message:"TAKAFUL",description:"l'insertion est mal pass\xe9e Merci de r\xe9essayer"})}),localStorage.removeItem("adresse")}}},{key:"render",value:function(){var e=this.state,t=e.current,a=e.fields,n=e.modalites,i=e.typeRisque,l=[{title:"Etape 1",content:r.a.createElement(ju,Object.assign({check:this.checkCurrentZero},a,{onChange:this.handleFormChange})),description:"Informations"},{title:"Etape 2",content:r.a.createElement(cu,Object.assign({check:this.checkCurrent},a,{onChange:this.handleFormChange})),description:"Informations g\xe9n\xe9rales"},{title:"Etape 3",content:r.a.createElement(ku,Object.assign({check:this.checkCurrent},a,{risque:i,onChange:this.handleFormChange})),description:"Param\xe8tres globaux"},{title:"Etape 4",content:r.a.createElement(hu,Object.assign({check:this.checkTarification},a,{onChange:this.handleFormChange})),description:"Tarification"},{title:"Etape 5",content:r.a.createElement(Cu,Object.assign({check:this.checkSelectedLists},n,{onChange:this.handleFormChange})),description:"Modalit\xe9s prestations"},{title:"Etape 6",content:r.a.createElement(lu,Object.assign({check:this.checkSelectedRest},a,{dataProp:this.state.modalites,onChange:this.handleFormChange})),description:"Norme S\xe9lection/Restitution"},{title:"Etape 7",content:r.a.createElement(Xc,Object.assign({check:this.checkSelectedTar},a,{onChange:this.handleFormChange})),description:"Edition"}];return r.a.createElement("div",null,r.a.createElement(lt,{title:"Nouveau produit"}),r.a.createElement(Al.a,{current:t},l.map(function(e){return r.a.createElement(Tu,{key:e.title,title:e.title,description:e.description})})),r.a.createElement("div",{className:"steps-content-style"},l[t].content))}}]),t}(n.Component),Pu=(a(1065),function(e,t){if(e.state.current===t){var a=e.state.current+1;e.setState({current:a}),e.props.check(a)}}),Du=function(e){var t=e.state.current-1;e.setState({current:t}),e.props.check(t)},Fu=$e.a.Option,wu=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).radioGroup=function(e,t,a,n){var i=t;return r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},e)},a(i,{initialValue:n})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:n},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))},a.onChangeRachatTotal=function(e){a.setState({rachatTotal:e.target.value})},a.onChangeRachatPartiel=function(e){a.setState({rachatPartiel:e.target.value})},a.onChangeNatureConditionDT=function(e){a.setState({natureConditionDisciplinaireTotaleValue:e})},a.onChangeNatureConditionDP=function(e){a.setState({natureConditionDisciplinairePartielValue:e})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.natureConditionDisciplinaireTotale&&""!==t.natureConditionDisciplinairePartiel&&Pu(Object(b.a)(Object(b.a)(a)),2)})},a.state={current:2,rachatTotal:a.props.rachatTotal.value,rachatPartiel:a.props.rachatPartiel.value,natureConditionDisciplinaireTotale:[{name:"Montant fixe",value:"FIXE"},{name:"Pourcentage",value:"POURCENTAGE"},{name:"Montant \xe0 saisir",value:"ASAISIR"}],natureConditionDisciplinaireTotaleValue:a.props.natureConditionDisciplinaireTotale.value,natureConditionDisciplinairePartielValue:a.props.natureConditionDisciplinairePartiel.value,conditionDisciplinairePartiel:a.props.conditionDisciplinairePartiel.value,conditionDisciplinaireTotale:a.props.conditionDisciplinaireTotale.value},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.current;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},Ko,{id:"stepmodalite",onSubmit:this.handleSubmit}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Modalit\xe9s de rachat")),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Application de rachat totale")},t("rachatTotal",{initialValue:this.state.rachatTotal})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:this.state.rachatTotal,onChange:this.onChangeRachatTotal},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))),this.state.rachatTotal?r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e minimale de souscription")},t("dureeMinimalSouscriptionAvantRachatTotal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"avant d\u2019op\xe9rer une demande de rachat total"}))):null,this.state.rachatTotal?this.radioGroup("Application de condition disciplinaire totale","conditionDisciplinaireTotale",t,this.state.conditionDisciplinaireTotale):null,r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nature de la condition disciplinaire"),hasFeedback:!0},t("natureConditionDisciplinaireTotale",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"Selectionnez ...",onChange:this.onChangeNatureConditionDT},this.state.natureConditionDisciplinaireTotale.map(function(e){return r.a.createElement(Fu,{value:e.value,label:e.value},e.name)})))),"FIXE"===this.state.natureConditionDisciplinaireTotaleValue?$o("Valeur de la condition disciplinaire","valeurConditionDisciplinaireTotale","DH",t):null,"POURCENTAGE"===this.state.natureConditionDisciplinaireTotaleValue?$o("Valeur de la condition disciplinaire","valeurConditionDisciplinaireTotale","%",t):null),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Application de rachat partiel")},t("rachatPartiel",{initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!1,onChange:this.onChangeRachatPartiel},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))),this.state.rachatPartiel?$o("Maximum du montant de rachat partiel","maximumMontantRachatPartiel","%",t):null,this.state.rachatPartiel?$o("Nombre maximum de rachat partiel","nombreMaximumRachatPartiel","",t):null,this.state.rachatPartiel?r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e minimale de souscription")},t("dureeMinimalSouscriptionAvantRachatPartiel",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois",placeholder:"avant une demande de rachat partiel",type:"number"}))):null,this.state.rachatPartiel?this.radioGroup("Application de condition discip partiel","conditionDisciplinairePartiel",t,this.state.conditionDisciplinairePartiel):null,r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nature de la condition disciplinaire"),hasFeedback:!0},t("natureConditionDisciplinairePartiel",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"Selectionnez ...",onChange:this.onChangeNatureConditionDP},this.state.natureConditionDisciplinaireTotale.map(function(e){return r.a.createElement(Fu,{value:e.value,label:e.value},e.name)})))),"FIXE"===this.state.natureConditionDisciplinairePartielValue?$o("Valeur de la condition disciplinaire","valeurConditionDisciplinairePartiel","DH",t):null,"POURCENTAGE"===this.state.natureConditionDisciplinairePartielValue?$o("Valeur de la condition disciplinaire","valeurConditionDisciplinairePartiel","%",t):null)),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,a>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return Du(e)}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"),2===a&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",style:{marginBottom:"25px",marginLeft:"10px"}},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})))))))}}]),t}(r.a.Component),Mu=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{rachatTotal:He.a.createFormField(Object(at.a)({},e.rachatTotal,{value:e.rachatTotal.value})),dureeMinimalSouscriptionAvantRachatTotal:He.a.createFormField(Object(at.a)({},e.dureeMinimalSouscriptionAvantRachatTotal,{value:e.dureeMinimalSouscriptionAvantRachatTotal.value})),conditionDisciplinaireTotale:He.a.createFormField(Object(at.a)({},e.conditionDisciplinaireTotale,{value:e.conditionDisciplinaireTotale.value})),natureConditionDisciplinaireTotale:He.a.createFormField(Object(at.a)({},e.natureConditionDisciplinaireTotale,{value:e.natureConditionDisciplinaireTotale.value})),valeurConditionDisciplinaireTotale:He.a.createFormField(Object(at.a)({},e.valeurConditionDisciplinaireTotale,{value:e.valeurConditionDisciplinaireTotale.value})),rachatPartiel:He.a.createFormField(Object(at.a)({},e.rachatPartiel,{value:e.rachatPartiel.value})),maximumMontantRachatPartiel:He.a.createFormField(Object(at.a)({},e.maximumMontantRachatPartiel,{value:e.maximumMontantRachatPartiel.value})),nombreMaximumRachatPartiel:He.a.createFormField(Object(at.a)({},e.nombreMaximumRachatPartiel,{value:e.nombreMaximumRachatPartiel.value})),dureeMinimalSouscriptionAvantRachatPartiel:He.a.createFormField(Object(at.a)({},e.dureeMinimalSouscriptionAvantRachatPartiel,{value:e.dureeMinimalSouscriptionAvantRachatPartiel.value})),conditionDisciplinairePartiel:He.a.createFormField(Object(at.a)({},e.conditionDisciplinairePartiel,{value:e.conditionDisciplinairePartiel.value})),natureConditionDisciplinairePartiel:He.a.createFormField(Object(at.a)({},e.natureConditionDisciplinairePartiel,{value:e.natureConditionDisciplinairePartiel.value})),valeurConditionDisciplinairePartiel:He.a.createFormField(Object(at.a)({},e.valeurConditionDisciplinairePartiel,{value:e.valeurConditionDisciplinairePartiel.value}))}}})(wu),Nu=$e.a.Option,Ru=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).selectMultiple=function(e,t,a,n,i){var l=e;return r.a.createElement(He.a.Item,{label:i}," ",a(l,{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ...",onChange:t.handleChange},n.map(function(e){return r.a.createElement(Nu,{key:e.id,value:e.id,label:e.abb},e.libelle)}))))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.libelle&&""!==t.code&&""!==t.numeroHomologation&&""!==t.dateHomologation&&void 0!==t.periodicites&&Pu(Object(b.a)(Object(b.a)(a)),1)})},a.getAllPeriodicite=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:a=e.sent,t.setState({periodicite:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={current:1,periodicite:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPeriodicite(this)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.current;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},Ko,{id:"infoGenerales",onSubmit:this.handleSubmit}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations g\xe9n\xe9rales")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Libelle"},t("libelle",{rules:[{required:!0,message:"entrez la libelle"}]})(r.a.createElement(I.a,null))),$o("Frais gestion WAKALA","fraisGestion","%",t),$o("Frais d'acquisition","fraisAcquisition","%",t)),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},t("code",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null))),$o("TVA frais de gestion","tvaFraisGestion","%",t),$o("TVA frais d'acquisition","tvaFraisAcquisition","%",t)),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Homologation")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Num\xe9ro d'homologation"),hasFeedback:!0},t("numeroHomologation",{rules:[{required:!0,message:"enter le num\xe9ro d'homologation"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Date d'homologation"),hasFeedback:!0},t("dateHomologation",{rules:[{required:!0,message:"entrez la date d'homologation "}]})(r.a.createElement(Lt.a,{format:"DD-MM-YYYY",onChange:this.onChangeDate})))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"P\xe9riodicit\xe9")),r.a.createElement(xe.a,{span:24,offset:2},this.selectMultiple("periodicites",this,t,this.state.periodicite)),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,a>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return Du(e)}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"),1===a&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",style:{marginBottom:"25px",marginLeft:"10px"}},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})))))))}}]),t}(r.a.Component),qu=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{libelle:He.a.createFormField(Object(at.a)({},e.libelle,{value:e.libelle.value})),code:He.a.createFormField(Object(at.a)({},e.code,{value:e.code.value})),numeroHomologation:He.a.createFormField(Object(at.a)({},e.numeroHomologation,{value:e.numeroHomologation.value})),dateHomologation:He.a.createFormField(Object(at.a)({},e.dateHomologation,{value:e.dateHomologation.value})),periodicites:He.a.createFormField(Object(at.a)({},e.periodicites,{value:e.periodicites.value})),fraisGestion:He.a.createFormField(Object(at.a)({},e.fraisGestion,{value:e.fraisGestion.value})),fraisAcquisition:He.a.createFormField(Object(at.a)({},e.fraisAcquisition,{value:e.fraisAcquisition.value})),tvaFraisAcquisition:He.a.createFormField(Object(at.a)({},e.tvaFraisAcquisition,{value:e.tvaFraisAcquisition.value})),tvaFraisGestion:He.a.createFormField(Object(at.a)({},e.tvaFraisGestion,{value:e.tvaFraisGestion.value}))}}})(Ru),Vu=$e.a.Option,zu=[{name:"Epargne",value:"EPARGNE"},{name:"Retraite compl\xe9mentaire",value:"RETRAITE"}],Yu=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.numeroCompte&&""!==t.libelleCompte&&""!==t.dureeMinimalSouscription&&""!==t.montantMinContribution&&""!==t.tauxRendementAvantImposition&&""!==t.natureFiscale&&void 0!==t.poolInvestissment&&a.props.submit()})},a.onChangeNatureFiscale=function(e){a.setState({naturesFiscale:e})},a.onChangeAbattement=function(){var e=a.state.abattement;a.setState({abattement:!e})},a.handleChangeModeGestion=function(e){a.setState({modeGestionValue:e})},a.handleChangeModeCalcul=function(e){a.setState({modeCalculCapitalConstitueValue:e})},a.getAllPoolInvestissment=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zo();case 2:a=e.sent,t.setState({poolInvestissments:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={current:3,poolInvestissments:[],regimeFiscal:[{name:"Retraite compl\xe9mentaire",value:"RETRAITE"},{name:"Vie capitalisation",value:"VIE"}],modeGestion:[{name:"Moudaraba",value:"MOUDARABA"},{name:"WAKALABILISTITMAR",value:"WAKALABILISTITMAR"}],modeCalculCapitalConstitue:[{name:"M\xe9thode 1 \u2013 D\xe9but de p\xe9riode + cotisations du mois (non investies",value:"METHOD1"},{name:"M\xe9thode 2 \u2013 Fin de p\xe9riode",value:"METHOD2"}],modeGestionValue:"",naturesFiscale:"",visibilite:a.props.visibilite.value,renouvellementContratTaciteReconduction:a.props.renouvellementContratTaciteReconduction.value},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPoolInvestissment(this)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.current;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},Ko,{id:"steptwogenerale",onSubmit:this.handleSubmit}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations g\xe9n\xe9rales")),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"N\xb0 Compte Takaful"),hasFeedback:!0},t("numeroCompte",{rules:[{required:!0}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Intitul\xe9 du Compte Takaful"),hasFeedback:!0},t("libelleCompte",{rules:[{required:!0}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e minimale de souscription")},t("dureeMinimalSouscription",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois",type:"number"}))),r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Renouvellement par tacite reconduction")},t("renouvellementContratTaciteReconduction",{initialValue:this.state.renouvellementContratTaciteReconduction})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:this.state.renouvellementContratTaciteReconduction,onChange:this.onChange},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))),$o("Minimum de la contribution initiale","montantMinContribution","DH",t),$o("Taux de rendement cible avant imposition","tauxRendementAvantImposition","%",t)),r.a.createElement(xe.a,{span:13},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Mode de gestion"),hasFeedback:!0},t("modeGestion",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChangeModeGestion},this.state.modeGestion.map(function(e){return r.a.createElement(Vu,{value:e.value,label:e.value},e.name)})))),"WAKALABILISTITMAR"===this.state.modeGestionValue?$o("Frais fixe WakalabilIstithmar","fraisFixeWakalabilIstithmar","DH",t):null,"WAKALABILISTITMAR"===this.state.modeGestionValue?$o("Surperformance WakalabilIstithmar","surperformanceWakalabilIstithmar","%",t):null,"MOUDARABA"===this.state.modeGestionValue?$o("Profit Moudaraba","profitMoudaraba","%",t):null,r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Mode de calcul du capital constitu\xe9 revaloris\xe9"),hasFeedback:!0},t("modeCalculCapitalConstitue",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChangeModeCalcul},this.state.modeCalculCapitalConstitue.map(function(e){return r.a.createElement(Vu,{value:e.value,label:e.value},e.name)})))))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations fiscales")),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Pool d'investissement"),hasFeedback:!0},t("poolInvestissment",{rules:[{required:!0,message:"choisissez un pool "}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ..."},this.state.poolInvestissments.map(function(e){return r.a.createElement(Vu,{value:e.id,label:e.libelle},e.libelle)})))),r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nature fiscale du produit")},t("natureFiscale",{rules:[{required:!0,message:"entrez la nature fiscale"}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.onChangeNatureFiscale},zu.map(function(e){return r.a.createElement(Vu,{value:e.value,label:e.value},e.name)})))),"RETRAITE"===this.state.naturesFiscale?r.a.createElement(He.a.Item,{label:"Avec abattement"},t("visibilite",{initialValue:this.state.visibilite})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:this.state.visibilite,onChange:this.onChangeAbattement},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non")))):null,"RETRAITE"===this.state.naturesFiscale&&this.state.abattement?$o("Revenu global imposable","revenuGlobal","DH",t):null),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"R\xe9gime fiscale"),hasFeedback:!0},t("regimeFiscal",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.regimeFiscal.map(function(e){return r.a.createElement(Vu,{value:e.value,label:e.value},e.name)})))))),r.a.createElement(xe.a,{span:24,style:{marginTop:30}},a>0&&r.a.createElement(fe.a,{onClick:function(){return Du(e)}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"),3===a&&r.a.createElement(fe.a,{type:"primary",form:"steptwogenerale",htmlType:"submit",style:{marginLeft:8,marginBottom:25}},r.a.createElement(w.a,{type:"save"}),"Enregistrer")))))}}]),t}(r.a.Component),Bu=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{numeroCompte:He.a.createFormField(Object(at.a)({},e.numeroCompte,{value:e.numeroCompte.value})),libelleCompte:He.a.createFormField(Object(at.a)({},e.libelleCompte,{value:e.libelleCompte.value})),dureeMinimalSouscription:He.a.createFormField(Object(at.a)({},e.dureeMinimalSouscription,{value:e.dureeMinimalSouscription.value})),renouvellementContratTaciteReconduction:He.a.createFormField(Object(at.a)({},e.renouvellementContratTaciteReconduction,{value:e.renouvellementContratTaciteReconduction.value})),montantMinContribution:He.a.createFormField(Object(at.a)({},e.montantMinContribution,{value:e.montantMinContribution.value})),tauxRendementAvantImposition:He.a.createFormField(Object(at.a)({},e.tauxRendementAvantImposition,{value:e.tauxRendementAvantImposition.value})),poolInvestissment:He.a.createFormField(Object(at.a)({},e.poolInvestissment,{value:e.poolInvestissment.value})),natureFiscale:He.a.createFormField(Object(at.a)({},e.natureFiscale,{value:e.natureFiscale.value})),revenuGlobal:He.a.createFormField(Object(at.a)({},e.revenuGlobal,{value:e.revenuGlobal.value})),regimeFiscal:He.a.createFormField(Object(at.a)({},e.regimeFiscal,{value:e.regimeFiscal.value})),modeGestion:He.a.createFormField(Object(at.a)({},e.modeGestion,{value:e.modeGestion.value})),fraisFixeWakalabilIstithmar:He.a.createFormField(Object(at.a)({},e.fraisFixeWakalabilIstithmar,{value:e.fraisFixeWakalabilIstithmar.value})),surperformanceWakalabilIstithmar:He.a.createFormField(Object(at.a)({},e.surperformanceWakalabilIstithmar,{value:e.surperformanceWakalabilIstithmar.value})),profitMoudaraba:He.a.createFormField(Object(at.a)({},e.profitMoudaraba,{value:e.profitMoudaraba.value})),modeCalculCapitalConstitue:He.a.createFormField(Object(at.a)({},e.modeCalculCapitalConstitue,{value:e.modeCalculCapitalConstitue.value})),visibilite:He.a.createFormField(Object(at.a)({},e.visibilite,{value:e.visibilite.value}))}}})(Yu),Lu=$e.a.Option,Gu=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){""!==t.risque&&""!==t.categorie&&""!==t.partenaire&&Pu(Object(b.a)(Object(b.a)(a)),0)})},a.state={risques:[],categories:[],partenaire:[],current:0},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){}},{key:"componentDidMount",value:function(){this.getAllCategorie(),this.getAllPartenaires(),this.getAllRisque("EPARGNE")}},{key:"getAllPartenaires",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllRisque",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja(t);case 2:a=e.sent,this.setState({risques:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllCategorie",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa();case 2:t=e.sent,this.setState({categories:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.current;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({id:"formZero"},{labelCol:{xs:{span:12},sm:{span:6}},wrapperCol:{xs:{span:12}}},{onSubmit:this.handleSubmit}),r.a.createElement(xe.a,{span:7},r.a.createElement(He.a.Item,{label:"Risque : ",hasFeedback:!0},e("risque",{rules:[{required:!0,message:"Choisissez un risque"}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.risques.map(function(e){return r.a.createElement(Lu,{key:e.id,value:e.id,label:e.name},e.name)}))))),r.a.createElement(xe.a,{span:8},r.a.createElement(He.a.Item,{label:"Cat\xe9gorie : ",hasFeedback:!0},e("categorie",{rules:[{required:!0,message:"choisissez une cat\xe9gorie "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.categories.map(function(e){return r.a.createElement(Lu,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:9},r.a.createElement(He.a.Item,{label:"Interm\xe9diaire",hasFeedback:!0},e("partenaire",{rules:[{required:!0,message:"choisissez un interm\xe9diaire "}]})(r.a.createElement($e.a,{placeholder:"cliquez pour choisir un type",onChange:this.handleChangeSelect},this.state.partenaire.map(function(e){return r.a.createElement(Lu,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)}))))),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a.Item,null,0===t&&r.a.createElement(fe.a,{type:"primary",htmlType:"submit",style:{marginBottom:"25px"}},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})))))))}}]),t}(r.a.Component),Uu=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{risque:He.a.createFormField(Object(at.a)({},e.risque,{value:e.risque.value})),categorie:He.a.createFormField(Object(at.a)({},e.categorie,{value:e.categorie.value})),partenaire:He.a.createFormField(Object(at.a)({},e.partenaire,{value:e.partenaire.value}))}}})(Gu),Hu=Al.a.Step,Ku=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).checkCurrent=function(e){a.setState({current:e})},a.handleFormChange=function(e){a.setState(function(t){var a=t.fields;return{fields:Object(at.a)({},a,e)}})},a.submit=function(){var e,t=a.state.fields,n={};n.categorie={id:t.categorie.value},n.code=t.code.value,n.conditionDisciplinairePartiel=t.conditionDisciplinairePartiel.value,n.conditionDisciplinaireTotale=t.conditionDisciplinaireTotale.value,n.creationDate=Uo(new Date),n.dateHomologation=Ho(t.dateHomologation.value.toDate()),n.dateModification="",n.dureeMinimalSouscription=t.dureeMinimalSouscription.value,n.dureeMinimalSouscriptionAvantRachatPartiel=t.dureeMinimalSouscriptionAvantRachatPartiel.value,n.dureeMinimalSouscriptionAvantRachatTotal=t.dureeMinimalSouscriptionAvantRachatTotal.value,n.fraisAcquisition=t.fraisAcquisition.value,n.fraisFixeWakalabilIstithmar=t.fraisFixeWakalabilIstithmar.value,n.fraisGestion=t.fraisGestion.value,n.libelle=t.libelle.value,n.libelleCompte=t.libelleCompte.value,n.maximumMontantRachatPartiel=t.maximumMontantRachatPartiel.value,n.modeCalculCapitalConstitue=t.modeCalculCapitalConstitue.value,n.modeGestion=t.modeGestion.value,n.montantMinContribution=t.montantMinContribution.value,n.natureConditionDisciplinairePartiel=t.natureConditionDisciplinairePartiel.value,n.natureConditionDisciplinaireTotale=t.natureConditionDisciplinaireTotale.value,n.natureFiscale=t.natureFiscale.value,n.nombreMaximumRachatPartiel=t.nombreMaximumRachatPartiel.value,n.numeroCompte=t.numeroCompte.value,n.numeroHomologation=t.numeroHomologation.value,n.partenaire={id:t.partenaire.value},n.periodicites=t.periodicites.value.map(function(e){return{id:e}}),n.poolInvestissment=t.poolInvestissment.value.map(function(e){return{id:e}}),n.profitMoudaraba=t.profitMoudaraba.value,n.rachatPartiel=t.rachatPartiel.value,n.rachatTotal=t.rachatTotal.value,n.regimeFiscal=t.regimeFiscal.value,n.renouvellementContratTaciteReconduction=t.renouvellementContratTaciteReconduction.value,n.revenuGlobal=t.revenuGlobal.value,n.risque={id:t.risque.value},n.surperformanceWakalabilIstithmar=t.surperformanceWakalabilIstithmar.value,n.tauxRendementAvantImposition=t.tauxRendementAvantImposition.value,n.taxe=t.taxe.value,n.tvaFraisAcquisition=t.tvaFraisAcquisition.value,n.tvaFraisGestion=t.tvaFraisGestion.value,n.valeurConditionDisciplinairePartiel=t.valeurConditionDisciplinairePartiel.value,n.valeurConditionDisciplinaireTotale=t.valeurConditionDisciplinaireTotale.value,(e=n,localStorage.getItem(G)?ae({url:L+"/private/retraitproduit",data:e,method:"POST"}):Promise.reject("No access token set.")).then(function(e){u.a.open({message:"Votre Produit Retraite a \xe9t\xe9 bien cr\xe9e!",btn:i,duration:null})}).catch(function(e){u.a.open({message:"Erreur issue lors de la cr\xe9ation du produit : "+e.message})});var i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return window.open("/consultproduitretraite","_self")}},"Confirmer")},a.state={current:0,fields:{risque:{value:""},categorie:{value:""},partenaire:{value:""},libelle:{value:""},code:{value:""},numeroHomologation:{value:""},dateHomologation:{value:""},periodicites:{},fraisGestion:{value:""},fraisAcquisition:{value:""},tvaFraisGestion:{value:""},taxe:{value:""},tvaFraisAcquisition:{value:""},rachatTotal:{value:!1},dureeMinimalSouscriptionAvantRachatTotal:{value:""},conditionDisciplinaireTotale:{value:!1},natureConditionDisciplinaireTotale:{value:""},valeurConditionDisciplinaireTotale:{value:""},rachatPartiel:{value:!1},maximumMontantRachatPartiel:{value:""},nombreMaximumRachatPartiel:{value:""},dureeMinimalSouscriptionAvantRachatPartiel:{value:""},conditionDisciplinairePartiel:{value:!1},natureConditionDisciplinairePartiel:{value:""},valeurConditionDisciplinairePartiel:{value:""},numeroCompte:{value:""},libelleCompte:{value:""},dureeMinimalSouscription:{value:""},renouvellementContratTaciteReconduction:{value:!1},montantMinContribution:{value:""},tauxRendementAvantImposition:{value:""},poolInvestissment:{},natureFiscale:{value:""},revenuGlobal:{value:""},regimeFiscal:{value:""},modeGestion:{value:""},fraisFixeWakalabilIstithmar:{value:""},surperformanceWakalabilIstithmar:{value:""},profitMoudaraba:{value:""},modeCalculCapitalConstitue:{value:""},visibilite:{value:!1}}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.current,a=e.fields,n=[{title:"Etape 1",content:r.a.createElement(Uu,Object.assign({check:this.checkCurrent},a,{onChange:this.handleFormChange})),description:"Informations"},{title:"Etape 2",content:r.a.createElement(qu,Object.assign({check:this.checkCurrent},a,{onChange:this.handleFormChange})),description:"Informations g\xe9n\xe9rales"},{title:"Etape 3",content:r.a.createElement(Mu,Object.assign({check:this.checkCurrent},a,{onChange:this.handleFormChange})),description:"Modalit\xe9s de rachat"},{title:"Etape 4",content:r.a.createElement(Bu,Object.assign({check:this.checkCurrent},a,{onChange:this.handleFormChange,submit:this.submit})),description:"Param\xe8tres globaux"}];return r.a.createElement("div",null,r.a.createElement(lt,{title:"Nouveau produit investissement"}),r.a.createElement(Al.a,{current:t},n.map(function(e){return r.a.createElement(Hu,{key:e.title,title:e.title,description:e.description})})),r.a.createElement("div",{className:"steps-content-style"},n[t].content))}}]),t}(r.a.Component),Wu=(a(1067),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",auxiliaire:[]},a.columns=[{title:"Date D\xe9but",dataIndex:"dateDebut",key:"dateDebut"},{title:"Date Fin",dataIndex:"dateFin",key:"Date Fin"},{title:"Commission partenaire",dataIndex:"commissionPartenaire",key:"Commission partenaire"},{title:"TVA",dataIndex:"tva",key:"tva"}],a.columns2=[{title:"Age min",dataIndex:"ageMin",key:"ageMin"},{title:"Age max",dataIndex:"ageMax",key:"Age max"},{title:"Capital min",dataIndex:"capitalMin",key:"Capital min"},{title:"Capital Max",dataIndex:"capitalMax",key:"capitalMax"},{title:"Diff\xe9r\xe9 min",dataIndex:"differeMin",key:"differeMin"},{title:"Diff\xe9r\xe9 Max",dataIndex:"differeMax",key:"diff\xe9reMax"},{title:"Dur\xe9e Min",dataIndex:"dureeMin",key:"dureeMin"},{title:"Dur\xe9e Max",dataIndex:"dureeMax",key:"dureeMax"},{title:"Taux",dataIndex:"taux",key:"taux"}],a.columns3=[{title:"Age min",dataIndex:"ageMin",key:"ageMin"},{title:"Age max",dataIndex:"ageMax",key:"Age max"},{title:"Capital min",dataIndex:"capitalMin",key:"Capital min"},{title:"Capital Max",dataIndex:"capitalMax",key:"capitalMax"},{title:"Diff\xe9r\xe9 min",dataIndex:"differeMin",key:"differeMin"},{title:"Diff\xe9r\xe9 Max",dataIndex:"differeMax",key:"differeMax"},{title:"Dur\xe9e Min",dataIndex:"dureeMin",key:"dureeMin"},{title:"Dur\xe9e Max",dataIndex:"dureeMax",key:"dureeMax"},{title:"Forfait",dataIndex:"forfait",key:"forfait"}],a.columns1=[{title:"Type prestation",dataIndex:"typePrestation.libelle",key:"typePrestation.libelle"},{title:"Pi\xe8ces justificatives",key:"pieceJointe",dataIndex:"pieceJointe",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{key:e.id,color:"geekblue"},e.libelle)}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleReload",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this,t={labelCol:{span:10},wrapperCol:{span:12}};return r.a.createElement("div",{className:"person"},r.a.createElement(lt,{title:"Consultation Produit"}),r.a.createElement($u.Consumer,null,function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"D\xe9tails du produit : ",a.state.libelle),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.02)",marginBottom:"30px",marginTop:"10px"}},r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,t,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code"},r.a.createElement(I.a,{value:a.state.code})),r.a.createElement(He.a.Item,{label:"N\xb0 d'homologation"},r.a.createElement(I.a,{value:a.state.numeroHomologation})),r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9 minimale"},r.a.createElement(I.a,{value:a.state.differeMin,addonAfter:"Mois"})),r.a.createElement(He.a.Item,{label:"Age minimum"},r.a.createElement(I.a,{value:a.state.ageMin,addonAfter:"ANS"})),r.a.createElement(He.a.Item,{label:"Ech\xe9ance impay\xe9es \xe0 assurer"},r.a.createElement(I.a,{value:a.state.echeanceImpayees,addonAfter:"Mois"})),r.a.createElement(He.a.Item,{label:"Frais de gestion WAKALA"},r.a.createElement(I.a,{value:a.state.fraisGestion,addonAfter:"%"})),r.a.createElement(He.a.Item,{label:"Frais d'acquisition"},r.a.createElement(I.a,{value:a.state.fraisAcquisition,addonAfter:"%"})),r.a.createElement(He.a.Item,{label:"Seuil Conseil"},r.a.createElement(I.a,{value:a.state.seuilConseil,addonAfter:"DH"})),r.a.createElement(He.a.Item,{label:"Seuil prestation"},r.a.createElement(I.a,{value:a.state.seuilPrestation,addonAfter:"DH"})),r.a.createElement(He.a.Item,{label:"Taux taxe d'assurance"},r.a.createElement(I.a,{value:a.state.taxe,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Libelle"},r.a.createElement(I.a,{value:a.state.libelle})),r.a.createElement(He.a.Item,{label:"Date d'homologation"},r.a.createElement(I.a,{value:a.state.dateHomologation})),r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9 maximale"},r.a.createElement(I.a,{value:a.state.differeMax,addonAfter:"Mois"})),r.a.createElement(He.a.Item,{label:"Age maximum \xe0 la souscription"},r.a.createElement(I.a,{value:a.state.ageMax,addonAfter:"ANS"})),r.a.createElement(He.a.Item,{label:"Age maximum d'\xe9ligibilit\xe9"},r.a.createElement(I.a,{value:a.state.ageMaxEligibilite,addonAfter:"ANS"})),r.a.createElement(He.a.Item,{label:"TVA frais de gestion"},r.a.createElement(I.a,{value:a.state.tvaFraisGestion,addonAfter:"%"})),r.a.createElement(He.a.Item,{label:"TVA frais d'acquisition'"},r.a.createElement(I.a,{value:a.state.tvaFraisAcquisition,addonAfter:"%"})),r.a.createElement(He.a.Item,{label:"Seuil examinateur"},r.a.createElement(I.a,{value:a.state.seuilExaminateur,addonAfter:"DH"})),r.a.createElement(He.a.Item,{label:"Seuil R\xe9assurance"},r.a.createElement(I.a,{value:a.state.seuilReassurance,addonAfter:"DH"}))))),r.a.createElement(xe.a,{span:8},r.a.createElement("h3",null,"P\xe9riodicit\xe9s"),r.a.createElement(o.a,{style:{marginBottom:"3px",marginTop:"10px",width:"5%"}}),a.state.periodicites.map(function(e){return r.a.createElement(et.a,{key:e.id,color:"geekblue",style:{margin:"20px 4px"}},e.libelle)})),r.a.createElement(xe.a,{span:8},r.a.createElement("h3",null,"Exclusions"),r.a.createElement(o.a,{style:{marginBottom:"3px",marginTop:"10px"}}),a.state.exclusions.map(function(e){return r.a.createElement(et.a,{key:e.id,color:"purple",style:{margin:"20px 4px"}},e.exclusionNom)})),r.a.createElement(xe.a,{span:8},r.a.createElement("h3",null,"Points de Vente"),r.a.createElement(o.a,{style:{marginBottom:"3px",marginTop:"10px"}}),a.state.pointVentes.map(function(e){return r.a.createElement(et.a,{key:e.id,color:"cyan",style:{margin:"20px 4px"}},e.libelle)}))),r.a.createElement("h3",null,"Commisssions"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.02)",marginBottom:"30px",marginTop:"10px"}},r.a.createElement(xe.a,{span:24},r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns,dataSource:a.state.commissions,pagination:!1}))),r.a.createElement("h3",null,"Types de prestations"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.02)",marginBottom:"30px",marginTop:"10px"}},r.a.createElement(xe.a,{span:24},r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns1,dataSource:a.state.prestations,pagination:!1}))),r.a.createElement("h3",null,"Tarifications"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.02)",marginBottom:"30px",marginTop:"10px"}},null===a.state.tarrifications[0].forfait?r.a.createElement(xe.a,{span:24},r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns2,dataSource:a.state.tarrifications,pagination:!1})):r.a.createElement(xe.a,{span:24},r.a.createElement(Je.a,{rowClassName:"editable-row",columns:e.columns3,dataSource:a.state.tarrifications,pagination:!1}))))}),r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:function(){return e.handleReload()}},r.a.createElement(w.a,{type:"arrow-left"}),"Retour"))}}]),t}(n.Component)),$u=r.a.createContext(),_u=[],Ju=[],Qu=[],Xu=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).rechercheDecesProduit=function(){Wa().then(function(e){var t=[];e.data.content.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrect. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})})},a.handleClick=function(e){a.setState({visible:!0,isEdit:!0,record:e})},a.handleClicked=function(e){a.setState({isEdited:!0,keyRecord:e.id}),_u=[],Ju=[],Qu=[],e.exclusions.map(function(e){return _u.push(e.id)}),e.periodicites.map(function(e){return Ju.push(e.id)}),e.pointVentes.map(function(e){return Qu.push(e.id)}),a.props.form.setFieldsValue({risqueId:e.risque.id,categorieId:e.categorie.id,code:e.code,libelle:e.libelle,differeMin:e.differeMin,differeMax:e.differeMax,ageMin:e.ageMin,ageMax:e.ageMax,montantAccessoire:e.montantAccessoire,taxe:e.taxe,fraisGestion:e.fraisGestion,fraisAcquisition:e.fraisAcquisition,codeExoneration:e.codeExoneration})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.onClose=function(){a.setState({isEdited:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=[];t.exclusions.forEach(function(e){n.push({id:e})}),t.exclusions=[].concat(n);var r=[];t.periodicites.forEach(function(e){r.push({id:e})}),t.periodicites=[].concat(r);var i=[];t.pointVentes.forEach(function(e){i.push({id:e})}),t.pointVentes=[].concat(i),a.updateproduct(a.state.keyRecord,t)}})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",isEdit:!1,isEdited:!1,periodicite:[],exclusion:[],pointVente:[],risques:[],categories:[]},a.columns=[Object(at.a)({title:"Code",dataIndex:"code",key:"code"},Et("code","Code",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Libell\xe9",dataIndex:"libelle",key:"libelle"},Et("libelle","Libelle",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Date cr\xe9ation",dataIndex:"creationDate",key:"creation_date"},Et("creationDate","Date creation",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Risque ",dataIndex:"risque.libelle",key:"risque"},Et("risque","risque",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Cat\xe9gorie ",dataIndex:"categorie.libelle",key:"categorie"},Et("categorie","Categorie",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Date modification ",dataIndex:"dateModification",key:"dateModification"},Et("dateModification","dateModification",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",align:"center",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(z.a,{to:{pathname:"/Modification",state:{record:t}}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement("a",{href:"#top",onClick:function(){return a.handleClick(t)}},r.a.createElement(w.a,{type:"profile",style:{color:"rgb(109, 143, 204)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPeriodicite(),this.getAllExclusion(),this.getAllPointVentes(),this.getAllRisque(),this.getAllCategorie(),this.rechercheDecesProduit()}},{key:"getAllRisque",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja();case 2:t=e.sent,this.setState({risques:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllCategorie",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa();case 2:t=e.sent,this.setState({categories:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllExclusion",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un();case 2:t=e.sent,this.setState({exclusion:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllPointVentes",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt();case 2:t=e.sent,this.setState({pointVente:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateproduct",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$a(t,a);case 3:200===e.sent.status&&(this.onClose(),u.a.success({message:"la modification est bien faite"}),window.location.reload()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement($u.Provider,{value:{state:this.state.record}},this.state.isEdit?r.a.createElement(Wu,null):r.a.createElement("div",null,r.a.createElement(lt,{title:"Param\xe9trage produit"}),r.a.createElement(fe.a,{type:"primary",className:"add-button nouveau-btn"},r.a.createElement(z.a,{to:"/produitDeces"},r.a.createElement(w.a,{type:"plus"})," Nouveau produit")),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}))))}}]),t}(n.Component),Zu=He.a.create()(Xu),em=$e.a.Option,tm=I.a.TextArea,am=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={honoraires:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterExamens(t)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.record.contrat.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){t.typeAuxiliaireHon.libelle===J&&e.push({label:t.libelle,value:t.id})})}),this.setState({honoraires:[].concat(e)})}},{key:"ajouterExamens",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.dateAnalyse=t.dateAnalyse.format("YYYY-MM-DD"),t.dateReception=t.dateReception.format("YYYY-MM-DD"),t.laboratoire={id:t.laboratoire},t.acceptation=this.props.record,e.next=7,l=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-examens",data:l,method:"POST"}):Promise.reject("No access token set.");case 7:return a=e.sent,n=[{id:t.tests}],r={acceptationExamens:{id:a.data.id},acceptation:{id:this.props.record.id},honoraires:n},e.next=12,al(r);case 12:i=e.sent,200===a.status&&200===i.status&&(this.props.parentCallback(i.data),u.a.success({message:"bien ajout\xe9"})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 19:case"end":return e.stop()}var l},e,this,[[0,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return r.a.createElement(He.a,Object.assign({hideRequiredMark:!0},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(He.a.Item,{label:"Laboratoire",hasFeedback:!0},e("laboratoire",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un laboratoire"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.props.laboratoires.map(function(e){return r.a.createElement(em,{value:e.id,label:e.nom},e.nom)})))),r.a.createElement(He.a.Item,{label:"Date Analyse",hasFeedback:!0},e("dateAnalyse",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date d'analyse"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Date r\xe9ception",hasFeedback:!0},e("dateReception",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date de r\xe9ception"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Test M\xe9dical",hasFeedback:!0},e("tests",{valuePropName:"selected",rules:[{message:"s\xe9lectionnez un Test M\xe9dical"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.state.honoraires.map(function(e){return r.a.createElement(em,{value:e.value,label:e.label},e.label)})))),r.a.createElement(He.a.Item,{label:"Observations",hasFeedback:!0},e("observations")(r.a.createElement(tm,{rows:4}))),r.a.createElement(He.a.Item,t,r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Ajouter")))}}]),t}(n.Component),nm=He.a.create()(am);function rm(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return im(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return im(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function im(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var lm=$e.a.Option,sm=I.a.TextArea,om=r.a.createContext(),cm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){if("laboratoire"===a.props.inputType)return r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.laboratoires.map(function(e){return r.a.createElement(lm,{value:e.id,label:e.nom},e.nom)}));if("date analyse"===a.props.inputType||"date r\xe9ception"===a.props.inputType)return r.a.createElement(Lt.a,{className:"date-style"});if("Test Medical"===a.props.inputType){var e=[];return a.props.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){t.typeAuxiliaireHon.libelle===J&&e.push({value:t.id,label:t.libelle})})}),r.a.createElement($e.a,{style:{width:"100%"},labelInValue:!0},e.map(function(e){return r.a.createElement(lm,{key:e.id,value:e.value,label:e.label},e.label)}))}return r.a.createElement(sm,{rows:2})},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.testsMedical,u=n.children,m=Object(Ke.a)(n,["editing","dataIndex","title","record","testsMedical","children"]);return i&&"Test Medical"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("honoraires",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:c})(a.getInput()))):i&&"observations"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("observations",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l][s]})(a.getInput()))):i&&"laboratoire"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("laboratoire",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].laboratoire.id,label:o[l].laboratoire.nom}})(a.getInput()))):i&&"date r\xe9ception"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateReception",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l].dateReception)})(a.getInput()))):i&&"date analyse"===s?(Kt()(o[l].dateAnalyse),r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateAnalyse",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l].dateAnalyse)})(a.getInput())))):r.a.createElement("td",m,u)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(om.Consumer,null,this.renderCell)}}]),t}(n.Component),um=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateTestMedical=function(e,t){nl(e,t).then(function(e){200===e.status&&u.a.success({message:"acceptation Examens Complementaire bien modifier !"})}).catch(function(e){"wrong data"===e.response.data.message?u.a.error({message:"acception Examens Complementaire ne ce trouve pas"}):u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose a mal tourn\xe9. Veuillez r\xe9essayer!"})})},a.state={data:[],editingKey:"",testsMedical:[]},a.columns=[{title:"laboratoire",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,e.laboratoire.nom)}},{title:"date analyse",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateAnalyse).format("YYYY-MM-DD"))}},{title:"date r\xe9ception",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateReception).format("YYYY-MM-DD"))}},{title:"observations",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,e.observations)}},{title:"Test Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}},{title:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(om.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"\xeates-vous certain de vouloir annuler?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Annuler"))):r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){return a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i],s=[{id:n.honoraires.key,libelle:n.honoraires.label}];delete n.honoraires,n.dateAnalyse=n.dateAnalyse.format("YYYY-MM-DD"),n.dateReception=n.dateReception.format("YYYY-MM-DD"),n.laboratoire={id:n.laboratoire.key,nom:n.laboratoire.label};var o={acceptationExamens:Object(at.a)({},l.acceptationExamens,n),honoraires:s};r.splice(i,1,Object(at.a)({},l,o)),a.setState({data:r,editingKey:""}),a.updateTestMedical(l.id,Object(at.a)({},l,o))}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e});var t=Object(tt.a)(this.state.data),a=t.findIndex(function(t){return e===t.key});if(a>-1){var n=t[a],r=[];n.honoraires.forEach(function(e){r.push({key:e.id,value:e.id,label:e.libelle})}),this.setState({testsMedical:[].concat(r)})}}},{key:"acceptationExamensComplementaire",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i(t);case 2:a=e.sent,n=[],r=rm(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return l=i.value,e.next=11,tl(t,l.id);case 11:s=e.sent,o={key:s.data.id},c=Object(at.a)({},s.data,o),n.push(c);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this.setState({data:[].concat(n)});case 26:case"end":return e.stop()}},e,this,[[5,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationExamensComplementaire(this.props.record.id)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.dataTable!==e.dataTable){var a=Object(tt.a)(this.state.data);a.push(this.props.dataTable),this.setState({data:Object(tt.a)(a)})}}},{key:"render",value:function(){var e=this,t={body:{cell:cm}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.title,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a),laboratoires:e.props.laboratoires,produit:e.props.record.contrat.produit,testsMedical:e.state.testsMedical}}}):t});return r.a.createElement(om.Provider,{value:this.props.form},r.a.createElement(Je.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}}))}}]),t}(n.Component),mm=He.a.create()(um),dm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={laboratoires:[],data:null},a.handleCallback=function(e){a.setState({data:e})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.AuxiliairesByType(J)}},{key:"AuxiliairesByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa(t);case 2:a=e.sent,this.setState({laboratoires:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(nm,{parentCallback:this.handleCallback,laboratoires:this.state.laboratoires,record:this.props.record}),r.a.createElement(mm,{dataTable:this.state.data,laboratoires:this.state.laboratoires,record:this.props.record}))}}]),t}(n.Component),pm=$e.a.Option,hm=I.a.TextArea,fm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={honoraires:[],listOnglets:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterLaboratoire(t)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.record.contrat.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){t.typeAuxiliaireHon.libelle===$&&e.push({label:t.libelle,value:t.id})})}),this.setState({honoraires:[].concat(e)})}},{key:"jasperLettreAcceptation",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"ajouterLaboratoire",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,i,l,s,o,c,m,d,p;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.verdict.label,t.dateVisite=t.dateVisite.format("YYYY-MM-DD"),t.dateReception=t.dateReception.format("YYYY-MM-DD"),t.medecin={id:t.medecin},t.verdict={id:t.verdict.key,status:t.verdict.label},t.acceptation=this.props.record,e.next=9,h=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-examinateur",data:h,method:"POST"}):Promise.reject("No access token set.");case 9:return n=e.sent,"Acceptation au tarif normal"===a&&(i="open".concat(Date.now()),l=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(i)}},"Confirmer"),u.a.success({message:"CONTRAT ACCEPTER",description:" CONTRAT NUMERO     : "+n.data.acceptation.contrat.numeroContrat,btn:l,duration:0,key:i}),s={intermediaire:this.props.record.contrat.produit.partenaire.raisonSocial,nom:this.props.record.contrat.assure.nom+" "+this.props.record.contrat.assure.prenom,agence:this.props.record.contrat.pointVente.libelle,numeroAcceptation:this.props.record.code,montantMourabaha:this.props.record.contrat.capitalAssure,encours:this.props.record.encours,cumul:this.props.record.cumul,duree:this.props.record.contrat.dureeContrat,differe:this.props.record.contrat.differe,montantCotisation:this.props.record.contrat.montantCotisation},console.log("request :",s),this.jasperLettreAcceptation(s)),o=[],t.tests.forEach(function(e){var t={id:e};o.push(t)}),c={acceptationExaminateur:{id:n.data.id},acceptation:{id:this.props.record.id},honoraires:o},e.next=16,al(c);case 16:return m=e.sent,e.next=19,Hi({acceptationTestMedical:{id:m.data.id},etape:"examinateur",dateVerdict:Kt()().format("YYYY-MM-DD"),verdict:t.verdict});case 19:d=e.sent,200===n.status&&200===m.status&&200===d.status&&(this.props.parentCallback(m.data),u.a.success({message:"bien ajout\xe9"}),p=Object(tt.a)(this.state.listOnglets),"Expertise m\xe9decin conseil"===a&&(p.push({key:"medecinConseil",tab:"M\xe9decin Conseil"}),this.setState({listOnglets:Object(tt.a)(p)}),this.props.onglet(p)),"R\xe9assurance"===a&&(p.push({key:"reassurance",tab:"R\xe9assurance"}),this.setState({listOnglets:Object(tt.a)(p)}),this.props.onglet(p))),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 26:case"end":return e.stop()}var h},e,this,[[0,23]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return r.a.createElement(He.a,Object.assign({hideRequiredMark:!0},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(He.a.Item,{label:"Medecin",hasFeedback:!0},e("medecin",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un medecin"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.props.medecins.map(function(e){return r.a.createElement(pm,{key:e.id,value:e.id,label:e.nom},e.nom)})))),r.a.createElement(He.a.Item,{label:"Date Visite",hasFeedback:!0},e("dateVisite",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date de visite"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Date r\xe9ception",hasFeedback:!0},e("dateReception",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date de r\xe9ception"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Tests M\xe9dicaux"},e("tests",{valuePropName:"checked"})(r.a.createElement(Rn.a.Group,{style:{width:"100%"}},r.a.createElement(ye.a,null,this.state.honoraires.map(function(e){return r.a.createElement(xe.a,{span:8},r.a.createElement(Rn.a,{value:e.value,label:e.label},e.label))}))))),r.a.createElement(He.a.Item,{label:"Observations",hasFeedback:!0},e("observation")(r.a.createElement(hm,{rows:4}))),r.a.createElement(He.a.Item,{label:"Verdict",hasFeedback:!0},e("verdict",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un verdict"}]})(r.a.createElement($e.a,{labelInValue:!0,placeholder:"s\xe9lectionnez"},this.props.verdicts.map(function(e){return r.a.createElement(pm,{key:e.id,value:e.id,label:e.status},e.status)})))),r.a.createElement(He.a.Item,{label:"Observation verdict",hasFeedback:!0},e("observationsVerdict")(r.a.createElement(hm,{rows:4}))),r.a.createElement(He.a.Item,t,r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Ajouter")))}}]),t}(n.Component),bm=He.a.create()(fm);function Em(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return vm(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return vm(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var gm=$e.a.Option,ym=I.a.TextArea,Cm=r.a.createContext(),xm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){if("Medecin"===a.props.inputType)return r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.medecins.map(function(e){return r.a.createElement(gm,{key:e.id,value:e.id,label:e.nom},e.nom)}));if("Verdict"===a.props.inputType)return r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.verdicts.map(function(e){return r.a.createElement(gm,{key:e.id,value:e.id,label:e.status},e.status)}));if("Date visite"===a.props.inputType||"Date r\xe9ception"===a.props.inputType)return r.a.createElement(Lt.a,{className:"date-style"});if("Tests Medical"===a.props.inputType){var e=[];return a.props.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){t.typeAuxiliaireHon.libelle===$&&e.push({value:t.id,label:t.libelle})})}),r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},labelInValue:!0},e.map(function(e){return r.a.createElement(gm,{key:e.id,value:e.value,label:e.label},e.label)}))}return"Observations"===a.props.inputType||"Observation verdict"===a.props.inputType?r.a.createElement(ym,{rows:2}):r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.testsMedical,u=n.children,m=Object(Ke.a)(n,["editing","dataIndex","title","record","testsMedical","children"]);return i&&"Tests Medical"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("honoraires",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:c})(a.getInput()))):i&&"Observations"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("observation",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].observation})(a.getInput()))):i&&"Motif"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("motif",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].motif})(a.getInput()))):i&&"Observation verdict"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("observationsVerdict",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].observationsVerdict})(a.getInput()))):i&&"Medecin"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("medecin",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].medecin.id,label:o[l].medecin.nom}})(a.getInput()))):i&&"Verdict"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("verdict",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].verdict.id,label:o[l].verdict.status}})(a.getInput()))):i&&"Date r\xe9ception"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateReception",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l].dateReception)})(a.getInput()))):i&&"Date visite"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateVisite",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l].dateVisite)})(a.getInput()))):r.a.createElement("td",m,u)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(Cm.Consumer,null,this.renderCell)}}]),t}(n.Component),Sm=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateTestMedical=function(e,t){nl(e,t).then(function(e){200===e.status&&u.a.success({message:"acceptation Examinateur bien modifier !"})}).catch(function(e){"wrong data"===e.response.data.message?u.a.error({message:"acception Examinateur ne ce trouve pas"}):u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose a mal tourn\xe9. Veuillez r\xe9essayer!"})})},a.state={data:[],editingKey:"",testsMedical:[],listOnglets:[]},a.columns=[{title:"Medecin",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.medecin.nom)}},{title:"Date visite",dataIndex:"acceptationExaminateur",render:function(e){return r.a.createElement("span",null,e.dateVisite)}},{title:"Date r\xe9ception",dataIndex:"acceptationExaminateur",render:function(e){return r.a.createElement("span",null,e.dateReception)}},{title:"Observations",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.observation)}},{title:"Verdict",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.verdict.status)}},{title:"Observation verdict",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.observationsVerdict)}},{title:"Tests Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}},{title:"Operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(Cm.Consumer,null,function(e){return r.a.createElement("a",{onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"\xeates-vous certain de vouloir annuler??",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",null,"Annuler"))):r.a.createElement("a",{disabled:""!==n,onClick:function(){return a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i],s=[];n.honoraires.forEach(function(e){s.push({id:e.key,libelle:e.label})}),delete n.honoraires,n.medecin={id:n.medecin.key,nom:n.medecin.label},n.verdict={id:n.verdict.key,status:n.verdict.label};var o={acceptationExaminateur:Object(at.a)({},l.acceptationExaminateur,n),honoraires:s};r.splice(i,1,Object(at.a)({},l,o)),a.setState({data:r,editingKey:""}),a.updateTestMedical(l.id,Object(at.a)({},l,o))}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e});var t=Object(tt.a)(this.state.data),a=t.findIndex(function(t){return e===t.key});if(a>-1){var n=t[a],r=[];n.honoraires.forEach(function(e){r.push({key:e.id,value:e.id,label:e.libelle})}),this.setState({testsMedical:[].concat(r)})}}},{key:"acceptationsExaminateur",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c,u;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wi(t);case 2:a=e.sent,n=[],r=Em(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=20;break}return l=i.value,e.next=11,Zi(t,l.id);case 11:s=e.sent,o=Object(tt.a)(this.state.listOnglets),"Expertise m\xe9decin conseil"===s.data.acceptationExaminateur.verdict.status&&(o.push({key:"medecinConseil",tab:"M\xe9decin Conseil"}),this.setState({listOnglets:Object(tt.a)(o)}),this.props.onglet(o)),"R\xe9assurance"===s.data.acceptationExaminateur.verdict.status&&(o.push({key:"reassurance",tab:"R\xe9assurance"}),this.setState({listOnglets:Object(tt.a)(o)}),this.props.onglet(o)),c={key:s.data.id},u=Object(at.a)({},s.data,c),n.push(u);case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:this.setState({data:[].concat(n)});case 29:case"end":return e.stop()}},e,this,[[5,22,25,28]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsExaminateur(this.props.record.id)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.dataTable!==e.dataTable){var a=Object(tt.a)(this.state.data);a.push(this.props.dataTable),this.setState({data:Object(tt.a)(a)})}}},{key:"render",value:function(){var e=this,t={body:{cell:xm}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.title,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a),medecins:e.props.medecins,produit:e.props.record.contrat.produit,testsMedical:e.state.testsMedical,verdicts:e.props.verdicts}}}):t});return r.a.createElement(Cm.Provider,{value:this.props.form},r.a.createElement(Je.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}}))}}]),t}(n.Component),km=He.a.create()(Sm),Im=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={medecins:[],verdicts:[],tabListNoTitle:[],data:null},a.handleCallback=function(e){a.setState({data:e})},a.acctivatedOnglet=function(e){var t=Object(tt.a)(a.state.tabListNoTitle),n=Object(tt.a)(e),r=!1,i=!1;t.forEach(function(e){"medecinConseil"===e.key&&(r=!0),"reassurance"===e.key&&(i=!0)}),r&&(n=e.filter(function(e){return"medecinConseil"!==e.key})),i&&(n=e.filter(function(e){return"reassurance"!==e.key})),i&&r&&(n=e.filter(function(e){return"reassurance"!==e.key&&"medecinConseil"!==e.key})),a.setState({tabListNoTitle:[].concat(Object(tt.a)(t),Object(tt.a)(n))}),a.props.onglet(a.state.tabListNoTitle)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.AuxiliairesByType($),this.VerdictByType("examinateur")}},{key:"AuxiliairesByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa(t);case 2:a=e.sent,this.setState({medecins:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"VerdictByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(t);case 2:a=e.sent,this.setState({verdicts:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(bm,{parentCallback:this.handleCallback,onglet:this.acctivatedOnglet,verdicts:this.state.verdicts,medecins:this.state.medecins,record:this.props.record}),r.a.createElement(km,{dataTable:this.state.data,onglet:this.acctivatedOnglet,verdicts:this.state.verdicts,medecins:this.state.medecins,record:this.props.record}))}}]),t}(n.Component);function Om(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return jm(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return jm(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Tm=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).edit=function(){var e,t=[],n=Om(a.state.normes.honoraires);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.libelle)}}catch(s){n.e(s)}finally{n.f()}var i=t.toString();console.log("listNorme:",a.state.normes);var l={ville:a.props.record.contrat.souscripteur.adressVille,nomPrenom:a.props.record.contrat.souscripteur.nom+" "+a.props.record.contrat.souscripteur.prenom,cin:a.props.record.contrat.souscripteur.cin,montantFinancement:a.props.record.contrat.capitalAssure,montantEncours:a.props.record.encours,montantCumul:a.props.record.cumul,differe:a.props.record.contrat.differe,duree:a.props.record.contrat.dureeContrat,taux:a.props.record.contrat.tauxInteret,intermediaire:a.props.record.contrat.produit.partenaire.raisonSocial,agence:a.props.record.contrat.pointVente.libelle,norme:i,dateNaissance:a.props.record.contrat.souscripteur.dateNaissance,pointVenteVille:a.props.record.contrat.pointVente.adressVille,examinateurId:a.props.record.contrat.orientation};a.jasperLettre(l)},a.state={normes:{}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"jasperLettre",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"normeCapitalAge",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){var r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra(t,a,n);case 2:r=e.sent,this.setState({normes:r.data});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Kt()().diff(Kt()(this.props.record.contrat.souscripteur.dateNaissance,"DD-MM-YYYY").format(),"years");this.normeCapitalAge(e,this.props.record.contrat.capitalAssure,this.props.record.contrat.produit.id)}},{key:"render",value:function(){var e=this,t=this.props.record,a=Kt()().diff(Kt()(t.contrat.assure.dateNaissance,"DD-MM-YYYY").format(),"years");return r.a.createElement("div",null,r.a.createElement(En.a,{size:"middle",title:"Produit",bordered:!0},r.a.createElement(En.a.Item,{label:"Partenaire"},t.contrat.produit.partenaire.libelle),r.a.createElement(En.a.Item,{label:"Produit"},t.contrat.produit.libelle),r.a.createElement(En.a.Item,{label:"Agence"},t.contrat.pointVente.libelle),r.a.createElement(En.a.Item,{label:"Interm\xe9diaire"},t.contrat.produit.partenaire.raisonSocial)),r.a.createElement("br",null),r.a.createElement(En.a,{size:"middle",title:"Information contribuant",bordered:!0},r.a.createElement(En.a.Item,{label:"Date de naissance"},t.contrat.assure.dateNaissance),r.a.createElement(En.a.Item,{label:"Nom assur\xe9"},t.contrat.assure.nom),r.a.createElement(En.a.Item,{label:"Prenom assur\xe9"},t.contrat.assure.prenom),r.a.createElement(En.a.Item,{label:"CIN"},t.contrat.assure.cin),r.a.createElement(En.a.Item,{label:"Date de creation",span:2},t.contrat.assure.creationDate),r.a.createElement(En.a.Item,{label:"N Compte Bancaire",span:3},t.contrat.assure.rib),r.a.createElement(En.a.Item,{label:"Age"},a),r.a.createElement(En.a.Item,{label:"Observation"},t.contrat.observation)),r.a.createElement("br",null),r.a.createElement(En.a,{size:"middle",title:"D\xe9tail",bordered:!0},r.a.createElement(En.a.Item,{label:"Montant Financement(DH)"},t.contrat.capitalAssure),r.a.createElement(En.a.Item,{label:"L'encours(DH)"},t.encours),r.a.createElement(En.a.Item,{label:"Cumul(DH)"},t.cumul),r.a.createElement(En.a.Item,{label:"Dur\xe9e(mois)"},t.contrat.dureeContrat),r.a.createElement(En.a.Item,{label:"Diff\xe9r\xe9(mois)",span:2},t.contrat.differe),r.a.createElement(En.a.Item,{label:"N\xb0 dossier de financement",span:3},t.numeroDeDossier),r.a.createElement(En.a.Item,{label:"Code Acceptation"},t.code)),r.a.createElement("br",null),r.a.createElement(En.a,{size:"middle",title:"Prime",bordered:!0},r.a.createElement(En.a.Item,{label:"p\xe9riodicit\xe9"},t.contrat.periodicite.libelle),r.a.createElement(En.a.Item,{label:"Cotisation au tarif normal"},t.contrat.montantCotisation),r.a.createElement(En.a.Item,{label:"Surprime"},t.contrat.tauxSurprime),r.a.createElement(En.a.Item,{label:"Cotisation avec surprime"},t.contrat.montantSurprime)),r.a.createElement("br",null),"WAITING_ACCEPTATION"===t.contrat.status&&r.a.createElement(En.a,{size:"middle",title:"Fichiers"},r.a.createElement(En.a.Item,{label:"Lettre d'orientation "},r.a.createElement(fe.a,{onClick:function(){return e.edit()}},r.a.createElement(w.a,{type:"upload"}),"T\xe9l\xe9charger"))))}}]),t}(n.Component),Am=$e.a.Option,Pm=I.a.TextArea,Dm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={honoraires:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterLaboratoire(t)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.record.contrat.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){"LABORATOIRE"===t.typeAuxiliaireHon.libelle&&e.push({label:t.libelle,value:t.id})})}),this.setState({honoraires:[].concat(e)})}},{key:"ajouterLaboratoire",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.dateAnalyse=t.dateAnalyse.format("YYYY-MM-DD"),t.dateReception=t.dateReception.format("YYYY-MM-DD"),t.laboratoire={id:t.laboratoire},t.acceptation=this.props.record,e.next=7,l=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-laboratoire",data:l,method:"POST"}):Promise.reject("No access token set.");case 7:return a=e.sent,n=[],t.tests.forEach(function(e){var t={id:e};n.push(t)}),r={acceptationLaboratoire:{id:a.data.id},acceptation:{id:this.props.record.id},honoraires:n},e.next=13,al(r);case 13:i=e.sent,200===a.status&&200===i.status&&(this.props.parentCallback(i.data),u.a.success({message:"bien ajout\xe9"})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 20:case"end":return e.stop()}var l},e,this,[[0,17]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return r.a.createElement(He.a,Object.assign({hideRequiredMark:!0},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(He.a.Item,{label:"Laboratoire",hasFeedback:!0},e("laboratoire",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un laboratoire"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.props.laboratoires.map(function(e){return r.a.createElement(Am,{value:e.id,label:e.raisonSociale},e.raisonSociale)})))),r.a.createElement(He.a.Item,{label:"Date Analyse",hasFeedback:!0},e("dateAnalyse",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date d'analyse"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Date r\xe9ception",hasFeedback:!0},e("dateReception",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date de r\xe9ception"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Tests M\xe9dicaux"},e("tests",{valuePropName:"checked"})(r.a.createElement(Rn.a.Group,{style:{width:"100%"}},r.a.createElement(ye.a,null,this.state.honoraires.map(function(e){return r.a.createElement(xe.a,{span:8},r.a.createElement(Rn.a,{value:e.value,label:e.label},e.label))}))))),r.a.createElement(He.a.Item,{label:"Observations",hasFeedback:!0},e("observations")(r.a.createElement(Pm,{rows:4}))),r.a.createElement(He.a.Item,t,r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Ajouter")))}}]),t}(n.Component),Fm=He.a.create()(Dm);function wm(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Mm(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Mm(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Nm=$e.a.Option,Rm=I.a.TextArea,qm=r.a.createContext(),Vm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){if("laboratoire"===a.props.inputType)return r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.laboratoires.map(function(e){return r.a.createElement(Nm,{key:e.id,value:e.id,label:e.nom},e.nom)}));if("date analyse"===a.props.inputType||"date r\xe9ception"===a.props.inputType)return r.a.createElement(Lt.a,{className:"date-style"});if("Tests Medical"===a.props.inputType){var e=[];return a.props.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){t.typeAuxiliaireHon.libelle===J&&e.push({value:t.id,label:t.libelle})})}),r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},labelInValue:!0},e.map(function(e){return r.a.createElement(Nm,{key:e.id,value:e.value,label:e.label},e.label)}))}return r.a.createElement(Rm,{rows:2})},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.testsMedical,u=n.children,m=Object(Ke.a)(n,["editing","dataIndex","title","record","testsMedical","children"]);return i&&"Tests Medical"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("honoraires",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:c})(a.getInput()))):i&&"observations"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("observations",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l][s]})(a.getInput()))):i&&"laboratoire"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("laboratoire",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].laboratoire.id,label:o[l].laboratoire.nom}})(a.getInput()))):i&&"date r\xe9ception"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateReception",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l].dateReception)})(a.getInput()))):i&&"date analyse"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateAnalyse",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l].dateAnalyse)})(a.getInput()))):r.a.createElement("td",m,u)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(qm.Consumer,null,this.renderCell)}}]),t}(n.Component),zm=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateTestMedical=function(e,t){nl(e,t).then(function(e){200===e.status&&u.a.success({message:"acceptation laboratoire bien modifier !"})}).catch(function(e){"wrong data"===e.response.data.message?u.a.error({message:"acception laboratoire ne ce trouve pas"}):u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose a mal tourn\xe9. Veuillez r\xe9essayer!"})})},a.state={data:[],editingKey:"",testsMedical:[]},a.columns=[{title:"laboratoire",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,e.laboratoire.nom)}},{title:"date analyse",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,e.dateAnalyse)}},{title:"date r\xe9ception",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,e.dateReception)}},{title:"observations",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,e.observations)}},{title:"Tests Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}},{title:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(qm.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"\xeates-vous certain de vouloir annuler??",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Annuler"))):r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){return a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i],s=[];n.honoraires.forEach(function(e){s.push({id:e.key,libelle:e.label})}),delete n.honoraires,n.dateAnalyse=n.dateAnalyse.format("YYYY-MM-DD"),n.dateReception=n.dateReception.format("YYYY-MM-DD"),n.laboratoire={id:n.laboratoire.key,nom:n.laboratoire.label};var o={acceptationLaboratoire:Object(at.a)({},l.acceptationLaboratoire,n),honoraires:s};r.splice(i,1,Object(at.a)({},l,o)),a.setState({data:r,editingKey:""}),a.updateTestMedical(l.id,Object(at.a)({},l,o))}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e});var t=Object(tt.a)(this.state.data),a=t.findIndex(function(t){return e===t.key});if(a>-1){var n=t[a],r=[];n.honoraires.forEach(function(e){r.push({key:e.id,value:e.id,label:e.libelle})}),this.setState({testsMedical:[].concat(r)})}}},{key:"acceptationsLabo",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(t);case 2:a=e.sent,n=[],r=wm(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return l=i.value,e.next=11,Xi(t,l.id);case 11:s=e.sent,o={key:s.data.id},c=Object(at.a)({},s.data,o),n.push(c);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this.setState({data:[].concat(n)});case 26:case"end":return e.stop()}},e,this,[[5,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsLabo(this.props.record.id)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.dataTable!==e.dataTable){var a=Object(tt.a)(this.state.data);a.push(this.props.dataTable),this.setState({data:Object(tt.a)(a)})}}},{key:"render",value:function(){var e=this,t={body:{cell:Vm}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.title,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a),laboratoires:e.props.laboratoires,produit:e.props.record.contrat.produit,testsMedical:e.state.testsMedical}}}):t});return r.a.createElement(qm.Provider,{value:this.props.form},r.a.createElement(Je.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}}))}}]),t}(n.Component),Ym=He.a.create()(zm),Bm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={laboratoires:[],data:null},a.handleCallback=function(e){a.setState({data:e})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.AuxiliairesByType("LABORATOIRE")}},{key:"AuxiliairesByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa(t);case 2:a=e.sent,this.setState({laboratoires:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Fm,{parentCallback:this.handleCallback,laboratoires:this.state.laboratoires,record:this.props.record}),r.a.createElement(Ym,{dataTable:this.state.data,laboratoires:this.state.laboratoires,record:this.props.record}))}}]),t}(n.Component),Lm=$e.a.Option,Gm=I.a.TextArea,Um=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={honoraires:[],listOnglets:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterLaboratoire(t)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.record.contrat.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){t.typeAuxiliaireHon.libelle===_&&e.push({label:t.libelle,value:t.id})})}),this.setState({honoraires:[].concat(e)})}},{key:"jasperLettreAcceptation",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"jasperLettreRejet",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cl(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"ajouterLaboratoire",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c,m;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.verdict.label,t.dateExpertise=t.dateExpertise.format("YYYY-MM-DD"),t.medecin={id:t.medecin},t.verdict={id:t.verdict.key,status:t.verdict.label},t.acceptation=this.props.record,n=[{id:t.tests}],t.tauxSurmoralite=parseFloat(t.tauxSurmoralite),t.tauxSurprime=parseFloat(t.tauxSurprime),delete t.tests,e.next=12,d=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-conseil",data:d,method:"POST"}):Promise.reject("No access token set.");case 12:return r=e.sent,"Acceptation au tarif normal"===a?(i={intermediaire:this.props.record.contrat.produit.partenaire.raisonSocial,nom:this.props.record.contrat.assure.nom+" "+this.props.record.contrat.assure.prenom,agence:this.props.record.contrat.pointVente.libelle,numeroAcceptation:this.props.record.code,montantMourabaha:this.props.record.contrat.capitalAssure,encours:this.props.record.encours,cumul:this.props.record.cumul,duree:this.props.record.contrat.dureeContrat,differe:this.props.record.contrat.differe,montantCotisation:this.props.record.contrat.montantCotisation},this.jasperLettreAcceptation(i)):"Rejet"===a&&(console.log("hello rejet verdict"),l={intermediaire:this.props.record.contrat.produit.partenaire.raisonSocial,nomParticipant:this.props.record.contrat.assure.nom+" "+this.props.record.contrat.assure.prenom,agence:this.props.record.contrat.pointVente.libelle,numeroAcceptation:this.props.record.code,montantFinancement:this.props.record.contrat.capitalAssure,encours:this.props.record.encours,cumul:this.props.record.cumul,duree:this.props.record.contrat.dureeContrat,differe:this.props.record.contrat.differe,date:Kt()().format("DD-MM-YYYY")},console.log("hello rejet verdict:",l),this.jasperLettreRejet(l)),s={acceptationConseil:{id:r.data.id},acceptation:{id:this.props.record.id},honoraires:n},e.next=17,al(s);case 17:return o=e.sent,e.next=20,Hi({acceptationTestMedical:{id:o.data.id},etape:"medecinConseil",dateVerdict:Kt()().format("YYYY-MM-DD"),verdict:t.verdict});case 20:c=e.sent,200===r.status&&200===o.status&&200===c.status&&(this.props.parentCallback(o.data),u.a.success({message:"bien ajout\xe9"}),m=Object(tt.a)(this.state.listOnglets),"Examen complementaire"===a&&(m.push({key:"examens",tab:"Examens Compl\xe9mentaire"},{key:"specialiste",tab:"Specialiste"}),this.setState({listOnglets:Object(tt.a)(m)}),this.props.onglet(m))),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 27:case"end":return e.stop()}var d},e,this,[[0,24]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return r.a.createElement(He.a,Object.assign({hideRequiredMark:!0},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(He.a.Item,{label:"Medecin",hasFeedback:!0},e("medecin",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un medecin"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.props.medecins.map(function(e){return r.a.createElement(Lm,{key:e.id,value:e.id,label:e.nom},e.nom)})))),r.a.createElement(He.a.Item,{label:"Date Expertise",hasFeedback:!0},e("dateExpertise",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une Date expertise"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Test M\xe9dical",hasFeedback:!0},e("tests",{valuePropName:"selected",rules:[{message:"s\xe9lectionnez un Test M\xe9dical"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.state.honoraires.map(function(e){return r.a.createElement(Lm,{key:e.id,value:e.value,label:e.label},e.label)})))),r.a.createElement(He.a.Item,{label:"Observations",hasFeedback:!0},e("observation")(r.a.createElement(Gm,{rows:4}))),r.a.createElement(He.a.Item,{label:"Verdict",hasFeedback:!0},e("verdict",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un verdict"}]})(r.a.createElement($e.a,{labelInValue:!0,placeholder:"s\xe9lectionnez"},this.props.verdicts.map(function(e){return r.a.createElement(Lm,{key:e.id,value:e.id,label:e.status},e.status)})))),r.a.createElement(He.a.Item,{label:"Observation verdict",hasFeedback:!0},e("observationsVerdict")(r.a.createElement(Gm,{rows:4}))),r.a.createElement(He.a.Item,t,r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Ajouter")))}}]),t}(n.Component),Hm=He.a.create()(Um);function Km(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Wm(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wm(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Wm(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var $m=$e.a.Option,_m=I.a.TextArea,Jm=r.a.createContext(),Qm=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){if("Medecin"===a.props.inputType)return r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.medecins.map(function(e){return r.a.createElement($m,{key:e.id,value:e.id,label:e.nom},e.nom)}));if("Verdict"===a.props.inputType)return r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.verdicts.map(function(e){return r.a.createElement($m,{key:e.id,value:e.id,label:e.status},e.status)}));if("Date Expertise"===a.props.inputType)return r.a.createElement(Lt.a,{className:"date-style"});if("Test Medical"===a.props.inputType){var e=[];return a.props.produit.normes.forEach(function(t){t.honoraires.forEach(function(t){t.typeAuxiliaireHon.libelle===_&&e.push({value:t.id,label:t.libelle})})}),r.a.createElement($e.a,{style:{width:"100%"},labelInValue:!0},e.map(function(e){return r.a.createElement($m,{key:e.value,value:e.value,label:e.label},e.label)}))}return"Observations"===a.props.inputType||"Observation verdict"===a.props.inputType?r.a.createElement(_m,{rows:2}):r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.testsMedical,u=n.children,m=Object(Ke.a)(n,["editing","dataIndex","title","record","testsMedical","children"]);return i&&"Test Medical"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("honoraires",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:c})(a.getInput()))):i&&"Observations"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("observation",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].observation})(a.getInput()))):i&&"Motif"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("motif",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].motif})(a.getInput()))):i&&"Observation verdict"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("observationsVerdict",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].observationsVerdict})(a.getInput()))):i&&"Medecin"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("medecin",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].medecin.id,label:o[l].medecin.nom}})(a.getInput()))):i&&"Verdict"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("verdict",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].verdict.id,label:o[l].verdict.status}})(a.getInput()))):i&&"Date Expertise"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateExpertise",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l].dateExpertise)})(a.getInput()))):i&&"Taux de surprime"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("tauxSurprime",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].tauxSurprime})(a.getInput()))):i&&"Taux de surmoralit\xe9"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("tauxSurmoralite",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l].tauxSurmoralite})(a.getInput()))):r.a.createElement("td",m,u)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(Jm.Consumer,null,this.renderCell)}}]),t}(n.Component),Xm=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateTestMedical=function(e,t){nl(e,t).then(function(e){if(200===e.status){u.a.success({message:"acceptation Medecin conseil bien modifier !"});var n={intermediaire:a.props.record.contrat.produit.partenaire.raisonSocial,nom:a.props.record.contrat.assure.nom+" "+a.props.record.contrat.assure.prenom,agence:a.props.record.contrat.pointVente.libelle,numeroAcceptation:a.props.record.code,montantMourabaha:a.props.record.contrat.capitalAssure,encours:a.props.record.encours,cumul:a.props.record.cumul,duree:a.props.record.contrat.dureeContrat,differe:a.props.record.contrat.differe,montantCotisation:a.props.record.contrat.montantCotisation};if("Acceptation au tarif normal"===t.acceptationConseil.verdict.status)a.jasperLettreAcceptation(n);else if("Rejet"===t.acceptationConseil.verdict.status){console.log("hello rejet verdict");var r={intermediaire:a.props.record.contrat.produit.partenaire.raisonSocial,nomParticipant:a.props.record.contrat.assure.nom+" "+a.props.record.contrat.assure.prenom,agence:a.props.record.contrat.pointVente.libelle,numeroAcceptation:a.props.record.code,montantFinancement:a.props.record.contrat.capitalAssure,encours:a.props.record.encours,cumul:a.props.record.cumul,duree:a.props.record.contrat.dureeContrat,differe:a.props.record.contrat.differe,date:Kt()().format("DD-MM-YYYY")};console.log("hello rejet verdict:",r),a.jasperLettreRejet(r)}}}).catch(function(e){"wrong data"===e.response.data.message?u.a.error({message:"acception Medecin conseil ne ce trouve pas"}):u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose a mal tourn\xe9. Veuillez r\xe9essayer!"})})},a.state={data:[],editingKey:"",testsMedical:[],listOnglets:[],verdic:""},a.columns=[{title:"Medecin",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.medecin.nom)}},{title:"Date Expertise",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.dateExpertise)}},{title:"Observations",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.observation)}},{title:"Test Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}},{title:"Verdict",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.verdict.status)}},{title:"Observation verdict",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.observationsVerdict)}},{title:"Taux de surprime",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.tauxSurprime)}},{title:"Taux de surmoralit\xe9",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.tauxSurmoralite)}},{title:"Operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(Jm.Consumer,null,function(e){return r.a.createElement("a",{onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Confirmer")}),r.a.createElement(Xe.a,{title:"\xeates-vous certain de vouloir annuler?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Annuler"))):r.a.createElement("span",null,r.a.createElement("a",{disabled:""!==n,onClick:function(){return a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement("a",{disabled:"Acceptation au tarif normal"!==a.state.verdic,onClick:function(){return a.download()},href:"#top"},r.a.createElement(w.a,{type:"download",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){a.setState({verdic:n.verdict.label});var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i],s=[];n.honoraires.forEach(function(e){s.push({id:e.key,libelle:e.label})}),delete n.honoraires,n.dateExpertise=n.dateExpertise.format("YYYY-MM-DD"),n.medecin={id:n.medecin.key,nom:n.medecin.label},n.verdict={id:n.verdict.key,status:n.verdict.label},n.tauxSurmoralite=parseFloat(n.tauxSurmoralite),n.tauxSurprime=parseFloat(n.tauxSurprime);var o={acceptationConseil:Object(at.a)({},l.acceptationConseil,n),honoraires:s};r.splice(i,1,Object(at.a)({},l,o)),a.setState({data:r,editingKey:""}),a.updateTestMedical(l.id,Object(at.a)({},l,o))}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"jasperLettreAcceptation",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"jasperLettreRejet",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cl(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"edit",value:function(e){this.setState({editingKey:e});var t=Object(tt.a)(this.state.data),a=t.findIndex(function(t){return e===t.key});if(a>-1){var n=t[a],r=[];n.honoraires.forEach(function(e){r.push({key:e.id,value:e.id,label:e.libelle})}),this.setState({testsMedical:[].concat(r)})}}},{key:"download",value:function(){var e={intermediaire:this.props.record.contrat.produit.partenaire.raisonSocial,nom:this.props.record.contrat.assure.nom+" "+this.props.record.contrat.assure.prenom,agence:this.props.record.contrat.pointVente.libelle,numeroAcceptation:this.props.record.code,montantMourabaha:this.props.record.contrat.capitalAssure,encours:this.props.record.encours,cumul:this.props.record.cumul,duree:this.props.record.contrat.dureeContrat,differe:this.props.record.contrat.differe,montantCotisation:this.props.record.contrat.montantCotisation};this.jasperLettreAcceptation(e)}},{key:"acceptationsConseil",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c,u;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(t);case 2:a=e.sent,n=[],r=Km(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=19;break}return l=i.value,e.next=11,el(t,l.id);case 11:s=e.sent,o=Object(tt.a)(this.state.listOnglets),"Examen complementaire"===s.data.acceptationConseil.verdict.status&&(o.push({key:"examens",tab:"Examens Compl\xe9mentaire"},{key:"specialiste",tab:"Specialiste"}),this.setState({listOnglets:Object(tt.a)(o)}),this.props.onglet(this.state.listOnglets)),c={key:s.data.id},u=Object(at.a)({},s.data,c),n.push(u);case 17:e.next=7;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),r.e(e.t0);case 24:return e.prev=24,r.f(),e.finish(24);case 27:this.setState({data:[].concat(n)}),0!==n.length&&this.setState({verdic:n[0].acceptationConseil.verdict.status});case 29:case"end":return e.stop()}},e,this,[[5,21,24,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsConseil(this.props.record.id),console.log("props conseil:",this.props)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.dataTable!==e.dataTable){var a=Object(tt.a)(this.state.data);a.push(this.props.dataTable),this.setState({data:Object(tt.a)(a)})}}},{key:"render",value:function(){var e=this,t={body:{cell:Qm}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.title,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a),medecins:e.props.medecins,produit:e.props.record.contrat.produit,testsMedical:e.state.testsMedical,verdicts:e.props.verdicts}}}):t});return r.a.createElement(Jm.Provider,{value:this.props.form},r.a.createElement(Je.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}}))}}]),t}(n.Component),Zm=He.a.create()(Xm),ed=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={medecins:[],verdicts:[],tabListNoTitle:[]},a.handleCallback=function(e){a.setState({data:e})},a.acctivatedOnglet=function(e){var t=Object(tt.a)(a.state.tabListNoTitle),n=Object(tt.a)(e),r=!1;t.forEach(function(e){"examens"===e.key&&(r=!0)}),r&&(n=e.filter(function(e){return"examens"!==e.key})),a.setState({tabListNoTitle:[].concat(Object(tt.a)(t),Object(tt.a)(n))}),a.props.onglet(a.state.tabListNoTitle)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.AuxiliairesByType(_),this.VerdictByType("nonexaminateur")}},{key:"AuxiliairesByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa(t);case 2:a=e.sent,this.setState({medecins:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"VerdictByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(t);case 2:a=e.sent,this.setState({verdicts:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Hm,{parentCallback:this.handleCallback,onglet:this.acctivatedOnglet,verdicts:this.state.verdicts,medecins:this.state.medecins,record:this.props.record}),r.a.createElement(Zm,{dataTable:this.state.data,onglet:this.acctivatedOnglet,verdicts:this.state.verdicts,medecins:this.state.medecins,record:this.props.record}))}}]),t}(n.Component),td=$e.a.Option,ad=I.a.TextArea,nd=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterSpecialiste(t)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"ajouterSpecialiste",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.dateReassurance=t.dateReassurance.format("YYYY-MM-DD"),t.dateReception=t.dateReception.format("YYYY-MM-DD"),t.verdict={id:t.verdict},t.tauxSurprime=parseFloat(t.tauxSurprime),t.acceptation=this.props.record,e.next=8,r=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-reassurance",data:r,method:"POST"}):Promise.reject("No access token set.");case 8:return a=e.sent,e.next=11,Hi({acceptationReassurance:{id:a.data.id},etape:"reassurance",dateVerdict:Kt()().format("YYYY-MM-DD"),verdict:t.verdict});case 11:n=e.sent,200===a.status&&200===n.status&&(this.props.parentCallback(a.data),u.a.success({message:"bien ajout\xe9"})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 18:case"end":return e.stop()}var r},e,this,[[0,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return r.a.createElement(He.a,Object.assign({hideRequiredMark:!0},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(He.a.Item,{label:"Date Reassurance",hasFeedback:!0},e("dateReassurance",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date d'reassurance"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Date r\xe9ception",hasFeedback:!0},e("dateReception",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date de r\xe9ception"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Observation",hasFeedback:!0},e("observation")(r.a.createElement(ad,{rows:4}))),r.a.createElement(He.a.Item,{label:"Taux de surprime",hasFeedback:!0},e("tauxSurprime",{valuePropName:"selected",rules:[{required:!0,message:"Tapez une nature de test"}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Verdict",hasFeedback:!0},e("verdict",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un verdict"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.props.verdicts.map(function(e){return r.a.createElement(td,{value:e.id,label:e.status},e.status)})))),r.a.createElement(He.a.Item,{label:"Observation verdict",hasFeedback:!0},e("observationVerdict")(r.a.createElement(ad,{rows:4}))),r.a.createElement(He.a.Item,t,r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Ajouter")))}}]),t}(n.Component),rd=He.a.create()(nd);function id(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return ld(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ld(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var sd=$e.a.Option,od=I.a.TextArea,cd=r.a.createContext(),ud=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return"Verdict"===a.props.inputType?r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.verdicts.map(function(e){return r.a.createElement(sd,{value:e.id,label:e.status},e.status)})):"Date r\xe9ception"===a.props.inputType||"Date reassurance"===a.props.inputType?r.a.createElement(Lt.a,{className:"date-style"}):"Observation"===a.props.inputType||"Observation verdict"===a.props.inputType?r.a.createElement(od,{rows:2}):r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return i&&"Observation"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("observation",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):i&&"Observation verdict"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("observationVerdict",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):i&&"Verdict"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("verdict",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].id,label:o[l].status}})(a.getInput()))):i&&"Date reassurance"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateReassurance",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l])})(a.getInput()))):i&&"Date r\xe9ception"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateReception",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l])})(a.getInput()))):i&&"Taux de Surprime"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("tauxSurprime",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):i&&"Motif"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("motif",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):r.a.createElement("td",u,c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(cd.Consumer,null,this.renderCell)}}]),t}(n.Component),md=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateSpecialiste=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-reassurance?id="+a,data:n,method:"PUT"}):Promise.reject("No access token set.")).then(function(e){200===e.status&&u.a.success({message:"acceptation reassurance bien modifier !"})}).catch(function(e){"wrong data"===e.response.data.message?u.a.error({message:"acception reassurance ne ce trouve pas"}):u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose a mal tourn\xe9. Veuillez r\xe9essayer!"})})},a.state={data:[],editingKey:""},a.columns=[{title:"Date r\xe9ception",dataIndex:"dateReception",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e).format("YYYY-MM-DD"))}},{title:"Date reassurance",dataIndex:"dateReassurance",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e).format("YYYY-MM-DD"))}},{title:"Observation",dataIndex:"observation",editable:!0},{title:"Taux de Surprime",dataIndex:"tauxSurprime",editable:!0},{title:"Verdict",dataIndex:"verdict",editable:!0,render:function(e){return r.a.createElement("span",null,e.status)}},{title:"Observation verdict",dataIndex:"observationVerdict",editable:!0},{title:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(cd.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"\xeates-vous certain de vouloir annuler?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Annuler"))):r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){return a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];n.dateReassurance=n.dateReassurance.format("YYYY-MM-DD"),n.dateReception=n.dateReception.format("YYYY-MM-DD"),n.tauxSurprime=parseFloat(n.tauxSurprime),n.verdict={id:n.verdict.key,status:n.verdict.label},r.splice(i,1,Object(at.a)({},l,n)),a.setState({data:r,editingKey:""}),a.updateSpecialiste(l.id,Object(at.a)({},l,n))}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"acceptationsSpecialiste",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qi(t);case 2:a=e.sent,n=[],r=id(a.data);try{for(r.s();!(i=r.n()).done;)l=i.value,s={key:l.id},o=Object(at.a)({},l,s),n.push(o)}catch(c){r.e(c)}finally{r.f()}this.setState({data:[].concat(n)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsSpecialiste(this.props.record.id)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.dataTable!==e.dataTable){var a=Object(tt.a)(this.state.data);a.push(this.props.dataTable),this.setState({data:Object(tt.a)(a)})}}},{key:"render",value:function(){var e=this,t={body:{cell:ud}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.title,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a),produit:e.props.record.contrat.produit,verdicts:e.props.verdicts}}}):t});return r.a.createElement(cd.Provider,{value:this.props.form},r.a.createElement(Je.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}}))}}]),t}(n.Component),dd=He.a.create()(md),pd=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={verdicts:[]},a.handleCallback=function(e){a.setState({data:e})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.VerdictByType("examinateur")}},{key:"VerdictByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(t);case 2:a=e.sent,this.setState({verdicts:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(rd,{parentCallback:this.handleCallback,verdicts:this.state.verdicts,record:this.props.record}),r.a.createElement(dd,{dataTable:this.state.data,verdicts:this.state.verdicts,record:this.props.record}))}}]),t}(n.Component),hd=$e.a.Option,fd=I.a.TextArea,bd=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.ajouterSpecialiste(t)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"ajouterSpecialiste",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.dateConsultation=t.dateConsultation.format("YYYY-MM-DD"),t.specialiste={id:t.specialiste},t.acceptation=this.props.record,e.next=6,i=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-specialiste",data:i,method:"POST"}):Promise.reject("No access token set.");case 6:return a=e.sent,n={acceptationSpecialiste:{id:a.data.id},acceptation:{id:this.props.record.id}},e.next=10,al(n);case 10:r=e.sent,200===a.status&&200===r.status&&(this.props.parentCallback(r.data.acceptationSpecialiste),u.a.success({message:"bien ajout\xe9"})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 17:case"end":return e.stop()}var i},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return r.a.createElement(He.a,Object.assign({hideRequiredMark:!0},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(He.a.Item,{label:"Specialiste",hasFeedback:!0},e("specialiste",{valuePropName:"selected",rules:[{required:!0,message:"s\xe9lectionnez un Specialiste"}]})(r.a.createElement($e.a,{placeholder:"s\xe9lectionnez"},this.props.specialistes.map(function(e){return r.a.createElement(hd,{key:e.id,value:e.id,label:e.nom},e.nom)})))),r.a.createElement(He.a.Item,{label:"Specialit\xe9",hasFeedback:!0},e("specialite",{valuePropName:"selected",rules:[{required:!0,message:"Tapez une specialit\xe9"}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Nature de test",hasFeedback:!0},e("natureTest",{valuePropName:"selected",rules:[{required:!0,message:"Tapez une nature de test"}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Date de consultation",hasFeedback:!0},e("dateConsultation",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date de consultation"}]})(r.a.createElement(Lt.a,{className:"date-style"}))),r.a.createElement(He.a.Item,{label:"Observations",hasFeedback:!0},e("observations")(r.a.createElement(fd,{rows:4}))),r.a.createElement(He.a.Item,t,r.a.createElement(fe.a,{type:"primary",htmlType:"submit"},"Ajouter")))}}]),t}(n.Component),Ed=He.a.create()(bd);function vd(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return gd(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return gd(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var yd=$e.a.Option,Cd=I.a.TextArea,xd=r.a.createContext(),Sd=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return"Specialiste"===a.props.inputType?r.a.createElement($e.a,{style:{width:"100%"},placeholder:"s\xe9lectionnez",labelInValue:!0},a.props.specialistes.map(function(e){return r.a.createElement(yd,{value:e.id,label:e.nom},e.nom)})):"Date consultation"===a.props.inputType?r.a.createElement(Lt.a,{className:"date-style"}):"observations"===a.props.inputType?r.a.createElement(Cd,{rows:2}):r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.children,u=Object(Ke.a)(n,["editing","dataIndex","title","record","children"]);return i&&"observations"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("observations",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):i&&"Specialiste"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("specialiste",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:{key:o[l].id,label:o[l].nom}})(a.getInput()))):i&&"Date consultation"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("dateConsultation",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:Kt()(o[l])})(a.getInput()))):i&&"Nature de test"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("natureTest",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):i&&"Specialit\xe9"===s?r.a.createElement("td",u,r.a.createElement(He.a.Item,{style:{margin:0}},t("specialite",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):r.a.createElement("td",u,c)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(xd.Consumer,null,this.renderCell)}}]),t}(n.Component),kd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateSpecialiste=function(e,t){var a,n;(a=e,n=t,localStorage.getItem(G)?ae({url:L+"/private/acceptation-specialiste?id="+a,data:n,method:"PUT"}):Promise.reject("No access token set.")).then(function(e){200===e.status&&u.a.success({message:"acceptation specialiste bien modifier !"})}).catch(function(e){"wrong data"===e.response.data.message?u.a.error({message:"acception specialiste ne ce trouve pas"}):u.a.error({message:"Takaful",description:"D\xe9sol\xe9! Quelque chose a mal tourn\xe9. Veuillez r\xe9essayer!"})})},a.state={data:[],editingKey:""},a.columns=[{title:"Specialiste",dataIndex:"specialiste",editable:!0,render:function(e){return r.a.createElement("span",null,e.nom)}},{title:"Specialit\xe9",dataIndex:"specialite",editable:!0},{title:"Nature de test",dataIndex:"natureTest",editable:!0},{title:"Date consultation",dataIndex:"dateConsultation",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e).format("YYYY-MM-DD"))}},{title:"observations",dataIndex:"observations",editable:!0},{title:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(xd.Consumer,null,function(e){return r.a.createElement("a",{href:"#top",onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"\xeates-vous certain de vouloir annuler?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",{href:"#top"},"Annuler"))):r.a.createElement("a",{href:"#top",disabled:""!==n,onClick:function(){return a.edit(t.key)}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i];n.dateConsultation=n.dateConsultation.format("YYYY-MM-DD"),n.specialiste={id:n.specialiste.key,nom:n.specialiste.label},r.splice(i,1,Object(at.a)({},l,n)),a.setState({data:r,editingKey:""}),a.updateSpecialiste(l.id,Object(at.a)({},l,n))}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"acceptationsSpecialiste",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji(t);case 2:a=e.sent,n=[],r=vd(a.data);try{for(r.s();!(i=r.n()).done;)l=i.value,s={key:l.id},o=Object(at.a)({},l,s),n.push(o)}catch(c){r.e(c)}finally{r.f()}this.setState({data:[].concat(n)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsSpecialiste(this.props.record.id)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.dataTable!==e.dataTable){var a=Object(tt.a)(this.state.data);a.push(this.props.dataTable),this.setState({data:Object(tt.a)(a)})}}},{key:"render",value:function(){var e=this,t={body:{cell:Sd}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.title,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a),specialistes:e.props.specialistes,produit:e.props.record.contrat.produit}}}):t});return r.a.createElement(xd.Provider,{value:this.props.form},r.a.createElement(Je.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}}))}}]),t}(n.Component),Id=He.a.create()(kd),Od=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={specialistes:[],tabListNoTitle:[],data:null},a.handleCallback=function(e){a.setState({data:e})},a.acctivatedOnglet=function(e){var t=Object(tt.a)(a.state.tabListNoTitle),n=Object(tt.a)(e);t.forEach(function(t){"examens"===t.key&&(n=e.filter(function(e){return"examens"!==e.key}))}),a.setState({tabListNoTitle:[].concat(Object(tt.a)(t),Object(tt.a)(n))}),a.props.onglet(a.state.tabListNoTitle)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.AuxiliairesByType("MEDECIN SPECIALISTE")}},{key:"AuxiliairesByType",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa(t);case 2:a=e.sent,this.setState({specialistes:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ed,{parentCallback:this.handleCallback,specialistes:this.state.specialistes,record:this.props.record}),r.a.createElement(Id,{dataTable:this.state.data,specialistes:this.state.specialistes,record:this.props.record}))}}]),t}(n.Component),jd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).acctivatedOnglet=function(e){var t=Object(tt.a)(a.state.tabListNoTitle),n=Object(tt.a)(e),r=!1,i=!1,l=!1;t.forEach(function(e){"medecinConseil"===e.key&&(r=!0),"reassurance"===e.key&&(i=!0),"examens"===e.key&&(l=!0)}),l&&(n=e.filter(function(e){return"examens"!==e.key&&"specialiste"!==e.key})),r&&(n=e.filter(function(e){return"medecinConseil"!==e.key})),i&&(n=e.filter(function(e){return"reassurance"!==e.key})),i&&r&&(n=e.filter(function(e){return"reassurance"!==e.key&&"medecinConseil"!==e.key})),r&&l&&(n=e.filter(function(e){return"medecinConseil"!==e.key&&"examens"!==e.key&&"specialiste"!==e.key})),i&&l&&(n=e.filter(function(e){return"reassurance"!==e.key&&"examens"!==e.key&&"specialiste"!==e.key})),i&&r&&l&&(n=e.filter(function(e){return"reassurance"!==e.key&&"medecinConseil"!==e.key&&"examens"!==e.key&&"specialiste"!==e.key})),a.setState({tabListNoTitle:[].concat(Object(tt.a)(t),Object(tt.a)(n))})},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a.state={key:"tab1",noTitleKey:"general",tabListNoTitle:[{key:"general",tab:"G\xe9n\xe9ral"},{key:"laboratoire",tab:"Laboratoire"}]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.record.location.state.record;(e.contrat.produit.seuilExaminateur<e.cumul<e.contrat.produit.seuilConseil||e.contrat.produit.seuilConseil<e.cumul<e.contrat.produit.seuilReassurance||e.cumul>e.contrat.produit.seuilReassurance)&&this.setState({tabListNoTitle:[{key:"general",tab:"G\xe9n\xe9ral"},{key:"laboratoire",tab:"Laboratoire"},{key:"examinateur",tab:"Examinateur"}]}),e.contrat.produit.seuilExaminateur>e.cumul&&this.setState({tabListNoTitle:[{key:"general",tab:"G\xe9n\xe9ral"},{key:"laboratoire",tab:"Laboratoire"},{key:"examinateur",tab:"Examinateur"}]})}},{key:"render",value:function(){var e=this,t={general:r.a.createElement(Tm,{record:this.props.record.location.state.record}),laboratoire:r.a.createElement(Bm,{record:this.props.record.location.state.record}),examinateur:r.a.createElement(Im,{onglet:this.acctivatedOnglet,record:this.props.record.location.state.record}),medecinConseil:r.a.createElement(ed,{onglet:this.acctivatedOnglet,record:this.props.record.location.state.record}),specialiste:r.a.createElement(Od,{record:this.props.record.location.state.record}),examens:r.a.createElement(dm,{record:this.props.record.location.state.record}),reassurance:r.a.createElement(pd,{record:this.props.record.location.state.record})};return r.a.createElement("div",null,r.a.createElement(En.a,{size:"default"},r.a.createElement(En.a.Item,{label:"Code acceptation"},this.props.record.location.state.record.code),r.a.createElement(En.a.Item,{label:"Nom assur\xe9"},this.props.record.location.state.record.contrat.assure.nom),r.a.createElement(En.a.Item,{label:"Prenom assur\xe9"},this.props.record.location.state.record.contrat.assure.prenom)),r.a.createElement("br",null),r.a.createElement(D.a,{style:{width:"100%"},tabList:this.state.tabListNoTitle,activeTabKey:this.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},t[this.state.noTitleKey]))}}]),t}(n.Component);function Td(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Ad(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ad(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Pd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[]},a.columns=[{title:"laboratoire",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,e.laboratoire.nom)}},{title:"date analyse",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateAnalyse).format("YYYY-MM-DD"))}},{title:"date r\xe9ception",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateReception).format("YYYY-MM-DD"))}},{title:"observations",dataIndex:"acceptationExamens",editable:!0,render:function(e){return r.a.createElement("span",null,e.observations)}},{title:"Test Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"acceptationsLabo",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i(t);case 2:a=e.sent,n=[],r=Td(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return l=i.value,e.next=11,tl(t,l.id);case 11:s=e.sent,o={key:s.data.id},c=Object(at.a)({},s.data,o),n.push(c);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this.setState({data:[].concat(n)});case 26:case"end":return e.stop()}},e,this,[[5,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsLabo(this.props.record.id)}},{key:"render",value:function(){return r.a.createElement(Je.a,{bordered:!0,dataSource:this.state.data,columns:this.columns,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}})}}]),t}(n.Component);function Dd(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Fd(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fd(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var wd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[]},a.columns=[{title:"Medecin",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.medecin.nom)}},{title:"Date visite",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateVisite).format("YYYY-MM-DD"))}},{title:"Date r\xe9ception",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateReception).format("YYYY-MM-DD"))}},{title:"Observations",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.observation)}},{title:"Verdict",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.verdict.status)}},{title:"Observation verdict",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.observationsVerdict)}},{title:"Motif",dataIndex:"acceptationExaminateur",editable:!0,render:function(e){return r.a.createElement("span",null,e.motif)}},{title:"Tests Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"acceptationsExaminateur",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wi(t);case 2:a=e.sent,n=[],r=Dd(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return l=i.value,e.next=11,Zi(t,l.id);case 11:s=e.sent,o={key:s.data.id},c=Object(at.a)({},s.data,o),n.push(c);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this.setState({data:[].concat(n)});case 26:case"end":return e.stop()}},e,this,[[5,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsExaminateur(this.props.record.id)}},{key:"render",value:function(){return r.a.createElement(Je.a,{bordered:!0,dataSource:this.state.data,columns:this.columns,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}})}}]),t}(n.Component);function Md(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Nd(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Nd(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Rd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[],editingKey:"",testsMedical:[]},a.columns=[{title:"laboratoire",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,e.laboratoire.nom)}},{title:"date analyse",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateAnalyse).format("YYYY-MM-DD"))}},{title:"date r\xe9ception",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateReception).format("YYYY-MM-DD"))}},{title:"observations",dataIndex:"acceptationLaboratoire",editable:!0,render:function(e){return r.a.createElement("span",null,e.observations)}},{title:"Tests Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"acceptationsLabo",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(t);case 2:a=e.sent,n=[],r=Md(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return l=i.value,e.next=11,Xi(t,l.id);case 11:s=e.sent,o={key:s.data.id},c=Object(at.a)({},s.data,o),n.push(c);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this.setState({data:[].concat(n)});case 26:case"end":return e.stop()}},e,this,[[5,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsLabo(this.props.record.id)}},{key:"render",value:function(){return r.a.createElement(Je.a,{bordered:!0,dataSource:this.state.data,columns:this.columns,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}})}}]),t}(n.Component);function qd(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Vd(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vd(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var zd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[],editingKey:"",testsMedical:[]},a.columns=[{title:"Medecin",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.medecin.nom)}},{title:"Date Expertise",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e.dateExpertise).format("YYYY-MM-DD"))}},{title:"Taux de surprime",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.tauxSurprime)}},{title:"Taux de surmoralit\xe9",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.tauxSurmoralite)}},{title:"Observations",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.observation)}},{title:"Verdict",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.verdict.status)}},{title:"Observation verdict",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.observationsVerdict)}},{title:"Motif",dataIndex:"acceptationConseil",editable:!0,render:function(e){return r.a.createElement("span",null,e.motif)}},{title:"Test Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"acceptationsConseil",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(t);case 2:a=e.sent,n=[],r=qd(a.data),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return l=i.value,e.next=11,el(t,l.id);case 11:s=e.sent,o={key:s.data.id},c=Object(at.a)({},s.data,o),n.push(c);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this.setState({data:[].concat(n)});case 26:case"end":return e.stop()}},e,this,[[5,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsConseil(this.props.record.id)}},{key:"render",value:function(){return r.a.createElement(Je.a,{bordered:!0,dataSource:this.state.data,columns:this.columns,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}})}}]),t}(n.Component);function Yd(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Bd(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Bd(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Bd(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ld=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[],editingKey:""},a.columns=[{title:"Date r\xe9ception",dataIndex:"dateReception",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e).format("YYYY-MM-DD"))}},{title:"Date reassurance",dataIndex:"dateReassurance",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e).format("YYYY-MM-DD"))}},{title:"Observation",dataIndex:"observation",editable:!0},{title:"Taux de Surprime",dataIndex:"tauxSurprime",editable:!0},{title:"Verdict",dataIndex:"verdict",editable:!0,render:function(e){return r.a.createElement("span",null,e.status)}},{title:"Motif",dataIndex:"motif",editable:!0},{title:"Observation verdict",dataIndex:"observationVerdict",editable:!0}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"acceptationsSpecialiste",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qi(t);case 2:a=e.sent,n=[],r=Yd(a.data);try{for(r.s();!(i=r.n()).done;)l=i.value,s={key:l.id},o=Object(at.a)({},l,s),n.push(o)}catch(c){r.e(c)}finally{r.f()}this.setState({data:[].concat(n)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsSpecialiste(this.props.record.id)}},{key:"render",value:function(){return r.a.createElement(Je.a,{bordered:!0,dataSource:this.state.data,columns:this.columns,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}})}}]),t}(n.Component);function Gd(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Ud(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ud(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Hd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[],editingKey:""},a.columns=[{title:"Specialiste",dataIndex:"specialiste",editable:!0,render:function(e){return r.a.createElement("span",null,e.nom)}},{title:"Specialit\xe9",dataIndex:"specialite",editable:!0},{title:"Nature de test",dataIndex:"natureTest",editable:!0},{title:"Date consultation",dataIndex:"dateConsultation",editable:!0,render:function(e){return r.a.createElement("span",null,Kt()(e).format("YYYY-MM-DD"))}},{title:"observations",dataIndex:"observations",editable:!0}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"acceptationsSpecialiste",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r,i,l,s,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji(t);case 2:a=e.sent,n=[],r=Gd(a.data);try{for(r.s();!(i=r.n()).done;)l=i.value,s={key:l.id},o=Object(at.a)({},l,s),n.push(o)}catch(c){r.e(c)}finally{r.f()}this.setState({data:[].concat(n)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.acceptationsSpecialiste(this.props.record.id)}},{key:"render",value:function(){return r.a.createElement(Je.a,{bordered:!0,dataSource:this.state.data,columns:this.columns,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}})}}]),t}(n.Component),Kd=[{key:"general",tab:"G\xe9n\xe9ral"},{key:"laboratoire",tab:"Laboratoire"},{key:"examinateur",tab:"Examinateur"},{key:"medecinConseil",tab:"M\xe9decin Conseil"},{key:"specialiste",tab:"Specialiste"},{key:"examens",tab:"Examens Compl\xe9mentaire"},{key:"reassurance",tab:"R\xe9assurance"}],Wd=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).contentListNoTitle={general:r.a.createElement(Tm,{record:a.props.record.location.state.record}),laboratoire:r.a.createElement(Rd,{record:a.props.record.location.state.record}),examinateur:r.a.createElement(wd,{record:a.props.record.location.state.record}),medecinConseil:r.a.createElement(zd,{record:a.props.record.location.state.record}),specialiste:r.a.createElement(Hd,{record:a.props.record.location.state.record}),examens:r.a.createElement(Pd,{record:a.props.record.location.state.record}),reassurance:r.a.createElement(Ld,{record:a.props.record.location.state.record})},a.onTabChange=function(e,t){a.setState(Object(jt.a)({},t,e))},a.state={key:"tab1",noTitleKey:"general"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(En.a,{size:"default"},r.a.createElement(En.a.Item,{label:"Code acceptation"},this.props.record.location.state.record.code),r.a.createElement(En.a.Item,{label:"Nom assur\xe9"},this.props.record.location.state.record.contrat.assure.nom),r.a.createElement(En.a.Item,{label:"Prenom assur\xe9"},this.props.record.location.state.record.contrat.assure.prenom)),r.a.createElement("br",null),r.a.createElement(D.a,{style:{width:"100%"},tabList:Kd,activeTabKey:this.state.noTitleKey,onTabChange:function(t){e.onTabChange(t,"noTitleKey")}},this.contentListNoTitle[this.state.noTitleKey]))}}]),t}(n.Component),$d=$e.a.Option,_d=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={risques:[],categories:[],periodicite:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllRisque(),this.getAllCategorie(),this.getAllPeriodicite()}},{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllRisque",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja();case 2:t=e.sent,this.setState({risques:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllCategorie",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa();case 2:t=e.sent,this.setState({categories:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12}}},{id:"formadd"}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations g\xe9n\xe9rales")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Risque",hasFeedback:!0},e("risque",{rules:[{required:!0,message:"Choisissez un risque"}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.risques.map(function(e){return r.a.createElement($d,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Cat\xe9gorie",hasFeedback:!0},e("categorie",{rules:[{required:!0,message:"choisissez une cat\xe9gorie "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.categories.map(function(e){return r.a.createElement($d,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Libelle"},e("libelle",{rules:[{required:!0,message:"entrez la libelle"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},e("code",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"P\xe9riodicit\xe9")),r.a.createElement(xe.a,{span:24,offset:2},r.a.createElement(He.a.Item,null," ",e("periodicites",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ...",onChange:this.handleChange},this.state.periodicite.map(function(e){return r.a.createElement($d,{key:e.id,value:e.id,label:e.abb},e.libelle)}))))))))}}]),t}(n.Component),Jd=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{libelle:He.a.createFormField(Object(at.a)({},e.libelle,{value:e.libelle.value})),code:He.a.createFormField(Object(at.a)({},e.code,{value:e.code.value})),risque:He.a.createFormField(Object(at.a)({},e.risque,{value:e.risque.value})),categorie:He.a.createFormField(Object(at.a)({},e.categorie,{value:e.categorie.value})),periodicites:He.a.createFormField(Object(at.a)({},e.periodicites,{value:e.periodicites.value}))}}})(_d),Qd=(a(414),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={laboratoires:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component)),Xd=He.a.create({name:"global_state"})(Qd),Zd=$e.a.Option,ep=r.a.createContext(),tp=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).getInput=function(){return"Tests Medical"===a.props.inputType?r.a.createElement($e.a,{mode:"multiple",style:{width:"100%"},labelInValue:!0},a.props.honoraire.map(function(e){return r.a.createElement(Zd,{key:e.id,value:e.id,label:e.libelle},e.libelle)})):r.a.createElement(I.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,i=n.editing,l=n.dataIndex,s=n.title,o=n.record,c=n.testsMedical,u=n.children,m=Object(Ke.a)(n,["editing","dataIndex","title","record","testsMedical","children"]);return i&&"Tests Medical"===s?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t("honoraires",{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:c})(a.getInput()))):i?r.a.createElement("td",m,r.a.createElement(He.a.Item,{style:{margin:0}},t(l,{rules:[{required:!0,message:"Please Input ".concat(s,"!")}],initialValue:o[l]})(a.getInput()))):r.a.createElement("td",m,u)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(ep.Consumer,null,this.renderCell)}}]),t}(n.Component),ap=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateNormes=function(e,t){(function(e,t){return localStorage.getItem(G)?ae({url:L+"/private/normeSelection/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")})(e,t).then(function(e){200===e.status&&u.a.success({message:"Les normes sont  bien modifi\xe9es."})}).catch(function(e){u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.rechercheNorme=function(e){(function(e){return localStorage.getItem(G)?ae({url:L+"/private/normeSelection?id="+e,method:"GET"}):Promise.reject("No access token set.")})(e).then(function(e){var t=[];e.data.forEach(function(e){var a={key:e.id};e=Object(at.a)({},e,a),t.push(e)}),a.setState({data:t})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Your Username or Password is incorrect. Please try again!"}):u.a.error({message:"Takaful",description:e.message||"Sorry! Something went wrong. Please try again!"})})},a.state={data:[],editingKey:"",testsMedical:[]},a.columns=[{title:"Age min",dataIndex:"ageMin",editable:!0},{title:"Age max",dataIndex:"ageMax",editable:!0},{title:"Capital min",dataIndex:"capitalMin",editable:!0},{title:"Capital max",dataIndex:"capitalMax",editable:!0},{title:"Tests Medical",dataIndex:"honoraires",editable:!0,render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(et.a,{color:"volcano",key:e},e.libelle.toUpperCase())}))}},{title:"operation",render:function(e,t){var n=a.state.editingKey;return a.isEditing(t)?r.a.createElement("span",null,r.a.createElement(ep.Consumer,null,function(e){return r.a.createElement("a",{onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Enregistrer")}),r.a.createElement(Xe.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement("a",null,"Fermer"))):r.a.createElement("a",{disabled:""!==n,onClick:function(){return a.edit(t.key)}},"Modifier")}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(tt.a)(a.state.data),i=r.findIndex(function(e){return t===e.key});if(i>-1){var l=r[i],s=[],o=[];n.honoraires.forEach(function(e){s.push({id:e.key,libelle:e.label}),o.push({id:e.key})}),delete n.honoraires;var c=Object(at.a)({},n,{honoraires:s});r.splice(i,1,Object(at.a)({},l,c));var u={ageMin:n.ageMin,ageMax:n.ageMax,capitalMin:n.capitalMin,capitalMax:n.capitalMax,honoraires:o};a.setState({data:r,editingKey:""}),a.updateNormes(l.id,u)}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e});var t=Object(tt.a)(this.state.data),a=t.findIndex(function(t){return e===t.key});if(a>-1){var n=t[a],r=[];n.honoraires.forEach(function(e){r.push({key:e.id,value:e.id,label:e.libelle})}),this.setState({testsMedical:[].concat(r)})}}},{key:"componentDidMount",value:function(){console.log(this.props.record),this.rechercheNorme(this.props.record.id)}},{key:"render",value:function(){var e=this,t={body:{cell:tp}},a=this.columns.map(function(t){return t.editable?Object(at.a)({},t,{onCell:function(a){return{record:a,inputType:t.title,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a),honoraire:e.props.honoraire,testsMedical:e.state.testsMedical}}}):t});return r.a.createElement("div",null,r.a.createElement(ep.Provider,{value:this.props.form},r.a.createElement(Je.a,{components:t,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0,defaultPageSize:50}})))}}]),t}(n.Component),np=He.a.create({name:"global_state"})(ap),rp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.a,{orientation:"left"},"Normes de S\xe9l\xe9ction"),r.a.createElement(Xd,{record:this.props.record}),r.a.createElement(np,{honoraire:this.props.honoraire,record:this.props.record}))}}]),t}(n.Component),ip=He.a.create({name:"global_state"})(rp),lp=$e.a.Option,sp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={exclusions:[],typePrestation:[],pieceJointe:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllExclusion("Deces"),this.getAllPiece(),this.getAllTypePrestation()}},{key:"getAllExclusion",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:a=e.sent,this.setState({exclusions:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllTypePrestation",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga();case 2:t=e.sent,this.setState({typePrestation:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllPiece",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn();case 2:t=e.sent,this.setState({pieceJointe:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12}}},{id:"formadd"}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations g\xe9n\xe9rales")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Frais de gestion WAKALA"},e("fraisGestion",{rules:[{required:!0,message:"Champs Obligatoire"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"TVA frais de gestion"},e("tvaFraisGestion",{rules:[{required:!0,message:"Champs Obligatoire"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Frais d'acquisition"},e("fraisAcquisition",{rules:[{required:!0,message:"Champs Obligatoire"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"TVA frais d'acquisition'"},e("tvaFraisGestion",{rules:[{required:!0,message:"Champs Obligatoire"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Taux taxe"},e("taxe",{rules:[{required:!0,message:"Champs Obligatoire"}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Exclusion")),r.a.createElement(xe.a,{span:24,offset:2},r.a.createElement(He.a.Item,null," ",e("exclusion",{rules:[{required:!0,message:"Exclusion is required!"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ..."},this.state.exclusions.map(function(e){return r.a.createElement(lp,{value:e.id,label:e.exclusionNom},e.exclusionNom)}))))))))}}]),t}(n.Component),op=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{fraisGestion:He.a.createFormField(Object(at.a)({},e.fraisGestion,{value:e.fraisGestion.value})),tvaFraisGestion:He.a.createFormField(Object(at.a)({},e.tvaFraisGestion,{value:e.tvaFraisGestion.value})),fraisAcquisition:He.a.createFormField(Object(at.a)({},e.fraisAcquisition,{value:e.fraisAcquisition.value})),tvaFraisAcquisition:He.a.createFormField(Object(at.a)({},e.tvaFraisAcquisition,{value:e.tvaFraisAcquisition.value})),montantAccessoire:He.a.createFormField(Object(at.a)({},e.montantAccessoire,{value:e.montantAccessoire.value})),taxe:He.a.createFormField(Object(at.a)({},e.taxe,{value:e.taxe.value})),exclusion:He.a.createFormField(Object(at.a)({},e.exclusion,{value:e.exclusion.value}))}}})(sp),cp=Al.a.Step,up={},mp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleFormChange=function(e){a.setState(function(t){var a=t.fields;return{fields:Object(at.a)({},a,e)}})},console.log("this.props.record.location",a.props.record.location),a.state={current:0,honoraire:{},fields:{risque:{value:a.props.record.location.state.record.risque.id},categorie:{value:a.props.record.location.state.record.categorie.id},periodicites:{value:a.props.record.location.state.record.periodicites.map(function(e){return e.id})},libelle:{value:a.props.record.location.state.record.libelle},code:{value:a.props.record.location.state.record.code},fraisGestion:{value:a.props.record.location.state.record.fraisGestion},fraisAcquisition:{value:a.props.record.location.state.record.fraisAcquisition},tvaFraisAcquisition:{value:a.props.record.location.state.record.tvaFraisAcquisition},tvaFraisGestion:{value:a.props.record.location.state.record.tvaFraisGestion},montantAccessoire:{value:a.props.record.location.state.record.montantAccessoire},taxe:{value:a.props.record.location.state.record.taxe},exclusion:{value:a.props.record.location.state.record.exclusions.map(function(e){return e.id})}}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllHonoraire()}},{key:"getAllHonoraire",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra();case 2:t=e.sent,up=t.data.content;case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=this.state.current+1;this.setState({current:e})}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"handleSubmit",value:function(){var e=this;if(2===this.state.current){var t=[];this.state.fields.exclusion.value.forEach(function(e){t.push({id:e})});var a=[];this.state.fields.periodicites.value.forEach(function(e){a.push({id:e})});var n={code:this.state.fields.code.value,libelle:this.state.fields.libelle.value,fraisGestion:this.state.fields.fraisGestion.value,fraisAcquisition:this.state.fields.fraisAcquisition.value,tvaFraisGestion:this.state.fields.tvaFraisGestion.value,tvaFraisAcquisition:this.state.fields.tvaFraisAcquisition.value,exclusions:t,periodicites:a,risqueId:this.state.fields.risque.value,categorieId:this.state.fields.categorie.value,taxe:this.state.fields.taxe.value,montantAccessoire:this.state.fields.montantAccessoire.value};$a(this.props.record.location.state.record.id,n).then(function(t){u.a.success({message:"TAKAFUL",description:"La est bien faite"}),e.props.record.history.push("/consultproduitdeces")}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})})}}},{key:"render",value:function(){var e=this;console.log("this.props.record.location.state.record",this.props.record.location.state.record);var t=this.state,a=t.current,n=t.fields,i=[{title:"Etape 1",content:r.a.createElement(Jd,Object.assign({record:this.props.record.location.state.record},n,{onChange:this.handleFormChange})),description:"Informations"},{title:"Etape 2",content:r.a.createElement(op,Object.assign({record:this.props.record.location.state.record},n,{onChange:this.handleFormChange})),description:"Informations g\xe9n\xe9rales"},{title:"Etape 3",content:r.a.createElement(ip,Object.assign({record:this.props.record.location.state.record,honoraire:up},n,{onChange:this.handleFormChange})),description:"Param\xe8tres globaux"}];return r.a.createElement("div",null,r.a.createElement(Al.a,{current:a},i.map(function(e){return r.a.createElement(cp,{key:e.title,title:e.title,description:e.description})})),r.a.createElement("div",{className:"steps-content-style"},i[a].content),r.a.createElement("div",{className:"steps-action"},a<i.length-1&&r.a.createElement(fe.a,{type:"primary",onClick:function(){return e.next()}},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})),a===i.length-1&&r.a.createElement(fe.a,{type:"primary",onClick:function(){return e.handleSubmit()}},r.a.createElement(w.a,{type:"save"}),"Enregistrer"),a>0&&r.a.createElement(fe.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent")))}}]),t}(n.Component),dp=$e.a.Option,pp=0,hp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleDelete=function(e){var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.keyMrb!==e})})},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n={key:pp,natureBien:t.natureBien,ageMax:t.ageMax,ageMin:t.ageMin,valeurMax:t.valeurMax,valeurMin:t.valeurMin,tauxContribution:t.tauxContribution};a.state.data.push(n),pp+=1}),a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.handleClose=function(){a.props.form.setFieldsValue({natureBien:"",ageMax:"",ageMin:"",valeurMax:"",valeurMin:"",tauxContribution:""})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n=[];t.exclusion.forEach(function(e){n.push({id:e})}),t.exclusion=[].concat(n);var r=[];t.periodicites.forEach(function(e){r.push({id:e})}),t.periodicites=[].concat(r);for(var i=[],l=0;l<a.state.data.length;l++){var s={ageMax:a.state.data[l].ageMax,ageMin:a.state.data[l].ageMin,valeurMax:a.state.data[l].valeurMax,valeurMin:a.state.data[l].valeurMin,natureBienAssure:a.state.data[l].natureBien,tauxContribution:a.state.data[l].tauxContribution};i.push(s)}var o={code:t.code,libelle:t.libelle,natureParticipant:t.natureSouscripteur,natureAssure:t.natureAssure,assureDiffParticipant:t.assureDiffParticipant,natureBienAssure:t.natureBien,franchiseIncendie:t.franchiseIncendie,franchiseBrisGlace:t.franchiseBrisGlace,franchiseDegatEaux:t.franchiseDegatEaux,franchiseCatastropheNaturelles:t.franchiseCatastrophesNaturelles,tauxTaxe:t.tauxTaxe,montantMaximumGarantie:t.montantMaximum,fraisGestion:t.fraisGestion,tvaFraisGestion:t.tvaFraisGestion,delaiPrescription:t.delaiEnAttente,delaiPrescriptionSansSouscription:t.delaiSansSouscription,exclusionsProduit:t.exclusion,periodicitesMrb:t.periodicites,partenaireId:t.intermediaire,tarificationsMrb:i};a.ajouterProduitMrb(o)})},a.state={current:0,periodicite:[],exclusions:[],tarifications:[],data:[],visible:!1,partenaire:[]},a.columns=[{title:"Nature du bien",dataIndex:"natureBien",key:"natureBien"},{title:"Age min",dataIndex:"ageMin",key:"ageMin"},{title:"Age max",dataIndex:"ageMax",key:"ageMax"},{title:"Valeur min",dataIndex:"valeurMin",key:"valeurMin"},{title:"Valeur max",dataIndex:"valeurMax",key:"valeurMax"},{title:"Montant de Contribution",dataIndex:"tauxContribution",key:"tauxContribution"},{title:"Op\xe9ration",dataIndex:"operation",render:function(e,t){return a.state.data.length>=1?r.a.createElement(Xe.a,{title:"etes-vous sur?",onConfirm:function(){return a.handleDelete(t.key)}},r.a.createElement("a",{href:"#top"},r.a.createElement(w.a,{type:"delete",theme:"twoTone"}))):null}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllPeriodicite(),this.getAllExclusion("MRB"),this.getAllPartenaires()}},{key:"ajouterProduitMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,localStorage.getItem(G)?ae({url:L+"/private/addProductMrb",data:a,method:"POST"}):Promise.reject("No access token set.");case 3:200===e.sent.status&&u.a.success({message:"l'ajout du produit est bien fait"}),this.props.record.history.push("/ProduitMrb"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.a.error({message:"Takaful",description:e.t0.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"});case 11:case"end":return e.stop()}var a},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPartenaires",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllExclusion",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:a=e.sent,this.setState({exclusions:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.visible,a={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12}}};return r.a.createElement("div",null,r.a.createElement(lt,{title:"Nouveau produit MRB"}),r.a.createElement(fn.a,{visible:t,title:"Ajout de tarification",onOk:this.handleOk,onCancel:this.handleCancel,afterClose:this.handleClose,footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCancel,className:"not-rounded"},"Annuler"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleOk,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,Object.assign({},a,{hideRequiredMark:!0}),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Nature du bien "},e("natureBien")(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez..."},r.a.createElement(dp,{value:"Appartement"},"Appartement"),r.a.createElement(dp,{value:"Maison"},"Maison"),r.a.createElement(dp,{value:"Villa"},"Villa"),r.a.createElement(dp,{value:"B\xe2timent"},"B\xe2timent")))),r.a.createElement(He.a.Item,{label:"Age du bien",required:!1},e("ageMin",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",className:"not-rounded",placeholder:"Min"})),e("ageMax",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",className:"not-rounded",placeholder:"Max"}))),r.a.createElement(He.a.Item,{label:"Valeur du bien",required:!1},e("valeurMin",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",className:"not-rounded",placeholder:"Min"})),e("valeurMax",{rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",className:"not-rounded",placeholder:"Max"}))),r.a.createElement(He.a.Item,{label:"Montant de la contribution",required:!1},e("tauxContribution",{rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{className:"not-rounded",addonAfter:"Dhs",placeholder:"Montant de la contribution"})))))),r.a.createElement("div",{style:{background:"#ECECEC",padding:"20px"}},r.a.createElement(He.a,Object.assign({id:"formadd"},a),r.a.createElement(ye.a,{gutter:12},r.a.createElement(xe.a,{span:12},r.a.createElement(D.a,{title:"Informations G\xe9n\xe9rales",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,{label:"Libelle"},e("libelle",{rules:[{required:!0,message:"entrez la libelle"}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},e("code",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Interm\xe9diaire"},e("intermediaire",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{placeholder:"Selectionnez ...",onChange:this.handleChange},this.state.partenaire.map(function(e){return r.a.createElement(dp,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)})))),r.a.createElement(He.a.Item,{label:"Periodicit\xe9"},e("periodicites",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ...",onChange:this.handleChange},this.state.periodicite.map(function(e){return r.a.createElement(dp,{key:e.id,value:e.id,label:e.abb},e.libelle)})))),r.a.createElement(He.a.Item,{label:"Exclusion"},e("exclusion",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ...",onChange:this.handleChange},this.state.exclusions.map(function(e){return r.a.createElement(dp,{key:e.id,value:e.id,label:e.exclusionNom},e.exclusionNom)}))))),r.a.createElement(D.a,{title:"Franchise",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,null,e("franchiseIncendie",{rules:[{required:!0}]})(r.a.createElement(Rn.a,null,"Franchise incendie"))),r.a.createElement(He.a.Item,null,e("franchiseBrisGlace",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(Rn.a,null,"Franchise bris de glace"))),r.a.createElement(He.a.Item,null,e("franchiseDegatEaux",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(Rn.a,null,"Franchise d\xe9gats des eaux"))),r.a.createElement(He.a.Item,null,e("franchiseCatastrophesNaturelles",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(Rn.a,null,"Franchise catastrophes naturelles"))))),r.a.createElement(xe.a,{span:12},r.a.createElement(D.a,{title:"Param\xe8tres globaux",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,{label:"Frais de gestion Wakala"},e("fraisGestion",{rules:[{required:!0}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"TVA frais de gestion"},e("tvaFraisGestion",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Montant max de garantie"},e("montantMaximum",{rules:[{required:!0}]})(r.a.createElement(I.a,{addonAfter:"DH"}))),r.a.createElement(He.a.Item,{label:"Taux taxe"},e("tauxTaxe",{rules:[{required:!0}]})(r.a.createElement(I.a,{addonAfter:"%"}))),r.a.createElement("label",null,r.a.createElement(He.a.Item,{label:" D\xe9lai de prescription de l\u2019offre EART"})),r.a.createElement(He.a.Item,{label:"En l\u2019attente du retour client"},e("delaiEnAttente",{rules:[{required:!0}]})(r.a.createElement(I.a,{addonAfter:"Jours"}))),r.a.createElement(He.a.Item,{label:"Client sans souscription"},e("delaiSansSouscription",{rules:[{required:!0}]})(r.a.createElement(I.a,{addonAfter:"Jours"})))),r.a.createElement(D.a,{title:"Souscripteur/ Assur\xe9",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,null," ",e("assureDiffParticipant",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(Rn.a,{defaultChecked:!1},"Assur\xe9 diff\xe9rent du participant"))),r.a.createElement(He.a.Item,{label:"Nature du participant/souscripteur"},e("natureSouscripteur",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Nature de l'assur\xe9"},e("natureAssure",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(I.a,null)))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24},r.a.createElement(D.a,{title:"Tarification",bordered:!1,style:{marginTop:16}},r.a.createElement(Je.a,{rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data}),r.a.createElement(fe.a,{type:"primary",className:"not-rounded",onClick:this.showModal,style:{marginTop:8}},r.a.createElement(w.a,{type:"plus"}),"Ajouter")))),r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"not-rounded",style:{width:"25%",marginTop:40},onClick:this.handleSubmit},"Enregistrer")))))}}]),t}(n.Component),fp=He.a.create()(hp),bp=$e.a.Option,Ep=0,vp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleDelete=function(e){var t=Object(tt.a)(a.state.data);a.setState({data:t.filter(function(t){return t.keyMrb!==e})})},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n={key:Ep,natureBien:t.natureBien,ageMax:t.ageMax,ageMin:t.ageMin,valeurMax:t.valeurMax,valeurMin:t.valeurMin,tauxContribution:t.tauxContribution};a.state.data.push(n),Ep+=1}),a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.handleClose=function(){a.props.form.setFieldsValue({natureBien:"",ageMax:"",ageMin:"",valeurMax:"",valeurMin:"",tauxContribution:""})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n=[];t.exclusion.forEach(function(e){n.push({id:e})}),t.exclusion=[].concat(n);var r=[];t.periodicites.forEach(function(e){r.push({id:e})}),t.periodicites=[].concat(r);var i={code:t.code,libelle:t.libelle,natureParticipant:t.natureSouscripteur,natureAssure:t.natureAssure,assureDiffParticipant:t.assureDiffParticipant,franchiseIncendie:t.franchiseIncendie,franchiseBrisGlace:t.franchiseBrisGlace,franchiseDegatEaux:t.franchiseDegatEaux,franchiseCatastropheNaturelles:t.franchiseCatastrophesNaturelles,tauxTaxe:t.tauxTaxe,montantMaximumGarantie:t.montantMaximum,fraisGestion:t.fraisGestion,tvaFraisGestion:t.tvaFraisGestion,delaiPrescription:t.delaiEnAttente,delaiPrescriptionSansSouscription:t.delaiSansSouscription,exclusionsProduit:t.exclusion,periodicitesMrb:t.periodicites,partenaireId:t.intermediaire};a.updatedProductMrb(a.props.record.location.state.record.id,i)})},a.state={current:0,periodicite:[],exclusions:[],tarifications:[],data:[],visible:!1,partenaire:[],periodicites:{value:a.props.record.location.state.record.periodicitesMrb.map(function(e){return e.id})},exclusion:{value:a.props.record.location.state.record.exclusionsProduit.map(function(e){return e.id})}},a.columns=[{title:"Nature du bien",dataIndex:"natureBien",key:"natureBien"},{title:"Age min",dataIndex:"ageMin",key:"ageMin"},{title:"Age max",dataIndex:"ageMax",key:"ageMax"},{title:"Valeur min",dataIndex:"valeurMin",key:"valeurMin"},{title:"Valeur max",dataIndex:"valeurMax",key:"valeurMax"},{title:"Taux Contribution",dataIndex:"tauxContribution",key:"tauxContribution"},{title:"Op\xe9ration",dataIndex:"operation",render:function(e,t){return a.state.data.length>=1?r.a.createElement(Xe.a,{title:"etes-vous sur?",onConfirm:function(){return a.handleDelete(t.key)}},r.a.createElement("a",{href:"#top"},r.a.createElement(w.a,{type:"delete",theme:"twoTone"}))):null}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPeriodicite(),this.getAllExclusion("MRB"),this.getAllPartenaires();var e=[];this.props.record.location.state.record.periodicitesMrb.forEach(function(t){e.push({id:t})}),this.props.record.location.state.record.periodicitesMrb=[].concat(e),this.props.form.setFieldsValue({libelle:this.props.record.location.state.record.libelle,code:this.props.record.location.state.record.code,natureSouscripteur:this.props.record.location.state.record.natureParticipant,natureAssure:this.props.record.location.state.record.natureAssure,assureDiffParticipant:this.props.record.location.state.record.assureDiffParticipant,natureBienAssure:this.props.record.location.state.record.natureBien,franchiseIncendie:this.props.record.location.state.record.franchiseIncendie,franchiseBrisGlace:this.props.record.location.state.record.franchiseBrisGlace,franchiseDegatEaux:this.props.record.location.state.record.franchiseDegatEaux,franchiseCatastrophesNaturelles:this.props.record.location.state.record.franchiseCatastropheNaturelles,tauxTaxe:this.props.record.location.state.record.tauxTaxe,montantMaximum:this.props.record.location.state.record.montantMaximumGarantie,fraisGestion:this.props.record.location.state.record.fraisGestion,tvaFraisGestion:this.props.record.location.state.record.tvaFraisGestion,delaiEnAttente:this.props.record.location.state.record.delaiPrescription,delaiSansSouscription:this.props.record.location.state.record.delaiPrescriptionSansSouscription,intermediaire:this.props.record.location.state.record.partenaire.id,periodicites:this.state.periodicites.value,exclusion:this.state.exclusion.value})}},{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllPartenaires",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaire:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updatedProductMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hr(t,a);case 2:this.props.record.history.push("/ProduitMrb");case 3:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAllExclusion",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:a=e.sent,this.setState({exclusions:a.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.visible,a={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:12}}};return r.a.createElement("div",null,r.a.createElement(lt,{title:"Modification du produit MRB"}),r.a.createElement(fn.a,{visible:t,title:"Ajout de tarification",onOk:this.handleOk,onCancel:this.handleCancel,afterClose:this.handleClose,footer:[r.a.createElement(fe.a,{key:"back",onClick:this.handleCancel,className:"not-rounded"},"Annuler"),r.a.createElement(fe.a,{key:"submit",type:"primary",onClick:this.handleOk,className:"not-rounded"},"Ajouter")]},r.a.createElement(He.a,Object.assign({},a,{hideRequiredMark:!0}),r.a.createElement(xe.a,null,r.a.createElement(He.a.Item,{label:"Nature du bien "},e("natureBien")(r.a.createElement($e.a,{placeholder:"S\xe9l\xe9ctionnez..."},r.a.createElement(bp,{value:"Appartement"},"Appartement"),r.a.createElement(bp,{value:"Maison"},"Maison"),r.a.createElement(bp,{value:"Villa"},"Villa"),r.a.createElement(bp,{value:"B\xe2timent"},"B\xe2timent")))),r.a.createElement(He.a.Item,{label:"Age du bien",required:!1},e("ageMin",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",className:"not-rounded",placeholder:"Min"})),e("ageMax",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Ans",className:"not-rounded",placeholder:"Max"}))),r.a.createElement(He.a.Item,{label:"Valeur du bien",required:!1},e("valeurMin",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",className:"not-rounded",placeholder:"Min"})),e("valeurMax",{rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{addonAfter:"Dhs",className:"not-rounded",placeholder:"Max"}))),r.a.createElement(He.a.Item,{label:"Taux de la contribution",required:!1},e("tauxContribution",{rules:[{required:!0,message:"Champs obligatoire."}]})(r.a.createElement(I.a,{className:"not-rounded",addonAfter:"%",placeholder:"Taux de la contribution"})))))),r.a.createElement("div",{style:{background:"#ECECEC",padding:"20px"}},r.a.createElement(He.a,Object.assign({id:"formadd"},a),r.a.createElement(ye.a,{gutter:12},r.a.createElement(xe.a,{span:12},r.a.createElement(D.a,{title:"Informations G\xe9n\xe9rales",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,{label:"Libelle"},e("libelle",{rules:[{required:!0,message:"entrez la libelle"}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},e("code",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Interm\xe9diaire"},e("intermediaire",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{placeholder:"Selectionnez ..."},this.state.partenaire.map(function(e){return r.a.createElement(bp,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)})))),r.a.createElement(He.a.Item,{label:"Periodicit\xe9"},e("periodicites",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ..."},this.state.periodicite.map(function(e){return r.a.createElement(bp,{key:e.id,value:e.id,label:e.abb},e.libelle)})))),r.a.createElement(He.a.Item,{label:"Exclusion"},e("exclusion",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ..."},this.state.exclusions.map(function(e){return r.a.createElement(bp,{key:e.id,value:e.id,label:e.exclusionNom},e.exclusionNom)}))))),r.a.createElement(D.a,{title:"Franchise",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,null,e("franchiseIncendie",{rules:[{required:!0}]})(r.a.createElement(Rn.a,{defaultChecked:this.props.record.location.state.record.franchiseIncendie},"Franchise incendie"))),r.a.createElement(He.a.Item,null,e("franchiseBrisGlace",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(Rn.a,{defaultChecked:this.props.record.location.state.record.franchiseBrisGlace},"Franchise bris de glace"))),r.a.createElement(He.a.Item,null,e("franchiseDegatEaux",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(Rn.a,{defaultChecked:this.props.record.location.state.record.franchiseDegatEaux},"Franchise d\xe9gats des eaux"))),r.a.createElement(He.a.Item,null,e("franchiseCatastrophesNaturelles",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(Rn.a,{defaultChecked:this.props.record.location.state.record.franchiseCatastropheNaturelles},"Franchise catastrophes naturelles"))))),r.a.createElement(xe.a,{span:12},r.a.createElement(D.a,{title:"Param\xe8tres globaux",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,{label:"Frais de gestion Wakala"},e("fraisGestion",{rules:[{required:!0}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"TVA frais de gestion"},e("tvaFraisGestion",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Montant max de garantie"},e("montantMaximum",{rules:[{required:!0}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Taux taxe"},e("tauxTaxe",{rules:[{required:!0}]})(r.a.createElement(I.a,null))),r.a.createElement("label",null,r.a.createElement(He.a.Item,{label:" D\xe9lai de prescription de l\u2019offre EART"})),r.a.createElement(He.a.Item,{label:"En l\u2019attente du retour client"},e("delaiEnAttente",{rules:[{required:!0}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Client sans souscription"},e("delaiSansSouscription",{rules:[{required:!0}]})(r.a.createElement(I.a,null)))),r.a.createElement(D.a,{title:"Souscripteur/ Assur\xe9",bordered:!1,style:{marginTop:16}},r.a.createElement(He.a.Item,null," ",e("assureDiffParticipant",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(Rn.a,{defaultChecked:this.props.record.location.state.record.fraisGestion},"Assur\xe9 diff\xe9rent du participant"))),r.a.createElement(He.a.Item,{label:"Nature du participant/souscripteur"},e("natureSouscripteur",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(I.a,null))),r.a.createElement(He.a.Item,{label:"Nature de l'assur\xe9"},e("natureAssure",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement(I.a,null)))))),r.a.createElement(He.a.Item,null,r.a.createElement(fe.a,{type:"primary",htmlType:"submit",className:"not-rounded",style:{marginLeft:"970px",width:"25%",marginTop:40},onClick:this.handleSubmit},"Enregistrer")))))}}]),t}(n.Component),gp=He.a.create()(vp),yp=rt.a.Title,Cp="DD-MM-YYYY",xp=Kt()(Kt()(),Cp).add(1,"days"),Sp=$e.a.Option,kp="",Ip=new Date,Op=[{title:"MONTANT DE PARTICIPATION HT (DH)",dataIndex:"montantCotisation"},{title:"Montant de taxe (DH)",dataIndex:"taxe"},{title:"Montant de participation TTC (DH)",dataIndex:"total"},{title:"Prorata HT (DH)",dataIndex:"Prorata"},{title:"Montant taxe 10% au prorata (DH)",dataIndex:"taxeProrata"},{title:"Prorata TTC (DH)",dataIndex:"ProrataTTC"}],jp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).searchPersonnePhysique=function(e){var t=Object(tt.a)(a.state.personlist).filter(function(t){return t.cin===e.key})[0];Ip=Kt()(t.dateNaissance,Cp),a.props.form.setFieldsValue({nom:t.nom,prenom:t.prenom,dateNaissance:Kt()(t.dateNaissance,Cp),age:Kt()().diff(Kt()(t.dateNaissance,Cp),"years")}),a.setState({souscripteur:t,nom:t.nom,prenom:t.prenom,dateNaissance:t.dateNaissance})},a.handleChangeCinSouscripteur=function(e){a.setState({selectedCinSouscripteur:e})},a.handleEffetDateChange=function(e){if(null!==a.state.dateEcheance){var t=a.state.dateEcheance;a.setState({dateEffet:e,dureeContrat:t.diff(e,"months")})}},a.onChangeDateNaissance=function(e){var t=Kt()(e).format("DD-MM-YYYY");a.setState({dateNaissance:t});var n=Kt()().diff(Kt()(e),"years");a.props.form.setFieldsValue({age:n})},a.onChangeEncours=function(e){a.setState({encours:e.target.value})},a.onChangePeriodicite=function(e){var t=a.state.periodicite.filter(function(t){return t.id===e});a.setState({period:t[0].libelle})},a.onChangeNom=function(e){a.setState({nom:e.target.value})},a.onChangePrenom=function(e){a.setState({prenom:e.target.value})},a.onChangeCapital=function(e){a.setState({capital:e.target.value})},a.onChangeDiffere=function(e){a.setState({differe:e.target.value})},a.onChangemontantSurprime=function(e){a.setState({montantSurprime:e.target.value})},a.handleConf=function(){var e={pointVente:kp,nomPrenom:a.state.nom+" "+a.state.prenom,dateNaissance:a.state.dateNaissance,capital:a.state.capital,duree:a.state.dureeContrat,differe:a.state.differe,periodicite:a.state.period,montantParticipationHT:a.state.montantCotisation,taxe:a.state.taxe,montantParticipationTTC:a.state.cotisationTotale.toFixed(2),risque:a.state.produit.risque.libelle,produit:a.state.produit.code};a.jasperFiles(e)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.getTariffication(t.capital,t.Differe,a.state.produit,t.dateNaissance)})},a.partnerChange=function(e){a.setState({usedProducts:a.state.produits.filter(function(t){return t.partenaire.raisonSocial===e.label})})},a.onChangeDureeContrat=function(e){var t=Kt.a.addRealMonth(a.state.dateEffet,e.target.value);if(a.setState({dureeContrat:e.target.value,dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value)}),a.props.form.setFieldsValue({dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value),dureeContrat:parseInt(e.target.value)}),Kt()(t).diff(Kt()(Ip),"years")>=70){a.setState({booleen:!0});var n="open".concat(Date.now()),i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(n)}},"Confirm");u.a.error({message:"TAKAFUL",description:"l'\xe2ge du soci\xe8taire \xe0 l'echeance d\xe9passe 70.",btn:i,duration:0,key:n})}},a.handleEcheanceDateChange=function(e){var t=a.state.dateEffet;if(a.setState({dateEcheance:e,dureeContrat:e.diff(t,"months")}),a.props.form.setFieldsValue({dureeContrat:e.diff(t,"months")}),Kt()(e).diff(Kt()(Ip),"years")>=70){var n="open".concat(Date.now()),i=r.a.createElement(fe.a,{type:"primary",size:"small",onClick:function(){return u.a.close(n)}},"Confirm");a.setState({booleen:!0}),u.a.error({message:"TAKAFUL",description:"l'\xe2ge du soci\xe8taire \xe0 l'echeance d\xe9passe 70.",btn:i,duration:0,key:n})}},a.onChangeProduit=function(e){var t=a.state.produits.filter(function(t){return t.id===e})[0];a.setState({produit:t,tauxFrais:t.fraisAcquisition,tauxGestion:t.fraisGestion,tvaFrais:t.tvaFraisAcquisition,tvaGestion:t.tvaFraisGestion})},a.state={dateNaissance:null,dureeContrat:0,dateEcheance:null,dateEffet:xp,Partenaires:[],produits:[],produit:{},usedProducts:[],OptionsAssurance:[],tarification:{},capital:null,option:null,differe:null,tauxSurprime:null,montantSurprime:null,montantCotisation:0,cotisationTotale:0,tauxTaxe:null,prorata:0,encours:null,cumul:0,dataSimulation:[],fraisAcquisitionTTC:null,fraisGestionTTC:null,contributionPure:null,tauxFrais:null,tauxGestion:null,tvaFrais:null,tvaGestion:null,test:null,cin:null,nom:null,booleen:!1,prenom:null,updated:!1,periodicite:[],period:"",personlistForAuto:[],personlist:[],souscripteur:{},selectedCinSouscripteur:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea();case 2:t=e.sent,a=[],t.data.content.forEach(function(e){var t=e.cin;a.push(t)}),this.setState({personlist:Object(tt.a)(t.data.content),personlistForAuto:[].concat(a)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDroppDownData(),this.getAllPeriodicite(),this.getproprties()}},{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTariffication",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n,r){var i,l,s,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kt()().diff(Kt()(r),"years"),l=this.state.dureeContrat,s=n.produitType,e.next=5,_a(l,i,t,a,s,n.id);case 5:o=e.sent,this.setState({tarification:o.data});case 7:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){if(t.tarification!==this.state.tarification&&"taux"===this.state.produit.produitType){var a=this.props.form.getFieldValue("capital"),n=(this.state.tarification.taux*a/100).toFixed(2),r=(n*(1+this.state.produit.taxe/100)).toFixed(2),i=(n*((13-Kt()().format("M"))/12)).toFixed(2);console.log("prorata:",i);var l=(10*i/100).toFixed(2),s=parseFloat(l)+parseFloat(i);this.setState({montantCotisation:this.state.tarification.taux*a/100,cotisationTotale:n*(1+this.state.produit.taxe/100),taxe:n*this.state.produit.taxe/100,dataSimulation:[{key:"1",taxe:n*this.state.produit.taxe/100,montantCotisation:n,total:r,Prorata:i,taxeProrata:l,ProrataTTC:s}]}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.taux*a/100})}else t.tarification!==this.state.tarification&&"forfait"===this.state.produit.produitType&&(this.setState({montantCotisation:this.state.tarification.forfait}),this.props.form.setFieldsValue({montantCotisation:this.state.tarification.forfait}));t.montantCotisation!==this.state.montantCotisation&&this.setState({updated:!0})}},{key:"jasperFiles",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(t);case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getDroppDownData",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:return t=e.sent,e.next=5,Wa();case 5:a=e.sent,this.setState({Partenaires:t.data.content,produits:a.data.content});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSubmit}),r.a.createElement(lt,{title:"Simulation D\xe9c\xe8s Financement"}),r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(yp,{level:4},"INFORMATIONS PROSPECT")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"CIN",hasFeedback:!0},t("cin",{valuePropName:"selected"})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.personlistForAuto,onSelect:this.searchPersonnePhysique,allowClear:!0,value:this.state.selectedCinSouscripteur,onChange:this.handleChangeCinSouscripteur,labelInValue:!0,placeholder:"CIN",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Nom",hasFeedback:!0},t("nom",{})(r.a.createElement(I.a,{onChange:this.onChangeNom})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Prenom",hasFeedback:!0},t("prenom",{})(r.a.createElement(I.a,{onChange:this.onChangePrenom}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date de naissance",hasFeedback:!0},t("dateNaissance",{rules:[{required:!0,message:"entre la Date de naissance"}]})(r.a.createElement(Lt.a,{className:"date-style",format:Cp,disabledDate:this.disabledDate,onChange:this.onChangeDateNaissance})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Age"},t("age",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"number-input",onChange:this.onChange,addonAfter:"Ans"}))))),r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(yp,{level:4},"INFORMATIONS CONTRAT")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'effet",hasFeedback:!0},t("dateEffet",{valuePropName:"selected",rules:[{message:"entre la Date d'effet"}]})(r.a.createElement(Lt.a,{className:"date-style",format:Cp,disabledDate:this.disabledDate,onChange:this.handleEffetDateChange,defaultValue:xp,disabled:!0})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'\xe9ch\xe9ance",hasFeedback:!0},t("dateEcheance",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date d'echeance"}]})(r.a.createElement(Lt.a,{className:"date-style",format:Cp,value:this.state.dateEcheance,disabledDate:this.disabledDateEcheance,onChange:this.handleEcheanceDateChange}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Dur\xe9e de contrat"},t("dureeContrat",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"number-input",onChange:this.onChangeDureeContrat,addonAfter:"Mois"})))),r.a.createElement(xe.a,{span:10},r.a.createElement(sh.Consumer,null,function(e){return kp=e.pointVentes[0].libelle,r.a.createElement(He.a.Item,{label:"Agence",hasFeedback:!0},t("pointVente",{valuePropName:"selected",rules:[{message:"selectionnez une agence"}]})(r.a.createElement($e.a,{placeholder:"agence",defaultValue:1===e.pointVentes.length&&e.pointVentes[0].id},e.pointVentes.map(function(e){return r.a.createElement(Sp,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))}))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Diff\xe9r\xe9"},t("Differe",{valuePropName:"selected",rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{addonAfter:"Mois",onChange:this.onChangeDiffere,className:"number-input"})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Interm\xe9diaire",hasFeedback:!0},t("partenaire",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez un Interm\xe9diaire"}]})(r.a.createElement($e.a,{placeholder:"Interm\xe9diaire",onChange:this.partnerChange,labelInValue:!0},this.state.Partenaires.map(function(e){return r.a.createElement(Sp,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Capital assur\xe9"},t("capital",{rules:[{required:!0,pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"DH",onChange:this.onChangeCapital,className:"number-input"})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Produit",hasFeedback:!0},t("produit",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez un produit"}]})(r.a.createElement($e.a,{placeholder:"produit",onChange:this.onChangeProduit},this.state.usedProducts.map(function(e){return r.a.createElement(Sp,{key:e.id,value:e.id,label:e.code},e.code)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"P\xe9riodicit\xe9"},t("periodicite",{})(r.a.createElement($e.a,{placeholder:"Selectionnez ...",onChange:this.onChangePeriodicite},this.state.periodicite.map(function(e){return r.a.createElement(Sp,{key:e.id,value:e.id,label:e.abb},e.libelle)}))))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Taux de marge"},t("tauxInteret",{rules:[{pattern:new RegExp(/^(?:[1-9]\d*|0)?(?:\.\d+)?$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"%",className:"number-input"}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},0!==this.state.OptionsAssurance.length&&r.a.createElement(He.a.Item,{label:"Option Assurance"},t("optionAssurance",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une Option Assurance"}]})(r.a.createElement($e.a,{placeholder:"Option Assurance",optionLabelProp:"label",labelInValue:!0,onChange:this.onChangeOption,defaultValue:1===this.state.OptionsAssurance.length&&{value:this.state.OptionsAssurance[0].id,label:this.state.OptionsAssurance[0].libelle}},this.state.OptionsAssurance.map(function(e){return r.a.createElement(Sp,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:10},r.a.createElement(fe.a,{type:"primary",className:"action-btn-calculer",htmlType:"submit",disabled:this.state.booleen},"Calculer"))),r.a.createElement(ye.a,null,0!==this.state.montantCotisation&&r.a.createElement(Je.a,{className:"table-simulation",columns:Op,dataSource:this.state.dataSimulation,pagination:!1,align:"center",size:"middle"})),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:23},0!==this.state.montantCotisation&&r.a.createElement(fe.a,{type:"primary",className:"edit-btn-pdf",onClick:function(){return e.handleConf()}},r.a.createElement(w.a,{type:"download"}),"Editer"))))}}]),t}(n.Component);Kt.a.addRealMonth=function(e,t){var a=Kt()(e).add(t,"M"),n=Kt()(a).endOf("month");return e.date()!==a.date()&&a.isSame(n.format("YYYY-MM-DD"))?a.add(1,"d"):a};var Tp=He.a.create()(jp),Ap=rt.a.Title,Pp="DD-MM-YYYY",Dp=Kt()(Kt()(),Pp).add(1,"days"),Fp=$e.a.Option,wp="",Mp=(new Date,[{title:"Prime Nette (DH)",dataIndex:"primeNette"},{title:"Prime HT (DH)",dataIndex:"primeHT"},{title:"Prime EVCAT (DH)",dataIndex:"primeEvcat"},{title:"Prime TTC(DH)",dataIndex:"primeTTC"},{title:"Prorata HT (DH)",dataIndex:"Prorata"},{title:"Prorata TTC (DH)",dataIndex:"ProrataTTC"}]),Np=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).searchPersonnePhysique=function(e){var t=Object(tt.a)(a.state.personlist).filter(function(t){return t.cin===e.key})[0];Kt()(t.dateNaissance,Pp),a.props.form.setFieldsValue({nom:t.nom,prenom:t.prenom,dateNaissance:Kt()(t.dateNaissance,Pp),age:Kt()().diff(Kt()(t.dateNaissance,Pp),"years")}),a.setState({souscripteur:t,nom:t.nom,prenom:t.prenom,dateNaissance:t.dateNaissance})},a.handleChangeCinSouscripteur=function(e){a.setState({selectedCinSouscripteur:e})},a.handleEffetDateChange=function(e){if(null!==a.state.dateEcheance){var t=a.state.dateEcheance;a.setState({dateEffet:e,dureeContrat:t.diff(e,"months")})}},a.onChangeDateNaissance=function(e){var t=Kt()(e).format("DD-MM-YYYY");a.setState({dateNaissance:t});var n=Kt()().diff(Kt()(e),"years");a.props.form.setFieldsValue({age:n})},a.onChangeEncours=function(e){a.setState({encours:e.target.value})},a.onChangePeriodicite=function(e){var t=a.state.periodicite.filter(function(t){return t.id===e});a.setState({period:t[0].libelle})},a.onChangeNom=function(e){a.setState({nom:e.target.value})},a.onChangePrenom=function(e){a.setState({prenom:e.target.value})},a.onChangeValeurBatiment=function(e){var t=parseFloat(20*e.target.value)/100;console.log("valeurC:",t),a.setState({valeurBatiment:e.target.value,valeurContenu:t})},a.onChangeNatureBatiment=function(e){a.setState({natureBatiment:e})},a.onChangemontantSurprime=function(e){a.setState({montantSurprime:e.target.value})},a.handleConf=function(){var e={pointVente:wp,nomPrenom:a.state.nom+" "+a.state.prenom,dateNaissance:a.state.dateNaissance,primeNette:a.state.primeNette,primeHT:a.state.primeHT,primeTTC:a.state.primeTTC,periodicite:a.state.period,primeEvcat:a.state.primeEvcat,valeurBatiment:a.state.valeurBatiment,typeBatiment:a.state.valeurContenu,produit:a.state.produit.code,taxe:a.state.taxe};a.jasperFilesMrb(e)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.getTariffication(t.valeurBatiment,t.natureBatiment,a.state.produit.id)})},a.partnerChange=function(e){a.setState({usedProducts:a.state.produits.filter(function(t){return t.partenaire.raisonSocial===e.label})})},a.onChangeDureeContrat=function(e){Kt.a.addRealMonth(a.state.dateEffet,e.target.value);a.setState({dureeContrat:e.target.value,dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value)}),a.props.form.setFieldsValue({dateEcheance:Kt.a.addRealMonth(a.state.dateEffet,e.target.value),dureeContrat:parseInt(e.target.value)})},a.handleEcheanceDateChange=function(e){var t=a.state.dateEffet;a.setState({dateEcheance:e,dureeContrat:e.diff(t,"months")}),a.props.form.setFieldsValue({dureeContrat:e.diff(t,"months")})},a.onChangeProduit=function(e){var t=a.state.produits.filter(function(t){return t.id===e})[0];a.setState({produit:t,tauxFrais:t.fraisAcquisition,tauxGestion:t.fraisGestion,tvaFrais:t.tvaFraisAcquisition,tvaGestion:t.tvaFraisGestion})},a.state={dateNaissance:null,dureeContrat:0,dateEcheance:null,dateEffet:Dp,Partenaires:[],produits:[],produit:{},usedProducts:[],OptionsAssurance:[],tarification:{},option:null,primeHT:0,Prorata:0,primeNette:0,primeTTC:0,primeEvcat:0,prorataTTC:0,taxe:0,valeurBatiment:0,natureBatiment:"",valeurContenu:0,dataSimulation:[],test:null,cin:null,nom:null,booleen:!1,prenom:null,updated:!1,periodicite:[],period:"",personlistForAuto:[],personlist:[],souscripteur:{},selectedCinSouscripteur:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getproprties",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea();case 2:t=e.sent,a=[],t.data.content.forEach(function(e){var t=e.cin;a.push(t)}),this.setState({personlist:Object(tt.a)(t.data.content),personlistForAuto:[].concat(a)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDroppDownData(),this.getAllPeriodicite(),this.getproprties()}},{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTariffication",value:function(){var e=Object(R.a)(N.a.mark(function e(t,a,n){var r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(t,a,n);case 2:r=e.sent,this.setState({tarification:r.data});case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){if(t.tarification!==this.state.tarification){this.setState({primeNette:this.state.tarification.tauxContribution});var a=(8*this.state.tarification.tauxContribution/100).toFixed(2);this.setState({primeEvcat:a});var n=parseFloat(this.state.tarification.tauxContribution)+parseFloat(a);this.setState({primeHT:n});var r=(14*n/100).toFixed(2);this.setState({taxe:r});var i=(1*n/100).toFixed(2),l=parseFloat(n)+parseFloat(r)+parseFloat(i);this.setState({primeTTC:l});var s=(n*((13-Kt()().format("M"))/12)).toFixed(2);this.setState({Prorata:s});var o=(14*s/100).toFixed(2),c=parseFloat(o)+parseFloat(s);this.setState({prorataTTC:c}),this.setState({dataSimulation:[{key:"1",primeNette:this.state.tarification.tauxContribution,primeHT:n,primeEvcat:a,primeTTC:l,Prorata:s,ProrataTTC:c}]})}}},{key:"jasperFilesMrb",value:function(){var e=Object(R.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i=t,localStorage.getItem(G)?ae({url:L+"/private/devisMrb/pdf",method:"POST",data:i,responseType:"blob"}):Promise.reject("No access token set.");case 2:200===(a=e.sent).status&&(n=new Blob([a.data],{type:"application/pdf"}),r=URL.createObjectURL(n),window.open(r));case 4:case"end":return e.stop()}var i},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getDroppDownData",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:return t=e.sent,e.next=5,Ur();case 5:a=e.sent,this.setState({Partenaires:t.data.content,produits:a.data.content});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:9},lg:{span:12}}},{onSubmit:this.handleSubmit}),r.a.createElement(lt,{title:"Simulation MRB"}),r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(Ap,{level:4},"INFORMATIONS PROSPECT")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"CIN",hasFeedback:!0},t("cin",{valuePropName:"selected"})(r.a.createElement(Yt.a,{size:"default",dataSource:this.state.personlistForAuto,onSelect:this.searchPersonnePhysique,allowClear:!0,value:this.state.selectedCinSouscripteur,onChange:this.handleChangeCinSouscripteur,labelInValue:!0,placeholder:"CIN",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Nom",hasFeedback:!0},t("nom",{})(r.a.createElement(I.a,{onChange:this.onChangeNom})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Prenom",hasFeedback:!0},t("prenom",{})(r.a.createElement(I.a,{onChange:this.onChangePrenom}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date de naissance",hasFeedback:!0},t("dateNaissance",{rules:[{required:!0,message:"entre la Date de naissance"}]})(r.a.createElement(Lt.a,{className:"date-style",format:Pp,disabledDate:this.disabledDate,onChange:this.onChangeDateNaissance})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Age"},t("age",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"number-input",onChange:this.onChange,addonAfter:"Ans"}))))),r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(Ap,{level:4},"INFORMATIONS CONTRAT")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'effet",hasFeedback:!0},t("dateEffet",{valuePropName:"selected",rules:[{message:"entre la Date d'effet"}]})(r.a.createElement(Lt.a,{className:"date-style",format:Pp,disabledDate:this.disabledDate,onChange:this.handleEffetDateChange,defaultValue:Dp,disabled:!0})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Date d'\xe9ch\xe9ance",hasFeedback:!0},t("dateEcheance",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une date d'echeance"}]})(r.a.createElement(Lt.a,{className:"date-style",format:Pp,value:this.state.dateEcheance,disabledDate:this.disabledDateEcheance,onChange:this.handleEcheanceDateChange}))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Dur\xe9e de contrat"},t("dureeContrat",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide !"}]})(r.a.createElement(I.a,{className:"number-input",onChange:this.onChangeDureeContrat,addonAfter:"Mois"})))),r.a.createElement(xe.a,{span:10},r.a.createElement(sh.Consumer,null,function(e){return wp=e.pointVentes[0].libelle,r.a.createElement(He.a.Item,{label:"Agence",hasFeedback:!0},t("pointVente",{valuePropName:"selected",rules:[{message:"selectionnez une agence"}]})(r.a.createElement($e.a,{placeholder:"agence",defaultValue:1===e.pointVentes.length&&e.pointVentes[0].id},e.pointVentes.map(function(e){return r.a.createElement(Fp,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))}))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Valeur de batiment"},t("valeurBatiment",{valuePropName:"selected",rules:[{required:!0}]})(r.a.createElement(I.a,{addonAfter:"DH",onChange:this.onChangeValeurBatiment,className:"number-input"})))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Interm\xe9diaire",hasFeedback:!0},t("partenaire",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez un Interm\xe9diaire"}]})(r.a.createElement($e.a,{placeholder:"Interm\xe9diaire",onChange:this.partnerChange,labelInValue:!0},this.state.Partenaires.map(function(e){return r.a.createElement(Fp,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Nature de batiment"},t("natureBatiment",{rules:[{required:!0}]})(r.a.createElement($e.a,{placeholder:"S\xe9lectionnez ",onChange:this.onChangeNatureBatiment},r.a.createElement(Fp,{value:"Appartement",label:"Appartement"},"Appartement"),r.a.createElement(Fp,{value:"Maison",label:"Maison"},"Maison"),r.a.createElement(Fp,{value:"Villa",label:"Villa"},"Villa"),r.a.createElement(Fp,{value:"B\xe2timent",label:"B\xe2timent"},"B\xe2timent"))))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Produit",hasFeedback:!0},t("produit",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez un produit"}]})(r.a.createElement($e.a,{placeholder:"produit",onChange:this.onChangeProduit},this.state.usedProducts.map(function(e){return r.a.createElement(Fp,{key:e.id,value:e.id,label:e.code},e.code)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"P\xe9riodicit\xe9"},t("periodicite",{})(r.a.createElement($e.a,{placeholder:"Selectionnez ...",onChange:this.onChangePeriodicite},this.state.periodicite.map(function(e){return r.a.createElement(Fp,{key:e.id,value:e.id,label:e.abb},e.libelle)})))))),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:10},0!==this.state.OptionsAssurance.length&&r.a.createElement(He.a.Item,{label:"Option Assurance"},t("optionAssurance",{valuePropName:"selected",rules:[{required:!0,message:"selectionnez une Option Assurance"}]})(r.a.createElement($e.a,{placeholder:"Option Assurance",optionLabelProp:"label",labelInValue:!0,onChange:this.onChangeOption,defaultValue:1===this.state.OptionsAssurance.length&&{value:this.state.OptionsAssurance[0].id,label:this.state.OptionsAssurance[0].libelle}},this.state.OptionsAssurance.map(function(e){return r.a.createElement(Fp,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:10},r.a.createElement(fe.a,{type:"primary",className:"action-btn-calculer",htmlType:"submit",disabled:this.state.booleen},"Calculer"))),r.a.createElement(ye.a,null,0!==this.state.primeHT&&r.a.createElement(Je.a,{className:"table-simulation",columns:Mp,dataSource:this.state.dataSimulation,pagination:!1,align:"center",size:"middle"})),r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:23},0!==this.state.primeHT&&r.a.createElement(fe.a,{type:"primary",className:"edit-btn-pdf",onClick:function(){return e.handleConf()}},r.a.createElement(w.a,{type:"download"}),"Editer"))))}}]),t}(n.Component);Kt.a.addRealMonth=function(e,t){var a=Kt()(e).add(t,"M"),n=Kt()(a).endOf("month");return e.date()!==a.date()&&a.isSame(n.format("YYYY-MM-DD"))?a.add(1,"d"):a};var Rp=He.a.create()(Np),qp=(a(1070),{labelCol:{span:10},wrapperCol:{span:12}}),Vp={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",auxiliaire:[]},zp=[{title:"Date D\xe9but",dataIndex:"dateDebut",key:"dateDebut"},{title:"Date Fin",dataIndex:"dateFin",key:"Date Fin"},{title:"Commission partenaire",dataIndex:"commissionPartenaire",key:"Commission partenaire"},{title:"TVA",dataIndex:"tva",key:"tva"}];var Yp=function(e){function t(e){var a,n;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state=Vp,a.columns=zp,a.columns1=(n=et.a,[{title:"Type prestation",dataIndex:"typePrestation.libelle",key:"typePrestation.libelle"},{title:"Pi\xe8ces justificatives",key:"pieceJointe",dataIndex:"pieceJointe",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(n,{color:"geekblue"},e.libelle)}))}}]),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleReload",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this,t=qp,a=[];return r.a.createElement("div",{className:"person"},r.a.createElement(lt,{title:"Consultation Retraite Produit"}),r.a.createElement(Bp.Consumer,null,function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"D\xe9tails du produit : ",e.state.libelle),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.02)",marginBottom:"30px",marginTop:"10px"}},r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Param\xe8tres g\xe9n\xe9rales")),r.a.createElement(xe.a,{span:24},r.a.createElement(He.a,t,r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Code"},r.a.createElement(I.a,{value:e.state.code}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Libelle"},r.a.createElement(I.a,{value:e.state.libelle}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"N\xb0 d'homologation"},r.a.createElement(I.a,{value:e.state.numeroHomologation}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Date d'homologation"},r.a.createElement(I.a,{value:e.state.dateHomologation}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Frais de Gestion WAKALA")},r.a.createElement(I.a,{value:e.state.fraisGestion,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Frais d'acquisition"},r.a.createElement(I.a,{value:e.state.fraisAcquisition,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Taux Taxe D&aposAssurance")},r.a.createElement(I.a,{value:e.state.taxe,addonAfter:"%"}))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Modalit\xe9s de Rachat Total")),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Application de rachat total"},r.a.createElement(I.a,{value:e.state.rachatTotal?"Oui":"Non"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e Minimale Sousciption Avant Rachat Total"),style:!0!==e.state.rachatTotal?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.dureeMinimalSouscriptionAvantRachatTotal}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Application de la condition disciplinaire"),style:!0!==e.state.rachatTotal?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.conditionDisciplinaireTotale?"Oui":"Non"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nature de la condition disciplinaire"),style:"ASAISIR"===e.state.natureConditionDisciplinaireTotale||!1===e.state.conditionDisciplinaireTotale?{display:"none"}:""},r.a.createElement(I.a,{value:"POURCENTAGE"===e.state.natureConditionDisciplinaireTotale?"Pourcentage":"Fixe"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Valeur de la condition disciplinaire"),style:"ASAISIR"===e.state.natureConditionDisciplinaireTotale||!1===e.state.conditionDisciplinaireTotale?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.valeurConditionDisciplinaireTotale,addonAfter:"FIXE"===e.state.natureConditionDisciplinaireTotale?"DHS":"%"}))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Modalit\xe9s de Rachat Partiel")),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Application de rachat partiel")},r.a.createElement(I.a,{value:e.state.rachatPartiel?"Oui ":"Non"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e Minimale de Souscription avant rachat Partiel"),style:!0!==e.state.rachatPartiel?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.dureeMinimalSouscriptionAvantRachatPartiel}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Application de la conditionn disciplinaire"),style:!0!==e.state.rachatPartiel?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.conditionDisciplinairePartiel?"Oui":"Non"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nature de la condition disciplinaire"),style:"ASAISIR"===e.state.natureConditionDisciplinairePartiel||!1===e.state.conditionDisciplinairePartiel?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.natureConditionDisciplinairePartiel}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Valeur de la condition disciplinaire"),style:"ASAISIR"===e.state.natureConditionDisciplinairePartiel||!1===e.state.conditionDisciplinairePartiel?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.valeurConditionDisciplinairePartiel,addonAfter:"FIXE"===e.state.natureConditionDisciplinairePartiel?"DHS":"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Maximum du montant de rachat partiel"),style:!0!==e.state.rachatTotal?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.maximumMontantRachatPartiel,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nombre Maximum de fois de rachat partiel"),style:!0!==e.state.rachatTotal?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.nombreMaximumRachatPartiel,addonAfter:"%"}))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Param\xe8tres globaux ")),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Num\xe9ro du compte TAKAFUL"},r.a.createElement(I.a,{value:e.state.numeroCompte}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Intitul\xe9 du compte TAKAFUL"},r.a.createElement(I.a,{value:e.state.libelleCompte}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Pool D'investissement"},r.a.createElement(I.a,{style:{display:"none"},value:e.state.poolInvestissment.map(function(e){return a.push(e.libelle)})}),r.a.createElement(I.a,{value:a.join()}))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Param\xe8tres de fiscalit\xe9"," ")),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Nature Fiscale"},r.a.createElement(I.a,{value:"EPARGNE "===e.state.natureFiscale?"Epargne":"Retraite compl\xe9mentaire"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Revenu global"},r.a.createElement(I.a,{value:e.state.revenuGlobal}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"R\xe9gime Fiscale"},r.a.createElement(I.a,{value:"RETRAITE "===e.state.natureFiscale?"Retraite compl\xe9mentaire":"Vie capitalisation"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Taux de rendement avant imposition"},r.a.createElement(I.a,{value:e.state.tauxRendementAvantImposition}))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Param\xe8tres de Souscription"," ")),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e Minimale de souscription")},r.a.createElement(I.a,{value:e.state.dureeMinimalSouscription,addonAfter:"Mois"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Renouvellement de contrat Tacite Reconduction")},r.a.createElement(I.a,{value:e.state.renouvellementContratTaciteReconduction?"Oui":"Non"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Montant minimum de contribution"},r.a.createElement(I.a,{value:e.state.montantMinContribution,addonAfter:"DHS"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Taux de Rendement cible avec imposition")},r.a.createElement(I.a,{value:e.state.tauxRendementAvantImposition,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Mode De Gestion"},r.a.createElement(I.a,{value:"MOUDARABA"===e.state.modeGestion?"Moudaraba":"WakalabillIstithmar"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Profit Moudaraba",style:"MOUDARABA"!==e.state.modeGestion?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.profitMoudaraba,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Frais WAKALA BIL ISTITHMAR",style:"WAKALABILISTITMAR"!==e.state.modeGestion?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.fraisFixeWakalabilIstithmar,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Superformance WAKALA BIL ISTITHMAR",style:"WAKALABILISTITMAR"!==e.state.modeGestion?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.surperformanceWakalabilIstithmar,addonAfter:"%"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Dur\xe9e minimale avant rachat partiel",style:!0!==e.state.rachatPartiel?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.dureeMinimalSouscriptionAvantRachatPartiel,addonAfter:"Mois"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:"Dur\xe9e minimale avant rachat totale",style:!0!==e.state.rachatTotal?{display:"none"}:""},r.a.createElement(I.a,{value:e.state.dureeMinimalSouscriptionAvantRachatTotal,addonAfter:"Mois"}))),r.a.createElement(xe.a,{span:12},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Mode du calcul du capital constitu\xe9 r\xe9veloris\xe9")},r.a.createElement(I.a,{value:"METHOD1"===e.state.modeCalculCapitalConstitue?"M\xe9thode 1 \u2013 D\xe9but de p\xe9riode + cotisations du mois (non investies)":"M\xe9thode 2 \u2013 Fin de p\xe9riode"})))))),r.a.createElement("h3",null,"P\xe9riodicit\xe9s"),r.a.createElement(o.a,{style:{marginBottom:"30px",marginTop:"10px"}}),r.a.createElement(ye.a,{style:{backgroundColor:"rgb(0,0,0,0.02)",marginBottom:"30px",marginTop:"10px"}},r.a.createElement(xe.a,{span:24},r.a.createElement(xe.a,{span:12},r.a.createElement("h3",null,"P\xe9riodicit\xe9s"),r.a.createElement(o.a,{style:{marginBottom:"3px",marginTop:"10px",width:"5%"}}),e.state.periodicites.map(function(e){return r.a.createElement(et.a,{key:e.id,color:"geekblue",style:{margin:"20px 4px"}},e.libelle)})))))}),r.a.createElement(fe.a,{type:"primary",className:"add-button",onClick:function(){return e.handleReload()}},r.a.createElement(w.a,{type:"arrow-left"}),"Retour"))}}]),t}(n.Component),Bp=r.a.createContext(),Lp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).rechercheRetraiteProduit=function(){var e=Object(R.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Jo().then(function(e){var a=[];e.data.content.forEach(function(e){var t={key:e.id};e=Object(at.a)({},e,t),a.push(e)}),t.setState({data:a})}).catch(function(e){401===e.status?u.a.error({message:"Takaful",description:"Votre login ou mot de passe est incorrect. Veuillez r\xe9essayer!"}):u.a.error({message:"Takaful",description:e.message||"D\xe9sol\xe9! Quelque chose s'est mal pass\xe9 Veuillez r\xe9essayer!"})});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getAllExclusion=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un();case 2:a=e.sent,t.setState({exclusion:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getAllRisque=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja();case 2:a=e.sent,t.setState({risques:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getAllPointVentes=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt();case 2:a=e.sent,t.setState({pointVente:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getAllCategorie=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa();case 2:a=e.sent,t.setState({categories:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getAllPeriodicite=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:a=e.sent,t.setState({periodicite:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleClick=function(e){a.setState({visible:!0,isEdit:!0,record:e})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.onClose=function(){a.setState({isEdited:!1})},a.state={data:[],visible:!1,searchText:"",searchedColumn:"",record:{},value:"",keyRecord:"",isEdit:!1,isEdited:!1,periodicite:[],exclusion:[],pointVente:[],risques:[],categories:[]},a.columns=[Object(at.a)({title:"Code",dataIndex:"code",key:"code"},Et("code","Code",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Libelle",dataIndex:"libelle",key:"libelle"},Et("libelle","Libelle",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Date cr\xe9ation",dataIndex:"creationDate",key:"creation_date"},Et("creationDate","Date creation",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Risque ",dataIndex:"risque.libelle",key:["risque","risque_id"]},Et("risque.libelle","risque ",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Cat\xe9gorie ",dataIndex:"categorie.libelle",key:["categorie","categorie_id"]},Et("categorie.libelle","categorie ",Object(b.a)(Object(b.a)(a)))),Object(at.a)({title:"Date modification ",dataIndex:"dateModification",key:"dateModification"},Et("dateModification","dateModification ",Object(b.a)(Object(b.a)(a)))),{title:"Op\xe9rations",align:"center",dataIndex:"operation",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(z.a,{to:{pathname:"/ModificationRetraiteProduit",state:{record:t}}},r.a.createElement(w.a,{type:"edit",style:{color:"rgb(119, 204, 109)",fontSize:"25px"}})),r.a.createElement(o.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return a.handleClick(t)}},r.a.createElement(w.a,{type:"profile",style:{color:"rgb(109, 143, 204)",fontSize:"25px"}})))}}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPeriodicite(this),this.getAllExclusion(this),this.getAllPointVentes(this),this.getAllRisque(this),this.getAllCategorie(this),this.rechercheRetraiteProduit(this)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Bp.Provider,{value:{state:this.state.record}},this.state.isEdit?r.a.createElement(Yp,null):r.a.createElement("div",null,r.a.createElement(lt,{title:"Param\xe9trage produit retraite"}),r.a.createElement(fe.a,{type:"primary",className:"add-button nouveau-btn"},r.a.createElement(z.a,{to:"/produitRetraite"},r.a.createElement(w.a,{type:"plus"})," Nouveau produit retraite")),r.a.createElement(Je.a,{bordered:!0,rowClassName:"editable-row",columns:this.columns,dataSource:this.state.data,pagination:{defaultCurrent:1,defaultPageSize:5}}))))}}]),t}(n.Component),Gp=He.a.create()(Lp),Up=["Epargne investissement Takaful Al Akhdar Bank \u2013 Retraite avec strat\xe9gie d\u2019investissement active","EpargneinvestissementTakaful Al Yousr Bank \u2013 Retraiteavec strat\xe9gie d\u2019investissement active","Epargne investissement Takaful Bureaux directs \u2013 Retraite avec strat\xe9gie d\u2019investissement active"],Hp=$e.a.Option,Kp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={categories:[],periodicite:[],partenaires:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllCategorie(),this.getAllPeriodicite(),this.getAllPartenaires()}},{key:"getAllPartenaires",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar();case 2:t=e.sent,this.setState({partenaires:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllPeriodicite",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr();case 2:t=e.sent,this.setState({periodicite:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllCategorie",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa();case 2:t=e.sent,this.setState({categories:t.data.content});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},Wo,{id:"formadd"}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Informations g\xe9n\xe9rales")),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Cat\xe9gorie",hasFeedback:!0},e("categorie",{rules:[{required:!0,message:"choisissez une cat\xe9gorie "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.categories.map(function(e){return r.a.createElement(Hp,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Intermediaire",hasFeedback:!0},e("partenaire",{rules:[{required:!0,message:"choisissez un intermediaire "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.partenaires.map(function(e){return r.a.createElement(Hp,{key:e.id,value:e.id,label:e.raisonSocial},e.raisonSocial)}))))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Libelle"},e("libelle",{rules:[{required:!0,message:"entrez la libelle"}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -"},Up.map(function(e){return r.a.createElement(Hp,{key:e.id,value:e,label:e},e)}))))),r.a.createElement(xe.a,{span:10},r.a.createElement(He.a.Item,{label:"Abr\xe9viation"},e("code",{rules:[{required:!0,message:"entrez le code "}]})(r.a.createElement(I.a,null)))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"})),r.a.createElement(xe.a,{span:10},$o("Frais de gestion WAKALA","fraisGestion","%",e)),r.a.createElement(xe.a,{span:10},$o("TVA frais de gestion","tvaFraisGestion","%",e)),r.a.createElement(xe.a,{span:10},$o("Frais d'acquisition","fraisAcquisition","%",e)),r.a.createElement(xe.a,{span:10},$o("TVA frais d'acquisition","tvaFraisGestion","%",e)),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"P\xe9riodicit\xe9")),r.a.createElement(xe.a,{span:20,offset:2},r.a.createElement(He.a.Item,null," ",e("periodicites",{rules:[{required:!0,message:"Champs Obligatoire !"}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ...",onChange:this.handleChange},this.state.periodicite.map(function(e){return r.a.createElement(Hp,{key:e.id,value:e.id,label:e.abb},e.libelle)}))))))))}}]),t}(n.Component),Wp=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{libelle:He.a.createFormField(Object(at.a)({},e.libelle,{value:e.libelle.value})),code:He.a.createFormField(Object(at.a)({},e.code,{value:e.code.value})),risque:He.a.createFormField(Object(at.a)({},e.risque,{value:e.risque.value})),categorie:He.a.createFormField(Object(at.a)({},e.categorie,{value:e.categorie.value})),partenaire:He.a.createFormField(Object(at.a)({},e.partenaire,{value:e.partenaire.value})),periodicites:He.a.createFormField(Object(at.a)({},e.periodicites,{value:e.periodicites.value})),fraisGestion:He.a.createFormField(Object(at.a)({},e.fraisGestion,{value:e.fraisGestion.value})),tvaFraisGestion:He.a.createFormField(Object(at.a)({},e.tvaFraisGestion,{value:e.tvaFraisGestion.value})),fraisAcquisition:He.a.createFormField(Object(at.a)({},e.fraisAcquisition,{value:e.fraisAcquisition.value})),tvaFraisAcquisition:He.a.createFormField(Object(at.a)({},e.tvaFraisAcquisition,{value:e.tvaFraisAcquisition.value})),montantAccessoire:He.a.createFormField(Object(at.a)({},e.montantAccessoire,{value:e.montantAccessoire.value})),taxe:He.a.createFormField(Object(at.a)({},e.taxe,{value:e.taxe.value}))}}})(Kp),$p=$e.a.Option,_p=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChangeNatureFiscale=function(e){a.setState({natureFiscale:e})},a.onChangeModeGestion=function(e){a.setState({modeGestion:e})},a.onChangeRevenuGlobal=function(e){a.setState({revenuGlobal:e.target.value})},a.onChangeAbattementFiscal=function(e){a.setState({abattementFiscal:e.target.value,revenuGlobal:e.target.value?a.state.revenuGlobal:""})},a.getAllPoolInvestissment=function(){var e=Object(R.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zo();case 2:a=e.sent,t.setState({poolInvestissments:a.data.content});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={poolInvestissments:[],naturesFiscales:[{value:"EPARGNE",name:"Epargne"},{value:"RETRAITE",name:"Retraite compl\xe9mentaire"}],modesGestions:[{value:"MOUDARABA",name:"Moudaraba"},{value:"WAKALABILISTITMAR",name:"WakalabillIstithmar"}],modeCapitalReconstitue:[{value:"METHOD1",name:"M\xe9thode 1 \u2013 D\xe9but de p\xe9riode + cotisations du mois (non investies"},{value:"METHOD2",name:"M\xe9thode 2 \u2013 Fin de p\xe9riode"}],regimeFiscal:[{value:"RETRAITE",name:"Retraite compl\xe9mentaire"},{value:"VIE",name:"Vie capitalisation"}],natureFiscale:a.props.record.natureFiscale,abattementFiscal:!0,modeGestion:a.props.record.modeGestion,revenuGlobal:a.props.record.revenuGlobal},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllPoolInvestissment(this)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24},md:{span:15},lg:{span:12}},wrapperCol:{xs:{span:20},sm:{span:20},md:{span:9},lg:{span:12}}},{id:"formadd"}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Param\xe8tres globaux")),r.a.createElement(xe.a,{span:11},_o("Num\xe9ro Compte Takaful","numeroCompte",e)),r.a.createElement(xe.a,{span:11},_o("Intitul\xe9 du compte Takaful","libelleCompte",e)),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Pool d'investissement",hasFeedback:!0},e("poolInvestissment",{rules:[{required:!0,message:"choisissez un pool "}]})(r.a.createElement($e.a,{mode:"multiple",placeholder:"Selectionnez ..."},this.state.poolInvestissments.map(function(e){return r.a.createElement($p,{key:e.id,value:e.id,label:e.libelle},e.libelle)}))))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Param\xe8tres de fiscalit\xe9")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Nature fiscale ",hasFeedback:!0},e("natureFiscale",{rules:[{required:!0,message:"choisissez une nature fiscale "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.onChangeNatureFiscale},this.state.naturesFiscales.map(function(e){return r.a.createElement($p,{key:e.id,value:e.value,label:e.name},e.name)}))))),"RETRAITE"===this.state.natureFiscale?r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Retraite avec abattement fiscale"},e("retraiteAbattementFiscale",{valuePropName:"unchecked",initialValue:this.state.abattementFiscal})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:this.state.abattementFiscal,onChange:this.onChangeAbattementFiscal},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))):null,this.state.abattementFiscal&&"RETRAITE"===this.state.natureFiscale?r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Revenu global"},e("revenuGlobal",{rules:[{required:!0,pattern:new RegExp(/[+-]?([0-9]*[.])?[0-9]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{value:this.state.revenuGlobal,addonAfter:"DHS",onChange:this.onChangeRevenuGlobal})))):null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"R\xe9gime fiscale ",hasFeedback:!0},e("regimeFiscal",{rules:[{required:!0,message:"choisissez un r\xe9gime fiscale "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.regimeFiscal.map(function(e){return r.a.createElement($p,{key:e.id,value:e.value,label:e.name},e.name)}))))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Taux Rendement Avant Imposition")},e("tauxRendementAvantImposition",{rules:[{required:!0,message:"Champs Obligatoire"}]})(r.a.createElement(I.a,{addonAfter:"%"})))),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Param\xe8tres de souscription")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e Minimale de Souscription")},e("dureeMinimalSouscription",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"})))),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Renouvellement Contrat par tacite de reconduction")},e("renouvellementContratTaciteReconduction",{valuePropName:"unchecked",initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!0,onChange:this.onChange},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))),r.a.createElement(xe.a,{span:11},$o("Montant minimal de contribution","montantMinContribution","DHS",e)),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Mode de gestion",hasFeedback:!0},e("modeGestion",{rules:[{required:!0,message:"choisissez un mode de gestion "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.onChangeModeGestion},this.state.modesGestions.map(function(e){return r.a.createElement($p,{key:e.id,value:e.value,label:e.name},e.name)}))))),"MOUDARABA"!==this.state.modeGestion?r.a.createElement(xe.a,{span:11},$o("Frais fixe WAKALA BILISTITHMAR","fraisFixeWakalabilIstithmar","DHS",e)):null,"MOUDARABA"!==this.state.modeGestion?r.a.createElement(xe.a,{span:11},$o("Superformance WAKALA BIL ISTITHMAR","surperformanceWakalabilIstithmar","%",e)):null,"MOUDARABA"===this.state.modeGestion?r.a.createElement(xe.a,{span:11},$o("Profit Moudaraba","profitMoudaraba","%",e)):null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Mode de Calcul du Capital Constitue"),hasFeedback:!0},e("modeCalculCapitalConstitue",{rules:[{required:!0,message:"choisissez un mode de gestion "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.handleChange},this.state.modeCapitalReconstitue.map(function(e){return r.a.createElement($p,{key:e.id,value:e.value,label:e.name},e.name)}))))))))}}]),t}(n.Component),Jp=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{numeroCompte:He.a.createFormField(Object(at.a)({},e.numeroCompte,{value:e.numeroCompte.value})),libelleCompte:He.a.createFormField(Object(at.a)({},e.libelleCompte,{value:e.libelleCompte.value})),natureFiscale:He.a.createFormField(Object(at.a)({},e.natureFiscale,{value:e.natureFiscale.value})),tauxRendementAvantImposition:He.a.createFormField(Object(at.a)({},e.tauxRendementAvantImposition,{value:e.tauxRendementAvantImposition.value})),revenuGlobal:He.a.createFormField(Object(at.a)({},e.revenuGlobal,{value:e.revenuGlobal.value})),dureeMinimalSouscription:He.a.createFormField(Object(at.a)({},e.dureeMinimalSouscription,{value:e.dureeMinimalSouscription.value})),renouvellementContratTaciteReconduction:He.a.createFormField(Object(at.a)({},e.renouvellementContratTaciteReconduction,{value:e.renouvellementContratTaciteReconduction.value})),montantMinContribution:He.a.createFormField(Object(at.a)({},e.montantMinContribution,{value:e.montantMinContribution.value})),modeGestion:He.a.createFormField(Object(at.a)({},e.modeGestion,{value:e.modeGestion.value})),fraisFixeWakalabilIstithmar:He.a.createFormField(Object(at.a)({},e.fraisFixeWakalabilIstithmar,{value:e.fraisFixeWakalabilIstithmar.value})),surperformanceWakalabilIstithmar:He.a.createFormField(Object(at.a)({},e.surperformanceWakalabilIstithmar,{value:e.surperformanceWakalabilIstithmar.value})),profitMoudaraba:He.a.createFormField(Object(at.a)({},e.profitMoudaraba,{value:e.profitMoudaraba.value})),modeCalculCapitalConstitue:He.a.createFormField(Object(at.a)({},e.modeCalculCapitalConstitue,{value:e.modeCalculCapitalConstitue.value})),regimeFiscal:He.a.createFormField(Object(at.a)({},e.regimeFiscal,{value:e.regimeFiscal.value})),poolInvestissment:He.a.createFormField(Object(at.a)({},e.poolInvestissment,{value:e.poolInvestissment.value}))}}})(_p),Qp=$e.a.Option,Xp=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChangeRachatTotal=function(e){a.setState({rachatTotal:e.target.value})},a.onChangeRachatPartiel=function(e){a.setState({rachatPartiel:e.target.value})},a.onChangeApplicationConditionDisciplinairePartiel=function(e){a.setState({conditionDisciplinairePartiel:e.target.value})},a.onChangeApplicationConditionDisciplinaireTotale=function(e){a.setState({conditionDisciplinaireTotale:e.target.value})},a.onChangeNatureConditionDisciplinairePartiel=function(e){a.setState({natureConditionDisciplinairePartiel:e})},a.onChangeNatureConditionDisciplinaireTotale=function(e){a.setState({natureConditionDisciplinaireTotale:e})},a.state={conditionsDisciplinaires:[{value:"FIXE",name:"Montant fixe"},{value:"POURCENTAGE",name:"Pourcentage"},{value:"ASAISIR",name:"Montant \xe0 saisir"}],rachatTotal:a.props.rachatTotal.value,rachatPartiel:a.props.rachatPartiel.value,conditionDisciplinairePartiel:a.props.conditionDisciplinairePartiel.value,conditionDisciplinaireTotale:a.props.conditionDisciplinaireTotale.value,natureConditionDisciplinairePartiel:a.props.natureConditionDisciplinairePartiel.value,natureConditionDisciplinaireTotale:a.props.natureConditionDisciplinaireTotale.value},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ye.a,null,r.a.createElement(xe.a,{span:24,offset:1},r.a.createElement(He.a,Object.assign({},Wo,{id:"formadd"}),r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Modalit\xe9s de rachat total")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Application de rachat total "},e("rachatTotal",{initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!1,onChange:this.onChangeRachatTotal},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))),this.state.rachatTotal?r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e Minimale Souscription Avant Rachat Total")},e("dureeMinimalSouscriptionAvantRachatTotal",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"})))):null,this.state.rachatTotal?r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Application de la condition disciplinaire "},e("conditionDisciplinaireTotale",{initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!1,onChange:this.onChangeApplicationConditionDisciplinaireTotale},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))):null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nature de la condition disciplinaire"),hasFeedback:!0},e("natureConditionDisciplinaireTotale",{rules:[{required:!0,message:"choisissez une condition "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.onChangeNatureConditionDisciplinaireTotale},this.state.conditionsDisciplinaires.map(function(e){return r.a.createElement(Qp,{key:e.id,value:e.value,label:e.name},e.name)}))))),"ASAISIR"!==this.state.natureConditionDisciplinaireTotale?r.a.createElement(xe.a,{span:11},$o("Valeur de la condition disciplinaire","valeurConditionDisciplinaireTotale","FIXE"===this.state.natureConditionDisciplinaireTotale?"DHS":"%",e)):null,r.a.createElement(xe.a,{span:20},r.a.createElement(o.a,{orientation:"left"},"Modalit\xe9s de rachat Partiel")),r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Application de rachat partiel "},e("rachatPartiel",{initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!1,onChange:this.onChangeRachatPartiel},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))),this.state.rachatPartiel?r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Dur\xe9e Minimale Souscription Avant Rachat Partiel")},e("dureeMinimalSouscriptionAvantRachatPartiel",{rules:[{required:!0,pattern:new RegExp(/^[0-9\b]+$/),message:"Format invalide!"}]})(r.a.createElement(I.a,{addonAfter:"Mois"})))):null,this.state.rachatPartiel?r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Application de la condition disciplinaire "},e("conditionDisciplinairePartiel",{initialValue:!1})(r.a.createElement(Ut.a.Group,{buttonStyle:"solid",defaultValue:!1,onChange:this.onChangeApplicationConditionDisciplinairePartiel},r.a.createElement(Ut.a.Button,{value:!0},"Oui"),r.a.createElement(Ut.a.Button,{value:!1},"Non"))))):null,r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:r.a.createElement("label",{style:{whiteSpace:"normal"}},"Nature de la condition disciplinaire"),hasFeedback:!0},e("natureConditionDisciplinairePartiel",{rules:[{required:!0,message:"choisissez une condition "}]})(r.a.createElement($e.a,{placeholder:"-s\xe9lectionnez -",onChange:this.onChangeNatureConditionDisciplinairePartiel},this.state.conditionsDisciplinaires.map(function(e){return r.a.createElement(Qp,{key:e.id,value:e.value,label:e.name},e.name)}))))),"ASAISIR"!==this.state.natureConditionDisciplinairePartiel?r.a.createElement(xe.a,{span:11},$o("Valeur de la condition disciplinaire","valeurConditionDisciplinairePartiel","FIXE"===this.state.natureConditionDisciplinairePartiel?"DHS":"%",e)):null,this.state.rachatPartiel?r.a.createElement(xe.a,{span:11},$o("Valeur de la condition disciplinaire","valeurConditionDisciplinairePartiel","%",e)):null,this.state.rachatPartiel?r.a.createElement(xe.a,{span:11},r.a.createElement(He.a.Item,{label:"Nombre maximum de rachat partiel"},e("nombreMaximumRachatPartiel",{rules:[{required:!0,message:"Champs Obligatoire"}]})(r.a.createElement(I.a,null)))):null)))}}]),t}(n.Component),Zp=He.a.create({name:"global_state",onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){return{rachatTotal:He.a.createFormField(Object(at.a)({},e.rachatTotal,{value:e.rachatTotal.value})),dureeMinimalSouscriptionAvantRachatTotal:He.a.createFormField(Object(at.a)({},e.dureeMinimalSouscriptionAvantRachatTotal,{value:e.dureeMinimalSouscriptionAvantRachatTotal.value})),conditionDisciplinaireTotale:He.a.createFormField(Object(at.a)({},e.conditionDisciplinaireTotale,{value:e.conditionDisciplinaireTotale.value})),natureConditionDisciplinaireTotale:He.a.createFormField(Object(at.a)({},e.natureConditionDisciplinaireTotale,{value:e.natureConditionDisciplinaireTotale.value})),valeurConditionDisciplinaireTotale:He.a.createFormField(Object(at.a)({},e.valeurConditionDisciplinaireTotale,{value:e.valeurConditionDisciplinaireTotale.value})),rachatPartiel:He.a.createFormField(Object(at.a)({},e.rachatPartiel,{value:e.rachatPartiel.value})),dureeMinimalSouscriptionAvantRachatPartiel:He.a.createFormField(Object(at.a)({},e.dureeMinimalSouscriptionAvantRachatPartiel,{value:e.dureeMinimalSouscriptionAvantRachatPartiel.value})),conditionDisciplinairePartiel:He.a.createFormField(Object(at.a)({},e.conditionDisciplinairePartiel,{value:e.conditionDisciplinairePartiel.value})),natureConditionDisciplinairePartiel:He.a.createFormField(Object(at.a)({},e.natureConditionDisciplinairePartiel,{value:e.natureConditionDisciplinairePartiel.value})),valeurConditionDisciplinairePartiel:He.a.createFormField(Object(at.a)({},e.valeurConditionDisciplinairePartiel,{value:e.valeurConditionDisciplinairePartiel.value})),maximumMontantRachatPartiel:He.a.createFormField(Object(at.a)({},e.maximumMontantRachatPartiel,{value:e.maximumMontantRachatPartiel.value})),nombreMaximumRachatPartiel:He.a.createFormField(Object(at.a)({},e.nombreMaximumRachatPartiel,{value:e.nombreMaximumRachatPartiel.value}))}}})(Xp),eh=Al.a.Step,th={},ah=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleFormChange=function(e){a.setState(function(t){var a=t.fields;return{fields:Object(at.a)({},a,e)}})},a.state={current:0,honoraire:{},fields:{risque:{value:a.props.record.location.state.record.risque.id},categorie:{value:a.props.record.location.state.record.categorie.id},partenaire:{value:a.props.record.location.state.record.partenaire.id},periodicites:{value:a.props.record.location.state.record.periodicites.map(function(e){return e.id})},numeroHomologation:{value:a.props.record.location.state.record.numeroHomologation},dateHomologation:{value:a.props.record.location.state.record.dateHomologation},libelle:{value:a.props.record.location.state.record.libelle},code:{value:a.props.record.location.state.record.code},fraisGestion:{value:a.props.record.location.state.record.fraisGestion},fraisAcquisition:{value:a.props.record.location.state.record.fraisAcquisition},tvaFraisAcquisition:{value:a.props.record.location.state.record.tvaFraisAcquisition},tvaFraisGestion:{value:a.props.record.location.state.record.tvaFraisGestion},montantAccessoire:{value:a.props.record.location.state.record.montantAccessoire},taxe:{value:a.props.record.location.state.record.taxe},rachatTotal:{value:a.props.record.location.state.record.rachatTotal},dureeMinimalSouscriptionAvantRachatTotal:{value:a.props.record.location.state.record.dureeMinimalSouscriptionAvantRachatTotal},conditionDisciplinaireTotale:{value:a.props.record.location.state.record.conditionDisciplinaireTotale},natureConditionDisciplinaireTotale:{value:a.props.record.location.state.record.natureConditionDisciplinaireTotale},valeurConditionDisciplinaireTotale:{value:a.props.record.location.state.record.valeurConditionDisciplinaireTotale},rachatPartiel:{value:a.props.record.location.state.record.rachatPartiel},dureeMinimalSouscriptionAvantRachatPartiel:{value:a.props.record.location.state.record.dureeMinimalSouscriptionAvantRachatPartiel},conditionDisciplinairePartiel:{value:a.props.record.location.state.record.conditionDisciplinairePartiel},natureConditionDisciplinairePartiel:{value:a.props.record.location.state.record.natureConditionDisciplinairePartiel},valeurConditionDisciplinairePartiel:{value:a.props.record.location.state.record.valeurConditionDisciplinairePartiel},maximumMontantRachatPartiel:{value:a.props.record.location.state.record.maximumMontantRachatPartiel},nombreMaximumRachatPartiel:{value:a.props.record.location.state.record.nombreMaximumRachatPartiel},numeroCompte:{value:a.props.record.location.state.record.numeroCompte},libelleCompte:{value:a.props.record.location.state.record.libelleCompte},natureFiscale:{value:a.props.record.location.state.record.natureFiscale},revenuGlobal:{value:a.props.record.location.state.record.revenuGlobal},tauxRendementAvantImposition:{value:a.props.record.location.state.record.tauxRendementAvantImposition},dureeMinimalSouscription:{value:a.props.record.location.state.record.dureeMinimalSouscription},renouvellementContratTaciteReconduction:{value:a.props.record.location.state.record.renouvellementContratTaciteReconduction},montantMinContribution:{value:a.props.record.location.state.record.montantMinContribution},modeGestion:{value:a.props.record.location.state.record.modeGestion},fraisFixeWakalabilIstithmar:{value:a.props.record.location.state.record.fraisFixeWakalabilIstithmar},surperformanceWakalabilIstithmar:{value:a.props.record.location.state.record.surperformanceWakalabilIstithmar},profitMoudaraba:{value:a.props.record.location.state.record.profitMoudaraba},modeCalculCapitalConstitue:{value:a.props.record.location.state.record.modeCalculCapitalConstitue},regimeFiscal:{value:a.props.record.location.state.record.regimeFiscal},poolInvestissment:{value:a.props.record.location.state.record.poolInvestissment.map(function(e){return e.id})}}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllHonoraire()}},{key:"getAllHonoraire",value:function(){var e=Object(R.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra();case 2:t=e.sent,th=t.data.content;case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"checkForm1Validity",value:function(){return""!==this.state.fields.libelle.value&&""!==this.state.fields.code.value&&""!==this.state.fields.fraisAcquisition.value&&""!==this.state.fields.fraisGestion.value&&""!==this.state.fields.taxe.value&&""!==this.state.fields.tvaFraisAcquisition.value&&""!==this.state.fields.tvaFraisGestion.value&&0!==this.state.fields.periodicites.value.length}},{key:"checkForm2Validity",value:function(){var e=!0,t=!0;return this.state.fields.rachatTotal.value&&"ASAISIR"!==this.state.fields.natureConditionDisciplinaireTotale.value&&(t=""!==this.state.fields.dureeMinimalSouscriptionAvantRachatTotal.value&&""!==this.state.fields.valeurConditionDisciplinaireTotale.value),this.state.fields.rachatPartiel.value&&"ASAISIR"!==this.state.fields.natureConditionDisciplinairePartiel.value&&(e=""!==this.state.fields.dureeMinimalSouscriptionAvantRachatPartiel.value&&""!==this.state.fields.valeurConditionDisciplinairePartiel.value&&""!==this.state.fields.maximumMontantRachatPartiel.value&&""!==this.state.fields.nombreMaximumRachatPartiel.value),e&&t}},{key:"checkForm3Validity",value:function(){var e,t,a;return e="MOUDARABA"===this.state.fields.modeGestion.value,t="MOUDARABA"!==this.state.fields.modeGestion.value,a=""!==this.state.fields.libelleCompte.value&&""!==this.state.fields.numeroCompte.value&&""!==this.state.fields.montantMinContribution.value&&""!==this.state.fields.dureeMinimalSouscription.value&&""!==this.state.fields.tauxRendementAvantImposition.value&&0!==this.state.fields.poolInvestissment.value.length,e?a&&""!==this.state.fields.profitMoudaraba.value:t?a&&""!==this.state.fields.fraisFixeWakalabilIstithmar.value&&""!==this.state.fields.surperformanceWakalabilIstithmar.value:void 0}},{key:"next",value:function(){var e=this.state.current+1;this.setState({current:e})}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"handleSubmit",value:function(){var e,t,a=this;if(2===this.state.current){var n=[],r=[];this.state.fields.periodicites.value.forEach(function(e){n.push({id:e})}),this.state.fields.poolInvestissment.value.forEach(function(e){r.push({id:e})});var i={id:this.props.record.location.state.record.id,creationDate:this.props.record.location.state.record.creationDate,code:this.state.fields.code.value,libelle:this.state.fields.libelle.value,fraisGestion:this.state.fields.fraisGestion.value,fraisAcquisition:this.state.fields.fraisAcquisition.value,tvaFraisGestion:this.state.fields.tvaFraisGestion.value,tvaFraisAcquisition:this.state.fields.tvaFraisAcquisition.value,periodicites:n,risque:{id:this.state.fields.risque.value},categorie:{id:this.state.fields.categorie.value},partenaire:{id:this.state.fields.partenaire.value},rachatTotal:this.state.fields.rachatTotal.value,dureeMinimalSouscriptionAvantRachatTotal:this.state.fields.dureeMinimalSouscriptionAvantRachatTotal.value,conditionDisciplinaireTotale:this.state.fields.conditionDisciplinaireTotale.value,natureConditionDisciplinaireTotale:this.state.fields.natureConditionDisciplinaireTotale.value,valeurConditionDisciplinaireTotale:this.state.fields.valeurConditionDisciplinaireTotale.value,rachatPartiel:this.state.fields.rachatPartiel.value,dureeMinimalSouscriptionAvantRachatPartiel:this.state.fields.dureeMinimalSouscriptionAvantRachatPartiel.value,conditionDisciplinairePartiel:this.state.fields.conditionDisciplinairePartiel.value,natureConditionDisciplinairePartiel:this.state.fields.natureConditionDisciplinairePartiel.value,valeurConditionDisciplinairePartiel:this.state.fields.valeurConditionDisciplinairePartiel.value,maximumMontantRachatPartiel:this.state.fields.maximumMontantRachatPartiel.value,tauxRendementAvantImposition:this.state.fields.tauxRendementAvantImposition.value,nombreMaximumRachatPartiel:this.state.fields.nombreMaximumRachatPartiel.value,numeroCompte:this.state.fields.numeroCompte.value,libelleCompte:this.state.fields.libelleCompte.value,dateModification:Uo(new Date),poolInvestissment:r,natureFiscale:this.state.fields.natureFiscale.value,revenuGlobal:this.state.fields.revenuGlobal.value,dureeMinimalSouscription:this.state.fields.dureeMinimalSouscription.value,renouvellementContratTaciteReconduction:this.state.fields.renouvellementContratTaciteReconduction.value,montantMinContribution:this.state.fields.montantMinContribution.value,modeGestion:this.state.fields.modeGestion.value,fraisFixeWakalabilIstithmar:this.state.fields.fraisFixeWakalabilIstithmar.value,surperformanceWakalabilIstithmar:this.state.fields.surperformanceWakalabilIstithmar.value,profitMoudaraba:this.state.fields.profitMoudaraba.value,modeCalculCapitalConstitue:this.state.fields.modeCalculCapitalConstitue.value,numeroHomologation:this.state.fields.numeroHomologation.value,dateHomologation:this.state.fields.dateHomologation.value,taxe:this.state.fields.taxe.value,montantAccessoire:this.state.fields.montantAccessoire.value,regimeFiscal:this.state.fields.regimeFiscal.value};(e=this.props.record.location.state.record.id,t=i,localStorage.getItem(G)?ae({url:L+"/private/retraitproduit/"+e,method:"PUT",data:t}):Promise.reject("No access token set.")).then(function(e){u.a.success({message:"TAKAFUL",description:"La modification est bien faite"}),a.props.record.history.push("/consultproduitretraite")}).catch(function(e){u.a.error({message:"TAKAFUL",description:e.message||"Sorry! Something went wrong. Please try again!"})})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.fields,i=[{title:"Etape 1",content:r.a.createElement(Wp,Object.assign({record:this.props.record.location.state.record},n,{onChange:this.handleFormChange})),description:"Informations g\xe9n\xe9rales "},{title:"Etape 2",content:r.a.createElement(Zp,Object.assign({record:this.props.record.location.state.record},n,{onChange:this.handleFormChange})),description:"Modalit\xe9s de Rachat"},{title:"Etape 3",content:r.a.createElement(Jp,Object.assign({record:this.props.record.location.state.record,honoraire:th},n,{onChange:this.handleFormChange})),description:"Param\xe8tres globaux"}];return r.a.createElement("div",null,r.a.createElement(Al.a,{current:a},i.map(function(e){return r.a.createElement(eh,{key:e.title,title:e.title,description:e.description})})),r.a.createElement("div",{className:"steps-content-style"},i[a].content),r.a.createElement("div",{className:"steps-action"},a>0&&r.a.createElement(fe.a,{onClick:function(){return e.prev()}},r.a.createElement(w.a,{type:"arrow-left"}),"Pr\xe9c\xe9dent"),a<i.length-1&&r.a.createElement(fe.a,{type:"primary",style:{marginLeft:"25px"},onClick:function(){0===e.state.current&&e.checkForm1Validity()&&e.next(),1===e.state.current&&e.checkForm2Validity()&&e.next()}},"Suivant",r.a.createElement(w.a,{type:"arrow-right"})),a===i.length-1&&r.a.createElement(fe.a,{type:"primary",style:{marginLeft:8},onClick:function(){e.checkForm3Validity()&&e.handleSubmit()}},r.a.createElement(w.a,{type:"save"}),"Enregistrer")))}}]),t}(n.Component);function nh(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return rh(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return rh(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function rh(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ih=v.a.Content,lh=v.a.Footer,sh=r.a.createContext({user:{}}),oh="",ch=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onCollapse=function(e){a.setState({collapsed:e})},a.state={collapsed:!1,currentUser:null,isAuthenticated:!1,isLoading:!1},a.handleLogout=a.handleLogout.bind(Object(b.a)(Object(b.a)(a))),a.loadCurrentUser=a.loadCurrentUser.bind(Object(b.a)(Object(b.a)(a))),a.handleLogin=a.handleLogin.bind(Object(b.a)(Object(b.a)(a))),u.a.config({placement:"topRight",top:70,duration:3}),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"loadCurrentUser",value:function(){var e=this;this.setState({isLoading:!0}),(localStorage.getItem(G)?ae({url:L+"/private/user/"+localStorage.getItem(U),method:"GET"}):Promise.reject("No access token set.")).then(function(t){e.setState({currentUser:t.data,isAuthenticated:!0,isLoading:!1})}).catch(function(t){e.setState({isLoading:!1})})}},{key:"componentDidMount",value:function(){this.loadCurrentUser()}},{key:"handleLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Vous \xeates d\xe9connect\xe9 avec succ\xe8s.";localStorage.removeItem(G),this.setState({currentUser:null,isAuthenticated:!1}),this.props.history.push(e),u.a[t]({message:"TAKAFUL",description:a})}},{key:"handleLogin",value:function(){u.a.success({message:"TAKAFUL",description:"Vous \xeates connect\xe9 avec succ\xe8s."}),this.loadCurrentUser(),this.props.history.push("/")}},{key:"render",value:function(){var e,t=this;if(this.state.isLoading)return r.a.createElement(pe,null);if(!0===this.state.isAuthenticated){var a,n=nh(this.state.currentUser.events);try{for(n.s();!(a=n.n()).done;){var i,l=a.value,s=new Date;i=new Date(l.eventStartDate);var c=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()),m=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes()),d=Math.abs(c-m),p=Math.floor(d/1e3/60);if(m>c&&p<=30){oh=l.eventDescription;var h=r.a.createElement("a",{href:"#top",onClick:function(){return t.props.history.push("/agenda")}},"plus de d\xe9tails");u.a.info({message:"RAPPEL",description:"vous avez "+oh+" d'ici "+p+" minutes",btn:h})}}}catch(f){n.e(f)}finally{n.f()}e=r.a.createElement(sh.Provider,{value:this.state.currentUser},r.a.createElement(v.a,{style:{minHeight:"100vh"}},r.a.createElement(y.a,{width:240,style:{backgroundColor:"#fff"},collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},r.a.createElement(Ec,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,handleLogout:this.handleLogout})),r.a.createElement(o.a,{className:"menu-divider",type:"vertical"}),r.a.createElement(v.a,null,r.a.createElement(ue,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),r.a.createElement("div",{style:{margin:"8px 16px"}}),r.a.createElement(ih,{style:{margin:"0px 16px"}},r.a.createElement("div",{style:{padding:40,background:"#fff",borderTop:"3px solid #e6e4e4"}},r.a.createElement(C.a,null,r.a.createElement(x.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Ge,null)}}," "),r.a.createElement(x.a,{name:"partenaire",path:"/getAllBranche",render:function(){return r.a.createElement(Ni,null)}}),r.a.createElement(x.a,{path:"/CreatePartenaire",render:function(){return r.a.createElement(Di,null)}}),r.a.createElement(x.a,{path:"/avenant",render:function(){return r.a.createElement(Oi,null)}}),r.a.createElement(x.a,{path:"/CreateTypeAvenant",render:function(){return r.a.createElement(xi,null)}}),r.a.createElement(x.a,{path:"/PointVente",render:function(){return r.a.createElement(Ui,null)}}),r.a.createElement(x.a,{name:"Restitutions",path:"/getRestitutions",render:function(){return r.a.createElement(Rt,null)}}),r.a.createElement(x.a,{name:"Auxiliaires",path:"/getAuxiliaires",render:function(){return r.a.createElement(Na,null)}}),r.a.createElement(x.a,{name:"Honoraires",path:"/getHonoraires",render:function(){return r.a.createElement(La,null)}}),r.a.createElement(x.a,{name:"Prestations",path:"/getPrestation",render:function(){return r.a.createElement(rn,null)}}),r.a.createElement(x.a,{name:"CauseRestitution",path:"/getCauseRes",render:function(){return r.a.createElement(mn,null)}}),r.a.createElement(x.a,{name:"Utilisateurs",path:"/users",render:function(){return r.a.createElement(Ot,null)}}),r.a.createElement(x.a,{name:"rolesAndPermission",path:"/rolesAndPermission",render:function(){return r.a.createElement(Kc,null)}}),r.a.createElement(x.a,{name:"produitdeces",path:"/produitdeces",render:function(){return r.a.createElement(Au,{record:t.props})}}),r.a.createElement(x.a,{name:"produitretraite",path:"/produitRetraite",render:function(){return r.a.createElement(Ku,null)}}),r.a.createElement(x.a,{name:"produitdeces",path:"/consultproduitdeces",render:function(){return r.a.createElement(Zu,null)}}),r.a.createElement(x.a,{name:"produitretraite",path:"/consultproduitretraite",render:function(){return r.a.createElement(Gp,null)}}),r.a.createElement(x.a,{name:"Agenda",path:"/Agenda",render:function(){return r.a.createElement(Js,null)}}),r.a.createElement(x.a,{name:"souscription",path:"/souscription",render:function(){return r.a.createElement(Ql,null)}}),r.a.createElement(x.a,{name:"souscriptionRetraiteContrat",path:"/souscriptionRetraiteContrat",render:function(){return r.a.createElement(tc,{record:t.props})}}),r.a.createElement(x.a,{name:"gestionacceptation",path:"/gestionacceptation",render:function(){return r.a.createElement(pl,null)}}),r.a.createElement(x.a,{name:"consultproduitdeces",path:"/consultproduitdeces",render:function(){return r.a.createElement(Zu,{record:t.props})}}),r.a.createElement(x.a,{name:"consultDecesContrat",path:"/consultDecesContrat",render:function(){return r.a.createElement(Tr,{record:t.props})}}),r.a.createElement(x.a,{name:"consultRetraiteContrat",path:"/consultRetraiteContrat",render:function(){return r.a.createElement(Io,{record:t.props})}}),r.a.createElement(x.a,{name:"ModificationAcceptation",path:"/ModificationAcceptation",render:function(){return r.a.createElement(jd,{record:t.props})}}),r.a.createElement(x.a,{name:"ConsultationAcceptation",path:"/ConsultationAcceptation",render:function(){return r.a.createElement(Wd,{record:t.props})}}),r.a.createElement(x.a,{name:"DetailsContrat",path:"/DetailsContrat",render:function(){return r.a.createElement(tr,null)}}),r.a.createElement(x.a,{name:"Modification",path:"/Modification",render:function(){return r.a.createElement(mp,{record:t.props})}}),r.a.createElement(x.a,{name:"ModificationRetraiteProduit",path:"/ModificationRetraiteProduit",render:function(e){return r.a.createElement(ah,{record:t.props})}}),r.a.createElement(x.a,{name:"Honoraire",path:"/Honoraire",render:function(){return r.a.createElement(jl,null)}}),r.a.createElement(x.a,{path:"/users/:username",render:function(e){return r.a.createElement(jc,Object.assign({isAuthenticated:t.state.isAuthenticated,currentUser:t.state.currentUser},e))}}),r.a.createElement(x.a,{breadcrumbName:"Restitutions",name:"Restitutions",path:"/getRestitutions",render:function(){return r.a.createElement(Rt,null)}}),r.a.createElement(x.a,{breadcrumbName:"Participants",name:"Participants",path:"/getParticipants",render:function(){return r.a.createElement(fa,null)}}),r.a.createElement(x.a,{breadcrumbName:"AllParticipant",name:"AllParticipant",path:"/AllParticipant",render:function(){return r.a.createElement(Ia,null)}}),r.a.createElement(x.a,{breadcrumbName:"Mrb",name:"MultirisqueBatiment",path:"/MultirisquesBatiment",render:function(){return r.a.createElement(bi,{record:t.props})}}),r.a.createElement(x.a,{breadcrumbName:"Reglement",name:"Reglement",path:"/Reglement",render:function(){return r.a.createElement(Nr,null)}}),r.a.createElement(x.a,{breadcrumbName:"ConsultationMrb",name:"ConsultationsContratsMrb",path:"/ConsultationsContratsMrb",render:function(){return r.a.createElement(li,{record:t.props})}}),r.a.createElement(x.a,{breadcrumbName:"ProduitMrb",name:"ProduitMrb",path:"/ProduitMrb",render:function(){return r.a.createElement(yi,null)}}),r.a.createElement(x.a,{breadcrumbName:"AjoutProduit",name:"AjoutProduit",path:"/AjoutProduit",render:function(){return r.a.createElement(fp,{record:t.props})}}),r.a.createElement(x.a,{name:"ModifieProduitMRB",path:"/ModifieProduitMRB",render:function(){return r.a.createElement(gp,{record:t.props})}}),r.a.createElement(x.a,{name:"EchangeFichiers",path:"/echangefichiers",render:function(){return r.a.createElement(pc,null)}}),r.a.createElement(x.a,{name:"GestionImpayes",path:"/GestionImpayes",render:function(){return r.a.createElement(Cs,null)}}),r.a.createElement(x.a,{name:"Simulation",path:"/Simulation",render:function(){return r.a.createElement(Tp,{record:t.props})}}),r.a.createElement(x.a,{name:"SimulationMrb",path:"/SimulationMrb",render:function(){return r.a.createElement(Rp,{record:t.props})}}),r.a.createElement(x.a,{name:"Global",path:"/Global",render:function(){return r.a.createElement(Vs,null)}}),r.a.createElement(x.a,{name:"Comptabilite",path:"/Comptabilite",render:function(){return r.a.createElement(gs,{record:t.props})}}),r.a.createElement(x.a,{render:function(){return r.a.createElement(be,null)}})))),r.a.createElement(lh,{style:{textAlign:"center"}},"MAMDA-MCMA \xa92020"))))}else e=r.a.createElement("div",{className:"h100"},r.a.createElement(C.a,null,r.a.createElement(x.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(Sc,Object.assign({onLogin:t.handleLogin},e))}}),r.a.createElement(x.a,{render:function(){return r.a.createElement(be,null)}})));return r.a.createElement("div",{className:"h100"},e)}}]),t}(n.Component),uh=Object(S.a)(ch);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mh=a(1101);l.a.render(r.a.createElement(mh.a,{basename:"/takafulapp"},r.a.createElement(uh,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},412:function(e,t,a){},414:function(e,t,a){},436:function(e,t,a){e.exports=a.p+"static/media/adminstartioncon.fba425db.webp"},437:function(e,t,a){e.exports=a.p+"static/media/paramicon.b30cff21.webp"},438:function(e,t,a){e.exports=a.p+"static/media/productionIcon.29083ec7.webp"},439:function(e,t,a){e.exports=a.p+"static/media/participantsIcon.3ed075af.webp"},441:function(e,t,a){e.exports=a.p+"static/media/takaLogoW.67a1bf55.webp"},444:function(e,t,a){e.exports=a.p+"static/media/takaLogo.84286010.webp"},478:function(e,t,a){e.exports=a(1072)},483:function(e,t,a){},515:function(e,t,a){},636:function(e,t,a){},640:function(e,t,a){},831:function(e,t,a){},927:function(e,t,a){},964:function(e,t,a){},966:function(e,t,a){},968:function(e,t,a){},970:function(e,t,a){},972:function(e,t,a){},983:function(e,t,a){},999:function(e,t,a){}},[[478,2,1]]]);
//# sourceMappingURL=main.389738bc.chunk.js.map